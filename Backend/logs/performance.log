2025-02-18 19:32:27,977 - services.translation_routes - INFO - [translation_routes.py:296] - ==================================================
2025-02-18 19:32:27,978 - services.translation_routes - INFO - [translation_routes.py:297] - Request ID: 0d94d87d
2025-02-18 19:32:27,978 - services.translation_routes - INFO - [translation_routes.py:298] - Target Language: fra
2025-02-18 19:32:27,978 - services.translation_routes - INFO - [translation_routes.py:299] - --------------------------------------------------
2025-02-18 19:32:27,978 - services.translation_routes - INFO - [translation_routes.py:300] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.708
- Avg Amplitude: 0.057
- Rms Level: 0.090
- Crest Factor: 7.820
- Zero Crossings: 34533.000
- Silence Percentage: 11.006
- Clipping Points: 0.000
- Dynamic Range: 175.145

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.022
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.024
  - Temporal Flatness: 0.013

- Volume Metrics:
  - Volume Stability: 0.277
  - Volume Range: 2134.720
  - Volume Variations: 0.053

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0231415262991805
- Background Noise: 4.128199983335148
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.6917094588279724, 'stability': 3.1294496059417725, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.0, 'distinction': 0.11399541050195694}
  - Description: Moderate nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.505
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.002
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-02-18 19:32:27,978 - services.translation_routes - INFO - [translation_routes.py:301] - ==================================================

2025-02-18 19:32:27,978 - services.translation_routes - INFO - [translation_routes.py:307] - Request 0d94d87d: Audio output processed successfully
2025-02-18 19:32:27,983 - services.translation_routes - INFO - [translation_routes.py:362] - Request 0d94d87d: Response prepared successfully
2025-02-18 19:32:27,983 - services.translation_routes - INFO - [translation_routes.py:375] - Request 0d94d87d completed in 98.72s
2025-02-18 19:32:27,986 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 98.72s, Memory Change: 1166.20MB
2025-02-18 19:32:27,986 - __main__ - INFO - [app.py:278] - Request to /translate took 133.37s
2025-02-18 19:34:32,682 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-02-18 19:34:32,684 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-02-18 19:34:32,690 - services.audio_link_routes - INFO - [audio_link_routes.py:226] - Processing URL: https://youtu.be/jNQXAC9IVRw?si=nRWejda1kfIJUO8z
2025-02-18 19:34:32,691 - services.audio_link_routes - INFO - [audio_link_routes.py:243] - Processing YouTube URL
2025-02-18 19:34:32,691 - services.audio_link_routes - INFO - [audio_link_routes.py:130] - Using options for youtube: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpynztapys/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8, 'http_headers': {'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'Accept-Language': 'en-us,en;q=0.5', 'Accept-Encoding': 'gzip,deflate', 'Accept-Charset': 'ISO-8859-1,utf-8;q=0.7,*;q=0.7'}, 'nocheckcertificate': True, 'ignoreerrors': False, 'geo_bypass': True}
2025-02-18 19:34:33,528 - services.audio_link_routes - ERROR - [audio_link_routes.py:185] - Download error for youtube: [0;31mERROR:[0m [youtube] jNQXAC9IVRw: Sign in to confirm you‚Äôre not a bot. Use --cookies-from-browser or --cookies for the authentication. See  https://github.com/yt-dlp/yt-dlp/wiki/FAQ#how-do-i-pass-cookies-to-yt-dlp  for how to manually pass cookies. Also see  https://github.com/yt-dlp/yt-dlp/wiki/Extractors#exporting-youtube-cookies  for tips on effectively exporting YouTube cookies
2025-02-18 19:34:33,529 - services.audio_link_routes - ERROR - [audio_link_routes.py:192] - youtube processing error: Unable to access this youtube content. Please check the URL and try again.
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.12/site-packages/yt_dlp/YoutubeDL.py", line 1637, in wrapper
    return func(self, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.12/site-packages/yt_dlp/YoutubeDL.py", line 1772, in __extract_info
    ie_result = ie.extract(url)
                ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.12/site-packages/yt_dlp/extractor/common.py", line 742, in extract
    ie_result = self._real_extract(url)
                ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.12/site-packages/yt_dlp/extractor/youtube.py", line 4587, in _real_extract
    self.raise_no_formats(reason, expected=True)
  File "/opt/anaconda3/lib/python3.12/site-packages/yt_dlp/extractor/common.py", line 1276, in raise_no_formats
    raise ExtractorError(msg, expected=expected, video_id=video_id)
yt_dlp.utils.ExtractorError: [youtube] jNQXAC9IVRw: Sign in to confirm you‚Äôre not a bot. Use --cookies-from-browser or --cookies for the authentication. See  https://github.com/yt-dlp/yt-dlp/wiki/FAQ#how-do-i-pass-cookies-to-yt-dlp  for how to manually pass cookies. Also see  https://github.com/yt-dlp/yt-dlp/wiki/Extractors#exporting-youtube-cookies  for tips on effectively exporting YouTube cookies

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/robmills/audio-translation/Backend/services/audio_link_routes.py", line 135, in handle_video_platform_url
    info = ydl.extract_info(url, download=False)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.12/site-packages/yt_dlp/YoutubeDL.py", line 1626, in extract_info
    return self.__extract_info(url, self.get_info_extractor(key), download, extra_info, process)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.12/site-packages/yt_dlp/YoutubeDL.py", line 1655, in wrapper
    self.report_error(str(e), e.format_traceback())
  File "/opt/anaconda3/lib/python3.12/site-packages/yt_dlp/YoutubeDL.py", line 1095, in report_error
    self.trouble(f'{self._format_err("ERROR:", self.Styles.ERROR)} {message}', *args, **kwargs)
  File "/opt/anaconda3/lib/python3.12/site-packages/yt_dlp/YoutubeDL.py", line 1034, in trouble
    raise DownloadError(message, exc_info)
yt_dlp.utils.DownloadError: [0;31mERROR:[0m [youtube] jNQXAC9IVRw: Sign in to confirm you‚Äôre not a bot. Use --cookies-from-browser or --cookies for the authentication. See  https://github.com/yt-dlp/yt-dlp/wiki/FAQ#how-do-i-pass-cookies-to-yt-dlp  for how to manually pass cookies. Also see  https://github.com/yt-dlp/yt-dlp/wiki/Extractors#exporting-youtube-cookies  for tips on effectively exporting YouTube cookies

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/robmills/audio-translation/Backend/services/audio_link_routes.py", line 189, in handle_video_platform_url
    raise Exception(f"Unable to access this {platform} content. Please check the URL and try again.")
Exception: Unable to access this youtube content. Please check the URL and try again.
2025-02-18 19:34:33,531 - services.audio_link_routes - ERROR - [audio_link_routes.py:260] - Processing error: Unable to access this youtube content. Please check the URL and try again.
2025-02-18 19:34:33,532 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.84s, Memory Change: 0.69MB
2025-02-18 19:34:33,533 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.84s
2025-02-18 20:01:39,416 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-02-18 20:01:39,416 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-02-18 20:01:39,419 - services.audio_link_routes - INFO - [audio_link_routes.py:226] - Processing URL: https://www.tiktok.com/@y_combinator/video/7411229444427287851?is_from_webapp=1&sender_device=pc&web_id=7472529903809676822
2025-02-18 20:01:39,420 - services.audio_link_routes - INFO - [audio_link_routes.py:246] - Processing TikTok URL
2025-02-18 20:01:39,420 - services.audio_link_routes - INFO - [audio_link_routes.py:130] - Using options for tiktok: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmppyzktq4p/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8, 'http_headers': {'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'Accept-Language': 'en-us,en;q=0.5', 'Accept-Encoding': 'gzip,deflate', 'Accept-Charset': 'ISO-8859-1,utf-8;q=0.7,*;q=0.7'}, 'nocheckcertificate': True, 'ignoreerrors': False, 'geo_bypass': True, 'extractor_args': {'tiktok': {'api_hostname': 'api22-normal-c-alisg.tiktokv.com', 'app_name': 'trill', 'app_version': '34.1.2', 'manifest_app_version': '2023401020', 'app_info': '1234567890123456789/trill///1180', 'device_id': '2728801745613313852'}}}
2025-02-18 20:01:41,549 - services.audio_link_routes - INFO - [audio_link_routes.py:143] - Successfully downloaded tiktok content
2025-02-18 20:01:41,550 - services.audio_link_routes - INFO - [audio_link_routes.py:162] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmppyzktq4p/output.wav
2025-02-18 20:01:41,573 - services.audio_link_routes - INFO - [audio_link_routes.py:174] - Successfully converted audio to WAV
2025-02-18 20:01:41,574 - services.audio_link_routes - INFO - [audio_link_routes.py:252] - Successfully processed audio
2025-02-18 20:01:41,574 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 2.16s, Memory Change: 7.50MB
2025-02-18 20:01:41,574 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 2.16s
2025-02-18 20:01:47,233 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-18 20:01:47,236 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-18 20:02:07,847 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-18 20:02:07,848 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-18 20:02:27,067 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-18 20:02:27,068 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-18 20:02:27,071 - services.translation_routes - INFO - [translation_routes.py:36] - Starting translation request 46e0fbc7
2025-02-18 20:02:27,071 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-02-18 20:02:27,071 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-02-18 20:02:27,072 - services.translation_routes - INFO - [translation_routes.py:97] - Request 46e0fbc7: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpcpcqo2aj.wav
2025-02-18 20:02:27,072 - services.audio_processor - INFO - [audio_processor.py:136] - Audio duration: 38.24 seconds
2025-02-18 20:02:27,072 - services.translation_routes - INFO - [translation_routes.py:112] - Request 46e0fbc7: Beginning audio processing with diagnostics
2025-02-18 20:02:27,072 - services.audio_processor - INFO - [audio_processor.py:280] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpcpcqo2aj.wav
2025-02-18 20:02:27,073 - services.audio_processor - INFO - [audio_processor.py:282] - Audio info - Sample rate: 16000, Channels: 1
2025-02-18 20:02:27,077 - services.audio_processor - INFO - [audio_processor.py:291] - Original audio shape: torch.Size([1, 611915]), Frequency: 16000Hz
2025-02-18 20:02:27,112 - services.audio_processor - INFO - [audio_processor.py:449] - Base audio processing successful, proceeding with enhancement
2025-02-18 20:02:27,129 - services.audio_processor - INFO - [audio_processor.py:457] - Background music analysis: {'has_background_music': True, 'music_confidence': 0.3477175465611055, 'feature_scores': {'spectral_flatness': 0.1390788085613864, 'rhythm_regularity': 0.023657718120805367, 'bass_presence': 0.137733629472295, 'temporal_stability': 0.047247390406618676}, 'speech_vs_music': {'speech_prominence': 2.1681845428842896, 'speech_band_energy': 6.937399632533925e-08, 'music_band_energy': 3.189635222611287e-08}}
2025-02-18 20:02:27,129 - services.audio_processor - INFO - [audio_processor.py:460] - Applying speech-optimized spectral enhancement for fra
2025-02-18 20:02:27,204 - services.audio_processor - INFO - [audio_processor.py:470] - Analyzing audio quality...
2025-02-18 20:02:27,278 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 20:02:27,278 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 20:02:27,297 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 20:02:27,298 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 20:02:27,316 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 20:02:27,317 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 20:02:27,334 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 20:02:27,334 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 20:02:28,458 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-18 20:02:28,458 - services.translation_routes - INFO - [translation_routes.py:123] - 
==================================================
2025-02-18 20:02:28,458 - services.translation_routes - INFO - [translation_routes.py:124] - Input Audio Quality Report
2025-02-18 20:02:28,458 - services.translation_routes - INFO - [translation_routes.py:125] - ==================================================
2025-02-18 20:02:28,458 - services.translation_routes - INFO - [translation_routes.py:126] - Request ID: 46e0fbc7
2025-02-18 20:02:28,458 - services.translation_routes - INFO - [translation_routes.py:127] - Target Language: fra
2025-02-18 20:02:28,458 - services.translation_routes - INFO - [translation_routes.py:128] - --------------------------------------------------
2025-02-18 20:02:28,458 - services.translation_routes - INFO - [translation_routes.py:129] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.015
- Rms Level: 0.040
- Crest Factor: 23.831
- Zero Crossings: 254556.000
- Silence Percentage: 47.747
- Clipping Points: 0.000
- Dynamic Range: 3685257.968

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.066
  - Temporal Flatness: 0.021

- Volume Metrics:
  - Volume Stability: -0.405
  - Volume Range: 24536417.425
  - Volume Variations: 0.032

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.003345643146739
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.7177200317382812, 'stability': 1.5061113834381104, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.42766523361206055, 'distinction': 0.15607275068759918}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.635
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.672
  - Rhythm Quality: 0.703
  - Intonation Quality: 0.641

Vowel Quality:
  - Quality Score: 0.007
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-02-18 20:02:28,458 - services.translation_routes - INFO - [translation_routes.py:130] - ==================================================

2025-02-18 20:02:28,458 - services.audio_processor - INFO - [audio_processor.py:280] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpcpcqo2aj.wav
2025-02-18 20:02:28,458 - services.audio_processor - INFO - [audio_processor.py:282] - Audio info - Sample rate: 16000, Channels: 1
2025-02-18 20:02:28,461 - services.audio_processor - INFO - [audio_processor.py:291] - Original audio shape: torch.Size([1, 611915]), Frequency: 16000Hz
2025-02-18 20:02:28,498 - services.audio_processor - INFO - [audio_processor.py:449] - Base audio processing successful, proceeding with enhancement
2025-02-18 20:02:28,525 - services.audio_processor - INFO - [audio_processor.py:457] - Background music analysis: {'has_background_music': True, 'music_confidence': 0.3477175465611055, 'feature_scores': {'spectral_flatness': 0.1390788085613864, 'rhythm_regularity': 0.023657718120805367, 'bass_presence': 0.137733629472295, 'temporal_stability': 0.047247390406618676}, 'speech_vs_music': {'speech_prominence': 2.1681845428842896, 'speech_band_energy': 6.937399632533925e-08, 'music_band_energy': 3.189635222611287e-08}}
2025-02-18 20:02:28,525 - services.audio_processor - INFO - [audio_processor.py:460] - Applying speech-optimized spectral enhancement for fra
2025-02-18 20:02:28,601 - services.audio_processor - INFO - [audio_processor.py:470] - Analyzing audio quality...
2025-02-18 20:02:28,676 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 20:02:28,677 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 20:02:28,700 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 20:02:28,701 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 20:02:28,725 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 20:02:28,725 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 20:02:28,745 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 20:02:28,745 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 20:02:29,875 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-18 20:02:29,876 - services.translation_routes - INFO - [translation_routes.py:153] - Request 46e0fbc7: Background music analysis: {'has_background_music': True, 'music_confidence': 0.3477175465611055, 'feature_scores': {'spectral_flatness': 0.1390788085613864, 'rhythm_regularity': 0.023657718120805367, 'bass_presence': 0.137733629472295, 'temporal_stability': 0.047247390406618676}, 'speech_vs_music': {'speech_prominence': 2.1681845428842896, 'speech_band_energy': 6.937399632533925e-08, 'music_band_energy': 3.189635222611287e-08}}
2025-02-18 20:02:29,876 - services.translation_strategy - INFO - [translation_strategy.py:23] - Content Type: speech_with_music (Music confidence: 0.3477175465611055)
2025-02-18 20:02:29,876 - services.translation_routes - INFO - [translation_routes.py:165] - Request 46e0fbc7: Audio characteristics heard: {'content_type': 'speech_with_music', 'heard_characteristics': {'music': {'detected': True, 'confidence': 0.3477175465611055}}}
2025-02-18 20:02:29,876 - services.translation_routes - INFO - [translation_routes.py:167] - Request 46e0fbc7: Audio processed successfully
2025-02-18 20:02:29,911 - services.translation_routes - INFO - [translation_routes.py:184] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-02-18 20:02:58,861 - services.translation_routes - INFO - [translation_routes.py:223] - Source text: When you choose pricing, it's important to keep it simple. Overcomplicated pricing will kill the sales process. In general, monthly recurring revenue is preferable to annual recurrent revenue, and that's because during an economic downturn, your revenue is protected at least until the contract is renewed, and then you can have a dispute with the customer about whether it is worth renewing.
2025-02-18 20:03:32,278 - services.translation_routes - INFO - [translation_routes.py:243] - Target text: Quand vous choisissez le prix, c'est important de le garder simple, trop compliqu√©. C'est pr√©f√©rable √† un prix bas√© sur l'usage, parce que votre revenu est prot√©g√© au moins jusqu'√† ce que le contrat soit renouvel√©, alors que vous pouvez avoir un d√©bat avec le client sur le fait qu'il vaut la peine d'√™tre renouvel√©. Il y a un risque r√©el que vos revenus tombent dans un mauvais mois et les investisseurs s'inqui√®tent pour √ßa.
2025-02-18 20:04:08,203 - services.translation_routes - INFO - [translation_routes.py:267] - Processing tuple output from model
2025-02-18 20:04:08,232 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 20:04:08,232 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 20:04:08,242 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 20:04:08,242 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 20:04:08,251 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 20:04:08,252 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 20:04:08,255 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:736] - Spectral slope calculation failed: SVD did not converge in Linear Least Squares
2025-02-18 20:04:08,260 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 20:04:08,261 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 20:04:08,646 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-18 20:04:08,646 - services.translation_routes - INFO - [translation_routes.py:294] - 
==================================================
2025-02-18 20:04:08,646 - services.translation_routes - INFO - [translation_routes.py:295] - Translated Audio Quality Report
2025-02-18 20:04:08,646 - services.translation_routes - INFO - [translation_routes.py:296] - ==================================================
2025-02-18 20:04:08,646 - services.translation_routes - INFO - [translation_routes.py:297] - Request ID: 46e0fbc7
2025-02-18 20:04:08,646 - services.translation_routes - INFO - [translation_routes.py:298] - Target Language: fra
2025-02-18 20:04:08,646 - services.translation_routes - INFO - [translation_routes.py:299] - --------------------------------------------------
2025-02-18 20:04:08,646 - services.translation_routes - INFO - [translation_routes.py:300] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.679
- Avg Amplitude: 0.064
- Rms Level: 0.101
- Crest Factor: 6.707
- Zero Crossings: 33738.000
- Silence Percentage: 10.219
- Clipping Points: 0.000
- Dynamic Range: 176.871

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.162
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.028
  - Temporal Flatness: 0.015

- Volume Metrics:
  - Volume Stability: 0.270
  - Volume Range: 233.461
  - Volume Variations: 0.060

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.030191591411083
- Background Noise: 3.682763343002846
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
No issues detected

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.927223265171051, 'stability': 3.5805282592773438, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.0, 'distinction': 0.005352376960217953}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.514
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.003
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-02-18 20:04:08,647 - services.translation_routes - INFO - [translation_routes.py:301] - ==================================================

2025-02-18 20:04:08,647 - services.translation_routes - INFO - [translation_routes.py:307] - Request 46e0fbc7: Audio output processed successfully
2025-02-18 20:04:08,652 - services.translation_routes - INFO - [translation_routes.py:362] - Request 46e0fbc7: Response prepared successfully
2025-02-18 20:04:08,652 - services.translation_routes - INFO - [translation_routes.py:375] - Request 46e0fbc7 completed in 101.58s
2025-02-18 20:04:08,654 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 101.58s, Memory Change: 513.41MB
2025-02-18 20:04:08,654 - __main__ - INFO - [app.py:278] - Request to /translate took 141.42s
2025-02-18 20:21:16,563 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-02-18 20:21:16,563 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-02-18 20:21:16,568 - services.audio_link_routes - INFO - [audio_link_routes.py:226] - Processing URL: https://www.tiktok.com/@y_combinator/video/7411229444427287851?is_from_webapp=1&sender_device=pc&web_id=7472529903809676822
2025-02-18 20:21:16,568 - services.audio_link_routes - INFO - [audio_link_routes.py:246] - Processing TikTok URL
2025-02-18 20:21:16,569 - services.audio_link_routes - INFO - [audio_link_routes.py:130] - Using options for tiktok: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpdpn8mw15/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8, 'http_headers': {'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'Accept-Language': 'en-us,en;q=0.5', 'Accept-Encoding': 'gzip,deflate', 'Accept-Charset': 'ISO-8859-1,utf-8;q=0.7,*;q=0.7'}, 'nocheckcertificate': True, 'ignoreerrors': False, 'geo_bypass': True, 'extractor_args': {'tiktok': {'api_hostname': 'api22-normal-c-alisg.tiktokv.com', 'app_name': 'trill', 'app_version': '34.1.2', 'manifest_app_version': '2023401020', 'app_info': '1234567890123456789/trill///1180', 'device_id': '8308083350127101091'}}}
2025-02-18 20:21:19,326 - services.audio_link_routes - INFO - [audio_link_routes.py:143] - Successfully downloaded tiktok content
2025-02-18 20:21:19,327 - services.audio_link_routes - INFO - [audio_link_routes.py:162] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpdpn8mw15/output.wav
2025-02-18 20:21:19,351 - services.audio_link_routes - INFO - [audio_link_routes.py:174] - Successfully converted audio to WAV
2025-02-18 20:21:19,351 - services.audio_link_routes - INFO - [audio_link_routes.py:252] - Successfully processed audio
2025-02-18 20:21:19,351 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 2.79s, Memory Change: -128.14MB
2025-02-18 20:21:19,352 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 2.79s
2025-02-18 20:21:22,996 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-18 20:21:22,999 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-18 20:21:43,034 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-18 20:21:43,034 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-18 20:22:04,540 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-18 20:22:04,540 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-18 20:22:04,548 - services.translation_routes - INFO - [translation_routes.py:36] - Starting translation request 70078d98
2025-02-18 20:22:04,549 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-02-18 20:22:04,549 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-02-18 20:22:04,550 - services.translation_routes - INFO - [translation_routes.py:97] - Request 70078d98: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpdgzm6wi1.wav
2025-02-18 20:22:04,550 - services.audio_processor - INFO - [audio_processor.py:136] - Audio duration: 38.24 seconds
2025-02-18 20:22:04,550 - services.translation_routes - INFO - [translation_routes.py:112] - Request 70078d98: Beginning audio processing with diagnostics
2025-02-18 20:22:04,550 - services.audio_processor - INFO - [audio_processor.py:280] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpdgzm6wi1.wav
2025-02-18 20:22:04,550 - services.audio_processor - INFO - [audio_processor.py:282] - Audio info - Sample rate: 16000, Channels: 1
2025-02-18 20:22:04,553 - services.audio_processor - INFO - [audio_processor.py:291] - Original audio shape: torch.Size([1, 611915]), Frequency: 16000Hz
2025-02-18 20:22:04,584 - services.audio_processor - INFO - [audio_processor.py:449] - Base audio processing successful, proceeding with enhancement
2025-02-18 20:22:04,595 - services.audio_processor - INFO - [audio_processor.py:457] - Background music analysis: {'has_background_music': True, 'music_confidence': 0.3477175465611055, 'feature_scores': {'spectral_flatness': 0.1390788085613864, 'rhythm_regularity': 0.023657718120805367, 'bass_presence': 0.137733629472295, 'temporal_stability': 0.047247390406618676}, 'speech_vs_music': {'speech_prominence': 2.1681845428842896, 'speech_band_energy': 6.937399632533925e-08, 'music_band_energy': 3.189635222611287e-08}}
2025-02-18 20:22:04,596 - services.audio_processor - INFO - [audio_processor.py:460] - Applying speech-optimized spectral enhancement for fra
2025-02-18 20:22:04,641 - services.audio_processor - INFO - [audio_processor.py:470] - Analyzing audio quality...
2025-02-18 20:22:04,706 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 20:22:04,707 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 20:22:04,721 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 20:22:04,722 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 20:22:04,737 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 20:22:04,737 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 20:22:04,752 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 20:22:04,752 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 20:22:05,806 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-18 20:22:05,806 - services.translation_routes - INFO - [translation_routes.py:123] - 
==================================================
2025-02-18 20:22:05,806 - services.translation_routes - INFO - [translation_routes.py:124] - Input Audio Quality Report
2025-02-18 20:22:05,806 - services.translation_routes - INFO - [translation_routes.py:125] - ==================================================
2025-02-18 20:22:05,806 - services.translation_routes - INFO - [translation_routes.py:126] - Request ID: 70078d98
2025-02-18 20:22:05,806 - services.translation_routes - INFO - [translation_routes.py:127] - Target Language: fra
2025-02-18 20:22:05,806 - services.translation_routes - INFO - [translation_routes.py:128] - --------------------------------------------------
2025-02-18 20:22:05,806 - services.translation_routes - INFO - [translation_routes.py:129] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.015
- Rms Level: 0.040
- Crest Factor: 23.831
- Zero Crossings: 254556.000
- Silence Percentage: 47.747
- Clipping Points: 0.000
- Dynamic Range: 3685257.968

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.066
  - Temporal Flatness: 0.021

- Volume Metrics:
  - Volume Stability: -0.405
  - Volume Range: 24536417.425
  - Volume Variations: 0.032

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.003345643146739
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.7177200317382812, 'stability': 1.5061113834381104, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.42766523361206055, 'distinction': 0.15607275068759918}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.635
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.672
  - Rhythm Quality: 0.703
  - Intonation Quality: 0.641

Vowel Quality:
  - Quality Score: 0.007
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-02-18 20:22:05,806 - services.translation_routes - INFO - [translation_routes.py:130] - ==================================================

2025-02-18 20:22:05,806 - services.audio_processor - INFO - [audio_processor.py:280] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpdgzm6wi1.wav
2025-02-18 20:22:05,807 - services.audio_processor - INFO - [audio_processor.py:282] - Audio info - Sample rate: 16000, Channels: 1
2025-02-18 20:22:05,809 - services.audio_processor - INFO - [audio_processor.py:291] - Original audio shape: torch.Size([1, 611915]), Frequency: 16000Hz
2025-02-18 20:22:05,840 - services.audio_processor - INFO - [audio_processor.py:449] - Base audio processing successful, proceeding with enhancement
2025-02-18 20:22:05,853 - services.audio_processor - INFO - [audio_processor.py:457] - Background music analysis: {'has_background_music': True, 'music_confidence': 0.3477175465611055, 'feature_scores': {'spectral_flatness': 0.1390788085613864, 'rhythm_regularity': 0.023657718120805367, 'bass_presence': 0.137733629472295, 'temporal_stability': 0.047247390406618676}, 'speech_vs_music': {'speech_prominence': 2.1681845428842896, 'speech_band_energy': 6.937399632533925e-08, 'music_band_energy': 3.189635222611287e-08}}
2025-02-18 20:22:05,854 - services.audio_processor - INFO - [audio_processor.py:460] - Applying speech-optimized spectral enhancement for fra
2025-02-18 20:22:05,898 - services.audio_processor - INFO - [audio_processor.py:470] - Analyzing audio quality...
2025-02-18 20:22:05,961 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 20:22:05,961 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 20:22:05,976 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 20:22:05,976 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 20:22:05,993 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 20:22:05,994 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 20:22:06,009 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 20:22:06,009 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 20:22:07,047 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-18 20:22:07,050 - services.translation_routes - INFO - [translation_routes.py:153] - Request 70078d98: Background music analysis: {'has_background_music': True, 'music_confidence': 0.3477175465611055, 'feature_scores': {'spectral_flatness': 0.1390788085613864, 'rhythm_regularity': 0.023657718120805367, 'bass_presence': 0.137733629472295, 'temporal_stability': 0.047247390406618676}, 'speech_vs_music': {'speech_prominence': 2.1681845428842896, 'speech_band_energy': 6.937399632533925e-08, 'music_band_energy': 3.189635222611287e-08}}
2025-02-18 20:22:07,051 - services.translation_strategy - INFO - [translation_strategy.py:23] - Content Type: speech_with_music (Music confidence: 0.3477175465611055)
2025-02-18 20:22:07,051 - services.translation_routes - INFO - [translation_routes.py:165] - Request 70078d98: Audio characteristics heard: {'content_type': 'speech_with_music', 'heard_characteristics': {'music': {'detected': True, 'confidence': 0.3477175465611055}}}
2025-02-18 20:22:07,051 - services.translation_routes - INFO - [translation_routes.py:167] - Request 70078d98: Audio processed successfully
2025-02-18 20:22:07,083 - services.translation_routes - INFO - [translation_routes.py:184] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-02-18 20:22:35,828 - services.translation_routes - INFO - [translation_routes.py:223] - Source text: When you choose pricing, it's important to keep it simple. Overcomplicated pricing will kill the sales process. In general, monthly recurring revenue is preferable to annual recurrent revenue, and that's because during an economic downturn, your revenue is protected at least until the contract is renewed, and then you can have a dispute with the customer about whether it is worth renewing.
2025-02-18 20:23:08,915 - services.translation_routes - INFO - [translation_routes.py:243] - Target text: Quand vous choisissez le prix, c'est important de le garder simple, trop compliqu√©. C'est pr√©f√©rable √† un prix bas√© sur l'usage, parce que votre revenu est prot√©g√© au moins jusqu'√† ce que le contrat soit renouvel√©, alors que vous pouvez avoir un d√©bat avec le client sur le fait qu'il vaut la peine d'√™tre renouvel√©. Il y a un risque r√©el que vos revenus tombent dans un mauvais mois et les investisseurs s'inqui√®tent pour √ßa.
2025-02-18 20:23:43,677 - services.translation_routes - INFO - [translation_routes.py:267] - Processing tuple output from model
2025-02-18 20:23:43,702 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 20:23:43,702 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 20:23:43,713 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 20:23:43,713 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 20:23:43,722 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 20:23:43,722 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 20:23:43,728 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 20:23:43,729 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 20:23:44,086 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-18 20:23:44,086 - services.translation_routes - INFO - [translation_routes.py:294] - 
==================================================
2025-02-18 20:23:44,086 - services.translation_routes - INFO - [translation_routes.py:295] - Translated Audio Quality Report
2025-02-18 20:23:44,086 - services.translation_routes - INFO - [translation_routes.py:296] - ==================================================
2025-02-18 20:23:44,086 - services.translation_routes - INFO - [translation_routes.py:297] - Request ID: 70078d98
2025-02-18 20:23:44,086 - services.translation_routes - INFO - [translation_routes.py:298] - Target Language: fra
2025-02-18 20:23:44,086 - services.translation_routes - INFO - [translation_routes.py:299] - --------------------------------------------------
2025-02-18 20:23:44,086 - services.translation_routes - INFO - [translation_routes.py:300] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.859
- Avg Amplitude: 0.060
- Rms Level: 0.097
- Crest Factor: 8.865
- Zero Crossings: 28799.000
- Silence Percentage: 12.386
- Clipping Points: 0.000
- Dynamic Range: 226.446

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.026
  - Temporal Flatness: 0.014

- Volume Metrics:
  - Volume Stability: 0.246
  - Volume Range: 1130.260
  - Volume Variations: 0.058

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0218673145984294
- Background Noise: 4.5461457045467935
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.7572020888328552, 'stability': 3.1865010261535645, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.02274823747575283, 'consistency': 0.0, 'distinction': 0.11775049567222595}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.510
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.003
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-02-18 20:23:44,087 - services.translation_routes - INFO - [translation_routes.py:301] - ==================================================

2025-02-18 20:23:44,087 - services.translation_routes - INFO - [translation_routes.py:307] - Request 70078d98: Audio output processed successfully
2025-02-18 20:23:44,092 - services.translation_routes - INFO - [translation_routes.py:362] - Request 70078d98: Response prepared successfully
2025-02-18 20:23:44,092 - services.translation_routes - INFO - [translation_routes.py:375] - Request 70078d98 completed in 99.54s
2025-02-18 20:23:44,096 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 99.55s, Memory Change: 192.97MB
2025-02-18 20:23:44,096 - __main__ - INFO - [app.py:278] - Request to /translate took 141.10s
2025-02-18 20:36:28,611 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-02-18 20:36:28,611 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-02-18 20:36:28,613 - services.audio_link_routes - INFO - [audio_link_routes.py:226] - Processing URL: https://www.tiktok.com/@y_combinator/video/7411229444427287851?is_from_webapp=1&sender_device=pc&web_id=7472529903809676822
2025-02-18 20:36:28,615 - services.audio_link_routes - INFO - [audio_link_routes.py:246] - Processing TikTok URL
2025-02-18 20:36:28,616 - services.audio_link_routes - INFO - [audio_link_routes.py:130] - Using options for tiktok: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpcdn8ci42/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8, 'http_headers': {'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'Accept-Language': 'en-us,en;q=0.5', 'Accept-Encoding': 'gzip,deflate', 'Accept-Charset': 'ISO-8859-1,utf-8;q=0.7,*;q=0.7'}, 'nocheckcertificate': True, 'ignoreerrors': False, 'geo_bypass': True, 'extractor_args': {'tiktok': {'api_hostname': 'api22-normal-c-alisg.tiktokv.com', 'app_name': 'trill', 'app_version': '34.1.2', 'manifest_app_version': '2023401020', 'app_info': '1234567890123456789/trill///1180', 'device_id': '0064946882272990677'}}}
2025-02-18 20:36:30,530 - services.audio_link_routes - INFO - [audio_link_routes.py:143] - Successfully downloaded tiktok content
2025-02-18 20:36:30,531 - services.audio_link_routes - INFO - [audio_link_routes.py:162] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpcdn8ci42/output.wav
2025-02-18 20:36:30,557 - services.audio_link_routes - INFO - [audio_link_routes.py:174] - Successfully converted audio to WAV
2025-02-18 20:36:30,558 - services.audio_link_routes - INFO - [audio_link_routes.py:252] - Successfully processed audio
2025-02-18 20:36:30,559 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 1.95s, Memory Change: 2.31MB
2025-02-18 20:36:30,559 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 1.95s
2025-02-18 20:36:32,711 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-18 20:36:32,713 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-18 20:36:53,318 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-18 20:36:53,318 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-18 20:37:14,236 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-18 20:37:14,236 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-18 20:37:14,239 - services.translation_routes - INFO - [translation_routes.py:36] - Starting translation request 8e3325d9
2025-02-18 20:37:14,239 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-02-18 20:37:14,239 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-02-18 20:37:14,240 - services.translation_routes - INFO - [translation_routes.py:97] - Request 8e3325d9: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp5issc70s.wav
2025-02-18 20:37:14,240 - services.audio_processor - INFO - [audio_processor.py:136] - Audio duration: 38.24 seconds
2025-02-18 20:37:14,240 - services.translation_routes - INFO - [translation_routes.py:112] - Request 8e3325d9: Beginning audio processing with diagnostics
2025-02-18 20:37:14,240 - services.audio_processor - INFO - [audio_processor.py:280] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp5issc70s.wav
2025-02-18 20:37:14,241 - services.audio_processor - INFO - [audio_processor.py:282] - Audio info - Sample rate: 16000, Channels: 1
2025-02-18 20:37:14,243 - services.audio_processor - INFO - [audio_processor.py:291] - Original audio shape: torch.Size([1, 611915]), Frequency: 16000Hz
2025-02-18 20:37:14,276 - services.audio_processor - INFO - [audio_processor.py:449] - Base audio processing successful, proceeding with enhancement
2025-02-18 20:37:14,287 - services.audio_processor - INFO - [audio_processor.py:457] - Background music analysis: {'has_background_music': True, 'music_confidence': 0.3477175465611055, 'feature_scores': {'spectral_flatness': 0.1390788085613864, 'rhythm_regularity': 0.023657718120805367, 'bass_presence': 0.137733629472295, 'temporal_stability': 0.047247390406618676}, 'speech_vs_music': {'speech_prominence': 2.1681845428842896, 'speech_band_energy': 6.937399632533925e-08, 'music_band_energy': 3.189635222611287e-08}}
2025-02-18 20:37:14,287 - services.audio_processor - INFO - [audio_processor.py:460] - Applying speech-optimized spectral enhancement for fra
2025-02-18 20:37:14,334 - services.audio_processor - INFO - [audio_processor.py:470] - Analyzing audio quality...
2025-02-18 20:37:14,401 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 20:37:14,401 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 20:37:14,423 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 20:37:14,423 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 20:37:14,438 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 20:37:14,439 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 20:37:14,454 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 20:37:14,454 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 20:37:15,510 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-18 20:37:15,511 - services.translation_routes - INFO - [translation_routes.py:123] - 
==================================================
2025-02-18 20:37:15,511 - services.translation_routes - INFO - [translation_routes.py:124] - Input Audio Quality Report
2025-02-18 20:37:15,511 - services.translation_routes - INFO - [translation_routes.py:125] - ==================================================
2025-02-18 20:37:15,511 - services.translation_routes - INFO - [translation_routes.py:126] - Request ID: 8e3325d9
2025-02-18 20:37:15,511 - services.translation_routes - INFO - [translation_routes.py:127] - Target Language: fra
2025-02-18 20:37:15,511 - services.translation_routes - INFO - [translation_routes.py:128] - --------------------------------------------------
2025-02-18 20:37:15,511 - services.translation_routes - INFO - [translation_routes.py:129] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.015
- Rms Level: 0.040
- Crest Factor: 23.831
- Zero Crossings: 254556.000
- Silence Percentage: 47.747
- Clipping Points: 0.000
- Dynamic Range: 3685257.968

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.066
  - Temporal Flatness: 0.021

- Volume Metrics:
  - Volume Stability: -0.405
  - Volume Range: 24536417.425
  - Volume Variations: 0.032

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.003345643146739
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.7177200317382812, 'stability': 1.5061113834381104, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.42766523361206055, 'distinction': 0.15607275068759918}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.635
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.672
  - Rhythm Quality: 0.703
  - Intonation Quality: 0.641

Vowel Quality:
  - Quality Score: 0.007
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-02-18 20:37:15,511 - services.translation_routes - INFO - [translation_routes.py:130] - ==================================================

2025-02-18 20:37:15,511 - services.audio_processor - INFO - [audio_processor.py:280] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp5issc70s.wav
2025-02-18 20:37:15,511 - services.audio_processor - INFO - [audio_processor.py:282] - Audio info - Sample rate: 16000, Channels: 1
2025-02-18 20:37:15,513 - services.audio_processor - INFO - [audio_processor.py:291] - Original audio shape: torch.Size([1, 611915]), Frequency: 16000Hz
2025-02-18 20:37:15,542 - services.audio_processor - INFO - [audio_processor.py:449] - Base audio processing successful, proceeding with enhancement
2025-02-18 20:37:15,554 - services.audio_processor - INFO - [audio_processor.py:457] - Background music analysis: {'has_background_music': True, 'music_confidence': 0.3477175465611055, 'feature_scores': {'spectral_flatness': 0.1390788085613864, 'rhythm_regularity': 0.023657718120805367, 'bass_presence': 0.137733629472295, 'temporal_stability': 0.047247390406618676}, 'speech_vs_music': {'speech_prominence': 2.1681845428842896, 'speech_band_energy': 6.937399632533925e-08, 'music_band_energy': 3.189635222611287e-08}}
2025-02-18 20:37:15,554 - services.audio_processor - INFO - [audio_processor.py:460] - Applying speech-optimized spectral enhancement for fra
2025-02-18 20:37:15,600 - services.audio_processor - INFO - [audio_processor.py:470] - Analyzing audio quality...
2025-02-18 20:37:15,666 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 20:37:15,666 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 20:37:15,678 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 20:37:15,679 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 20:37:15,693 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 20:37:15,693 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 20:37:15,709 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 20:37:15,709 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 20:37:16,743 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-18 20:37:16,747 - services.translation_routes - INFO - [translation_routes.py:153] - Request 8e3325d9: Background music analysis: {'has_background_music': True, 'music_confidence': 0.3477175465611055, 'feature_scores': {'spectral_flatness': 0.1390788085613864, 'rhythm_regularity': 0.023657718120805367, 'bass_presence': 0.137733629472295, 'temporal_stability': 0.047247390406618676}, 'speech_vs_music': {'speech_prominence': 2.1681845428842896, 'speech_band_energy': 6.937399632533925e-08, 'music_band_energy': 3.189635222611287e-08}}
2025-02-18 20:37:16,747 - services.translation_strategy - INFO - [translation_strategy.py:23] - Content Type: speech_with_music (Music confidence: 0.3477175465611055)
2025-02-18 20:37:16,747 - services.translation_routes - INFO - [translation_routes.py:165] - Request 8e3325d9: Audio characteristics heard: {'content_type': 'speech_with_music', 'heard_characteristics': {'music': {'detected': True, 'confidence': 0.3477175465611055}}}
2025-02-18 20:37:16,747 - services.translation_routes - INFO - [translation_routes.py:167] - Request 8e3325d9: Audio processed successfully
2025-02-18 20:37:16,782 - services.translation_routes - INFO - [translation_routes.py:184] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-02-18 20:37:46,165 - services.translation_routes - INFO - [translation_routes.py:223] - Source text: When you choose pricing, it's important to keep it simple. Overcomplicated pricing will kill the sales process. In general, monthly recurring revenue is preferable to annual recurrent revenue, and that's because during an economic downturn, your revenue is protected at least until the contract is renewed, and then you can have a dispute with the customer about whether it is worth renewing.
2025-02-18 20:38:18,987 - services.translation_routes - INFO - [translation_routes.py:243] - Target text: Quand vous choisissez le prix, c'est important de le garder simple, trop compliqu√©. C'est pr√©f√©rable √† un prix bas√© sur l'usage, parce que votre revenu est prot√©g√© au moins jusqu'√† ce que le contrat soit renouvel√©, alors que vous pouvez avoir un d√©bat avec le client sur le fait qu'il vaut la peine d'√™tre renouvel√©. Il y a un risque r√©el que vos revenus tombent dans un mauvais mois et les investisseurs s'inqui√®tent pour √ßa.
2025-02-18 20:38:41,790 - services.translation_routes - INFO - [translation_routes.py:267] - Processing tuple output from model
2025-02-18 20:38:41,800 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 20:38:41,802 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 20:38:41,806 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 20:38:41,806 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 20:38:41,810 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 20:38:41,811 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 20:38:41,814 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 20:38:41,814 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 20:38:41,982 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-18 20:38:41,982 - services.translation_routes - INFO - [translation_routes.py:294] - 
==================================================
2025-02-18 20:38:41,982 - services.translation_routes - INFO - [translation_routes.py:295] - Translated Audio Quality Report
2025-02-18 20:38:41,982 - services.translation_routes - INFO - [translation_routes.py:296] - ==================================================
2025-02-18 20:38:41,982 - services.translation_routes - INFO - [translation_routes.py:297] - Request ID: 8e3325d9
2025-02-18 20:38:41,982 - services.translation_routes - INFO - [translation_routes.py:298] - Target Language: fra
2025-02-18 20:38:41,982 - services.translation_routes - INFO - [translation_routes.py:299] - --------------------------------------------------
2025-02-18 20:38:41,982 - services.translation_routes - INFO - [translation_routes.py:300] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.666
- Avg Amplitude: 0.054
- Rms Level: 0.090
- Crest Factor: 7.436
- Zero Crossings: 14654.000
- Silence Percentage: 11.046
- Clipping Points: 0.000
- Dynamic Range: 171.749

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.071
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.025
  - Temporal Flatness: 0.014

- Volume Metrics:
  - Volume Stability: 0.254
  - Volume Range: 191.900
  - Volume Variations: 0.054

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0240832146114904
- Background Noise: 3.974383125143997
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.7844852805137634, 'stability': 3.3477325439453125, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.33051344752311707, 'consistency': 0.0, 'distinction': 1.0}
  - Description: Strong nasal resonance. Unstable nasal resonance. Clear distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.503
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.004
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-02-18 20:38:41,982 - services.translation_routes - INFO - [translation_routes.py:301] - ==================================================

2025-02-18 20:38:41,982 - services.translation_routes - INFO - [translation_routes.py:307] - Request 8e3325d9: Audio output processed successfully
2025-02-18 20:38:41,984 - services.translation_routes - INFO - [translation_routes.py:362] - Request 8e3325d9: Response prepared successfully
2025-02-18 20:38:41,985 - services.translation_routes - INFO - [translation_routes.py:375] - Request 8e3325d9 completed in 87.75s
2025-02-18 20:38:41,986 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 87.75s, Memory Change: 185.95MB
2025-02-18 20:38:41,987 - __main__ - INFO - [app.py:278] - Request to /translate took 129.28s
2025-02-18 21:31:27,703 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-02-18 21:31:27,704 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-02-18 21:31:27,708 - services.audio_link_routes - INFO - [audio_link_routes.py:226] - Processing URL: https://www.tiktok.com/@y_combinator/video/7411229444427287851?is_from_webapp=1&sender_device=pc&web_id=7472529903809676822
2025-02-18 21:31:27,709 - services.audio_link_routes - INFO - [audio_link_routes.py:246] - Processing TikTok URL
2025-02-18 21:31:27,709 - services.audio_link_routes - INFO - [audio_link_routes.py:130] - Using options for tiktok: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpk7a4i34u/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8, 'http_headers': {'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'Accept-Language': 'en-us,en;q=0.5', 'Accept-Encoding': 'gzip,deflate', 'Accept-Charset': 'ISO-8859-1,utf-8;q=0.7,*;q=0.7'}, 'nocheckcertificate': True, 'ignoreerrors': False, 'geo_bypass': True, 'extractor_args': {'tiktok': {'api_hostname': 'api22-normal-c-alisg.tiktokv.com', 'app_name': 'trill', 'app_version': '34.1.2', 'manifest_app_version': '2023401020', 'app_info': '1234567890123456789/trill///1180', 'device_id': '3630472271640259511'}}}
2025-02-18 21:31:29,893 - services.audio_link_routes - INFO - [audio_link_routes.py:143] - Successfully downloaded tiktok content
2025-02-18 21:31:29,894 - services.audio_link_routes - INFO - [audio_link_routes.py:162] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpk7a4i34u/output.wav
2025-02-18 21:31:29,917 - services.audio_link_routes - INFO - [audio_link_routes.py:174] - Successfully converted audio to WAV
2025-02-18 21:31:29,918 - services.audio_link_routes - INFO - [audio_link_routes.py:252] - Successfully processed audio
2025-02-18 21:31:29,918 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 2.21s, Memory Change: 23.00MB
2025-02-18 21:31:29,918 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 2.21s
2025-02-18 21:31:32,462 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-18 21:31:32,464 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-18 21:31:58,289 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-18 21:31:58,289 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-18 21:32:17,857 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-18 21:32:17,858 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-18 21:32:17,862 - services.translation_routes - INFO - [translation_routes.py:36] - Starting translation request b37cdce9
2025-02-18 21:32:17,862 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-02-18 21:32:17,863 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-02-18 21:32:17,864 - services.translation_routes - INFO - [translation_routes.py:97] - Request b37cdce9: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpgx1cv02i.wav
2025-02-18 21:32:17,864 - services.audio_processor - INFO - [audio_processor.py:136] - Audio duration: 38.24 seconds
2025-02-18 21:32:17,865 - services.translation_routes - INFO - [translation_routes.py:112] - Request b37cdce9: Beginning audio processing with diagnostics
2025-02-18 21:32:17,865 - services.audio_processor - INFO - [audio_processor.py:280] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpgx1cv02i.wav
2025-02-18 21:32:17,865 - services.audio_processor - INFO - [audio_processor.py:282] - Audio info - Sample rate: 16000, Channels: 1
2025-02-18 21:32:17,867 - services.audio_processor - INFO - [audio_processor.py:291] - Original audio shape: torch.Size([1, 611915]), Frequency: 16000Hz
2025-02-18 21:32:17,903 - services.audio_processor - INFO - [audio_processor.py:449] - Base audio processing successful, proceeding with enhancement
2025-02-18 21:32:17,915 - services.audio_processor - INFO - [audio_processor.py:457] - Background music analysis: {'has_background_music': True, 'music_confidence': 0.3477175465611055, 'feature_scores': {'spectral_flatness': 0.1390788085613864, 'rhythm_regularity': 0.023657718120805367, 'bass_presence': 0.137733629472295, 'temporal_stability': 0.047247390406618676}, 'speech_vs_music': {'speech_prominence': 2.1681845428842896, 'speech_band_energy': 6.937399632533925e-08, 'music_band_energy': 3.189635222611287e-08}}
2025-02-18 21:32:17,915 - services.audio_processor - INFO - [audio_processor.py:460] - Applying speech-optimized spectral enhancement for fra
2025-02-18 21:32:17,970 - services.audio_processor - INFO - [audio_processor.py:470] - Analyzing audio quality...
2025-02-18 21:32:18,037 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 21:32:18,037 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 21:32:18,053 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 21:32:18,054 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 21:32:18,069 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 21:32:18,070 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 21:32:18,087 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 21:32:18,088 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 21:32:19,161 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-18 21:32:19,161 - services.translation_routes - INFO - [translation_routes.py:123] - 
==================================================
2025-02-18 21:32:19,161 - services.translation_routes - INFO - [translation_routes.py:124] - Input Audio Quality Report
2025-02-18 21:32:19,161 - services.translation_routes - INFO - [translation_routes.py:125] - ==================================================
2025-02-18 21:32:19,161 - services.translation_routes - INFO - [translation_routes.py:126] - Request ID: b37cdce9
2025-02-18 21:32:19,161 - services.translation_routes - INFO - [translation_routes.py:127] - Target Language: fra
2025-02-18 21:32:19,161 - services.translation_routes - INFO - [translation_routes.py:128] - --------------------------------------------------
2025-02-18 21:32:19,161 - services.translation_routes - INFO - [translation_routes.py:129] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.015
- Rms Level: 0.040
- Crest Factor: 23.831
- Zero Crossings: 254556.000
- Silence Percentage: 47.747
- Clipping Points: 0.000
- Dynamic Range: 3685257.968

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.066
  - Temporal Flatness: 0.021

- Volume Metrics:
  - Volume Stability: -0.405
  - Volume Range: 24536417.425
  - Volume Variations: 0.032

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.003345643146739
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.7177200317382812, 'stability': 1.5061113834381104, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.42766523361206055, 'distinction': 0.15607275068759918}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.635
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.672
  - Rhythm Quality: 0.703
  - Intonation Quality: 0.641

Vowel Quality:
  - Quality Score: 0.007
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-02-18 21:32:19,161 - services.translation_routes - INFO - [translation_routes.py:130] - ==================================================

2025-02-18 21:32:19,161 - services.audio_processor - INFO - [audio_processor.py:280] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpgx1cv02i.wav
2025-02-18 21:32:19,161 - services.audio_processor - INFO - [audio_processor.py:282] - Audio info - Sample rate: 16000, Channels: 1
2025-02-18 21:32:19,163 - services.audio_processor - INFO - [audio_processor.py:291] - Original audio shape: torch.Size([1, 611915]), Frequency: 16000Hz
2025-02-18 21:32:19,197 - services.audio_processor - INFO - [audio_processor.py:449] - Base audio processing successful, proceeding with enhancement
2025-02-18 21:32:19,211 - services.audio_processor - INFO - [audio_processor.py:457] - Background music analysis: {'has_background_music': True, 'music_confidence': 0.3477175465611055, 'feature_scores': {'spectral_flatness': 0.1390788085613864, 'rhythm_regularity': 0.023657718120805367, 'bass_presence': 0.137733629472295, 'temporal_stability': 0.047247390406618676}, 'speech_vs_music': {'speech_prominence': 2.1681845428842896, 'speech_band_energy': 6.937399632533925e-08, 'music_band_energy': 3.189635222611287e-08}}
2025-02-18 21:32:19,211 - services.audio_processor - INFO - [audio_processor.py:460] - Applying speech-optimized spectral enhancement for fra
2025-02-18 21:32:19,262 - services.audio_processor - INFO - [audio_processor.py:470] - Analyzing audio quality...
2025-02-18 21:32:19,329 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 21:32:19,329 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 21:32:19,347 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 21:32:19,347 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 21:32:19,363 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 21:32:19,363 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 21:32:19,379 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 21:32:19,379 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 21:32:20,431 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-18 21:32:20,431 - services.translation_routes - INFO - [translation_routes.py:153] - Request b37cdce9: Background music analysis: {'has_background_music': True, 'music_confidence': 0.3477175465611055, 'feature_scores': {'spectral_flatness': 0.1390788085613864, 'rhythm_regularity': 0.023657718120805367, 'bass_presence': 0.137733629472295, 'temporal_stability': 0.047247390406618676}, 'speech_vs_music': {'speech_prominence': 2.1681845428842896, 'speech_band_energy': 6.937399632533925e-08, 'music_band_energy': 3.189635222611287e-08}}
2025-02-18 21:32:20,431 - services.translation_strategy - INFO - [translation_strategy.py:23] - Content Type: speech_with_music (Music confidence: 0.3477175465611055)
2025-02-18 21:32:20,431 - services.translation_routes - INFO - [translation_routes.py:165] - Request b37cdce9: Audio characteristics heard: {'content_type': 'speech_with_music', 'heard_characteristics': {'music': {'detected': True, 'confidence': 0.3477175465611055}}}
2025-02-18 21:32:20,431 - services.translation_routes - INFO - [translation_routes.py:167] - Request b37cdce9: Audio processed successfully
2025-02-18 21:32:20,467 - services.translation_routes - INFO - [translation_routes.py:184] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-02-18 21:32:55,212 - services.translation_routes - INFO - [translation_routes.py:223] - Source text: When you choose pricing, it's important to keep it simple. Overcomplicated pricing will kill the sales process. In general, monthly recurring revenue is preferable to annual recurrent revenue, and that's because during an economic downturn, your revenue is protected at least until the contract is renewed, and then you can have a dispute with the customer about whether it is worth renewing.
2025-02-18 21:33:31,232 - services.translation_routes - INFO - [translation_routes.py:243] - Target text: Quand vous choisissez le prix, c'est important de le garder simple, trop compliqu√©. C'est pr√©f√©rable √† un prix bas√© sur l'usage, parce que votre revenu est prot√©g√© au moins jusqu'√† ce que le contrat soit renouvel√©, alors que vous pouvez avoir un d√©bat avec le client sur le fait qu'il vaut la peine d'√™tre renouvel√©. Il y a un risque r√©el que vos revenus tombent dans un mauvais mois et les investisseurs s'inqui√®tent pour √ßa.
2025-02-18 21:34:03,646 - services.translation_routes - INFO - [translation_routes.py:267] - Processing tuple output from model
2025-02-18 21:34:03,676 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 21:34:03,677 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 21:34:03,687 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 21:34:03,687 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 21:34:03,724 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 21:34:03,724 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 21:34:03,768 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 21:34:03,768 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 21:34:04,258 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-18 21:34:04,259 - services.translation_routes - INFO - [translation_routes.py:294] - 
==================================================
2025-02-18 21:34:04,259 - services.translation_routes - INFO - [translation_routes.py:295] - Translated Audio Quality Report
2025-02-18 21:34:04,259 - services.translation_routes - INFO - [translation_routes.py:296] - ==================================================
2025-02-18 21:34:04,259 - services.translation_routes - INFO - [translation_routes.py:297] - Request ID: b37cdce9
2025-02-18 21:34:04,259 - services.translation_routes - INFO - [translation_routes.py:298] - Target Language: fra
2025-02-18 21:34:04,259 - services.translation_routes - INFO - [translation_routes.py:299] - --------------------------------------------------
2025-02-18 21:34:04,259 - services.translation_routes - INFO - [translation_routes.py:300] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.835
- Avg Amplitude: 0.058
- Rms Level: 0.096
- Crest Factor: 8.694
- Zero Crossings: 28055.000
- Silence Percentage: 12.996
- Clipping Points: 0.000
- Dynamic Range: 226.804

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.025
  - Temporal Flatness: 0.014

- Volume Metrics:
  - Volume Stability: 0.224
  - Volume Range: 431.005
  - Volume Variations: 0.059

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.022091824714262
- Background Noise: 4.477557504701517
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.7645606994628906, 'stability': 3.504178762435913, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.0, 'distinction': 0.09667392820119858}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.491
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.002
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-02-18 21:34:04,259 - services.translation_routes - INFO - [translation_routes.py:301] - ==================================================

2025-02-18 21:34:04,259 - services.translation_routes - INFO - [translation_routes.py:307] - Request b37cdce9: Audio output processed successfully
2025-02-18 21:34:04,265 - services.translation_routes - INFO - [translation_routes.py:362] - Request b37cdce9: Response prepared successfully
2025-02-18 21:34:04,265 - services.translation_routes - INFO - [translation_routes.py:375] - Request b37cdce9 completed in 106.40s
2025-02-18 21:34:04,266 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 106.40s, Memory Change: 1821.48MB
2025-02-18 21:34:04,266 - __main__ - INFO - [app.py:278] - Request to /translate took 151.80s
2025-02-18 21:50:19,518 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-02-18 21:50:19,519 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-02-18 21:50:19,521 - services.audio_link_routes - INFO - [audio_link_routes.py:226] - Processing URL: https://www.tiktok.com/@y_combinator/video/7411229444427287851?is_from_webapp=1&sender_device=pc&web_id=7472529903809676822
2025-02-18 21:50:19,521 - services.audio_link_routes - INFO - [audio_link_routes.py:246] - Processing TikTok URL
2025-02-18 21:50:19,522 - services.audio_link_routes - INFO - [audio_link_routes.py:130] - Using options for tiktok: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp7tyt65z1/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8, 'http_headers': {'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'Accept-Language': 'en-us,en;q=0.5', 'Accept-Encoding': 'gzip,deflate', 'Accept-Charset': 'ISO-8859-1,utf-8;q=0.7,*;q=0.7'}, 'nocheckcertificate': True, 'ignoreerrors': False, 'geo_bypass': True, 'extractor_args': {'tiktok': {'api_hostname': 'api22-normal-c-alisg.tiktokv.com', 'app_name': 'trill', 'app_version': '34.1.2', 'manifest_app_version': '2023401020', 'app_info': '1234567890123456789/trill///1180', 'device_id': '5841909954556365937'}}}
2025-02-18 21:50:21,318 - services.audio_link_routes - INFO - [audio_link_routes.py:143] - Successfully downloaded tiktok content
2025-02-18 21:50:21,319 - services.audio_link_routes - INFO - [audio_link_routes.py:162] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp7tyt65z1/output.wav
2025-02-18 21:50:21,342 - services.audio_link_routes - INFO - [audio_link_routes.py:174] - Successfully converted audio to WAV
2025-02-18 21:50:21,342 - services.audio_link_routes - INFO - [audio_link_routes.py:252] - Successfully processed audio
2025-02-18 21:50:21,343 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 1.82s, Memory Change: 2.73MB
2025-02-18 21:50:21,343 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 1.82s
2025-02-18 21:50:24,612 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-18 21:50:24,613 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-18 21:50:42,961 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-18 21:50:42,962 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-18 21:51:04,328 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-18 21:51:04,329 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-18 21:51:04,345 - services.translation_routes - INFO - [translation_routes.py:36] - Starting translation request 3100fae4
2025-02-18 21:51:04,345 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-02-18 21:51:04,345 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-02-18 21:51:04,347 - services.translation_routes - INFO - [translation_routes.py:97] - Request 3100fae4: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp1k0e_o5d.wav
2025-02-18 21:51:04,347 - services.audio_processor - INFO - [audio_processor.py:136] - Audio duration: 38.24 seconds
2025-02-18 21:51:04,347 - services.translation_routes - INFO - [translation_routes.py:112] - Request 3100fae4: Beginning audio processing with diagnostics
2025-02-18 21:51:04,347 - services.audio_processor - INFO - [audio_processor.py:280] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp1k0e_o5d.wav
2025-02-18 21:51:04,347 - services.audio_processor - INFO - [audio_processor.py:282] - Audio info - Sample rate: 16000, Channels: 1
2025-02-18 21:51:04,349 - services.audio_processor - INFO - [audio_processor.py:291] - Original audio shape: torch.Size([1, 611915]), Frequency: 16000Hz
2025-02-18 21:51:04,417 - services.audio_processor - INFO - [audio_processor.py:449] - Base audio processing successful, proceeding with enhancement
2025-02-18 21:51:04,441 - services.audio_processor - INFO - [audio_processor.py:457] - Background music analysis: {'has_background_music': True, 'music_confidence': 0.3477175465611055, 'feature_scores': {'spectral_flatness': 0.1390788085613864, 'rhythm_regularity': 0.023657718120805367, 'bass_presence': 0.137733629472295, 'temporal_stability': 0.047247390406618676}, 'speech_vs_music': {'speech_prominence': 2.1681845428842896, 'speech_band_energy': 6.937399632533925e-08, 'music_band_energy': 3.189635222611287e-08}}
2025-02-18 21:51:04,441 - services.audio_processor - INFO - [audio_processor.py:460] - Applying speech-optimized spectral enhancement for fra
2025-02-18 21:51:04,525 - services.audio_processor - INFO - [audio_processor.py:470] - Analyzing audio quality...
2025-02-18 21:51:04,654 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 21:51:04,654 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 21:51:04,673 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 21:51:04,674 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 21:51:04,692 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 21:51:04,692 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 21:51:04,710 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 21:51:04,710 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 21:51:05,843 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-18 21:51:05,844 - services.translation_routes - INFO - [translation_routes.py:123] - 
==================================================
2025-02-18 21:51:05,844 - services.translation_routes - INFO - [translation_routes.py:124] - Input Audio Quality Report
2025-02-18 21:51:05,844 - services.translation_routes - INFO - [translation_routes.py:125] - ==================================================
2025-02-18 21:51:05,844 - services.translation_routes - INFO - [translation_routes.py:126] - Request ID: 3100fae4
2025-02-18 21:51:05,844 - services.translation_routes - INFO - [translation_routes.py:127] - Target Language: fra
2025-02-18 21:51:05,844 - services.translation_routes - INFO - [translation_routes.py:128] - --------------------------------------------------
2025-02-18 21:51:05,844 - services.translation_routes - INFO - [translation_routes.py:129] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.015
- Rms Level: 0.040
- Crest Factor: 23.831
- Zero Crossings: 254556.000
- Silence Percentage: 47.747
- Clipping Points: 0.000
- Dynamic Range: 3685257.968

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.066
  - Temporal Flatness: 0.021

- Volume Metrics:
  - Volume Stability: -0.405
  - Volume Range: 24536417.425
  - Volume Variations: 0.032

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.003345643146739
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.7177200317382812, 'stability': 1.5061113834381104, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.42766523361206055, 'distinction': 0.15607275068759918}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.635
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.672
  - Rhythm Quality: 0.703
  - Intonation Quality: 0.641

Vowel Quality:
  - Quality Score: 0.007
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-02-18 21:51:05,844 - services.translation_routes - INFO - [translation_routes.py:130] - ==================================================

2025-02-18 21:51:05,844 - services.audio_processor - INFO - [audio_processor.py:280] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp1k0e_o5d.wav
2025-02-18 21:51:05,845 - services.audio_processor - INFO - [audio_processor.py:282] - Audio info - Sample rate: 16000, Channels: 1
2025-02-18 21:51:05,846 - services.audio_processor - INFO - [audio_processor.py:291] - Original audio shape: torch.Size([1, 611915]), Frequency: 16000Hz
2025-02-18 21:51:05,884 - services.audio_processor - INFO - [audio_processor.py:449] - Base audio processing successful, proceeding with enhancement
2025-02-18 21:51:05,896 - services.audio_processor - INFO - [audio_processor.py:457] - Background music analysis: {'has_background_music': True, 'music_confidence': 0.3477175465611055, 'feature_scores': {'spectral_flatness': 0.1390788085613864, 'rhythm_regularity': 0.023657718120805367, 'bass_presence': 0.137733629472295, 'temporal_stability': 0.047247390406618676}, 'speech_vs_music': {'speech_prominence': 2.1681845428842896, 'speech_band_energy': 6.937399632533925e-08, 'music_band_energy': 3.189635222611287e-08}}
2025-02-18 21:51:05,896 - services.audio_processor - INFO - [audio_processor.py:460] - Applying speech-optimized spectral enhancement for fra
2025-02-18 21:51:05,955 - services.audio_processor - INFO - [audio_processor.py:470] - Analyzing audio quality...
2025-02-18 21:51:06,033 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 21:51:06,033 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 21:51:06,055 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 21:51:06,056 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 21:51:06,084 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 21:51:06,084 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 21:51:06,106 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 21:51:06,106 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 21:51:07,234 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-18 21:51:07,235 - services.translation_routes - INFO - [translation_routes.py:153] - Request 3100fae4: Background music analysis: {'has_background_music': True, 'music_confidence': 0.3477175465611055, 'feature_scores': {'spectral_flatness': 0.1390788085613864, 'rhythm_regularity': 0.023657718120805367, 'bass_presence': 0.137733629472295, 'temporal_stability': 0.047247390406618676}, 'speech_vs_music': {'speech_prominence': 2.1681845428842896, 'speech_band_energy': 6.937399632533925e-08, 'music_band_energy': 3.189635222611287e-08}}
2025-02-18 21:51:07,235 - services.translation_strategy - INFO - [translation_strategy.py:23] - Content Type: speech_with_music (Music confidence: 0.3477175465611055)
2025-02-18 21:51:07,235 - services.translation_routes - INFO - [translation_routes.py:165] - Request 3100fae4: Audio characteristics heard: {'content_type': 'speech_with_music', 'heard_characteristics': {'music': {'detected': True, 'confidence': 0.3477175465611055}}}
2025-02-18 21:51:07,235 - services.translation_routes - INFO - [translation_routes.py:167] - Request 3100fae4: Audio processed successfully
2025-02-18 21:51:07,273 - services.translation_routes - INFO - [translation_routes.py:184] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-02-18 21:51:36,238 - services.translation_routes - INFO - [translation_routes.py:223] - Source text: When you choose pricing, it's important to keep it simple. Overcomplicated pricing will kill the sales process. In general, monthly recurring revenue is preferable to annual recurrent revenue, and that's because during an economic downturn, your revenue is protected at least until the contract is renewed, and then you can have a dispute with the customer about whether it is worth renewing.
2025-02-18 21:52:06,303 - services.translation_routes - INFO - [translation_routes.py:243] - Target text: Quand vous choisissez le prix, c'est important de le garder simple, trop compliqu√©. C'est pr√©f√©rable √† un prix bas√© sur l'usage, parce que votre revenu est prot√©g√© au moins jusqu'√† ce que le contrat soit renouvel√©, alors que vous pouvez avoir un d√©bat avec le client sur le fait qu'il vaut la peine d'√™tre renouvel√©. Il y a un risque r√©el que vos revenus tombent dans un mauvais mois et les investisseurs s'inqui√®tent pour √ßa.
2025-02-18 21:52:33,666 - services.translation_routes - INFO - [translation_routes.py:267] - Processing tuple output from model
2025-02-18 21:52:33,685 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 21:52:33,685 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 21:52:33,688 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 21:52:33,688 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 21:52:33,695 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 21:52:33,695 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 21:52:33,699 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 21:52:33,699 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 21:52:33,972 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-18 21:52:33,973 - services.translation_routes - INFO - [translation_routes.py:294] - 
==================================================
2025-02-18 21:52:33,973 - services.translation_routes - INFO - [translation_routes.py:295] - Translated Audio Quality Report
2025-02-18 21:52:33,973 - services.translation_routes - INFO - [translation_routes.py:296] - ==================================================
2025-02-18 21:52:33,973 - services.translation_routes - INFO - [translation_routes.py:297] - Request ID: 3100fae4
2025-02-18 21:52:33,973 - services.translation_routes - INFO - [translation_routes.py:298] - Target Language: fra
2025-02-18 21:52:33,973 - services.translation_routes - INFO - [translation_routes.py:299] - --------------------------------------------------
2025-02-18 21:52:33,973 - services.translation_routes - INFO - [translation_routes.py:300] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.832
- Avg Amplitude: 0.066
- Rms Level: 0.103
- Crest Factor: 8.047
- Zero Crossings: 22045.000
- Silence Percentage: 8.727
- Clipping Points: 0.000
- Dynamic Range: 148.186

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.028
  - Temporal Flatness: 0.015

- Volume Metrics:
  - Volume Stability: 0.318
  - Volume Range: 638.502
  - Volume Variations: 0.058

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0257022364839545
- Background Noise: 4.218825089662737
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
No issues detected

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.9495285153388977, 'stability': 4.059375286102295, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.08544837683439255, 'consistency': 0.0, 'distinction': 0.007275353651493788}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.533
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.003
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-02-18 21:52:33,973 - services.translation_routes - INFO - [translation_routes.py:301] - ==================================================

2025-02-18 21:52:33,973 - services.translation_routes - INFO - [translation_routes.py:307] - Request 3100fae4: Audio output processed successfully
2025-02-18 21:52:33,976 - services.translation_routes - INFO - [translation_routes.py:362] - Request 3100fae4: Response prepared successfully
2025-02-18 21:52:33,977 - services.translation_routes - INFO - [translation_routes.py:375] - Request 3100fae4 completed in 89.63s
2025-02-18 21:52:33,978 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 89.63s, Memory Change: 414.14MB
2025-02-18 21:52:33,978 - __main__ - INFO - [app.py:278] - Request to /translate took 129.37s
2025-02-18 21:56:54,465 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-02-18 21:56:54,466 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-02-18 21:56:54,468 - services.audio_link_routes - INFO - [audio_link_routes.py:226] - Processing URL: https://www.tiktok.com/@y_combinator/video/7411229444427287851?is_from_webapp=1&sender_device=pc&web_id=7472529903809676822
2025-02-18 21:56:54,468 - services.audio_link_routes - INFO - [audio_link_routes.py:246] - Processing TikTok URL
2025-02-18 21:56:54,469 - services.audio_link_routes - INFO - [audio_link_routes.py:130] - Using options for tiktok: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmppombu3h6/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8, 'http_headers': {'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'Accept-Language': 'en-us,en;q=0.5', 'Accept-Encoding': 'gzip,deflate', 'Accept-Charset': 'ISO-8859-1,utf-8;q=0.7,*;q=0.7'}, 'nocheckcertificate': True, 'ignoreerrors': False, 'geo_bypass': True, 'extractor_args': {'tiktok': {'api_hostname': 'api22-normal-c-alisg.tiktokv.com', 'app_name': 'trill', 'app_version': '34.1.2', 'manifest_app_version': '2023401020', 'app_info': '1234567890123456789/trill///1180', 'device_id': '2578449977921576445'}}}
2025-02-18 21:56:56,439 - services.audio_link_routes - INFO - [audio_link_routes.py:143] - Successfully downloaded tiktok content
2025-02-18 21:56:56,440 - services.audio_link_routes - INFO - [audio_link_routes.py:162] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmppombu3h6/output.wav
2025-02-18 21:56:56,464 - services.audio_link_routes - INFO - [audio_link_routes.py:174] - Successfully converted audio to WAV
2025-02-18 21:56:56,464 - services.audio_link_routes - INFO - [audio_link_routes.py:252] - Successfully processed audio
2025-02-18 21:56:56,465 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 2.00s, Memory Change: -0.16MB
2025-02-18 21:56:56,465 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 2.00s
2025-02-18 21:57:03,971 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-18 21:57:03,973 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-18 21:57:26,219 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-18 21:57:26,220 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-18 21:57:41,475 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-18 21:57:41,476 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-18 21:57:41,483 - services.translation_routes - INFO - [translation_routes.py:36] - Starting translation request fcc90c17
2025-02-18 21:57:41,483 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-02-18 21:57:41,483 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-02-18 21:57:41,484 - services.translation_routes - INFO - [translation_routes.py:97] - Request fcc90c17: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpia63ufep.wav
2025-02-18 21:57:41,484 - services.audio_processor - INFO - [audio_processor.py:136] - Audio duration: 38.24 seconds
2025-02-18 21:57:41,484 - services.translation_routes - INFO - [translation_routes.py:112] - Request fcc90c17: Beginning audio processing with diagnostics
2025-02-18 21:57:41,484 - services.audio_processor - INFO - [audio_processor.py:280] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpia63ufep.wav
2025-02-18 21:57:41,484 - services.audio_processor - INFO - [audio_processor.py:282] - Audio info - Sample rate: 16000, Channels: 1
2025-02-18 21:57:41,487 - services.audio_processor - INFO - [audio_processor.py:291] - Original audio shape: torch.Size([1, 611915]), Frequency: 16000Hz
2025-02-18 21:57:41,518 - services.audio_processor - INFO - [audio_processor.py:449] - Base audio processing successful, proceeding with enhancement
2025-02-18 21:57:41,531 - services.audio_processor - INFO - [audio_processor.py:457] - Background music analysis: {'has_background_music': True, 'music_confidence': 0.3477175465611055, 'feature_scores': {'spectral_flatness': 0.1390788085613864, 'rhythm_regularity': 0.023657718120805367, 'bass_presence': 0.137733629472295, 'temporal_stability': 0.047247390406618676}, 'speech_vs_music': {'speech_prominence': 2.1681845428842896, 'speech_band_energy': 6.937399632533925e-08, 'music_band_energy': 3.189635222611287e-08}}
2025-02-18 21:57:41,531 - services.audio_processor - INFO - [audio_processor.py:460] - Applying speech-optimized spectral enhancement for fra
2025-02-18 21:57:41,579 - services.audio_processor - INFO - [audio_processor.py:470] - Analyzing audio quality...
2025-02-18 21:57:41,648 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 21:57:41,648 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 21:57:41,665 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 21:57:41,665 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 21:57:41,681 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 21:57:41,681 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 21:57:41,697 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 21:57:41,697 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 21:57:42,723 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-18 21:57:42,723 - services.translation_routes - INFO - [translation_routes.py:123] - 
==================================================
2025-02-18 21:57:42,723 - services.translation_routes - INFO - [translation_routes.py:124] - Input Audio Quality Report
2025-02-18 21:57:42,723 - services.translation_routes - INFO - [translation_routes.py:125] - ==================================================
2025-02-18 21:57:42,723 - services.translation_routes - INFO - [translation_routes.py:126] - Request ID: fcc90c17
2025-02-18 21:57:42,723 - services.translation_routes - INFO - [translation_routes.py:127] - Target Language: fra
2025-02-18 21:57:42,723 - services.translation_routes - INFO - [translation_routes.py:128] - --------------------------------------------------
2025-02-18 21:57:42,723 - services.translation_routes - INFO - [translation_routes.py:129] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.015
- Rms Level: 0.040
- Crest Factor: 23.831
- Zero Crossings: 254556.000
- Silence Percentage: 47.747
- Clipping Points: 0.000
- Dynamic Range: 3685257.968

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.066
  - Temporal Flatness: 0.021

- Volume Metrics:
  - Volume Stability: -0.405
  - Volume Range: 24536417.425
  - Volume Variations: 0.032

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.003345643146739
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.7177200317382812, 'stability': 1.5061113834381104, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.42766523361206055, 'distinction': 0.15607275068759918}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.635
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.672
  - Rhythm Quality: 0.703
  - Intonation Quality: 0.641

Vowel Quality:
  - Quality Score: 0.007
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-02-18 21:57:42,723 - services.translation_routes - INFO - [translation_routes.py:130] - ==================================================

2025-02-18 21:57:42,723 - services.audio_processor - INFO - [audio_processor.py:280] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpia63ufep.wav
2025-02-18 21:57:42,723 - services.audio_processor - INFO - [audio_processor.py:282] - Audio info - Sample rate: 16000, Channels: 1
2025-02-18 21:57:42,726 - services.audio_processor - INFO - [audio_processor.py:291] - Original audio shape: torch.Size([1, 611915]), Frequency: 16000Hz
2025-02-18 21:57:42,757 - services.audio_processor - INFO - [audio_processor.py:449] - Base audio processing successful, proceeding with enhancement
2025-02-18 21:57:42,770 - services.audio_processor - INFO - [audio_processor.py:457] - Background music analysis: {'has_background_music': True, 'music_confidence': 0.3477175465611055, 'feature_scores': {'spectral_flatness': 0.1390788085613864, 'rhythm_regularity': 0.023657718120805367, 'bass_presence': 0.137733629472295, 'temporal_stability': 0.047247390406618676}, 'speech_vs_music': {'speech_prominence': 2.1681845428842896, 'speech_band_energy': 6.937399632533925e-08, 'music_band_energy': 3.189635222611287e-08}}
2025-02-18 21:57:42,770 - services.audio_processor - INFO - [audio_processor.py:460] - Applying speech-optimized spectral enhancement for fra
2025-02-18 21:57:42,816 - services.audio_processor - INFO - [audio_processor.py:470] - Analyzing audio quality...
2025-02-18 21:57:42,883 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 21:57:42,883 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 21:57:42,898 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 21:57:42,898 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 21:57:42,914 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 21:57:42,915 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 21:57:42,931 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 21:57:42,932 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 21:57:43,959 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-18 21:57:43,961 - services.translation_routes - INFO - [translation_routes.py:153] - Request fcc90c17: Background music analysis: {'has_background_music': True, 'music_confidence': 0.3477175465611055, 'feature_scores': {'spectral_flatness': 0.1390788085613864, 'rhythm_regularity': 0.023657718120805367, 'bass_presence': 0.137733629472295, 'temporal_stability': 0.047247390406618676}, 'speech_vs_music': {'speech_prominence': 2.1681845428842896, 'speech_band_energy': 6.937399632533925e-08, 'music_band_energy': 3.189635222611287e-08}}
2025-02-18 21:57:43,961 - services.translation_strategy - INFO - [translation_strategy.py:23] - Content Type: speech_with_music (Music confidence: 0.3477175465611055)
2025-02-18 21:57:43,961 - services.translation_routes - INFO - [translation_routes.py:165] - Request fcc90c17: Audio characteristics heard: {'content_type': 'speech_with_music', 'heard_characteristics': {'music': {'detected': True, 'confidence': 0.3477175465611055}}}
2025-02-18 21:57:43,961 - services.translation_routes - INFO - [translation_routes.py:167] - Request fcc90c17: Audio processed successfully
2025-02-18 21:57:43,994 - services.translation_routes - INFO - [translation_routes.py:184] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-02-18 21:58:12,081 - services.translation_routes - INFO - [translation_routes.py:223] - Source text: When you choose pricing, it's important to keep it simple. Overcomplicated pricing will kill the sales process. In general, monthly recurring revenue is preferable to annual recurrent revenue, and that's because during an economic downturn, your revenue is protected at least until the contract is renewed, and then you can have a dispute with the customer about whether it is worth renewing.
2025-02-18 21:58:44,636 - services.translation_routes - INFO - [translation_routes.py:243] - Target text: Quand vous choisissez le prix, c'est important de le garder simple, trop compliqu√©. C'est pr√©f√©rable √† un prix bas√© sur l'usage, parce que votre revenu est prot√©g√© au moins jusqu'√† ce que le contrat soit renouvel√©, alors que vous pouvez avoir un d√©bat avec le client sur le fait qu'il vaut la peine d'√™tre renouvel√©. Il y a un risque r√©el que vos revenus tombent dans un mauvais mois et les investisseurs s'inqui√®tent pour √ßa.
2025-02-18 21:59:18,719 - services.translation_routes - INFO - [translation_routes.py:267] - Processing tuple output from model
2025-02-18 21:59:18,746 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 21:59:18,747 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 21:59:18,754 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 21:59:18,754 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 21:59:18,764 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 21:59:18,764 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 21:59:18,772 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 21:59:18,772 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 21:59:19,193 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-18 21:59:19,193 - services.translation_routes - INFO - [translation_routes.py:294] - 
==================================================
2025-02-18 21:59:19,193 - services.translation_routes - INFO - [translation_routes.py:295] - Translated Audio Quality Report
2025-02-18 21:59:19,193 - services.translation_routes - INFO - [translation_routes.py:296] - ==================================================
2025-02-18 21:59:19,193 - services.translation_routes - INFO - [translation_routes.py:297] - Request ID: fcc90c17
2025-02-18 21:59:19,193 - services.translation_routes - INFO - [translation_routes.py:298] - Target Language: fra
2025-02-18 21:59:19,193 - services.translation_routes - INFO - [translation_routes.py:299] - --------------------------------------------------
2025-02-18 21:59:19,193 - services.translation_routes - INFO - [translation_routes.py:300] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.617
- Avg Amplitude: 0.059
- Rms Level: 0.091
- Crest Factor: 6.757
- Zero Crossings: 33641.000
- Silence Percentage: 9.952
- Clipping Points: 0.000
- Dynamic Range: 158.447

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.155
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.026
  - Temporal Flatness: 0.014

- Volume Metrics:
  - Volume Stability: 0.320
  - Volume Range: 219.533
  - Volume Variations: 0.051

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.027039943352292
- Background Noise: 3.7026398292440836
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.7877236604690552, 'stability': 3.337291717529297, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.04319039732217789, 'consistency': 0.0, 'distinction': 0.06196100637316704}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.542
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.003
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-02-18 21:59:19,193 - services.translation_routes - INFO - [translation_routes.py:301] - ==================================================

2025-02-18 21:59:19,193 - services.translation_routes - INFO - [translation_routes.py:307] - Request fcc90c17: Audio output processed successfully
2025-02-18 21:59:19,199 - services.translation_routes - INFO - [translation_routes.py:362] - Request fcc90c17: Response prepared successfully
2025-02-18 21:59:19,199 - services.translation_routes - INFO - [translation_routes.py:375] - Request fcc90c17 completed in 97.72s
2025-02-18 21:59:19,202 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 97.72s, Memory Change: 188.98MB
2025-02-18 21:59:19,202 - __main__ - INFO - [app.py:278] - Request to /translate took 135.23s
2025-02-18 22:13:01,028 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-02-18 22:13:01,028 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-02-18 22:13:01,032 - services.audio_link_routes - INFO - [audio_link_routes.py:226] - Processing URL: https://www.tiktok.com/@y_combinator/video/7411229444427287851?is_from_webapp=1&sender_device=pc&web_id=7472529903809676822
2025-02-18 22:13:01,033 - services.audio_link_routes - INFO - [audio_link_routes.py:246] - Processing TikTok URL
2025-02-18 22:13:01,034 - services.audio_link_routes - INFO - [audio_link_routes.py:130] - Using options for tiktok: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp20p23rzx/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8, 'http_headers': {'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'Accept-Language': 'en-us,en;q=0.5', 'Accept-Encoding': 'gzip,deflate', 'Accept-Charset': 'ISO-8859-1,utf-8;q=0.7,*;q=0.7'}, 'nocheckcertificate': True, 'ignoreerrors': False, 'geo_bypass': True, 'extractor_args': {'tiktok': {'api_hostname': 'api22-normal-c-alisg.tiktokv.com', 'app_name': 'trill', 'app_version': '34.1.2', 'manifest_app_version': '2023401020', 'app_info': '1234567890123456789/trill///1180', 'device_id': '1664460095073817347'}}}
2025-02-18 22:13:02,634 - services.audio_link_routes - INFO - [audio_link_routes.py:143] - Successfully downloaded tiktok content
2025-02-18 22:13:02,635 - services.audio_link_routes - INFO - [audio_link_routes.py:162] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp20p23rzx/output.wav
2025-02-18 22:13:02,659 - services.audio_link_routes - INFO - [audio_link_routes.py:174] - Successfully converted audio to WAV
2025-02-18 22:13:02,659 - services.audio_link_routes - INFO - [audio_link_routes.py:252] - Successfully processed audio
2025-02-18 22:13:02,660 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 1.63s, Memory Change: -0.16MB
2025-02-18 22:13:02,660 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 1.63s
2025-02-18 22:13:07,405 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-18 22:13:07,407 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-18 22:13:30,851 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-18 22:13:30,851 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-18 22:13:52,032 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-18 22:13:52,032 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-18 22:13:52,039 - services.translation_routes - INFO - [translation_routes.py:36] - Starting translation request 3b5f65f4
2025-02-18 22:13:52,039 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-02-18 22:13:52,040 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-02-18 22:13:52,041 - services.translation_routes - INFO - [translation_routes.py:97] - Request 3b5f65f4: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpdbdmxdrv.wav
2025-02-18 22:13:52,041 - services.audio_processor - INFO - [audio_processor.py:136] - Audio duration: 38.24 seconds
2025-02-18 22:13:52,041 - services.translation_routes - INFO - [translation_routes.py:112] - Request 3b5f65f4: Beginning audio processing with diagnostics
2025-02-18 22:13:52,041 - services.audio_processor - INFO - [audio_processor.py:280] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpdbdmxdrv.wav
2025-02-18 22:13:52,041 - services.audio_processor - INFO - [audio_processor.py:282] - Audio info - Sample rate: 16000, Channels: 1
2025-02-18 22:13:52,044 - services.audio_processor - INFO - [audio_processor.py:291] - Original audio shape: torch.Size([1, 611915]), Frequency: 16000Hz
2025-02-18 22:13:52,082 - services.audio_processor - INFO - [audio_processor.py:449] - Base audio processing successful, proceeding with enhancement
2025-02-18 22:13:52,099 - services.audio_processor - INFO - [audio_processor.py:457] - Background music analysis: {'has_background_music': True, 'music_confidence': 0.3477175465611055, 'feature_scores': {'spectral_flatness': 0.1390788085613864, 'rhythm_regularity': 0.023657718120805367, 'bass_presence': 0.137733629472295, 'temporal_stability': 0.047247390406618676}, 'speech_vs_music': {'speech_prominence': 2.1681845428842896, 'speech_band_energy': 6.937399632533925e-08, 'music_band_energy': 3.189635222611287e-08}}
2025-02-18 22:13:52,100 - services.audio_processor - INFO - [audio_processor.py:460] - Applying speech-optimized spectral enhancement for fra
2025-02-18 22:13:52,164 - services.audio_processor - INFO - [audio_processor.py:470] - Analyzing audio quality...
2025-02-18 22:13:52,245 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 22:13:52,245 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 22:13:52,265 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 22:13:52,265 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 22:13:52,292 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 22:13:52,292 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 22:13:52,313 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 22:13:52,314 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 22:13:53,417 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-18 22:13:53,418 - services.translation_routes - INFO - [translation_routes.py:123] - 
==================================================
2025-02-18 22:13:53,418 - services.translation_routes - INFO - [translation_routes.py:124] - Input Audio Quality Report
2025-02-18 22:13:53,418 - services.translation_routes - INFO - [translation_routes.py:125] - ==================================================
2025-02-18 22:13:53,418 - services.translation_routes - INFO - [translation_routes.py:126] - Request ID: 3b5f65f4
2025-02-18 22:13:53,418 - services.translation_routes - INFO - [translation_routes.py:127] - Target Language: fra
2025-02-18 22:13:53,418 - services.translation_routes - INFO - [translation_routes.py:128] - --------------------------------------------------
2025-02-18 22:13:53,418 - services.translation_routes - INFO - [translation_routes.py:129] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.015
- Rms Level: 0.040
- Crest Factor: 23.831
- Zero Crossings: 254556.000
- Silence Percentage: 47.747
- Clipping Points: 0.000
- Dynamic Range: 3685257.968

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.066
  - Temporal Flatness: 0.021

- Volume Metrics:
  - Volume Stability: -0.405
  - Volume Range: 24536417.425
  - Volume Variations: 0.032

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.003345643146739
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.7177200317382812, 'stability': 1.5061113834381104, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.42766523361206055, 'distinction': 0.15607275068759918}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.635
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.672
  - Rhythm Quality: 0.703
  - Intonation Quality: 0.641

Vowel Quality:
  - Quality Score: 0.007
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-02-18 22:13:53,418 - services.translation_routes - INFO - [translation_routes.py:130] - ==================================================

2025-02-18 22:13:53,418 - services.audio_processor - INFO - [audio_processor.py:280] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpdbdmxdrv.wav
2025-02-18 22:13:53,418 - services.audio_processor - INFO - [audio_processor.py:282] - Audio info - Sample rate: 16000, Channels: 1
2025-02-18 22:13:53,421 - services.audio_processor - INFO - [audio_processor.py:291] - Original audio shape: torch.Size([1, 611915]), Frequency: 16000Hz
2025-02-18 22:13:53,451 - services.audio_processor - INFO - [audio_processor.py:449] - Base audio processing successful, proceeding with enhancement
2025-02-18 22:13:53,463 - services.audio_processor - INFO - [audio_processor.py:457] - Background music analysis: {'has_background_music': True, 'music_confidence': 0.3477175465611055, 'feature_scores': {'spectral_flatness': 0.1390788085613864, 'rhythm_regularity': 0.023657718120805367, 'bass_presence': 0.137733629472295, 'temporal_stability': 0.047247390406618676}, 'speech_vs_music': {'speech_prominence': 2.1681845428842896, 'speech_band_energy': 6.937399632533925e-08, 'music_band_energy': 3.189635222611287e-08}}
2025-02-18 22:13:53,464 - services.audio_processor - INFO - [audio_processor.py:460] - Applying speech-optimized spectral enhancement for fra
2025-02-18 22:13:53,513 - services.audio_processor - INFO - [audio_processor.py:470] - Analyzing audio quality...
2025-02-18 22:13:53,585 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 22:13:53,586 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 22:13:53,601 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 22:13:53,601 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 22:13:53,621 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 22:13:53,621 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 22:13:53,637 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 22:13:53,637 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 22:13:54,695 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-18 22:13:54,698 - services.translation_routes - INFO - [translation_routes.py:153] - Request 3b5f65f4: Background music analysis: {'has_background_music': True, 'music_confidence': 0.3477175465611055, 'feature_scores': {'spectral_flatness': 0.1390788085613864, 'rhythm_regularity': 0.023657718120805367, 'bass_presence': 0.137733629472295, 'temporal_stability': 0.047247390406618676}, 'speech_vs_music': {'speech_prominence': 2.1681845428842896, 'speech_band_energy': 6.937399632533925e-08, 'music_band_energy': 3.189635222611287e-08}}
2025-02-18 22:13:54,698 - services.translation_strategy - INFO - [translation_strategy.py:23] - Content Type: speech_with_music (Music confidence: 0.3477175465611055)
2025-02-18 22:13:54,698 - services.translation_routes - INFO - [translation_routes.py:165] - Request 3b5f65f4: Audio characteristics heard: {'content_type': 'speech_with_music', 'heard_characteristics': {'music': {'detected': True, 'confidence': 0.3477175465611055}}}
2025-02-18 22:13:54,698 - services.translation_routes - INFO - [translation_routes.py:167] - Request 3b5f65f4: Audio processed successfully
2025-02-18 22:13:54,732 - services.translation_routes - INFO - [translation_routes.py:184] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-02-18 22:14:23,624 - services.translation_routes - INFO - [translation_routes.py:223] - Source text: When you choose pricing, it's important to keep it simple. Overcomplicated pricing will kill the sales process. In general, monthly recurring revenue is preferable to annual recurrent revenue, and that's because during an economic downturn, your revenue is protected at least until the contract is renewed, and then you can have a dispute with the customer about whether it is worth renewing.
2025-02-18 22:14:57,745 - services.translation_routes - INFO - [translation_routes.py:243] - Target text: Quand vous choisissez le prix, c'est important de le garder simple, trop compliqu√©. C'est pr√©f√©rable √† un prix bas√© sur l'usage, parce que votre revenu est prot√©g√© au moins jusqu'√† ce que le contrat soit renouvel√©, alors que vous pouvez avoir un d√©bat avec le client sur le fait qu'il vaut la peine d'√™tre renouvel√©. Il y a un risque r√©el que vos revenus tombent dans un mauvais mois et les investisseurs s'inqui√®tent pour √ßa.
2025-02-18 22:15:31,902 - services.translation_routes - INFO - [translation_routes.py:267] - Processing tuple output from model
2025-02-18 22:15:31,933 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 22:15:31,934 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 22:15:31,948 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 22:15:31,949 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 22:15:31,961 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 22:15:31,961 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 22:15:31,974 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-18 22:15:31,974 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-18 22:15:32,407 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-18 22:15:32,408 - services.translation_routes - INFO - [translation_routes.py:294] - 
==================================================
2025-02-18 22:15:32,408 - services.translation_routes - INFO - [translation_routes.py:295] - Translated Audio Quality Report
2025-02-18 22:15:32,408 - services.translation_routes - INFO - [translation_routes.py:296] - ==================================================
2025-02-18 22:15:32,408 - services.translation_routes - INFO - [translation_routes.py:297] - Request ID: 3b5f65f4
2025-02-18 22:15:32,408 - services.translation_routes - INFO - [translation_routes.py:298] - Target Language: fra
2025-02-18 22:15:32,408 - services.translation_routes - INFO - [translation_routes.py:299] - --------------------------------------------------
2025-02-18 22:15:32,408 - services.translation_routes - INFO - [translation_routes.py:300] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.804
- Avg Amplitude: 0.063
- Rms Level: 0.099
- Crest Factor: 8.094
- Zero Crossings: 30129.000
- Silence Percentage: 10.240
- Clipping Points: 0.000
- Dynamic Range: 175.875

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.027
  - Temporal Flatness: 0.015

- Volume Metrics:
  - Volume Stability: 0.323
  - Volume Range: 385.271
  - Volume Variations: 0.056

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0245571312745074
- Background Noise: 4.237720035081397
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.8842495083808899, 'stability': 3.6063249111175537, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.0, 'distinction': 0.026145095005631447}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.527
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.003
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-02-18 22:15:32,408 - services.translation_routes - INFO - [translation_routes.py:301] - ==================================================

2025-02-18 22:15:32,408 - services.translation_routes - INFO - [translation_routes.py:307] - Request 3b5f65f4: Audio output processed successfully
2025-02-18 22:15:32,413 - services.translation_routes - INFO - [translation_routes.py:362] - Request 3b5f65f4: Response prepared successfully
2025-02-18 22:15:32,413 - services.translation_routes - INFO - [translation_routes.py:375] - Request 3b5f65f4 completed in 100.37s
2025-02-18 22:15:32,417 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 100.38s, Memory Change: 57.88MB
2025-02-18 22:15:32,417 - __main__ - INFO - [app.py:278] - Request to /translate took 145.01s
2025-02-19 10:09:50,768 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.58MB
2025-02-19 10:09:50,772 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.01s
2025-02-19 10:09:50,776 - services.audio_link_routes - INFO - [audio_link_routes.py:226] - Processing URL: https://www.tiktok.com/@y_combinator/video/7411229444427287851?is_from_webapp=1&sender_device=pc&web_id=7472529903809676822
2025-02-19 10:09:50,777 - services.audio_link_routes - INFO - [audio_link_routes.py:246] - Processing TikTok URL
2025-02-19 10:09:50,778 - services.audio_link_routes - INFO - [audio_link_routes.py:130] - Using options for tiktok: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpr2fle0bw/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8, 'http_headers': {'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'Accept-Language': 'en-us,en;q=0.5', 'Accept-Encoding': 'gzip,deflate', 'Accept-Charset': 'ISO-8859-1,utf-8;q=0.7,*;q=0.7'}, 'nocheckcertificate': True, 'ignoreerrors': False, 'geo_bypass': True, 'extractor_args': {'tiktok': {'api_hostname': 'api22-normal-c-alisg.tiktokv.com', 'app_name': 'trill', 'app_version': '34.1.2', 'manifest_app_version': '2023401020', 'app_info': '1234567890123456789/trill///1180', 'device_id': '2109575995907557055'}}}
2025-02-19 10:09:53,736 - services.audio_link_routes - INFO - [audio_link_routes.py:143] - Successfully downloaded tiktok content
2025-02-19 10:09:53,738 - services.audio_link_routes - INFO - [audio_link_routes.py:162] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpr2fle0bw/output.wav
2025-02-19 10:09:53,761 - services.audio_link_routes - INFO - [audio_link_routes.py:174] - Successfully converted audio to WAV
2025-02-19 10:09:53,762 - services.audio_link_routes - INFO - [audio_link_routes.py:252] - Successfully processed audio
2025-02-19 10:09:53,762 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 2.99s, Memory Change: 65.23MB
2025-02-19 10:09:53,762 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 2.99s
2025-02-19 10:09:56,424 - services.model_manager - INFO - [model_manager.py:211] - Model inactive for too long, reloading...
2025-02-19 10:09:56,425 - services.model_manager - INFO - [model_manager.py:120] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-02-19 10:10:10,918 - services.model_manager - INFO - [model_manager.py:184] - Models loaded on CPU
2025-02-19 10:10:10,918 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-19 10:10:10,919 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-19 10:10:37,945 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-19 10:10:37,945 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-19 10:10:53,144 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-19 10:10:53,144 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-19 10:10:53,147 - services.model_manager - INFO - [model_manager.py:190] - Model initialization successful
2025-02-19 10:10:53,147 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-19 10:10:53,148 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-19 10:11:17,128 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-19 10:11:17,129 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-19 10:11:38,595 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-19 10:11:38,596 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-19 10:11:38,600 - services.translation_routes - INFO - [translation_routes.py:36] - Starting translation request 7e804629
2025-02-19 10:11:38,601 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-02-19 10:11:38,601 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-02-19 10:11:38,603 - services.translation_routes - INFO - [translation_routes.py:97] - Request 7e804629: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpa7wds6qg.wav
2025-02-19 10:11:38,605 - services.audio_processor - INFO - [audio_processor.py:136] - Audio duration: 38.24 seconds
2025-02-19 10:11:38,605 - services.translation_routes - INFO - [translation_routes.py:112] - Request 7e804629: Beginning audio processing with diagnostics
2025-02-19 10:11:38,605 - services.audio_processor - INFO - [audio_processor.py:280] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpa7wds6qg.wav
2025-02-19 10:11:38,605 - services.audio_processor - INFO - [audio_processor.py:282] - Audio info - Sample rate: 16000, Channels: 1
2025-02-19 10:11:38,610 - services.audio_processor - INFO - [audio_processor.py:291] - Original audio shape: torch.Size([1, 611915]), Frequency: 16000Hz
2025-02-19 10:11:38,662 - services.audio_processor - INFO - [audio_processor.py:449] - Base audio processing successful, proceeding with enhancement
2025-02-19 10:11:38,685 - services.audio_processor - INFO - [audio_processor.py:457] - Background music analysis: {'has_background_music': True, 'music_confidence': 0.3477175465611055, 'feature_scores': {'spectral_flatness': 0.1390788085613864, 'rhythm_regularity': 0.023657718120805367, 'bass_presence': 0.137733629472295, 'temporal_stability': 0.047247390406618676}, 'speech_vs_music': {'speech_prominence': 2.1681845428842896, 'speech_band_energy': 6.937399632533925e-08, 'music_band_energy': 3.189635222611287e-08}}
2025-02-19 10:11:38,685 - services.audio_processor - INFO - [audio_processor.py:460] - Applying speech-optimized spectral enhancement for fra
2025-02-19 10:11:38,758 - services.audio_processor - INFO - [audio_processor.py:470] - Analyzing audio quality...
2025-02-19 10:11:38,843 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-19 10:11:38,847 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-19 10:11:38,869 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-19 10:11:38,869 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-19 10:11:38,900 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-19 10:11:38,902 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-19 10:11:38,929 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-19 10:11:38,929 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-19 10:11:40,019 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-19 10:11:40,019 - services.translation_routes - INFO - [translation_routes.py:123] - 
==================================================
2025-02-19 10:11:40,019 - services.translation_routes - INFO - [translation_routes.py:124] - Input Audio Quality Report
2025-02-19 10:11:40,019 - services.translation_routes - INFO - [translation_routes.py:125] - ==================================================
2025-02-19 10:11:40,019 - services.translation_routes - INFO - [translation_routes.py:126] - Request ID: 7e804629
2025-02-19 10:11:40,019 - services.translation_routes - INFO - [translation_routes.py:127] - Target Language: fra
2025-02-19 10:11:40,019 - services.translation_routes - INFO - [translation_routes.py:128] - --------------------------------------------------
2025-02-19 10:11:40,019 - services.translation_routes - INFO - [translation_routes.py:129] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.015
- Rms Level: 0.040
- Crest Factor: 23.831
- Zero Crossings: 254556.000
- Silence Percentage: 47.747
- Clipping Points: 0.000
- Dynamic Range: 3685257.968

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.066
  - Temporal Flatness: 0.021

- Volume Metrics:
  - Volume Stability: -0.405
  - Volume Range: 24536417.425
  - Volume Variations: 0.032

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.003345643146739
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.7177200317382812, 'stability': 1.5061113834381104, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.42766523361206055, 'distinction': 0.15607275068759918}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.635
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.672
  - Rhythm Quality: 0.703
  - Intonation Quality: 0.641

Vowel Quality:
  - Quality Score: 0.007
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-02-19 10:11:40,019 - services.translation_routes - INFO - [translation_routes.py:130] - ==================================================

2025-02-19 10:11:40,019 - services.audio_processor - INFO - [audio_processor.py:280] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpa7wds6qg.wav
2025-02-19 10:11:40,019 - services.audio_processor - INFO - [audio_processor.py:282] - Audio info - Sample rate: 16000, Channels: 1
2025-02-19 10:11:40,022 - services.audio_processor - INFO - [audio_processor.py:291] - Original audio shape: torch.Size([1, 611915]), Frequency: 16000Hz
2025-02-19 10:11:40,055 - services.audio_processor - INFO - [audio_processor.py:449] - Base audio processing successful, proceeding with enhancement
2025-02-19 10:11:40,065 - services.audio_processor - INFO - [audio_processor.py:457] - Background music analysis: {'has_background_music': True, 'music_confidence': 0.3477175465611055, 'feature_scores': {'spectral_flatness': 0.1390788085613864, 'rhythm_regularity': 0.023657718120805367, 'bass_presence': 0.137733629472295, 'temporal_stability': 0.047247390406618676}, 'speech_vs_music': {'speech_prominence': 2.1681845428842896, 'speech_band_energy': 6.937399632533925e-08, 'music_band_energy': 3.189635222611287e-08}}
2025-02-19 10:11:40,065 - services.audio_processor - INFO - [audio_processor.py:460] - Applying speech-optimized spectral enhancement for fra
2025-02-19 10:11:40,116 - services.audio_processor - INFO - [audio_processor.py:470] - Analyzing audio quality...
2025-02-19 10:11:40,188 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-19 10:11:40,188 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-19 10:11:40,204 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-19 10:11:40,204 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-19 10:11:40,228 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-19 10:11:40,229 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-19 10:11:40,255 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-19 10:11:40,255 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-19 10:11:41,361 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-19 10:11:41,362 - services.translation_routes - INFO - [translation_routes.py:153] - Request 7e804629: Background music analysis: {'has_background_music': True, 'music_confidence': 0.3477175465611055, 'feature_scores': {'spectral_flatness': 0.1390788085613864, 'rhythm_regularity': 0.023657718120805367, 'bass_presence': 0.137733629472295, 'temporal_stability': 0.047247390406618676}, 'speech_vs_music': {'speech_prominence': 2.1681845428842896, 'speech_band_energy': 6.937399632533925e-08, 'music_band_energy': 3.189635222611287e-08}}
2025-02-19 10:11:41,362 - services.translation_strategy - INFO - [translation_strategy.py:23] - Content Type: speech_with_music (Music confidence: 0.3477175465611055)
2025-02-19 10:11:41,362 - services.translation_routes - INFO - [translation_routes.py:165] - Request 7e804629: Audio characteristics heard: {'content_type': 'speech_with_music', 'heard_characteristics': {'music': {'detected': True, 'confidence': 0.3477175465611055}}}
2025-02-19 10:11:41,362 - services.translation_routes - INFO - [translation_routes.py:167] - Request 7e804629: Audio processed successfully
2025-02-19 10:11:41,395 - services.translation_routes - INFO - [translation_routes.py:184] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-02-19 10:12:11,527 - services.translation_routes - INFO - [translation_routes.py:223] - Source text: When you choose pricing, it's important to keep it simple. Overcomplicated pricing will kill the sales process. In general, monthly recurring revenue is preferable to annual recurrent revenue, and that's because during an economic downturn, your revenue is protected at least until the contract is renewed, and then you can have a dispute with the customer about whether it is worth renewing.
2025-02-19 10:12:45,025 - services.translation_routes - INFO - [translation_routes.py:243] - Target text: Quand vous choisissez le prix, c'est important de le garder simple, trop compliqu√©. C'est pr√©f√©rable √† un prix bas√© sur l'usage, parce que votre revenu est prot√©g√© au moins jusqu'√† ce que le contrat soit renouvel√©, alors que vous pouvez avoir un d√©bat avec le client sur le fait qu'il vaut la peine d'√™tre renouvel√©. Il y a un risque r√©el que vos revenus tombent dans un mauvais mois et les investisseurs s'inqui√®tent pour √ßa.
2025-02-19 10:13:16,370 - services.translation_routes - INFO - [translation_routes.py:267] - Processing tuple output from model
2025-02-19 10:13:16,400 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-19 10:13:16,401 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-19 10:13:16,407 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-19 10:13:16,408 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-19 10:13:16,416 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-19 10:13:16,416 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-19 10:13:16,426 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-19 10:13:16,426 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-19 10:13:16,758 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-19 10:13:16,758 - services.translation_routes - INFO - [translation_routes.py:294] - 
==================================================
2025-02-19 10:13:16,758 - services.translation_routes - INFO - [translation_routes.py:295] - Translated Audio Quality Report
2025-02-19 10:13:16,758 - services.translation_routes - INFO - [translation_routes.py:296] - ==================================================
2025-02-19 10:13:16,758 - services.translation_routes - INFO - [translation_routes.py:297] - Request ID: 7e804629
2025-02-19 10:13:16,758 - services.translation_routes - INFO - [translation_routes.py:298] - Target Language: fra
2025-02-19 10:13:16,758 - services.translation_routes - INFO - [translation_routes.py:299] - --------------------------------------------------
2025-02-19 10:13:16,758 - services.translation_routes - INFO - [translation_routes.py:300] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.826
- Avg Amplitude: 0.066
- Rms Level: 0.103
- Crest Factor: 8.038
- Zero Crossings: 26857.000
- Silence Percentage: 9.331
- Clipping Points: 0.000
- Dynamic Range: 159.681

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.028
  - Temporal Flatness: 0.016

- Volume Metrics:
  - Volume Stability: 0.303
  - Volume Range: 286.638
  - Volume Variations: 0.059

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0255850913263616
- Background Noise: 4.215146044270107
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
No issues detected

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.9451561570167542, 'stability': 4.071811676025391, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.0, 'distinction': 0.011780699715018272}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.527
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.003
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-02-19 10:13:16,758 - services.translation_routes - INFO - [translation_routes.py:301] - ==================================================

2025-02-19 10:13:16,758 - services.translation_routes - INFO - [translation_routes.py:307] - Request 7e804629: Audio output processed successfully
2025-02-19 10:13:16,763 - services.translation_routes - INFO - [translation_routes.py:362] - Request 7e804629: Response prepared successfully
2025-02-19 10:13:16,764 - services.translation_routes - INFO - [translation_routes.py:375] - Request 7e804629 completed in 98.16s
2025-02-19 10:13:16,764 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 98.16s, Memory Change: 10289.56MB
2025-02-19 10:13:16,764 - __main__ - INFO - [app.py:278] - Request to /translate took 200.34s
2025-02-19 10:17:15,111 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.03MB
2025-02-19 10:17:15,111 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-02-19 10:17:15,117 - services.audio_link_routes - INFO - [audio_link_routes.py:226] - Processing URL: https://www.tiktok.com/@y_combinator/video/7411229444427287851?is_from_webapp=1&sender_device=pc&web_id=7472529903809676822
2025-02-19 10:17:15,118 - services.audio_link_routes - INFO - [audio_link_routes.py:246] - Processing TikTok URL
2025-02-19 10:17:15,118 - services.audio_link_routes - INFO - [audio_link_routes.py:130] - Using options for tiktok: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpu4qhben8/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8, 'http_headers': {'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'Accept-Language': 'en-us,en;q=0.5', 'Accept-Encoding': 'gzip,deflate', 'Accept-Charset': 'ISO-8859-1,utf-8;q=0.7,*;q=0.7'}, 'nocheckcertificate': True, 'ignoreerrors': False, 'geo_bypass': True, 'extractor_args': {'tiktok': {'api_hostname': 'api22-normal-c-alisg.tiktokv.com', 'app_name': 'trill', 'app_version': '34.1.2', 'manifest_app_version': '2023401020', 'app_info': '1234567890123456789/trill///1180', 'device_id': '1859656137062522109'}}}
2025-02-19 10:17:16,516 - services.audio_link_routes - INFO - [audio_link_routes.py:143] - Successfully downloaded tiktok content
2025-02-19 10:17:16,517 - services.audio_link_routes - INFO - [audio_link_routes.py:162] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpu4qhben8/output.wav
2025-02-19 10:17:16,540 - services.audio_link_routes - INFO - [audio_link_routes.py:174] - Successfully converted audio to WAV
2025-02-19 10:17:16,541 - services.audio_link_routes - INFO - [audio_link_routes.py:252] - Successfully processed audio
2025-02-19 10:17:16,541 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 1.43s, Memory Change: -122.30MB
2025-02-19 10:17:16,541 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 1.43s
2025-02-19 10:17:26,497 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-19 10:17:26,498 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-19 10:17:49,547 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-19 10:17:49,547 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-19 10:18:08,028 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-19 10:18:08,028 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-19 10:18:08,032 - services.translation_routes - INFO - [translation_routes.py:36] - Starting translation request 9f92efff
2025-02-19 10:18:08,032 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-02-19 10:18:08,033 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-02-19 10:18:08,035 - services.translation_routes - INFO - [translation_routes.py:97] - Request 9f92efff: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpgi_lt0n9.wav
2025-02-19 10:18:08,036 - services.audio_processor - INFO - [audio_processor.py:136] - Audio duration: 38.24 seconds
2025-02-19 10:18:08,036 - services.translation_routes - INFO - [translation_routes.py:112] - Request 9f92efff: Beginning audio processing with diagnostics
2025-02-19 10:18:08,036 - services.audio_processor - INFO - [audio_processor.py:280] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpgi_lt0n9.wav
2025-02-19 10:18:08,036 - services.audio_processor - INFO - [audio_processor.py:282] - Audio info - Sample rate: 16000, Channels: 1
2025-02-19 10:18:08,038 - services.audio_processor - INFO - [audio_processor.py:291] - Original audio shape: torch.Size([1, 611915]), Frequency: 16000Hz
2025-02-19 10:18:08,072 - services.audio_processor - INFO - [audio_processor.py:449] - Base audio processing successful, proceeding with enhancement
2025-02-19 10:18:08,083 - services.audio_processor - INFO - [audio_processor.py:457] - Background music analysis: {'has_background_music': True, 'music_confidence': 0.3477175465611055, 'feature_scores': {'spectral_flatness': 0.1390788085613864, 'rhythm_regularity': 0.023657718120805367, 'bass_presence': 0.137733629472295, 'temporal_stability': 0.047247390406618676}, 'speech_vs_music': {'speech_prominence': 2.1681845428842896, 'speech_band_energy': 6.937399632533925e-08, 'music_band_energy': 3.189635222611287e-08}}
2025-02-19 10:18:08,083 - services.audio_processor - INFO - [audio_processor.py:460] - Applying speech-optimized spectral enhancement for fra
2025-02-19 10:18:08,134 - services.audio_processor - INFO - [audio_processor.py:470] - Analyzing audio quality...
2025-02-19 10:18:08,201 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-19 10:18:08,202 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-19 10:18:08,215 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-19 10:18:08,216 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-19 10:18:08,235 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-19 10:18:08,235 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-19 10:18:08,252 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-19 10:18:08,252 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-19 10:18:09,330 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-19 10:18:09,331 - services.translation_routes - INFO - [translation_routes.py:123] - 
==================================================
2025-02-19 10:18:09,331 - services.translation_routes - INFO - [translation_routes.py:124] - Input Audio Quality Report
2025-02-19 10:18:09,331 - services.translation_routes - INFO - [translation_routes.py:125] - ==================================================
2025-02-19 10:18:09,331 - services.translation_routes - INFO - [translation_routes.py:126] - Request ID: 9f92efff
2025-02-19 10:18:09,331 - services.translation_routes - INFO - [translation_routes.py:127] - Target Language: fra
2025-02-19 10:18:09,331 - services.translation_routes - INFO - [translation_routes.py:128] - --------------------------------------------------
2025-02-19 10:18:09,331 - services.translation_routes - INFO - [translation_routes.py:129] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.015
- Rms Level: 0.040
- Crest Factor: 23.831
- Zero Crossings: 254556.000
- Silence Percentage: 47.747
- Clipping Points: 0.000
- Dynamic Range: 3685257.968

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.066
  - Temporal Flatness: 0.021

- Volume Metrics:
  - Volume Stability: -0.405
  - Volume Range: 24536417.425
  - Volume Variations: 0.032

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.003345643146739
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.7177200317382812, 'stability': 1.5061113834381104, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.42766523361206055, 'distinction': 0.15607275068759918}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.635
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.672
  - Rhythm Quality: 0.703
  - Intonation Quality: 0.641

Vowel Quality:
  - Quality Score: 0.007
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-02-19 10:18:09,331 - services.translation_routes - INFO - [translation_routes.py:130] - ==================================================

2025-02-19 10:18:09,331 - services.audio_processor - INFO - [audio_processor.py:280] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpgi_lt0n9.wav
2025-02-19 10:18:09,331 - services.audio_processor - INFO - [audio_processor.py:282] - Audio info - Sample rate: 16000, Channels: 1
2025-02-19 10:18:09,333 - services.audio_processor - INFO - [audio_processor.py:291] - Original audio shape: torch.Size([1, 611915]), Frequency: 16000Hz
2025-02-19 10:18:09,364 - services.audio_processor - INFO - [audio_processor.py:449] - Base audio processing successful, proceeding with enhancement
2025-02-19 10:18:09,377 - services.audio_processor - INFO - [audio_processor.py:457] - Background music analysis: {'has_background_music': True, 'music_confidence': 0.3477175465611055, 'feature_scores': {'spectral_flatness': 0.1390788085613864, 'rhythm_regularity': 0.023657718120805367, 'bass_presence': 0.137733629472295, 'temporal_stability': 0.047247390406618676}, 'speech_vs_music': {'speech_prominence': 2.1681845428842896, 'speech_band_energy': 6.937399632533925e-08, 'music_band_energy': 3.189635222611287e-08}}
2025-02-19 10:18:09,377 - services.audio_processor - INFO - [audio_processor.py:460] - Applying speech-optimized spectral enhancement for fra
2025-02-19 10:18:09,429 - services.audio_processor - INFO - [audio_processor.py:470] - Analyzing audio quality...
2025-02-19 10:18:09,496 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-19 10:18:09,496 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-19 10:18:09,511 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-19 10:18:09,512 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-19 10:18:09,527 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-19 10:18:09,527 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-19 10:18:09,544 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-19 10:18:09,545 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-19 10:18:10,645 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-19 10:18:10,647 - services.translation_routes - INFO - [translation_routes.py:153] - Request 9f92efff: Background music analysis: {'has_background_music': True, 'music_confidence': 0.3477175465611055, 'feature_scores': {'spectral_flatness': 0.1390788085613864, 'rhythm_regularity': 0.023657718120805367, 'bass_presence': 0.137733629472295, 'temporal_stability': 0.047247390406618676}, 'speech_vs_music': {'speech_prominence': 2.1681845428842896, 'speech_band_energy': 6.937399632533925e-08, 'music_band_energy': 3.189635222611287e-08}}
2025-02-19 10:18:10,647 - services.translation_strategy - INFO - [translation_strategy.py:23] - Content Type: speech_with_music (Music confidence: 0.3477175465611055)
2025-02-19 10:18:10,647 - services.translation_routes - INFO - [translation_routes.py:165] - Request 9f92efff: Audio characteristics heard: {'content_type': 'speech_with_music', 'heard_characteristics': {'music': {'detected': True, 'confidence': 0.3477175465611055}}}
2025-02-19 10:18:10,647 - services.translation_routes - INFO - [translation_routes.py:167] - Request 9f92efff: Audio processed successfully
2025-02-19 10:18:10,694 - services.translation_routes - INFO - [translation_routes.py:184] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-02-19 10:18:43,234 - services.translation_routes - INFO - [translation_routes.py:223] - Source text: When you choose pricing, it's important to keep it simple. Overcomplicated pricing will kill the sales process. In general, monthly recurring revenue is preferable to annual recurrent revenue, and that's because during an economic downturn, your revenue is protected at least until the contract is renewed, and then you can have a dispute with the customer about whether it is worth renewing.
2025-02-19 10:19:20,988 - services.translation_routes - INFO - [translation_routes.py:243] - Target text: Quand vous choisissez le prix, c'est important de le garder simple, trop compliqu√©. C'est pr√©f√©rable √† un prix bas√© sur l'usage, parce que votre revenu est prot√©g√© au moins jusqu'√† ce que le contrat soit renouvel√©, alors que vous pouvez avoir un d√©bat avec le client sur le fait qu'il vaut la peine d'√™tre renouvel√©. Il y a un risque r√©el que vos revenus tombent dans un mauvais mois et les investisseurs s'inqui√®tent pour √ßa.
2025-02-19 10:19:55,334 - services.translation_routes - INFO - [translation_routes.py:267] - Processing tuple output from model
2025-02-19 10:19:55,362 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-19 10:19:55,364 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-19 10:19:55,373 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-19 10:19:55,374 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-19 10:19:55,385 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-19 10:19:55,385 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-19 10:19:55,394 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-19 10:19:55,394 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-19 10:19:55,704 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-19 10:19:55,705 - services.translation_routes - INFO - [translation_routes.py:294] - 
==================================================
2025-02-19 10:19:55,705 - services.translation_routes - INFO - [translation_routes.py:295] - Translated Audio Quality Report
2025-02-19 10:19:55,705 - services.translation_routes - INFO - [translation_routes.py:296] - ==================================================
2025-02-19 10:19:55,705 - services.translation_routes - INFO - [translation_routes.py:297] - Request ID: 9f92efff
2025-02-19 10:19:55,705 - services.translation_routes - INFO - [translation_routes.py:298] - Target Language: fra
2025-02-19 10:19:55,705 - services.translation_routes - INFO - [translation_routes.py:299] - --------------------------------------------------
2025-02-19 10:19:55,705 - services.translation_routes - INFO - [translation_routes.py:300] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.631
- Avg Amplitude: 0.064
- Rms Level: 0.099
- Crest Factor: 6.404
- Zero Crossings: 23262.000
- Silence Percentage: 9.710
- Clipping Points: 0.000
- Dynamic Range: 162.407

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.200
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.026
  - Temporal Flatness: 0.014

- Volume Metrics:
  - Volume Stability: 0.326
  - Volume Range: 563.882
  - Volume Variations: 0.055

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0307724555495783
- Background Noise: 3.561415011054307
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.8791534304618835, 'stability': 3.727125883102417, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.0, 'distinction': 0.006362263113260269}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.526
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.004
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-02-19 10:19:55,705 - services.translation_routes - INFO - [translation_routes.py:301] - ==================================================

2025-02-19 10:19:55,705 - services.translation_routes - INFO - [translation_routes.py:307] - Request 9f92efff: Audio output processed successfully
2025-02-19 10:19:55,709 - services.translation_routes - INFO - [translation_routes.py:362] - Request 9f92efff: Response prepared successfully
2025-02-19 10:19:55,710 - services.translation_routes - INFO - [translation_routes.py:375] - Request 9f92efff completed in 107.68s
2025-02-19 10:19:55,713 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 107.68s, Memory Change: 1039.58MB
2025-02-19 10:19:55,713 - __main__ - INFO - [app.py:278] - Request to /translate took 149.22s
2025-02-19 10:20:50,786 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-19 10:20:50,788 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-19 10:21:17,042 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-19 10:21:17,043 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-19 10:21:38,888 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-19 10:21:38,888 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-19 10:21:38,894 - services.translation_routes - INFO - [translation_routes.py:36] - Starting translation request 18c5c3c8
2025-02-19 10:21:38,894 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-02-19 10:21:38,895 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-02-19 10:21:38,897 - services.translation_routes - INFO - [translation_routes.py:97] - Request 18c5c3c8: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpeiv9ad7h.wav
2025-02-19 10:21:38,898 - services.audio_processor - INFO - [audio_processor.py:136] - Audio duration: 38.24 seconds
2025-02-19 10:21:38,898 - services.translation_routes - INFO - [translation_routes.py:112] - Request 18c5c3c8: Beginning audio processing with diagnostics
2025-02-19 10:21:38,898 - services.audio_processor - INFO - [audio_processor.py:280] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpeiv9ad7h.wav
2025-02-19 10:21:38,898 - services.audio_processor - INFO - [audio_processor.py:282] - Audio info - Sample rate: 16000, Channels: 1
2025-02-19 10:21:38,901 - services.audio_processor - INFO - [audio_processor.py:291] - Original audio shape: torch.Size([1, 611915]), Frequency: 16000Hz
2025-02-19 10:21:38,932 - services.audio_processor - INFO - [audio_processor.py:449] - Base audio processing successful, proceeding with enhancement
2025-02-19 10:21:38,945 - services.audio_processor - INFO - [audio_processor.py:457] - Background music analysis: {'has_background_music': True, 'music_confidence': 0.3477175465611055, 'feature_scores': {'spectral_flatness': 0.1390788085613864, 'rhythm_regularity': 0.023657718120805367, 'bass_presence': 0.137733629472295, 'temporal_stability': 0.047247390406618676}, 'speech_vs_music': {'speech_prominence': 2.1681845428842896, 'speech_band_energy': 6.937399632533925e-08, 'music_band_energy': 3.189635222611287e-08}}
2025-02-19 10:21:38,945 - services.audio_processor - INFO - [audio_processor.py:460] - Applying speech-optimized spectral enhancement for fra
2025-02-19 10:21:39,000 - services.audio_processor - INFO - [audio_processor.py:470] - Analyzing audio quality...
2025-02-19 10:21:39,065 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-19 10:21:39,066 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-19 10:21:39,083 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-19 10:21:39,083 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-19 10:21:39,097 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-19 10:21:39,098 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-19 10:21:39,117 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-19 10:21:39,117 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-19 10:21:40,218 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-19 10:21:40,218 - services.translation_routes - INFO - [translation_routes.py:123] - 
==================================================
2025-02-19 10:21:40,218 - services.translation_routes - INFO - [translation_routes.py:124] - Input Audio Quality Report
2025-02-19 10:21:40,218 - services.translation_routes - INFO - [translation_routes.py:125] - ==================================================
2025-02-19 10:21:40,218 - services.translation_routes - INFO - [translation_routes.py:126] - Request ID: 18c5c3c8
2025-02-19 10:21:40,218 - services.translation_routes - INFO - [translation_routes.py:127] - Target Language: fra
2025-02-19 10:21:40,218 - services.translation_routes - INFO - [translation_routes.py:128] - --------------------------------------------------
2025-02-19 10:21:40,218 - services.translation_routes - INFO - [translation_routes.py:129] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.015
- Rms Level: 0.040
- Crest Factor: 23.831
- Zero Crossings: 254556.000
- Silence Percentage: 47.747
- Clipping Points: 0.000
- Dynamic Range: 3685257.968

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.066
  - Temporal Flatness: 0.021

- Volume Metrics:
  - Volume Stability: -0.405
  - Volume Range: 24536417.425
  - Volume Variations: 0.032

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.003345643146739
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.7177200317382812, 'stability': 1.5061113834381104, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.42766523361206055, 'distinction': 0.15607275068759918}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.635
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.672
  - Rhythm Quality: 0.703
  - Intonation Quality: 0.641

Vowel Quality:
  - Quality Score: 0.007
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-02-19 10:21:40,218 - services.translation_routes - INFO - [translation_routes.py:130] - ==================================================

2025-02-19 10:21:40,218 - services.audio_processor - INFO - [audio_processor.py:280] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpeiv9ad7h.wav
2025-02-19 10:21:40,218 - services.audio_processor - INFO - [audio_processor.py:282] - Audio info - Sample rate: 16000, Channels: 1
2025-02-19 10:21:40,222 - services.audio_processor - INFO - [audio_processor.py:291] - Original audio shape: torch.Size([1, 611915]), Frequency: 16000Hz
2025-02-19 10:21:40,261 - services.audio_processor - INFO - [audio_processor.py:449] - Base audio processing successful, proceeding with enhancement
2025-02-19 10:21:40,274 - services.audio_processor - INFO - [audio_processor.py:457] - Background music analysis: {'has_background_music': True, 'music_confidence': 0.3477175465611055, 'feature_scores': {'spectral_flatness': 0.1390788085613864, 'rhythm_regularity': 0.023657718120805367, 'bass_presence': 0.137733629472295, 'temporal_stability': 0.047247390406618676}, 'speech_vs_music': {'speech_prominence': 2.1681845428842896, 'speech_band_energy': 6.937399632533925e-08, 'music_band_energy': 3.189635222611287e-08}}
2025-02-19 10:21:40,274 - services.audio_processor - INFO - [audio_processor.py:460] - Applying speech-optimized spectral enhancement for fra
2025-02-19 10:21:40,333 - services.audio_processor - INFO - [audio_processor.py:470] - Analyzing audio quality...
2025-02-19 10:21:40,404 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-19 10:21:40,404 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-19 10:21:40,419 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-19 10:21:40,419 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-19 10:21:40,437 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-19 10:21:40,437 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-19 10:21:40,451 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-19 10:21:40,452 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-19 10:21:41,503 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-19 10:21:41,504 - services.translation_routes - INFO - [translation_routes.py:153] - Request 18c5c3c8: Background music analysis: {'has_background_music': True, 'music_confidence': 0.3477175465611055, 'feature_scores': {'spectral_flatness': 0.1390788085613864, 'rhythm_regularity': 0.023657718120805367, 'bass_presence': 0.137733629472295, 'temporal_stability': 0.047247390406618676}, 'speech_vs_music': {'speech_prominence': 2.1681845428842896, 'speech_band_energy': 6.937399632533925e-08, 'music_band_energy': 3.189635222611287e-08}}
2025-02-19 10:21:41,504 - services.translation_strategy - INFO - [translation_strategy.py:23] - Content Type: speech_with_music (Music confidence: 0.3477175465611055)
2025-02-19 10:21:41,504 - services.translation_routes - INFO - [translation_routes.py:165] - Request 18c5c3c8: Audio characteristics heard: {'content_type': 'speech_with_music', 'heard_characteristics': {'music': {'detected': True, 'confidence': 0.3477175465611055}}}
2025-02-19 10:21:41,504 - services.translation_routes - INFO - [translation_routes.py:167] - Request 18c5c3c8: Audio processed successfully
2025-02-19 10:21:41,539 - services.translation_routes - INFO - [translation_routes.py:184] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-02-19 10:22:10,619 - services.translation_routes - INFO - [translation_routes.py:223] - Source text: When you choose pricing, it's important to keep it simple. Overcomplicated pricing will kill the sales process. In general, monthly recurring revenue is preferable to annual recurrent revenue, and that's because during an economic downturn, your revenue is protected at least until the contract is renewed, and then you can have a dispute with the customer about whether it is worth renewing.
2025-02-19 10:22:43,197 - services.translation_routes - INFO - [translation_routes.py:243] - Target text: Quand vous choisissez le prix, c'est important de le garder simple, trop compliqu√©. C'est pr√©f√©rable √† un prix bas√© sur l'usage, parce que votre revenu est prot√©g√© au moins jusqu'√† ce que le contrat soit renouvel√©, alors que vous pouvez avoir un d√©bat avec le client sur le fait qu'il vaut la peine d'√™tre renouvel√©. Il y a un risque r√©el que vos revenus tombent dans un mauvais mois et les investisseurs s'inqui√®tent pour √ßa.
2025-02-19 10:23:20,669 - services.translation_routes - INFO - [translation_routes.py:267] - Processing tuple output from model
2025-02-19 10:23:20,705 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-19 10:23:20,705 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-19 10:23:20,716 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-19 10:23:20,717 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-19 10:23:20,728 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-19 10:23:20,729 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-19 10:23:20,737 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-19 10:23:20,737 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-19 10:23:21,226 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-19 10:23:21,226 - services.translation_routes - INFO - [translation_routes.py:294] - 
==================================================
2025-02-19 10:23:21,226 - services.translation_routes - INFO - [translation_routes.py:295] - Translated Audio Quality Report
2025-02-19 10:23:21,227 - services.translation_routes - INFO - [translation_routes.py:296] - ==================================================
2025-02-19 10:23:21,227 - services.translation_routes - INFO - [translation_routes.py:297] - Request ID: 18c5c3c8
2025-02-19 10:23:21,227 - services.translation_routes - INFO - [translation_routes.py:298] - Target Language: fra
2025-02-19 10:23:21,227 - services.translation_routes - INFO - [translation_routes.py:299] - --------------------------------------------------
2025-02-19 10:23:21,227 - services.translation_routes - INFO - [translation_routes.py:300] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.781
- Avg Amplitude: 0.059
- Rms Level: 0.094
- Crest Factor: 8.325
- Zero Crossings: 40630.000
- Silence Percentage: 9.390
- Clipping Points: 0.000
- Dynamic Range: 147.747

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.025
  - Temporal Flatness: 0.014

- Volume Metrics:
  - Volume Stability: 0.283
  - Volume Range: 298.559
  - Volume Variations: 0.055

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.022525682560665
- Background Noise: 4.330186377993878
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.7554920315742493, 'stability': 3.1432740688323975, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.023600738495588303, 'consistency': 0.0, 'distinction': 0.08663400262594223}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.504
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.003
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-02-19 10:23:21,227 - services.translation_routes - INFO - [translation_routes.py:301] - ==================================================

2025-02-19 10:23:21,227 - services.translation_routes - INFO - [translation_routes.py:307] - Request 18c5c3c8: Audio output processed successfully
2025-02-19 10:23:21,233 - services.translation_routes - INFO - [translation_routes.py:362] - Request 18c5c3c8: Response prepared successfully
2025-02-19 10:23:21,233 - services.translation_routes - INFO - [translation_routes.py:375] - Request 18c5c3c8 completed in 102.34s
2025-02-19 10:23:21,236 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 102.34s, Memory Change: 854.64MB
2025-02-19 10:23:21,236 - __main__ - INFO - [app.py:278] - Request to /translate took 150.45s
2025-02-19 10:29:37,989 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.05MB
2025-02-19 10:29:37,990 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-02-19 10:29:37,996 - services.audio_link_routes - INFO - [audio_link_routes.py:226] - Processing URL: https://www.tiktok.com/@y_combinator/video/7411229444427287851?is_from_webapp=1&sender_device=pc&web_id=7472529903809676822
2025-02-19 10:29:37,997 - services.audio_link_routes - INFO - [audio_link_routes.py:246] - Processing TikTok URL
2025-02-19 10:29:37,999 - services.audio_link_routes - INFO - [audio_link_routes.py:130] - Using options for tiktok: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpf_7ww_hs/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8, 'http_headers': {'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'Accept-Language': 'en-us,en;q=0.5', 'Accept-Encoding': 'gzip,deflate', 'Accept-Charset': 'ISO-8859-1,utf-8;q=0.7,*;q=0.7'}, 'nocheckcertificate': True, 'ignoreerrors': False, 'geo_bypass': True, 'extractor_args': {'tiktok': {'api_hostname': 'api22-normal-c-alisg.tiktokv.com', 'app_name': 'trill', 'app_version': '34.1.2', 'manifest_app_version': '2023401020', 'app_info': '1234567890123456789/trill///1180', 'device_id': '1655740942480329061'}}}
2025-02-19 10:29:38,572 - services.audio_link_routes - ERROR - [audio_link_routes.py:185] - Download error for tiktok: [0;31mERROR:[0m [TikTok] 7411229444427287851: Unable to extract webpage video data; please report this issue on  https://github.com/yt-dlp/yt-dlp/issues?q= , filling out the appropriate issue template. Confirm you are on the latest version using  yt-dlp -U
2025-02-19 10:29:38,573 - services.audio_link_routes - ERROR - [audio_link_routes.py:192] - tiktok processing error: Unable to access this TikTok content. Please try another video or check the URL.
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.12/site-packages/yt_dlp/YoutubeDL.py", line 1637, in wrapper
    return func(self, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.12/site-packages/yt_dlp/YoutubeDL.py", line 1772, in __extract_info
    ie_result = ie.extract(url)
                ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.12/site-packages/yt_dlp/extractor/common.py", line 742, in extract
    ie_result = self._real_extract(url)
                ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.12/site-packages/yt_dlp/extractor/tiktok.py", line 894, in _real_extract
    video_data, status = self._extract_web_data_and_status(url, video_id)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.12/site-packages/yt_dlp/extractor/tiktok.py", line 250, in _extract_web_data_and_status
    raise ExtractorError('Unable to extract webpage video data')
yt_dlp.utils.ExtractorError: [TikTok] 7411229444427287851: Unable to extract webpage video data; please report this issue on  https://github.com/yt-dlp/yt-dlp/issues?q= , filling out the appropriate issue template. Confirm you are on the latest version using  yt-dlp -U

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/robmills/audio-translation/Backend/services/audio_link_routes.py", line 142, in handle_video_platform_url
    ydl.download([url])
  File "/opt/anaconda3/lib/python3.12/site-packages/yt_dlp/YoutubeDL.py", line 3618, in download
    self.__download_wrapper(self.extract_info)(
  File "/opt/anaconda3/lib/python3.12/site-packages/yt_dlp/YoutubeDL.py", line 3591, in wrapper
    res = func(*args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.12/site-packages/yt_dlp/YoutubeDL.py", line 1626, in extract_info
    return self.__extract_info(url, self.get_info_extractor(key), download, extra_info, process)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.12/site-packages/yt_dlp/YoutubeDL.py", line 1655, in wrapper
    self.report_error(str(e), e.format_traceback())
  File "/opt/anaconda3/lib/python3.12/site-packages/yt_dlp/YoutubeDL.py", line 1095, in report_error
    self.trouble(f'{self._format_err("ERROR:", self.Styles.ERROR)} {message}', *args, **kwargs)
  File "/opt/anaconda3/lib/python3.12/site-packages/yt_dlp/YoutubeDL.py", line 1034, in trouble
    raise DownloadError(message, exc_info)
yt_dlp.utils.DownloadError: [0;31mERROR:[0m [TikTok] 7411229444427287851: Unable to extract webpage video data; please report this issue on  https://github.com/yt-dlp/yt-dlp/issues?q= , filling out the appropriate issue template. Confirm you are on the latest version using  yt-dlp -U

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/robmills/audio-translation/Backend/services/audio_link_routes.py", line 187, in handle_video_platform_url
    raise Exception(f"Unable to access this TikTok content. Please try another video or check the URL.")
Exception: Unable to access this TikTok content. Please try another video or check the URL.
2025-02-19 10:29:38,576 - services.audio_link_routes - ERROR - [audio_link_routes.py:260] - Processing error: Unable to access this TikTok content. Please try another video or check the URL.
2025-02-19 10:29:38,577 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.58s, Memory Change: 25.64MB
2025-02-19 10:29:38,577 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.58s
2025-02-19 10:30:20,373 - services.audio_link_routes - INFO - [audio_link_routes.py:226] - Processing URL: https://www.tiktok.com/@y_combinator/video/7411229444427287851?is_from_webapp=1&sender_device=pc&web_id=7472529903809676822
2025-02-19 10:30:20,375 - services.audio_link_routes - INFO - [audio_link_routes.py:246] - Processing TikTok URL
2025-02-19 10:30:20,375 - services.audio_link_routes - INFO - [audio_link_routes.py:130] - Using options for tiktok: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpxlq98kpu/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8, 'http_headers': {'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'Accept-Language': 'en-us,en;q=0.5', 'Accept-Encoding': 'gzip,deflate', 'Accept-Charset': 'ISO-8859-1,utf-8;q=0.7,*;q=0.7'}, 'nocheckcertificate': True, 'ignoreerrors': False, 'geo_bypass': True, 'extractor_args': {'tiktok': {'api_hostname': 'api22-normal-c-alisg.tiktokv.com', 'app_name': 'trill', 'app_version': '34.1.2', 'manifest_app_version': '2023401020', 'app_info': '1234567890123456789/trill///1180', 'device_id': '6952859391373438493'}}}
2025-02-19 10:30:21,870 - services.audio_link_routes - INFO - [audio_link_routes.py:143] - Successfully downloaded tiktok content
2025-02-19 10:30:21,871 - services.audio_link_routes - INFO - [audio_link_routes.py:162] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpxlq98kpu/output.wav
2025-02-19 10:30:21,895 - services.audio_link_routes - INFO - [audio_link_routes.py:174] - Successfully converted audio to WAV
2025-02-19 10:30:21,895 - services.audio_link_routes - INFO - [audio_link_routes.py:252] - Successfully processed audio
2025-02-19 10:30:21,896 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 1.52s, Memory Change: 20.73MB
2025-02-19 10:30:21,896 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 1.52s
2025-02-19 10:37:27,572 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-02-19 10:37:27,572 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-02-19 10:37:27,575 - services.audio_link_routes - INFO - [audio_link_routes.py:226] - Processing URL: https://www.tiktok.com/@y_combinator/video/7411229444427287851?is_from_webapp=1&sender_device=pc&web_id=7472529903809676822
2025-02-19 10:37:27,576 - services.audio_link_routes - INFO - [audio_link_routes.py:246] - Processing TikTok URL
2025-02-19 10:37:27,576 - services.audio_link_routes - INFO - [audio_link_routes.py:130] - Using options for tiktok: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp9t93losr/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8, 'http_headers': {'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'Accept-Language': 'en-us,en;q=0.5', 'Accept-Encoding': 'gzip,deflate', 'Accept-Charset': 'ISO-8859-1,utf-8;q=0.7,*;q=0.7'}, 'nocheckcertificate': True, 'ignoreerrors': False, 'geo_bypass': True, 'extractor_args': {'tiktok': {'api_hostname': 'api22-normal-c-alisg.tiktokv.com', 'app_name': 'trill', 'app_version': '34.1.2', 'manifest_app_version': '2023401020', 'app_info': '1234567890123456789/trill///1180', 'device_id': '9575450934005025812'}}}
2025-02-19 10:37:28,957 - services.audio_link_routes - INFO - [audio_link_routes.py:143] - Successfully downloaded tiktok content
2025-02-19 10:37:28,957 - services.audio_link_routes - INFO - [audio_link_routes.py:162] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp9t93losr/output.wav
2025-02-19 10:37:28,983 - services.audio_link_routes - INFO - [audio_link_routes.py:174] - Successfully converted audio to WAV
2025-02-19 10:37:28,984 - services.audio_link_routes - INFO - [audio_link_routes.py:252] - Successfully processed audio
2025-02-19 10:37:28,984 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 1.41s, Memory Change: 13.22MB
2025-02-19 10:37:28,984 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 1.41s
2025-02-19 10:37:33,853 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-19 10:37:33,855 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-19 10:37:56,586 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-19 10:37:56,586 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-19 10:38:17,780 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-19 10:38:17,780 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-19 10:38:17,784 - services.translation_routes - INFO - [translation_routes.py:36] - Starting translation request 631f6d95
2025-02-19 10:38:17,785 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-02-19 10:38:17,785 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-02-19 10:38:17,787 - services.translation_routes - INFO - [translation_routes.py:97] - Request 631f6d95: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpdr91x4ap.wav
2025-02-19 10:38:17,788 - services.audio_processor - INFO - [audio_processor.py:136] - Audio duration: 38.24 seconds
2025-02-19 10:38:17,788 - services.translation_routes - INFO - [translation_routes.py:112] - Request 631f6d95: Beginning audio processing with diagnostics
2025-02-19 10:38:17,788 - services.audio_processor - INFO - [audio_processor.py:280] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpdr91x4ap.wav
2025-02-19 10:38:17,788 - services.audio_processor - INFO - [audio_processor.py:282] - Audio info - Sample rate: 16000, Channels: 1
2025-02-19 10:38:17,791 - services.audio_processor - INFO - [audio_processor.py:291] - Original audio shape: torch.Size([1, 611915]), Frequency: 16000Hz
2025-02-19 10:38:17,826 - services.audio_processor - INFO - [audio_processor.py:449] - Base audio processing successful, proceeding with enhancement
2025-02-19 10:38:17,838 - services.audio_processor - INFO - [audio_processor.py:457] - Background music analysis: {'has_background_music': True, 'music_confidence': 0.3477175465611055, 'feature_scores': {'spectral_flatness': 0.1390788085613864, 'rhythm_regularity': 0.023657718120805367, 'bass_presence': 0.137733629472295, 'temporal_stability': 0.047247390406618676}, 'speech_vs_music': {'speech_prominence': 2.1681845428842896, 'speech_band_energy': 6.937399632533925e-08, 'music_band_energy': 3.189635222611287e-08}}
2025-02-19 10:38:17,839 - services.audio_processor - INFO - [audio_processor.py:460] - Applying speech-optimized spectral enhancement for fra
2025-02-19 10:38:17,904 - services.audio_processor - INFO - [audio_processor.py:470] - Analyzing audio quality...
2025-02-19 10:38:17,969 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-19 10:38:17,970 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-19 10:38:17,984 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-19 10:38:17,985 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-19 10:38:18,001 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-19 10:38:18,001 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-19 10:38:18,018 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-19 10:38:18,019 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-19 10:38:19,158 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-19 10:38:19,159 - services.translation_routes - INFO - [translation_routes.py:123] - 
==================================================
2025-02-19 10:38:19,159 - services.translation_routes - INFO - [translation_routes.py:124] - Input Audio Quality Report
2025-02-19 10:38:19,159 - services.translation_routes - INFO - [translation_routes.py:125] - ==================================================
2025-02-19 10:38:19,159 - services.translation_routes - INFO - [translation_routes.py:126] - Request ID: 631f6d95
2025-02-19 10:38:19,159 - services.translation_routes - INFO - [translation_routes.py:127] - Target Language: fra
2025-02-19 10:38:19,159 - services.translation_routes - INFO - [translation_routes.py:128] - --------------------------------------------------
2025-02-19 10:38:19,159 - services.translation_routes - INFO - [translation_routes.py:129] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.015
- Rms Level: 0.040
- Crest Factor: 23.831
- Zero Crossings: 254556.000
- Silence Percentage: 47.747
- Clipping Points: 0.000
- Dynamic Range: 3685257.968

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.066
  - Temporal Flatness: 0.021

- Volume Metrics:
  - Volume Stability: -0.405
  - Volume Range: 24536417.425
  - Volume Variations: 0.032

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.003345643146739
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.7177200317382812, 'stability': 1.5061113834381104, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.42766523361206055, 'distinction': 0.15607275068759918}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.635
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.672
  - Rhythm Quality: 0.703
  - Intonation Quality: 0.641

Vowel Quality:
  - Quality Score: 0.007
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-02-19 10:38:19,159 - services.translation_routes - INFO - [translation_routes.py:130] - ==================================================

2025-02-19 10:38:19,159 - services.audio_processor - INFO - [audio_processor.py:280] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpdr91x4ap.wav
2025-02-19 10:38:19,159 - services.audio_processor - INFO - [audio_processor.py:282] - Audio info - Sample rate: 16000, Channels: 1
2025-02-19 10:38:19,162 - services.audio_processor - INFO - [audio_processor.py:291] - Original audio shape: torch.Size([1, 611915]), Frequency: 16000Hz
2025-02-19 10:38:19,201 - services.audio_processor - INFO - [audio_processor.py:449] - Base audio processing successful, proceeding with enhancement
2025-02-19 10:38:19,214 - services.audio_processor - INFO - [audio_processor.py:457] - Background music analysis: {'has_background_music': True, 'music_confidence': 0.3477175465611055, 'feature_scores': {'spectral_flatness': 0.1390788085613864, 'rhythm_regularity': 0.023657718120805367, 'bass_presence': 0.137733629472295, 'temporal_stability': 0.047247390406618676}, 'speech_vs_music': {'speech_prominence': 2.1681845428842896, 'speech_band_energy': 6.937399632533925e-08, 'music_band_energy': 3.189635222611287e-08}}
2025-02-19 10:38:19,214 - services.audio_processor - INFO - [audio_processor.py:460] - Applying speech-optimized spectral enhancement for fra
2025-02-19 10:38:19,276 - services.audio_processor - INFO - [audio_processor.py:470] - Analyzing audio quality...
2025-02-19 10:38:19,352 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-19 10:38:19,353 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-19 10:38:19,372 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-19 10:38:19,373 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-19 10:38:19,393 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-19 10:38:19,393 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-19 10:38:19,412 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-19 10:38:19,413 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-19 10:38:20,517 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-19 10:38:20,519 - services.translation_routes - INFO - [translation_routes.py:153] - Request 631f6d95: Background music analysis: {'has_background_music': True, 'music_confidence': 0.3477175465611055, 'feature_scores': {'spectral_flatness': 0.1390788085613864, 'rhythm_regularity': 0.023657718120805367, 'bass_presence': 0.137733629472295, 'temporal_stability': 0.047247390406618676}, 'speech_vs_music': {'speech_prominence': 2.1681845428842896, 'speech_band_energy': 6.937399632533925e-08, 'music_band_energy': 3.189635222611287e-08}}
2025-02-19 10:38:20,519 - services.translation_strategy - INFO - [translation_strategy.py:23] - Content Type: speech_with_music (Music confidence: 0.3477175465611055)
2025-02-19 10:38:20,519 - services.translation_routes - INFO - [translation_routes.py:165] - Request 631f6d95: Audio characteristics heard: {'content_type': 'speech_with_music', 'heard_characteristics': {'music': {'detected': True, 'confidence': 0.3477175465611055}}}
2025-02-19 10:38:20,519 - services.translation_routes - INFO - [translation_routes.py:167] - Request 631f6d95: Audio processed successfully
2025-02-19 10:38:20,556 - services.translation_routes - INFO - [translation_routes.py:184] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-02-19 10:38:49,763 - services.translation_routes - INFO - [translation_routes.py:223] - Source text: When you choose pricing, it's important to keep it simple. Overcomplicated pricing will kill the sales process. In general, monthly recurring revenue is preferable to annual recurrent revenue, and that's because during an economic downturn, your revenue is protected at least until the contract is renewed, and then you can have a dispute with the customer about whether it is worth renewing.
2025-02-19 10:39:24,091 - services.translation_routes - INFO - [translation_routes.py:243] - Target text: Quand vous choisissez le prix, c'est important de le garder simple, trop compliqu√©. C'est pr√©f√©rable √† un prix bas√© sur l'usage, parce que votre revenu est prot√©g√© au moins jusqu'√† ce que le contrat soit renouvel√©, alors que vous pouvez avoir un d√©bat avec le client sur le fait qu'il vaut la peine d'√™tre renouvel√©. Il y a un risque r√©el que vos revenus tombent dans un mauvais mois et les investisseurs s'inqui√®tent pour √ßa.
2025-02-19 10:40:05,533 - services.translation_routes - INFO - [translation_routes.py:267] - Processing tuple output from model
2025-02-19 10:40:05,570 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-19 10:40:05,571 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-19 10:40:05,581 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-19 10:40:05,582 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-19 10:40:05,593 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-19 10:40:05,594 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-19 10:40:05,606 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-19 10:40:05,607 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-19 10:40:06,091 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-19 10:40:06,091 - services.translation_routes - INFO - [translation_routes.py:294] - 
==================================================
2025-02-19 10:40:06,091 - services.translation_routes - INFO - [translation_routes.py:295] - Translated Audio Quality Report
2025-02-19 10:40:06,091 - services.translation_routes - INFO - [translation_routes.py:296] - ==================================================
2025-02-19 10:40:06,091 - services.translation_routes - INFO - [translation_routes.py:297] - Request ID: 631f6d95
2025-02-19 10:40:06,091 - services.translation_routes - INFO - [translation_routes.py:298] - Target Language: fra
2025-02-19 10:40:06,092 - services.translation_routes - INFO - [translation_routes.py:299] - --------------------------------------------------
2025-02-19 10:40:06,092 - services.translation_routes - INFO - [translation_routes.py:300] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.828
- Avg Amplitude: 0.059
- Rms Level: 0.092
- Crest Factor: 8.982
- Zero Crossings: 36391.000
- Silence Percentage: 8.468
- Clipping Points: 0.000
- Dynamic Range: 126.465

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.026
  - Temporal Flatness: 0.015

- Volume Metrics:
  - Volume Stability: 0.302
  - Volume Range: 307.321
  - Volume Variations: 0.053

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.020525924192636
- Background Noise: 4.59279718932241
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.9615254402160645, 'stability': 3.5726771354675293, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.0, 'distinction': 0.01849990151822567}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.513
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.003
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-02-19 10:40:06,092 - services.translation_routes - INFO - [translation_routes.py:301] - ==================================================

2025-02-19 10:40:06,092 - services.translation_routes - INFO - [translation_routes.py:307] - Request 631f6d95: Audio output processed successfully
2025-02-19 10:40:06,098 - services.translation_routes - INFO - [translation_routes.py:362] - Request 631f6d95: Response prepared successfully
2025-02-19 10:40:06,098 - services.translation_routes - INFO - [translation_routes.py:375] - Request 631f6d95 completed in 108.31s
2025-02-19 10:40:06,101 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 108.32s, Memory Change: 750.92MB
2025-02-19 10:40:06,101 - __main__ - INFO - [app.py:278] - Request to /translate took 152.25s
2025-02-19 14:00:58,415 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.52MB
2025-02-19 14:00:58,417 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-02-19 14:00:58,422 - services.audio_link_routes - INFO - [audio_link_routes.py:226] - Processing URL: https://www.tiktok.com/@fightjoe/video/7127311328095522053
2025-02-19 14:00:58,424 - services.audio_link_routes - INFO - [audio_link_routes.py:246] - Processing TikTok URL
2025-02-19 14:00:58,424 - services.audio_link_routes - INFO - [audio_link_routes.py:130] - Using options for tiktok: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpzmc0vqzq/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8, 'http_headers': {'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'Accept-Language': 'en-us,en;q=0.5', 'Accept-Encoding': 'gzip,deflate', 'Accept-Charset': 'ISO-8859-1,utf-8;q=0.7,*;q=0.7'}, 'nocheckcertificate': True, 'ignoreerrors': False, 'geo_bypass': True, 'extractor_args': {'tiktok': {'api_hostname': 'api22-normal-c-alisg.tiktokv.com', 'app_name': 'trill', 'app_version': '34.1.2', 'manifest_app_version': '2023401020', 'app_info': '1234567890123456789/trill///1180', 'device_id': '1425764577893515204'}}}
2025-02-19 14:01:02,239 - services.audio_link_routes - INFO - [audio_link_routes.py:143] - Successfully downloaded tiktok content
2025-02-19 14:01:02,239 - services.audio_link_routes - INFO - [audio_link_routes.py:162] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpzmc0vqzq/output.wav
2025-02-19 14:01:02,244 - services.audio_link_routes - INFO - [audio_link_routes.py:174] - Successfully converted audio to WAV
2025-02-19 14:01:02,245 - services.audio_link_routes - INFO - [audio_link_routes.py:252] - Successfully processed audio
2025-02-19 14:01:02,245 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 3.82s, Memory Change: 53.03MB
2025-02-19 14:01:02,245 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 3.82s
2025-02-19 14:01:03,644 - __main__ - INFO - [app.py:278] - Request to /translate took 0.00s
2025-02-19 14:01:03,652 - services.model_manager - INFO - [model_manager.py:211] - Model inactive for too long, reloading...
2025-02-19 14:01:03,652 - services.model_manager - INFO - [model_manager.py:120] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-02-19 14:01:18,302 - services.model_manager - INFO - [model_manager.py:184] - Models loaded on CPU
2025-02-19 14:01:18,302 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-19 14:01:18,303 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-19 14:01:42,423 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-19 14:01:42,424 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-19 14:01:59,698 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-19 14:01:59,698 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-19 14:01:59,701 - services.model_manager - INFO - [model_manager.py:190] - Model initialization successful
2025-02-19 14:01:59,701 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-19 14:01:59,702 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-19 14:02:16,480 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-19 14:02:16,481 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-19 14:02:32,110 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-19 14:02:32,111 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-19 14:02:32,223 - services.translation_routes - INFO - [translation_routes.py:36] - Starting translation request 702dac6a
2025-02-19 14:02:32,223 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-02-19 14:02:32,224 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-02-19 14:02:32,225 - services.translation_routes - INFO - [translation_routes.py:97] - Request 702dac6a: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpwja33_93.wav
2025-02-19 14:02:32,225 - services.audio_processor - INFO - [audio_processor.py:136] - Audio duration: 6.57 seconds
2025-02-19 14:02:32,225 - services.translation_routes - INFO - [translation_routes.py:112] - Request 702dac6a: Beginning audio processing with diagnostics
2025-02-19 14:02:32,226 - services.audio_processor - INFO - [audio_processor.py:280] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpwja33_93.wav
2025-02-19 14:02:32,226 - services.audio_processor - INFO - [audio_processor.py:282] - Audio info - Sample rate: 16000, Channels: 1
2025-02-19 14:02:32,226 - services.audio_processor - INFO - [audio_processor.py:291] - Original audio shape: torch.Size([1, 105163]), Frequency: 16000Hz
2025-02-19 14:02:32,231 - services.audio_processor - INFO - [audio_processor.py:449] - Base audio processing successful, proceeding with enhancement
2025-02-19 14:02:32,234 - services.audio_processor - INFO - [audio_processor.py:457] - Background music analysis: {'has_background_music': False, 'music_confidence': 0.15608341036219223, 'feature_scores': {'spectral_flatness': 0.03820588165673722, 'rhythm_regularity': 0.023762376237623763, 'bass_presence': 0.039862824445829455, 'temporal_stability': 0.054252328022001785}, 'speech_vs_music': {'speech_prominence': 7.497730333222908, 'speech_band_energy': 2.2766175789001863e-07, 'music_band_energy': 3.0264089900811086e-08}}
2025-02-19 14:02:32,234 - services.audio_processor - INFO - [audio_processor.py:460] - Applying speech-optimized spectral enhancement for fra
2025-02-19 14:02:32,245 - services.audio_processor - INFO - [audio_processor.py:470] - Analyzing audio quality...
2025-02-19 14:02:32,255 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-19 14:02:32,255 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-19 14:02:32,259 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-19 14:02:32,259 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-19 14:02:32,263 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-19 14:02:32,263 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-19 14:02:32,267 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-19 14:02:32,267 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-19 14:02:32,413 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-19 14:02:32,414 - services.translation_routes - INFO - [translation_routes.py:123] - 
==================================================
2025-02-19 14:02:32,414 - services.translation_routes - INFO - [translation_routes.py:124] - Input Audio Quality Report
2025-02-19 14:02:32,414 - services.translation_routes - INFO - [translation_routes.py:125] - ==================================================
2025-02-19 14:02:32,414 - services.translation_routes - INFO - [translation_routes.py:126] - Request ID: 702dac6a
2025-02-19 14:02:32,414 - services.translation_routes - INFO - [translation_routes.py:127] - Target Language: fra
2025-02-19 14:02:32,414 - services.translation_routes - INFO - [translation_routes.py:128] - --------------------------------------------------
2025-02-19 14:02:32,414 - services.translation_routes - INFO - [translation_routes.py:129] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.026
- Rms Level: 0.076
- Crest Factor: 12.530
- Zero Crossings: 29106.000
- Silence Percentage: 62.741
- Clipping Points: 0.000
- Dynamic Range: 6753166.765

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.082
  - Temporal Flatness: 0.024

- Volume Metrics:
  - Volume Stability: -0.671
  - Volume Range: 28777495.027
  - Volume Variations: 0.065

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.012101101788277
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 1.0195544958114624, 'stability': 3.234647035598755, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.004738867282867432, 'distinction': 0.9893258810043335}
  - Description: Strong nasal resonance. Unstable nasal resonance. Clear distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.653
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.045
  - Rhythm Quality: 0.090
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.007
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-02-19 14:02:32,414 - services.translation_routes - INFO - [translation_routes.py:130] - ==================================================

2025-02-19 14:02:32,414 - services.audio_processor - INFO - [audio_processor.py:280] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpwja33_93.wav
2025-02-19 14:02:32,415 - services.audio_processor - INFO - [audio_processor.py:282] - Audio info - Sample rate: 16000, Channels: 1
2025-02-19 14:02:32,415 - services.audio_processor - INFO - [audio_processor.py:291] - Original audio shape: torch.Size([1, 105163]), Frequency: 16000Hz
2025-02-19 14:02:32,419 - services.audio_processor - INFO - [audio_processor.py:449] - Base audio processing successful, proceeding with enhancement
2025-02-19 14:02:32,424 - services.audio_processor - INFO - [audio_processor.py:457] - Background music analysis: {'has_background_music': False, 'music_confidence': 0.15608341036219223, 'feature_scores': {'spectral_flatness': 0.03820588165673722, 'rhythm_regularity': 0.023762376237623763, 'bass_presence': 0.039862824445829455, 'temporal_stability': 0.054252328022001785}, 'speech_vs_music': {'speech_prominence': 7.497730333222908, 'speech_band_energy': 2.2766175789001863e-07, 'music_band_energy': 3.0264089900811086e-08}}
2025-02-19 14:02:32,424 - services.audio_processor - INFO - [audio_processor.py:460] - Applying speech-optimized spectral enhancement for fra
2025-02-19 14:02:32,435 - services.audio_processor - INFO - [audio_processor.py:470] - Analyzing audio quality...
2025-02-19 14:02:32,446 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-19 14:02:32,446 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-19 14:02:32,451 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-19 14:02:32,451 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-19 14:02:32,455 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-19 14:02:32,456 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-19 14:02:32,461 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-19 14:02:32,461 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-19 14:02:32,607 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-19 14:02:32,608 - services.translation_routes - INFO - [translation_routes.py:153] - Request 702dac6a: Background music analysis: {'has_background_music': False, 'music_confidence': 0.15608341036219223, 'feature_scores': {'spectral_flatness': 0.03820588165673722, 'rhythm_regularity': 0.023762376237623763, 'bass_presence': 0.039862824445829455, 'temporal_stability': 0.054252328022001785}, 'speech_vs_music': {'speech_prominence': 7.497730333222908, 'speech_band_energy': 2.2766175789001863e-07, 'music_band_energy': 3.0264089900811086e-08}}
2025-02-19 14:02:32,608 - services.translation_strategy - INFO - [translation_strategy.py:23] - Content Type: speech_with_music (Music confidence: 0.15608341036219223)
2025-02-19 14:02:32,608 - services.translation_routes - INFO - [translation_routes.py:165] - Request 702dac6a: Audio characteristics heard: {'content_type': 'speech_with_music', 'heard_characteristics': {'music': {'detected': False, 'confidence': 0.15608341036219223}}}
2025-02-19 14:02:32,608 - services.translation_routes - INFO - [translation_routes.py:167] - Request 702dac6a: Audio processed successfully
2025-02-19 14:02:32,616 - services.translation_routes - INFO - [translation_routes.py:184] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-02-19 14:02:39,054 - services.translation_routes - INFO - [translation_routes.py:223] - Source text: if you wouldn't fight what do you think it would be I would definitely be a diabetic
2025-02-19 14:02:46,217 - services.translation_routes - INFO - [translation_routes.py:243] - Target text: Si tu ne faisais pas √ßa, ce que tu penses que tu pourrais faire, je serais d√©finitivement diab√©tique.
2025-02-19 14:02:53,922 - services.translation_routes - INFO - [translation_routes.py:267] - Processing tuple output from model
2025-02-19 14:02:53,932 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-19 14:02:53,932 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-19 14:02:53,935 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-19 14:02:53,935 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-19 14:02:53,939 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-19 14:02:53,939 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-19 14:02:53,942 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-19 14:02:53,942 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-19 14:02:54,045 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-19 14:02:54,045 - services.translation_routes - INFO - [translation_routes.py:294] - 
==================================================
2025-02-19 14:02:54,045 - services.translation_routes - INFO - [translation_routes.py:295] - Translated Audio Quality Report
2025-02-19 14:02:54,045 - services.translation_routes - INFO - [translation_routes.py:296] - ==================================================
2025-02-19 14:02:54,045 - services.translation_routes - INFO - [translation_routes.py:297] - Request ID: 702dac6a
2025-02-19 14:02:54,045 - services.translation_routes - INFO - [translation_routes.py:298] - Target Language: fra
2025-02-19 14:02:54,045 - services.translation_routes - INFO - [translation_routes.py:299] - --------------------------------------------------
2025-02-19 14:02:54,045 - services.translation_routes - INFO - [translation_routes.py:300] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.405
- Avg Amplitude: 0.052
- Rms Level: 0.083
- Crest Factor: 4.885
- Zero Crossings: 9615.000
- Silence Percentage: 10.448
- Clipping Points: 0.000
- Dynamic Range: 156.754

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.389
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.024
  - Temporal Flatness: 0.011

- Volume Metrics:
  - Volume Stability: 0.230
  - Volume Range: 163.870
  - Volume Variations: 0.051

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0339318321721236
- Background Noise: 2.9541653731947073
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.594379723072052, 'stability': 3.1576290130615234, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.0, 'distinction': 1.0}
  - Description: Moderate nasal resonance. Unstable nasal resonance. Clear distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.541
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.002
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-02-19 14:02:54,045 - services.translation_routes - INFO - [translation_routes.py:301] - ==================================================

2025-02-19 14:02:54,045 - services.translation_routes - INFO - [translation_routes.py:307] - Request 702dac6a: Audio output processed successfully
2025-02-19 14:02:54,048 - services.translation_routes - INFO - [translation_routes.py:362] - Request 702dac6a: Response prepared successfully
2025-02-19 14:02:54,048 - services.translation_routes - INFO - [translation_routes.py:375] - Request 702dac6a completed in 21.82s
2025-02-19 14:02:54,048 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 21.82s, Memory Change: 10091.89MB
2025-02-19 14:02:54,048 - __main__ - INFO - [app.py:278] - Request to /translate took 110.40s
2025-02-20 20:41:08,556 - __main__ - INFO - [app.py:481] - Metrics server started on port 8000
2025-02-20 20:41:08,557 - services.model_manager - INFO - [model_manager.py:120] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-02-20 20:41:22,432 - services.model_manager - INFO - [model_manager.py:184] - Models loaded on CPU
2025-02-20 20:41:22,432 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-20 20:41:22,436 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-20 20:41:51,133 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-20 20:41:51,134 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-20 20:42:07,041 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-20 20:42:07,042 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-20 20:42:07,043 - services.model_manager - INFO - [model_manager.py:190] - Model initialization successful
2025-02-20 20:42:07,043 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-20 20:42:07,043 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-20 20:42:28,589 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-20 20:42:28,590 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-20 20:42:45,698 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-20 20:42:45,698 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-20 20:42:45,702 - __main__ - INFO - [app.py:432] - Cleanup complete: removed 0 files, freed 0.00MB
2025-02-20 20:42:45,702 - __main__ - INFO - [app.py:505] - ==================================================
2025-02-20 20:42:45,702 - __main__ - INFO - [app.py:506] - Starting LinguaSync Backend
2025-02-20 20:42:45,702 - __main__ - INFO - [app.py:507] - Starting Flask app on port 5001 using cpu
2025-02-20 20:42:45,702 - __main__ - INFO - [app.py:508] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-02-20 20:42:45,702 - __main__ - INFO - [app.py:509] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-02-20 20:42:45,702 - __main__ - INFO - [app.py:510] - Maximum audio length: 300 seconds
2025-02-20 20:42:45,702 - __main__ - INFO - [app.py:511] - Sample rate: 16000 Hz
2025-02-20 20:42:45,702 - __main__ - INFO - [app.py:515] - System memory: 36.0GB total, 15.1GB available
2025-02-20 20:42:45,702 - __main__ - INFO - [app.py:516] - CPU cores: 11
2025-02-20 20:42:45,702 - __main__ - INFO - [app.py:524] - Configuration:
2025-02-20 20:42:45,702 - __main__ - INFO - [app.py:525] - - Debug mode: False
2025-02-20 20:42:45,702 - __main__ - INFO - [app.py:526] - - CORS enabled: True
2025-02-20 20:42:45,702 - __main__ - INFO - [app.py:527] - - Rate limiting: 10 requests per minute
2025-02-20 20:42:45,702 - __main__ - INFO - [app.py:528] - - Metrics enabled: True (port 8000)
2025-02-20 20:42:45,702 - __main__ - INFO - [app.py:530] - ==================================================
2025-02-20 20:53:51,532 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-02-20 20:53:51,532 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-02-20 20:53:51,532 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-20 20:53:51,533 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-20 20:54:07,193 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-20 20:54:07,194 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-20 20:54:23,408 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-20 20:54:23,408 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-20 20:54:23,410 - services.utils - INFO - [utils.py:57] - Performance - Function: process_video, Duration: 31.88s, Memory Change: 360.92MB
2025-02-20 20:54:23,410 - __main__ - INFO - [app.py:279] - Request to /process-video took 31.88s
2025-02-20 20:54:23,905 - services.audio_processor - INFO - [audio_processor.py:280] - Loading audio from: temp/temp_audio.wav
2025-02-20 20:54:23,907 - services.audio_processor - INFO - [audio_processor.py:282] - Audio info - Sample rate: 16000, Channels: 1
2025-02-20 20:54:23,910 - services.audio_processor - INFO - [audio_processor.py:291] - Original audio shape: torch.Size([1, 223260]), Frequency: 16000Hz
2025-02-20 20:54:33,074 - services.video_routes - ERROR - [video_routes.py:172] - Audio translation failed: 'tuple' object has no attribute 'waveform'
2025-02-20 20:54:33,074 - services.video_routes - ERROR - [video_routes.py:128] - Video processing failed: Failed to translate audio
2025-02-20 21:45:10,932 - __main__ - INFO - [app.py:218] - Received SIGINT signal
2025-02-20 21:45:10,933 - __main__ - INFO - [app.py:203] - Initiating graceful shutdown...
2025-02-20 21:45:15,939 - __main__ - INFO - [app.py:450] - Application shutting down...
2025-02-20 21:45:15,941 - services.model_manager - INFO - [model_manager.py:233] - Cleaning up model resources
2025-02-20 21:45:15,941 - services.model_manager - INFO - [model_manager.py:246] - Model cleanup completed successfully
2025-02-20 21:45:15,943 - __main__ - INFO - [app.py:432] - Cleanup complete: removed 0 files, freed 0.00MB
2025-02-20 21:45:15,944 - __main__ - INFO - [app.py:464] - Cleanup completed successfully
2025-02-20 21:45:15,945 - __main__ - INFO - [app.py:207] - Graceful shutdown completed
2025-02-20 21:45:15,948 - __main__ - INFO - [app.py:450] - Application shutting down...
2025-02-20 21:45:15,949 - services.model_manager - INFO - [model_manager.py:233] - Cleaning up model resources
2025-02-20 21:45:15,949 - services.model_manager - INFO - [model_manager.py:246] - Model cleanup completed successfully
2025-02-20 21:45:15,949 - __main__ - INFO - [app.py:432] - Cleanup complete: removed 0 files, freed 0.00MB
2025-02-20 21:45:15,950 - __main__ - INFO - [app.py:464] - Cleanup completed successfully
2025-02-20 21:45:15,950 - __main__ - INFO - [app.py:450] - Application shutting down...
2025-02-20 21:45:15,950 - services.model_manager - INFO - [model_manager.py:233] - Cleaning up model resources
2025-02-20 21:45:15,951 - services.model_manager - INFO - [model_manager.py:246] - Model cleanup completed successfully
2025-02-20 21:45:15,951 - __main__ - INFO - [app.py:432] - Cleanup complete: removed 0 files, freed 0.00MB
2025-02-20 21:45:15,951 - __main__ - INFO - [app.py:464] - Cleanup completed successfully
2025-02-20 21:48:17,898 - __main__ - INFO - [app.py:481] - Metrics server started on port 8000
2025-02-20 21:48:17,899 - services.model_manager - INFO - [model_manager.py:120] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-02-20 21:48:30,423 - services.model_manager - INFO - [model_manager.py:184] - Models loaded on CPU
2025-02-20 21:48:30,423 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-20 21:48:30,423 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-20 21:48:52,659 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-20 21:48:52,659 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-20 21:49:12,075 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-20 21:49:12,075 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-20 21:49:12,079 - services.model_manager - INFO - [model_manager.py:190] - Model initialization successful
2025-02-20 21:49:12,079 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-20 21:49:12,079 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-20 21:49:31,319 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-20 21:49:31,319 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-20 21:49:46,963 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-20 21:49:46,963 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-20 21:49:46,967 - __main__ - INFO - [app.py:432] - Cleanup complete: removed 0 files, freed 0.00MB
2025-02-20 21:49:46,967 - __main__ - INFO - [app.py:505] - ==================================================
2025-02-20 21:49:46,967 - __main__ - INFO - [app.py:506] - Starting LinguaSync Backend
2025-02-20 21:49:46,967 - __main__ - INFO - [app.py:507] - Starting Flask app on port 5001 using cpu
2025-02-20 21:49:46,967 - __main__ - INFO - [app.py:508] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-02-20 21:49:46,967 - __main__ - INFO - [app.py:509] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-02-20 21:49:46,967 - __main__ - INFO - [app.py:510] - Maximum audio length: 300 seconds
2025-02-20 21:49:46,967 - __main__ - INFO - [app.py:511] - Sample rate: 16000 Hz
2025-02-20 21:49:46,967 - __main__ - INFO - [app.py:515] - System memory: 36.0GB total, 14.8GB available
2025-02-20 21:49:46,967 - __main__ - INFO - [app.py:516] - CPU cores: 11
2025-02-20 21:49:46,967 - __main__ - INFO - [app.py:524] - Configuration:
2025-02-20 21:49:46,967 - __main__ - INFO - [app.py:525] - - Debug mode: False
2025-02-20 21:49:46,967 - __main__ - INFO - [app.py:526] - - CORS enabled: True
2025-02-20 21:49:46,967 - __main__ - INFO - [app.py:527] - - Rate limiting: 10 requests per minute
2025-02-20 21:49:46,967 - __main__ - INFO - [app.py:528] - - Metrics enabled: True (port 8000)
2025-02-20 21:49:46,967 - __main__ - INFO - [app.py:530] - ==================================================
2025-02-20 21:51:50,016 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-02-20 21:51:50,016 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-02-20 21:51:50,017 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-20 21:51:50,017 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-20 21:52:10,122 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-20 21:52:10,122 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-20 21:52:27,850 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-20 21:52:27,851 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-20 21:52:27,852 - services.utils - INFO - [utils.py:57] - Performance - Function: process_video, Duration: 37.84s, Memory Change: 13.12MB
2025-02-20 21:52:27,852 - __main__ - INFO - [app.py:279] - Request to /process-video took 37.84s
2025-02-20 21:52:28,332 - services.audio_processor - INFO - [audio_processor.py:280] - Loading audio from: temp/temp_audio.wav
2025-02-20 21:52:28,332 - services.audio_processor - INFO - [audio_processor.py:282] - Audio info - Sample rate: 16000, Channels: 1
2025-02-20 21:52:28,333 - services.audio_processor - INFO - [audio_processor.py:291] - Original audio shape: torch.Size([1, 223260]), Frequency: 16000Hz
2025-02-20 21:52:40,745 - services.video_routes - ERROR - [video_routes.py:128] - Video processing failed: expected str, bytes or os.PathLike object, not Tensor
2025-02-20 22:08:41,640 - __main__ - INFO - [app.py:218] - Received SIGINT signal
2025-02-20 22:08:41,641 - __main__ - INFO - [app.py:203] - Initiating graceful shutdown...
2025-02-20 22:08:46,646 - __main__ - INFO - [app.py:450] - Application shutting down...
2025-02-20 22:08:46,647 - services.model_manager - INFO - [model_manager.py:233] - Cleaning up model resources
2025-02-20 22:08:46,647 - services.model_manager - INFO - [model_manager.py:246] - Model cleanup completed successfully
2025-02-20 22:08:46,648 - __main__ - INFO - [app.py:432] - Cleanup complete: removed 0 files, freed 0.00MB
2025-02-20 22:08:46,649 - __main__ - INFO - [app.py:464] - Cleanup completed successfully
2025-02-20 22:08:46,649 - __main__ - INFO - [app.py:207] - Graceful shutdown completed
2025-02-20 22:08:46,650 - __main__ - INFO - [app.py:450] - Application shutting down...
2025-02-20 22:08:46,650 - services.model_manager - INFO - [model_manager.py:233] - Cleaning up model resources
2025-02-20 22:08:46,650 - services.model_manager - INFO - [model_manager.py:246] - Model cleanup completed successfully
2025-02-20 22:08:46,651 - __main__ - INFO - [app.py:432] - Cleanup complete: removed 0 files, freed 0.00MB
2025-02-20 22:08:46,652 - __main__ - INFO - [app.py:464] - Cleanup completed successfully
2025-02-20 22:08:46,652 - __main__ - INFO - [app.py:450] - Application shutting down...
2025-02-20 22:08:46,652 - services.model_manager - INFO - [model_manager.py:233] - Cleaning up model resources
2025-02-20 22:08:46,652 - services.model_manager - INFO - [model_manager.py:246] - Model cleanup completed successfully
2025-02-20 22:08:46,653 - __main__ - INFO - [app.py:432] - Cleanup complete: removed 0 files, freed 0.00MB
2025-02-20 22:08:46,653 - __main__ - INFO - [app.py:464] - Cleanup completed successfully
2025-02-20 22:08:59,709 - __main__ - INFO - [app.py:481] - Metrics server started on port 8000
2025-02-20 22:08:59,709 - services.model_manager - INFO - [model_manager.py:120] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-02-20 22:09:12,276 - services.model_manager - INFO - [model_manager.py:184] - Models loaded on CPU
2025-02-20 22:09:12,276 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-20 22:09:12,277 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-20 22:09:28,360 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-20 22:09:28,360 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-20 22:09:45,926 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-20 22:09:45,926 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-20 22:09:45,929 - services.model_manager - INFO - [model_manager.py:190] - Model initialization successful
2025-02-20 22:09:45,929 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-20 22:09:45,930 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-20 22:10:01,464 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-20 22:10:01,464 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-20 22:10:19,118 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-20 22:10:19,118 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-20 22:10:19,121 - __main__ - INFO - [app.py:432] - Cleanup complete: removed 0 files, freed 0.00MB
2025-02-20 22:10:19,121 - __main__ - INFO - [app.py:505] - ==================================================
2025-02-20 22:10:19,121 - __main__ - INFO - [app.py:506] - Starting LinguaSync Backend
2025-02-20 22:10:19,122 - __main__ - INFO - [app.py:507] - Starting Flask app on port 5001 using cpu
2025-02-20 22:10:19,122 - __main__ - INFO - [app.py:508] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-02-20 22:10:19,122 - __main__ - INFO - [app.py:509] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-02-20 22:10:19,122 - __main__ - INFO - [app.py:510] - Maximum audio length: 300 seconds
2025-02-20 22:10:19,122 - __main__ - INFO - [app.py:511] - Sample rate: 16000 Hz
2025-02-20 22:10:19,122 - __main__ - INFO - [app.py:515] - System memory: 36.0GB total, 16.3GB available
2025-02-20 22:10:19,122 - __main__ - INFO - [app.py:516] - CPU cores: 11
2025-02-20 22:10:19,122 - __main__ - INFO - [app.py:524] - Configuration:
2025-02-20 22:10:19,122 - __main__ - INFO - [app.py:525] - - Debug mode: False
2025-02-20 22:10:19,122 - __main__ - INFO - [app.py:526] - - CORS enabled: True
2025-02-20 22:10:19,122 - __main__ - INFO - [app.py:527] - - Rate limiting: 10 requests per minute
2025-02-20 22:10:19,122 - __main__ - INFO - [app.py:528] - - Metrics enabled: True (port 8000)
2025-02-20 22:10:19,122 - __main__ - INFO - [app.py:530] - ==================================================
2025-02-20 22:12:25,061 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-02-20 22:12:25,061 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-02-20 22:12:25,061 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-20 22:12:25,062 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-20 22:12:40,949 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-20 22:12:40,949 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-20 22:12:58,995 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-20 22:12:58,995 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-20 22:12:58,998 - services.utils - INFO - [utils.py:57] - Performance - Function: process_video, Duration: 33.94s, Memory Change: 50.20MB
2025-02-20 22:12:58,998 - __main__ - INFO - [app.py:279] - Request to /process-video took 33.94s
2025-02-20 22:12:59,151 - services.audio_processor - INFO - [audio_processor.py:280] - Loading audio from: temp/temp_audio.wav
2025-02-20 22:12:59,152 - services.audio_processor - INFO - [audio_processor.py:282] - Audio info - Sample rate: 16000, Channels: 1
2025-02-20 22:12:59,153 - services.audio_processor - INFO - [audio_processor.py:291] - Original audio shape: torch.Size([1, 223260]), Frequency: 16000Hz
2025-02-20 22:28:51,887 - __main__ - INFO - [app.py:218] - Received SIGINT signal
2025-02-20 22:28:51,888 - __main__ - INFO - [app.py:203] - Initiating graceful shutdown...
2025-02-20 22:28:56,894 - __main__ - INFO - [app.py:450] - Application shutting down...
2025-02-20 22:28:56,894 - services.model_manager - INFO - [model_manager.py:233] - Cleaning up model resources
2025-02-20 22:28:56,894 - services.model_manager - INFO - [model_manager.py:246] - Model cleanup completed successfully
2025-02-20 22:28:56,895 - __main__ - INFO - [app.py:432] - Cleanup complete: removed 0 files, freed 0.00MB
2025-02-20 22:28:56,896 - __main__ - INFO - [app.py:464] - Cleanup completed successfully
2025-02-20 22:28:56,896 - __main__ - INFO - [app.py:207] - Graceful shutdown completed
2025-02-20 22:28:56,897 - __main__ - INFO - [app.py:450] - Application shutting down...
2025-02-20 22:28:56,897 - services.model_manager - INFO - [model_manager.py:233] - Cleaning up model resources
2025-02-20 22:28:56,897 - services.model_manager - INFO - [model_manager.py:246] - Model cleanup completed successfully
2025-02-20 22:28:56,898 - __main__ - INFO - [app.py:432] - Cleanup complete: removed 0 files, freed 0.00MB
2025-02-20 22:28:56,898 - __main__ - INFO - [app.py:464] - Cleanup completed successfully
2025-02-20 22:28:56,898 - __main__ - INFO - [app.py:450] - Application shutting down...
2025-02-20 22:28:56,898 - services.model_manager - INFO - [model_manager.py:233] - Cleaning up model resources
2025-02-20 22:28:56,898 - services.model_manager - INFO - [model_manager.py:246] - Model cleanup completed successfully
2025-02-20 22:28:56,899 - __main__ - INFO - [app.py:432] - Cleanup complete: removed 0 files, freed 0.00MB
2025-02-20 22:28:56,899 - __main__ - INFO - [app.py:464] - Cleanup completed successfully
2025-02-20 22:29:32,510 - __main__ - INFO - [app.py:481] - Metrics server started on port 8000
2025-02-20 22:29:32,510 - services.model_manager - INFO - [model_manager.py:120] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-02-20 22:29:45,680 - services.model_manager - INFO - [model_manager.py:184] - Models loaded on CPU
2025-02-20 22:29:45,680 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-20 22:29:45,681 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-20 22:30:04,620 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-20 22:30:04,620 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-20 22:30:23,309 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-20 22:30:23,309 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-20 22:30:23,312 - services.model_manager - INFO - [model_manager.py:190] - Model initialization successful
2025-02-20 22:30:23,312 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-20 22:30:23,312 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-20 22:30:43,906 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-20 22:30:43,906 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-20 22:30:59,700 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-20 22:30:59,701 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-20 22:30:59,704 - __main__ - INFO - [app.py:432] - Cleanup complete: removed 0 files, freed 0.00MB
2025-02-20 22:30:59,704 - __main__ - INFO - [app.py:505] - ==================================================
2025-02-20 22:30:59,704 - __main__ - INFO - [app.py:506] - Starting LinguaSync Backend
2025-02-20 22:30:59,704 - __main__ - INFO - [app.py:507] - Starting Flask app on port 5001 using cpu
2025-02-20 22:30:59,704 - __main__ - INFO - [app.py:508] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-02-20 22:30:59,704 - __main__ - INFO - [app.py:509] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-02-20 22:30:59,704 - __main__ - INFO - [app.py:510] - Maximum audio length: 300 seconds
2025-02-20 22:30:59,704 - __main__ - INFO - [app.py:511] - Sample rate: 16000 Hz
2025-02-20 22:30:59,704 - __main__ - INFO - [app.py:515] - System memory: 36.0GB total, 13.3GB available
2025-02-20 22:30:59,704 - __main__ - INFO - [app.py:516] - CPU cores: 11
2025-02-20 22:30:59,704 - __main__ - INFO - [app.py:524] - Configuration:
2025-02-20 22:30:59,704 - __main__ - INFO - [app.py:525] - - Debug mode: False
2025-02-20 22:30:59,704 - __main__ - INFO - [app.py:526] - - CORS enabled: True
2025-02-20 22:30:59,704 - __main__ - INFO - [app.py:527] - - Rate limiting: 10 requests per minute
2025-02-20 22:30:59,704 - __main__ - INFO - [app.py:528] - - Metrics enabled: True (port 8000)
2025-02-20 22:30:59,704 - __main__ - INFO - [app.py:530] - ==================================================
2025-02-20 22:38:14,752 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-02-20 22:38:14,752 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-02-20 22:38:14,753 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-20 22:38:14,754 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-20 22:38:31,316 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-20 22:38:31,316 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-20 22:38:49,532 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-20 22:38:49,532 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-20 22:38:49,535 - services.utils - INFO - [utils.py:57] - Performance - Function: process_video, Duration: 34.78s, Memory Change: 537.91MB
2025-02-20 22:38:49,535 - __main__ - INFO - [app.py:279] - Request to /process-video took 34.78s
2025-02-20 22:38:49,709 - services.audio_processor - INFO - [audio_processor.py:280] - Loading audio from: temp/temp_audio.wav
2025-02-20 22:38:49,709 - services.audio_processor - INFO - [audio_processor.py:282] - Audio info - Sample rate: 16000, Channels: 1
2025-02-20 22:38:49,711 - services.audio_processor - INFO - [audio_processor.py:291] - Original audio shape: torch.Size([1, 223260]), Frequency: 16000Hz
2025-02-20 23:03:31,408 - __main__ - INFO - [app.py:218] - Received SIGINT signal
2025-02-20 23:03:31,410 - __main__ - INFO - [app.py:203] - Initiating graceful shutdown...
2025-02-20 23:03:36,416 - __main__ - INFO - [app.py:450] - Application shutting down...
2025-02-20 23:03:36,417 - services.model_manager - INFO - [model_manager.py:233] - Cleaning up model resources
2025-02-20 23:03:36,418 - services.model_manager - INFO - [model_manager.py:246] - Model cleanup completed successfully
2025-02-20 23:03:36,420 - __main__ - INFO - [app.py:432] - Cleanup complete: removed 0 files, freed 0.00MB
2025-02-20 23:03:36,421 - __main__ - INFO - [app.py:464] - Cleanup completed successfully
2025-02-20 23:03:36,421 - __main__ - INFO - [app.py:207] - Graceful shutdown completed
2025-02-20 23:03:36,423 - __main__ - INFO - [app.py:450] - Application shutting down...
2025-02-20 23:03:36,423 - services.model_manager - INFO - [model_manager.py:233] - Cleaning up model resources
2025-02-20 23:03:36,423 - services.model_manager - INFO - [model_manager.py:246] - Model cleanup completed successfully
2025-02-20 23:03:36,424 - __main__ - INFO - [app.py:432] - Cleanup complete: removed 0 files, freed 0.00MB
2025-02-20 23:03:36,424 - __main__ - INFO - [app.py:464] - Cleanup completed successfully
2025-02-20 23:03:36,424 - __main__ - INFO - [app.py:450] - Application shutting down...
2025-02-20 23:03:36,424 - services.model_manager - INFO - [model_manager.py:233] - Cleaning up model resources
2025-02-20 23:03:36,424 - services.model_manager - INFO - [model_manager.py:246] - Model cleanup completed successfully
2025-02-20 23:03:36,425 - __main__ - INFO - [app.py:432] - Cleanup complete: removed 0 files, freed 0.00MB
2025-02-20 23:03:36,425 - __main__ - INFO - [app.py:464] - Cleanup completed successfully
2025-02-20 23:03:49,477 - __main__ - INFO - [app.py:481] - Metrics server started on port 8000
2025-02-20 23:03:49,477 - services.model_manager - INFO - [model_manager.py:120] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-02-20 23:04:03,925 - services.model_manager - INFO - [model_manager.py:184] - Models loaded on CPU
2025-02-20 23:04:03,925 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-20 23:04:03,926 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-20 23:04:23,546 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-20 23:04:23,547 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-20 23:04:45,571 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-20 23:04:45,571 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-20 23:04:45,574 - services.model_manager - INFO - [model_manager.py:190] - Model initialization successful
2025-02-20 23:04:45,574 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-20 23:04:45,575 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-20 23:05:07,379 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-20 23:05:07,380 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-20 23:05:26,954 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-20 23:05:26,954 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-20 23:05:26,957 - __main__ - INFO - [app.py:432] - Cleanup complete: removed 0 files, freed 0.00MB
2025-02-20 23:05:26,957 - __main__ - INFO - [app.py:505] - ==================================================
2025-02-20 23:05:26,957 - __main__ - INFO - [app.py:506] - Starting LinguaSync Backend
2025-02-20 23:05:26,957 - __main__ - INFO - [app.py:507] - Starting Flask app on port 5001 using cpu
2025-02-20 23:05:26,957 - __main__ - INFO - [app.py:508] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-02-20 23:05:26,957 - __main__ - INFO - [app.py:509] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-02-20 23:05:26,957 - __main__ - INFO - [app.py:510] - Maximum audio length: 300 seconds
2025-02-20 23:05:26,957 - __main__ - INFO - [app.py:511] - Sample rate: 16000 Hz
2025-02-20 23:05:26,957 - __main__ - INFO - [app.py:515] - System memory: 36.0GB total, 11.2GB available
2025-02-20 23:05:26,958 - __main__ - INFO - [app.py:516] - CPU cores: 11
2025-02-20 23:05:26,958 - __main__ - INFO - [app.py:524] - Configuration:
2025-02-20 23:05:26,958 - __main__ - INFO - [app.py:525] - - Debug mode: False
2025-02-20 23:05:26,958 - __main__ - INFO - [app.py:526] - - CORS enabled: True
2025-02-20 23:05:26,958 - __main__ - INFO - [app.py:527] - - Rate limiting: 10 requests per minute
2025-02-20 23:05:26,958 - __main__ - INFO - [app.py:528] - - Metrics enabled: True (port 8000)
2025-02-20 23:05:26,958 - __main__ - INFO - [app.py:530] - ==================================================
2025-02-20 23:15:37,997 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-02-20 23:15:37,998 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-02-20 23:15:37,998 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-20 23:15:38,000 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-20 23:16:00,458 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-20 23:16:00,459 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-20 23:16:16,023 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-20 23:16:16,023 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-20 23:16:16,026 - services.utils - INFO - [utils.py:57] - Performance - Function: process_video, Duration: 38.03s, Memory Change: 3470.91MB
2025-02-20 23:16:16,026 - __main__ - INFO - [app.py:279] - Request to /process-video took 38.03s
2025-02-20 23:16:16,381 - services.audio_processor - INFO - [audio_processor.py:280] - Loading audio from: temp/temp_audio.wav
2025-02-20 23:16:16,382 - services.audio_processor - INFO - [audio_processor.py:282] - Audio info - Sample rate: 16000, Channels: 1
2025-02-20 23:16:16,383 - services.audio_processor - INFO - [audio_processor.py:291] - Original audio shape: torch.Size([1, 223260]), Frequency: 16000Hz
2025-02-20 23:16:16,433 - services.video_routes - INFO - [video_routes.py:117] - Generating text translation in fra
2025-02-20 23:16:23,996 - services.video_routes - INFO - [video_routes.py:126] - Generated text: Ok, c'est un test, voyons si nous pouvons traduire cette vid√©o et aussi faire une synchronisation des l√®vres.
2025-02-20 23:16:23,996 - services.video_routes - INFO - [video_routes.py:129] - Generating translated speech
2025-02-20 23:16:29,542 - services.video_routes - ERROR - [video_routes.py:150] - Audio translation failed: abs(): argument 'input' (position 1) must be Tensor, not tuple
Traceback (most recent call last):
  File "/Users/robmills/audio-translation/Backend/services/video_routes.py", line 143, in translate_audio
    if torch.abs(translated_audio).max() > 0:
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: abs(): argument 'input' (position 1) must be Tensor, not tuple
2025-02-20 23:16:29,543 - services.video_routes - ERROR - [video_routes.py:221] - Video processing failed: Failed to translate audio: abs(): argument 'input' (position 1) must be Tensor, not tuple
2025-02-20 23:23:45,757 - __main__ - INFO - [app.py:218] - Received SIGINT signal
2025-02-20 23:23:45,760 - __main__ - INFO - [app.py:203] - Initiating graceful shutdown...
2025-02-20 23:23:50,763 - __main__ - INFO - [app.py:450] - Application shutting down...
2025-02-20 23:23:50,764 - services.model_manager - INFO - [model_manager.py:233] - Cleaning up model resources
2025-02-20 23:23:50,767 - services.model_manager - INFO - [model_manager.py:246] - Model cleanup completed successfully
2025-02-20 23:23:50,768 - __main__ - INFO - [app.py:432] - Cleanup complete: removed 0 files, freed 0.00MB
2025-02-20 23:23:50,770 - __main__ - INFO - [app.py:464] - Cleanup completed successfully
2025-02-20 23:23:50,771 - __main__ - INFO - [app.py:207] - Graceful shutdown completed
2025-02-20 23:23:50,775 - __main__ - INFO - [app.py:450] - Application shutting down...
2025-02-20 23:23:50,775 - services.model_manager - INFO - [model_manager.py:233] - Cleaning up model resources
2025-02-20 23:23:50,775 - services.model_manager - INFO - [model_manager.py:246] - Model cleanup completed successfully
2025-02-20 23:23:50,776 - __main__ - INFO - [app.py:432] - Cleanup complete: removed 0 files, freed 0.00MB
2025-02-20 23:23:50,776 - __main__ - INFO - [app.py:464] - Cleanup completed successfully
2025-02-20 23:23:50,777 - __main__ - INFO - [app.py:450] - Application shutting down...
2025-02-20 23:23:50,777 - services.model_manager - INFO - [model_manager.py:233] - Cleaning up model resources
2025-02-20 23:23:50,777 - services.model_manager - INFO - [model_manager.py:246] - Model cleanup completed successfully
2025-02-20 23:23:50,778 - __main__ - INFO - [app.py:432] - Cleanup complete: removed 0 files, freed 0.00MB
2025-02-20 23:23:50,778 - __main__ - INFO - [app.py:464] - Cleanup completed successfully
2025-02-20 23:24:02,398 - __main__ - INFO - [app.py:481] - Metrics server started on port 8000
2025-02-20 23:24:02,398 - services.model_manager - INFO - [model_manager.py:120] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-02-20 23:24:15,645 - services.model_manager - INFO - [model_manager.py:184] - Models loaded on CPU
2025-02-20 23:24:15,645 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-20 23:24:15,646 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-20 23:24:39,838 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-20 23:24:39,838 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-20 23:24:57,016 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-20 23:24:57,016 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-20 23:24:57,018 - services.model_manager - INFO - [model_manager.py:190] - Model initialization successful
2025-02-20 23:24:57,018 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-20 23:24:57,019 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-20 23:25:15,475 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-20 23:25:15,475 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-20 23:25:31,235 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-20 23:25:31,235 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-20 23:25:31,239 - __main__ - INFO - [app.py:432] - Cleanup complete: removed 0 files, freed 0.00MB
2025-02-20 23:25:31,239 - __main__ - INFO - [app.py:505] - ==================================================
2025-02-20 23:25:31,239 - __main__ - INFO - [app.py:506] - Starting LinguaSync Backend
2025-02-20 23:25:31,239 - __main__ - INFO - [app.py:507] - Starting Flask app on port 5001 using cpu
2025-02-20 23:25:31,239 - __main__ - INFO - [app.py:508] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-02-20 23:25:31,239 - __main__ - INFO - [app.py:509] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-02-20 23:25:31,239 - __main__ - INFO - [app.py:510] - Maximum audio length: 300 seconds
2025-02-20 23:25:31,239 - __main__ - INFO - [app.py:511] - Sample rate: 16000 Hz
2025-02-20 23:25:31,239 - __main__ - INFO - [app.py:515] - System memory: 36.0GB total, 11.7GB available
2025-02-20 23:25:31,239 - __main__ - INFO - [app.py:516] - CPU cores: 11
2025-02-20 23:25:31,239 - __main__ - INFO - [app.py:524] - Configuration:
2025-02-20 23:25:31,239 - __main__ - INFO - [app.py:525] - - Debug mode: False
2025-02-20 23:25:31,239 - __main__ - INFO - [app.py:526] - - CORS enabled: True
2025-02-20 23:25:31,239 - __main__ - INFO - [app.py:527] - - Rate limiting: 10 requests per minute
2025-02-20 23:25:31,239 - __main__ - INFO - [app.py:528] - - Metrics enabled: True (port 8000)
2025-02-20 23:25:31,239 - __main__ - INFO - [app.py:530] - ==================================================
2025-02-20 23:26:19,258 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-02-20 23:26:19,258 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-02-20 23:26:19,258 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-20 23:26:19,259 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-20 23:26:39,573 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-20 23:26:39,573 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-20 23:26:55,519 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-20 23:26:55,519 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-20 23:26:55,522 - services.utils - INFO - [utils.py:57] - Performance - Function: process_video, Duration: 36.26s, Memory Change: 480.94MB
2025-02-20 23:26:55,522 - __main__ - INFO - [app.py:279] - Request to /process-video took 36.26s
2025-02-20 23:26:55,690 - services.audio_processor - INFO - [audio_processor.py:280] - Loading audio from: temp/temp_audio.wav
2025-02-20 23:26:55,691 - services.audio_processor - INFO - [audio_processor.py:282] - Audio info - Sample rate: 16000, Channels: 1
2025-02-20 23:26:55,692 - services.audio_processor - INFO - [audio_processor.py:291] - Original audio shape: torch.Size([1, 223260]), Frequency: 16000Hz
2025-02-20 23:26:55,720 - services.video_routes - INFO - [video_routes.py:117] - Generating text translation in fra
2025-02-20 23:27:03,226 - services.video_routes - INFO - [video_routes.py:126] - Generated text: Ok, c'est un test, voyons si nous pouvons traduire cette vid√©o et aussi faire une synchronisation des l√®vres.
2025-02-20 23:27:03,226 - services.video_routes - INFO - [video_routes.py:129] - Generating translated speech
2025-02-20 23:27:08,689 - services.video_routes - INFO - [video_routes.py:157] - Translation successful, audio shape: torch.Size([1, 81280])
2025-02-20 23:40:10,061 - __main__ - INFO - [app.py:218] - Received SIGINT signal
2025-02-20 23:40:10,062 - __main__ - INFO - [app.py:203] - Initiating graceful shutdown...
2025-02-20 23:40:15,067 - __main__ - INFO - [app.py:450] - Application shutting down...
2025-02-20 23:40:15,068 - services.model_manager - INFO - [model_manager.py:233] - Cleaning up model resources
2025-02-20 23:40:15,069 - services.model_manager - INFO - [model_manager.py:246] - Model cleanup completed successfully
2025-02-20 23:40:15,071 - __main__ - INFO - [app.py:432] - Cleanup complete: removed 0 files, freed 0.00MB
2025-02-20 23:40:15,073 - __main__ - INFO - [app.py:464] - Cleanup completed successfully
2025-02-20 23:40:15,073 - __main__ - INFO - [app.py:207] - Graceful shutdown completed
2025-02-20 23:40:15,075 - __main__ - INFO - [app.py:450] - Application shutting down...
2025-02-20 23:40:15,076 - services.model_manager - INFO - [model_manager.py:233] - Cleaning up model resources
2025-02-20 23:40:15,076 - services.model_manager - INFO - [model_manager.py:246] - Model cleanup completed successfully
2025-02-20 23:40:15,077 - __main__ - INFO - [app.py:432] - Cleanup complete: removed 0 files, freed 0.00MB
2025-02-20 23:40:15,077 - __main__ - INFO - [app.py:464] - Cleanup completed successfully
2025-02-20 23:40:15,078 - __main__ - INFO - [app.py:450] - Application shutting down...
2025-02-20 23:40:15,078 - services.model_manager - INFO - [model_manager.py:233] - Cleaning up model resources
2025-02-20 23:40:15,078 - services.model_manager - INFO - [model_manager.py:246] - Model cleanup completed successfully
2025-02-20 23:40:15,079 - __main__ - INFO - [app.py:432] - Cleanup complete: removed 0 files, freed 0.00MB
2025-02-20 23:40:15,080 - __main__ - INFO - [app.py:464] - Cleanup completed successfully
2025-02-20 23:40:24,479 - __main__ - INFO - [app.py:481] - Metrics server started on port 8000
2025-02-20 23:40:24,479 - services.model_manager - INFO - [model_manager.py:120] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-02-20 23:40:37,546 - services.model_manager - INFO - [model_manager.py:184] - Models loaded on CPU
2025-02-20 23:40:37,546 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-20 23:40:37,546 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-20 23:40:58,793 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-20 23:40:58,793 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-20 23:41:18,132 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-20 23:41:18,133 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-20 23:41:18,136 - services.model_manager - INFO - [model_manager.py:190] - Model initialization successful
2025-02-20 23:41:18,136 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-20 23:41:18,136 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-20 23:41:33,213 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-20 23:41:33,213 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-20 23:41:50,977 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-20 23:41:50,977 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-20 23:41:50,980 - __main__ - INFO - [app.py:432] - Cleanup complete: removed 0 files, freed 0.00MB
2025-02-20 23:41:50,980 - __main__ - INFO - [app.py:505] - ==================================================
2025-02-20 23:41:50,980 - __main__ - INFO - [app.py:506] - Starting LinguaSync Backend
2025-02-20 23:41:50,981 - __main__ - INFO - [app.py:507] - Starting Flask app on port 5001 using cpu
2025-02-20 23:41:50,981 - __main__ - INFO - [app.py:508] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-02-20 23:41:50,981 - __main__ - INFO - [app.py:509] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-02-20 23:41:50,981 - __main__ - INFO - [app.py:510] - Maximum audio length: 300 seconds
2025-02-20 23:41:50,981 - __main__ - INFO - [app.py:511] - Sample rate: 16000 Hz
2025-02-20 23:41:50,981 - __main__ - INFO - [app.py:515] - System memory: 36.0GB total, 11.3GB available
2025-02-20 23:41:50,981 - __main__ - INFO - [app.py:516] - CPU cores: 11
2025-02-20 23:41:50,981 - __main__ - INFO - [app.py:524] - Configuration:
2025-02-20 23:41:50,981 - __main__ - INFO - [app.py:525] - - Debug mode: False
2025-02-20 23:41:50,981 - __main__ - INFO - [app.py:526] - - CORS enabled: True
2025-02-20 23:41:50,981 - __main__ - INFO - [app.py:527] - - Rate limiting: 10 requests per minute
2025-02-20 23:41:50,981 - __main__ - INFO - [app.py:528] - - Metrics enabled: True (port 8000)
2025-02-20 23:41:50,981 - __main__ - INFO - [app.py:530] - ==================================================
2025-02-20 23:42:33,532 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-02-20 23:42:33,533 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-02-20 23:42:33,533 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-20 23:42:33,534 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-20 23:42:49,767 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-20 23:42:49,769 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-20 23:43:05,865 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-20 23:43:05,866 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-20 23:43:05,868 - services.utils - INFO - [utils.py:57] - Performance - Function: process_video, Duration: 32.34s, Memory Change: 412.05MB
2025-02-20 23:43:05,868 - __main__ - INFO - [app.py:279] - Request to /process-video took 32.34s
2025-02-20 23:43:06,051 - services.audio_processor - INFO - [audio_processor.py:280] - Loading audio from: temp/temp_audio.wav
2025-02-20 23:43:06,052 - services.audio_processor - INFO - [audio_processor.py:282] - Audio info - Sample rate: 16000, Channels: 1
2025-02-20 23:43:06,053 - services.audio_processor - INFO - [audio_processor.py:291] - Original audio shape: torch.Size([1, 223260]), Frequency: 16000Hz
2025-02-20 23:43:06,099 - services.video_routes - INFO - [video_routes.py:117] - Generating text translation in fra
2025-02-20 23:43:13,833 - services.video_routes - INFO - [video_routes.py:126] - Generated text: Ok, c'est un test, voyons si nous pouvons traduire cette vid√©o et aussi faire une synchronisation des l√®vres.
2025-02-20 23:43:13,833 - services.video_routes - INFO - [video_routes.py:129] - Generating translated speech
2025-02-20 23:43:19,198 - services.video_routes - INFO - [video_routes.py:157] - Translation successful, audio shape: torch.Size([1, 81280])
2025-02-21 00:10:18,807 - __main__ - INFO - [app.py:218] - Received SIGINT signal
2025-02-21 00:10:18,811 - __main__ - INFO - [app.py:203] - Initiating graceful shutdown...
2025-02-21 00:10:23,817 - __main__ - INFO - [app.py:450] - Application shutting down...
2025-02-21 00:10:23,818 - services.model_manager - INFO - [model_manager.py:233] - Cleaning up model resources
2025-02-21 00:10:23,819 - services.model_manager - INFO - [model_manager.py:246] - Model cleanup completed successfully
2025-02-21 00:10:23,821 - __main__ - INFO - [app.py:432] - Cleanup complete: removed 0 files, freed 0.00MB
2025-02-21 00:10:23,822 - __main__ - INFO - [app.py:464] - Cleanup completed successfully
2025-02-21 00:10:23,823 - __main__ - INFO - [app.py:207] - Graceful shutdown completed
2025-02-21 00:10:23,827 - __main__ - INFO - [app.py:450] - Application shutting down...
2025-02-21 00:10:23,828 - services.model_manager - INFO - [model_manager.py:233] - Cleaning up model resources
2025-02-21 00:10:23,828 - services.model_manager - INFO - [model_manager.py:246] - Model cleanup completed successfully
2025-02-21 00:10:23,829 - __main__ - INFO - [app.py:432] - Cleanup complete: removed 0 files, freed 0.00MB
2025-02-21 00:10:23,829 - __main__ - INFO - [app.py:464] - Cleanup completed successfully
2025-02-21 00:10:23,830 - __main__ - INFO - [app.py:450] - Application shutting down...
2025-02-21 00:10:23,830 - services.model_manager - INFO - [model_manager.py:233] - Cleaning up model resources
2025-02-21 00:10:23,830 - services.model_manager - INFO - [model_manager.py:246] - Model cleanup completed successfully
2025-02-21 00:10:23,831 - __main__ - INFO - [app.py:432] - Cleanup complete: removed 0 files, freed 0.00MB
2025-02-21 00:10:23,831 - __main__ - INFO - [app.py:464] - Cleanup completed successfully
2025-02-21 00:10:50,727 - __main__ - INFO - [app.py:481] - Metrics server started on port 8000
2025-02-21 00:10:50,727 - services.model_manager - INFO - [model_manager.py:120] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-02-21 00:11:03,484 - services.model_manager - INFO - [model_manager.py:184] - Models loaded on CPU
2025-02-21 00:11:03,485 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-21 00:11:03,485 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-21 00:11:31,967 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-21 00:11:31,968 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-21 00:11:48,205 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-21 00:11:48,205 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-21 00:11:48,208 - services.model_manager - INFO - [model_manager.py:190] - Model initialization successful
2025-02-21 00:11:48,208 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-21 00:11:48,208 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-21 00:12:08,133 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-21 00:12:08,133 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-21 00:12:24,325 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-21 00:12:24,325 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-21 00:12:24,328 - __main__ - INFO - [app.py:432] - Cleanup complete: removed 0 files, freed 0.00MB
2025-02-21 00:12:24,328 - __main__ - INFO - [app.py:505] - ==================================================
2025-02-21 00:12:24,328 - __main__ - INFO - [app.py:506] - Starting LinguaSync Backend
2025-02-21 00:12:24,328 - __main__ - INFO - [app.py:507] - Starting Flask app on port 5001 using cpu
2025-02-21 00:12:24,328 - __main__ - INFO - [app.py:508] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-02-21 00:12:24,328 - __main__ - INFO - [app.py:509] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-02-21 00:12:24,328 - __main__ - INFO - [app.py:510] - Maximum audio length: 300 seconds
2025-02-21 00:12:24,328 - __main__ - INFO - [app.py:511] - Sample rate: 16000 Hz
2025-02-21 00:12:24,328 - __main__ - INFO - [app.py:515] - System memory: 36.0GB total, 10.6GB available
2025-02-21 00:12:24,328 - __main__ - INFO - [app.py:516] - CPU cores: 11
2025-02-21 00:12:24,328 - __main__ - INFO - [app.py:524] - Configuration:
2025-02-21 00:12:24,328 - __main__ - INFO - [app.py:525] - - Debug mode: False
2025-02-21 00:12:24,328 - __main__ - INFO - [app.py:526] - - CORS enabled: True
2025-02-21 00:12:24,328 - __main__ - INFO - [app.py:527] - - Rate limiting: 10 requests per minute
2025-02-21 00:12:24,328 - __main__ - INFO - [app.py:528] - - Metrics enabled: True (port 8000)
2025-02-21 00:12:24,328 - __main__ - INFO - [app.py:530] - ==================================================
2025-02-21 00:13:11,768 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-02-21 00:13:11,769 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-02-21 00:13:11,769 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-21 00:13:11,770 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-21 00:13:34,331 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-21 00:13:34,331 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-21 00:13:52,688 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-21 00:13:52,688 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-21 00:13:52,692 - services.utils - INFO - [utils.py:57] - Performance - Function: process_video, Duration: 40.92s, Memory Change: 930.81MB
2025-02-21 00:13:52,692 - __main__ - INFO - [app.py:279] - Request to /process-video took 40.93s
2025-02-21 00:13:53,163 - services.video_routes - INFO - [video_routes.py:233] - Detected speech starts at: 0.54 seconds
2025-02-21 00:13:53,164 - services.audio_processor - INFO - [audio_processor.py:280] - Loading audio from: temp/temp_audio.wav
2025-02-21 00:13:53,164 - services.audio_processor - INFO - [audio_processor.py:282] - Audio info - Sample rate: 16000, Channels: 1
2025-02-21 00:13:53,165 - services.audio_processor - INFO - [audio_processor.py:291] - Original audio shape: torch.Size([1, 223260]), Frequency: 16000Hz
2025-02-21 00:13:53,213 - services.video_routes - INFO - [video_routes.py:117] - Generating text translation in fra
2025-02-21 00:14:00,752 - services.video_routes - INFO - [video_routes.py:126] - Generated text: Ok, c'est un test, voyons si nous pouvons traduire cette vid√©o et aussi faire une synchronisation des l√®vres.
2025-02-21 00:14:00,753 - services.video_routes - INFO - [video_routes.py:129] - Generating translated speech
2025-02-21 00:14:06,180 - services.video_routes - INFO - [video_routes.py:157] - Translation successful, audio shape: torch.Size([1, 81280])
2025-02-21 00:34:47,153 - __main__ - INFO - [app.py:218] - Received SIGINT signal
2025-02-21 00:34:47,156 - __main__ - INFO - [app.py:203] - Initiating graceful shutdown...
2025-02-21 00:34:52,161 - __main__ - INFO - [app.py:450] - Application shutting down...
2025-02-21 00:34:52,163 - services.model_manager - INFO - [model_manager.py:233] - Cleaning up model resources
2025-02-21 00:34:52,164 - services.model_manager - INFO - [model_manager.py:246] - Model cleanup completed successfully
2025-02-21 00:34:52,166 - __main__ - INFO - [app.py:432] - Cleanup complete: removed 0 files, freed 0.00MB
2025-02-21 00:34:52,167 - __main__ - INFO - [app.py:464] - Cleanup completed successfully
2025-02-21 00:34:52,168 - __main__ - INFO - [app.py:207] - Graceful shutdown completed
2025-02-21 00:34:52,173 - __main__ - INFO - [app.py:450] - Application shutting down...
2025-02-21 00:34:52,173 - services.model_manager - INFO - [model_manager.py:233] - Cleaning up model resources
2025-02-21 00:34:52,173 - services.model_manager - INFO - [model_manager.py:246] - Model cleanup completed successfully
2025-02-21 00:34:52,174 - __main__ - INFO - [app.py:432] - Cleanup complete: removed 0 files, freed 0.00MB
2025-02-21 00:34:52,174 - __main__ - INFO - [app.py:464] - Cleanup completed successfully
2025-02-21 00:34:52,175 - __main__ - INFO - [app.py:450] - Application shutting down...
2025-02-21 00:34:52,175 - services.model_manager - INFO - [model_manager.py:233] - Cleaning up model resources
2025-02-21 00:34:52,175 - services.model_manager - INFO - [model_manager.py:246] - Model cleanup completed successfully
2025-02-21 00:34:52,176 - __main__ - INFO - [app.py:432] - Cleanup complete: removed 0 files, freed 0.00MB
2025-02-21 00:34:52,176 - __main__ - INFO - [app.py:464] - Cleanup completed successfully
2025-02-21 00:35:08,801 - __main__ - INFO - [app.py:481] - Metrics server started on port 8000
2025-02-21 00:35:08,801 - services.model_manager - INFO - [model_manager.py:120] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-02-21 00:35:23,073 - services.model_manager - INFO - [model_manager.py:184] - Models loaded on CPU
2025-02-21 00:35:23,074 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-21 00:35:23,075 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-21 00:35:54,059 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-21 00:35:54,059 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-21 00:36:14,751 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-21 00:36:14,752 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-21 00:36:14,755 - services.model_manager - INFO - [model_manager.py:190] - Model initialization successful
2025-02-21 00:36:14,755 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-21 00:36:14,755 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-21 00:36:33,445 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-21 00:36:33,447 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-21 00:36:57,349 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-21 00:36:57,350 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-21 00:36:57,353 - __main__ - INFO - [app.py:432] - Cleanup complete: removed 0 files, freed 0.00MB
2025-02-21 00:36:57,353 - __main__ - INFO - [app.py:505] - ==================================================
2025-02-21 00:36:57,353 - __main__ - INFO - [app.py:506] - Starting LinguaSync Backend
2025-02-21 00:36:57,353 - __main__ - INFO - [app.py:507] - Starting Flask app on port 5001 using cpu
2025-02-21 00:36:57,354 - __main__ - INFO - [app.py:508] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-02-21 00:36:57,354 - __main__ - INFO - [app.py:509] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-02-21 00:36:57,354 - __main__ - INFO - [app.py:510] - Maximum audio length: 300 seconds
2025-02-21 00:36:57,354 - __main__ - INFO - [app.py:511] - Sample rate: 16000 Hz
2025-02-21 00:36:57,354 - __main__ - INFO - [app.py:515] - System memory: 36.0GB total, 8.0GB available
2025-02-21 00:36:57,354 - __main__ - INFO - [app.py:516] - CPU cores: 11
2025-02-21 00:36:57,354 - __main__ - INFO - [app.py:524] - Configuration:
2025-02-21 00:36:57,354 - __main__ - INFO - [app.py:525] - - Debug mode: False
2025-02-21 00:36:57,354 - __main__ - INFO - [app.py:526] - - CORS enabled: True
2025-02-21 00:36:57,354 - __main__ - INFO - [app.py:527] - - Rate limiting: 10 requests per minute
2025-02-21 00:36:57,354 - __main__ - INFO - [app.py:528] - - Metrics enabled: True (port 8000)
2025-02-21 00:36:57,354 - __main__ - INFO - [app.py:530] - ==================================================
2025-02-21 00:38:04,579 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-02-21 00:38:04,579 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-02-21 00:38:04,579 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-21 00:38:04,581 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-21 00:38:21,475 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-21 00:38:21,475 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-21 00:38:40,046 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-21 00:38:40,046 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-21 00:38:40,050 - services.utils - INFO - [utils.py:57] - Performance - Function: process_video, Duration: 35.47s, Memory Change: 1113.27MB
2025-02-21 00:38:40,050 - __main__ - INFO - [app.py:279] - Request to /process-video took 35.47s
2025-02-21 00:38:40,334 - services.video_routes - INFO - [video_routes.py:234] - Detected speech starts at: 0.54 seconds
2025-02-21 00:38:40,334 - services.audio_processor - INFO - [audio_processor.py:280] - Loading audio from: temp/temp_audio.wav
2025-02-21 00:38:40,335 - services.audio_processor - INFO - [audio_processor.py:282] - Audio info - Sample rate: 16000, Channels: 1
2025-02-21 00:38:40,337 - services.audio_processor - INFO - [audio_processor.py:291] - Original audio shape: torch.Size([1, 223260]), Frequency: 16000Hz
2025-02-21 00:38:40,381 - services.video_routes - INFO - [video_routes.py:117] - Generating text translation in fra
2025-02-21 00:38:48,545 - services.video_routes - INFO - [video_routes.py:126] - Generated text: Ok, c'est un test, voyons si nous pouvons traduire cette vid√©o et aussi faire une synchronisation des l√®vres.
2025-02-21 00:38:48,546 - services.video_routes - INFO - [video_routes.py:129] - Generating translated speech
2025-02-21 00:38:54,146 - services.video_routes - INFO - [video_routes.py:157] - Translation successful, audio shape: torch.Size([1, 81280])
2025-02-21 21:11:57,832 - __main__ - INFO - [app.py:481] - Metrics server started on port 8000
2025-02-21 21:11:57,832 - services.model_manager - INFO - [model_manager.py:120] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-02-21 21:12:12,059 - services.model_manager - INFO - [model_manager.py:184] - Models loaded on CPU
2025-02-21 21:12:12,059 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-21 21:12:12,061 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-21 21:12:40,116 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-21 21:12:40,117 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-21 21:13:00,085 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-21 21:13:00,085 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-21 21:13:00,088 - services.model_manager - INFO - [model_manager.py:190] - Model initialization successful
2025-02-21 21:13:00,089 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-21 21:13:00,089 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-21 21:13:16,203 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-21 21:13:16,203 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-21 21:13:32,584 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-21 21:13:32,585 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-21 21:13:32,588 - __main__ - INFO - [app.py:432] - Cleanup complete: removed 0 files, freed 0.00MB
2025-02-21 21:13:32,588 - __main__ - INFO - [app.py:505] - ==================================================
2025-02-21 21:13:32,588 - __main__ - INFO - [app.py:506] - Starting LinguaSync Backend
2025-02-21 21:13:32,588 - __main__ - INFO - [app.py:507] - Starting Flask app on port 5001 using cpu
2025-02-21 21:13:32,588 - __main__ - INFO - [app.py:508] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-02-21 21:13:32,588 - __main__ - INFO - [app.py:509] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-02-21 21:13:32,588 - __main__ - INFO - [app.py:510] - Maximum audio length: 300 seconds
2025-02-21 21:13:32,588 - __main__ - INFO - [app.py:511] - Sample rate: 16000 Hz
2025-02-21 21:13:32,588 - __main__ - INFO - [app.py:515] - System memory: 36.0GB total, 15.1GB available
2025-02-21 21:13:32,588 - __main__ - INFO - [app.py:516] - CPU cores: 11
2025-02-21 21:13:32,589 - __main__ - INFO - [app.py:524] - Configuration:
2025-02-21 21:13:32,589 - __main__ - INFO - [app.py:525] - - Debug mode: False
2025-02-21 21:13:32,589 - __main__ - INFO - [app.py:526] - - CORS enabled: True
2025-02-21 21:13:32,589 - __main__ - INFO - [app.py:527] - - Rate limiting: 10 requests per minute
2025-02-21 21:13:32,589 - __main__ - INFO - [app.py:528] - - Metrics enabled: True (port 8000)
2025-02-21 21:13:32,589 - __main__ - INFO - [app.py:530] - ==================================================
2025-02-21 21:15:39,616 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-02-21 21:15:39,616 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-02-21 21:15:39,616 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-21 21:15:39,617 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-21 21:15:55,220 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-21 21:15:55,221 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-21 21:16:10,670 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-21 21:16:10,670 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-21 21:16:10,673 - services.utils - INFO - [utils.py:57] - Performance - Function: process_video, Duration: 31.06s, Memory Change: 46.69MB
2025-02-21 21:16:10,674 - __main__ - INFO - [app.py:279] - Request to /process-video took 31.06s
2025-02-21 21:16:11,177 - services.video_routes - INFO - [video_routes.py:234] - Detected speech starts at: 0.54 seconds
2025-02-21 21:16:11,177 - services.audio_processor - INFO - [audio_processor.py:280] - Loading audio from: temp/temp_audio.wav
2025-02-21 21:16:11,178 - services.audio_processor - INFO - [audio_processor.py:282] - Audio info - Sample rate: 16000, Channels: 1
2025-02-21 21:16:11,181 - services.audio_processor - INFO - [audio_processor.py:291] - Original audio shape: torch.Size([1, 223260]), Frequency: 16000Hz
2025-02-21 21:16:11,232 - services.video_routes - INFO - [video_routes.py:117] - Generating text translation in fra
2025-02-21 21:16:18,907 - services.video_routes - INFO - [video_routes.py:126] - Generated text: Ok, c'est un test, voyons si nous pouvons traduire cette vid√©o et aussi faire une synchronisation des l√®vres.
2025-02-21 21:16:18,907 - services.video_routes - INFO - [video_routes.py:129] - Generating translated speech
2025-02-21 21:16:24,613 - services.video_routes - INFO - [video_routes.py:157] - Translation successful, audio shape: torch.Size([1, 81280])
