2025-01-05 17:27:45,444 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-05 17:27:45,444 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-05 17:41:26,863 - __main__ - INFO - [app.py:728] - Metrics server started on port 8000
2025-01-05 17:41:26,863 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-05 17:41:41,428 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-05 17:41:48,107 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-05 17:41:48,109 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-05 17:41:54,889 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-05 17:41:54,890 - __main__ - INFO - [app.py:691] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-05 17:41:54,891 - __main__ - INFO - [app.py:752] - ==================================================
2025-01-05 17:41:54,891 - __main__ - INFO - [app.py:753] - Starting LinguaSync Backend
2025-01-05 17:41:54,891 - __main__ - INFO - [app.py:754] - Starting Flask app on port 5001 using cpu
2025-01-05 17:41:54,891 - __main__ - INFO - [app.py:755] - Python version: 3.12.6 (v3.12.6:a4a2d2b0d85, Sep  6 2024, 16:08:03) [Clang 13.0.0 (clang-1300.0.29.30)]
2025-01-05 17:41:54,891 - __main__ - INFO - [app.py:756] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-05 17:41:54,891 - __main__ - INFO - [app.py:757] - Maximum audio length: 300 seconds
2025-01-05 17:41:54,891 - __main__ - INFO - [app.py:758] - Sample rate: 16000 Hz
2025-01-05 17:41:54,891 - __main__ - INFO - [app.py:762] - System memory: 36.0GB total, 15.8GB available
2025-01-05 17:41:54,891 - __main__ - INFO - [app.py:763] - CPU cores: 11
2025-01-05 17:41:54,891 - __main__ - INFO - [app.py:771] - Configuration:
2025-01-05 17:41:54,891 - __main__ - INFO - [app.py:772] - - Debug mode: False
2025-01-05 17:41:54,891 - __main__ - INFO - [app.py:773] - - CORS enabled: True
2025-01-05 17:41:54,891 - __main__ - INFO - [app.py:774] - - Rate limiting: 10 requests per minute
2025-01-05 17:41:54,891 - __main__ - INFO - [app.py:775] - - Metrics enabled: True (port 8000)
2025-01-05 17:41:54,891 - __main__ - INFO - [app.py:777] - ==================================================
2025-01-05 17:42:36,899 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-05 17:42:36,900 - __main__ - INFO - [app.py:326] - Starting translation request c7a1d086
2025-01-05 17:42:36,900 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-05 17:42:36,900 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-05 17:42:36,902 - __main__ - INFO - [app.py:384] - Request c7a1d086: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpx0ygbstn.wav
2025-01-05 17:42:36,902 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 18.36 seconds
2025-01-05 17:42:36,903 - __main__ - INFO - [app.py:395] - Request c7a1d086: Beginning audio processing with diagnostics
2025-01-05 17:42:36,903 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpx0ygbstn.wav
2025-01-05 17:42:36,903 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 44100, Channels: 2
2025-01-05 17:42:36,911 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([2, 809508]), Frequency: 44100Hz
2025-01-05 17:42:36,911 - services.audio_processor - INFO - [audio_processor.py:219] - Resampling from 44100Hz to 16000Hz
2025-01-05 17:42:36,932 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-05 17:42:36,934 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-05 17:42:36,956 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-05 17:42:36,969 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 17:42:36,970 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 17:42:36,975 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 17:42:36,975 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 17:42:36,982 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 17:42:36,982 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 17:42:36,989 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 17:42:36,989 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 17:42:37,453 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-05 17:42:37,454 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-05 17:42:37,497 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 17:42:37,497 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 17:42:37,506 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 17:42:37,506 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 17:42:37,514 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 17:42:37,514 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 17:42:37,523 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 17:42:37,523 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 17:42:38,054 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-05 17:42:38,054 - __main__ - INFO - [app.py:406] - 
==================================================
2025-01-05 17:42:38,054 - __main__ - INFO - [app.py:407] - Input Audio Quality Report
2025-01-05 17:42:38,054 - __main__ - INFO - [app.py:408] - ==================================================
2025-01-05 17:42:38,054 - __main__ - INFO - [app.py:409] - Request ID: c7a1d086
2025-01-05 17:42:38,054 - __main__ - INFO - [app.py:410] - Target Language: fra
2025-01-05 17:42:38,054 - __main__ - INFO - [app.py:411] - --------------------------------------------------
2025-01-05 17:42:38,054 - __main__ - INFO - [app.py:412] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.800
- Avg Amplitude: 0.013
- Rms Level: 0.039
- Crest Factor: 20.262
- Zero Crossings: 127716.000
- Silence Percentage: 62.168
- Clipping Points: 0.000
- Dynamic Range: 3022615.000

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.070
  - Temporal Flatness: 0.020

- Volume Metrics:
  - Volume Stability: -0.728
  - Volume Range: 29148040.000
  - Volume Variations: 0.034

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.003898838626448
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.6381455659866333, 'stability': 1.6408194303512573, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.23516440391540527, 'consistency': 0.2896541953086853, 'distinction': 0.11255760490894318}
  - Description: Moderate nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.670
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.340
  - Rhythm Quality: 0.358
  - Intonation Quality: 0.322

Vowel Quality:
  - Quality Score: 0.005
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-05 17:42:38,054 - __main__ - INFO - [app.py:413] - ==================================================

2025-01-05 17:42:38,055 - __main__ - INFO - [app.py:424] - Request c7a1d086: Audio processed successfully
2025-01-05 17:42:38,079 - __main__ - INFO - [app.py:443] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-05 17:42:52,307 - __main__ - INFO - [app.py:483] - Source text: the stale smell of old beer lingers it takes heat to bring out the odor a cold dip restores health and zest a salt pickle tastes fine with ham tacos al pastor are my favorite a zestful food is the hot cross bun
2025-01-05 17:43:08,045 - __main__ - INFO - [app.py:502] - Target text: l'odeur de la vieille bière lingoure il faut de la chaleur pour faire ressortir l'odore une dip froide restaure la santé et le zest un pickle salé goûte bien avec le jambon tacos al pasteur sont mon favori une nourriture zestueuse est le hot cross bun
2025-01-05 17:43:28,569 - __main__ - INFO - [app.py:525] - Processing tuple output from model
2025-01-05 17:43:28,584 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 17:43:28,584 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 17:43:28,591 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 17:43:28,591 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 17:43:28,597 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 17:43:28,597 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 17:43:28,603 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 17:43:28,603 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 17:43:28,908 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-05 17:43:28,908 - __main__ - INFO - [app.py:548] - 
==================================================
2025-01-05 17:43:28,908 - __main__ - INFO - [app.py:549] - Translated Audio Quality Report
2025-01-05 17:43:28,908 - __main__ - INFO - [app.py:550] - ==================================================
2025-01-05 17:43:28,908 - __main__ - INFO - [app.py:551] - Request ID: c7a1d086
2025-01-05 17:43:28,908 - __main__ - INFO - [app.py:552] - Target Language: fra
2025-01-05 17:43:28,908 - __main__ - INFO - [app.py:553] - --------------------------------------------------
2025-01-05 17:43:28,908 - __main__ - INFO - [app.py:554] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.733
- Avg Amplitude: 0.064
- Rms Level: 0.100
- Crest Factor: 7.306
- Zero Crossings: 26729.000
- Silence Percentage: 9.199
- Clipping Points: 0.000
- Dynamic Range: 148.252

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.087
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.027
  - Temporal Flatness: 0.015

- Volume Metrics:
  - Volume Stability: 0.316
  - Volume Range: 943.707
  - Volume Variations: 0.057

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0274713576114034
- Background Noise: 3.9225283760163387
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
No issues detected

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 1.0645990371704102, 'stability': 3.7006659507751465, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0019389446824789047, 'consistency': 0.0, 'distinction': 0.10308977961540222}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.533
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.003
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-05 17:43:28,908 - __main__ - INFO - [app.py:555] - ==================================================

2025-01-05 17:43:28,908 - __main__ - INFO - [app.py:561] - Request c7a1d086: Audio output processed successfully
2025-01-05 17:43:28,912 - __main__ - INFO - [app.py:615] - Request c7a1d086: Response prepared successfully
2025-01-05 17:43:28,912 - __main__ - INFO - [app.py:633] - Request c7a1d086 completed in 52.01s
2025-01-05 17:43:28,914 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 52.01s, Memory Change: 1457.50MB
2025-01-05 17:43:28,914 - __main__ - INFO - [app.py:259] - Request to /translate took 59.67s
2025-01-05 18:07:19,103 - __main__ - INFO - [app.py:198] - Received SIGINT signal
2025-01-05 18:07:19,104 - __main__ - INFO - [app.py:183] - Initiating graceful shutdown...
2025-01-05 18:07:24,109 - __main__ - INFO - [app.py:698] - Application shutting down...
2025-01-05 18:07:24,110 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-05 18:07:24,110 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-05 18:07:24,111 - __main__ - INFO - [app.py:691] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-05 18:07:24,112 - __main__ - INFO - [app.py:711] - Cleanup completed successfully
2025-01-05 18:07:24,112 - __main__ - INFO - [app.py:187] - Graceful shutdown completed
2025-01-05 18:07:24,113 - __main__ - INFO - [app.py:698] - Application shutting down...
2025-01-05 18:07:24,113 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-05 18:07:24,113 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-05 18:07:24,114 - __main__ - INFO - [app.py:691] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-05 18:07:24,114 - __main__ - INFO - [app.py:711] - Cleanup completed successfully
2025-01-05 18:07:24,115 - __main__ - INFO - [app.py:698] - Application shutting down...
2025-01-05 18:07:24,115 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-05 18:07:24,115 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-05 18:07:24,116 - __main__ - INFO - [app.py:691] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-05 18:07:24,116 - __main__ - INFO - [app.py:711] - Cleanup completed successfully
2025-01-05 18:07:24,238 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-05 18:07:24,238 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-05 18:07:35,421 - __main__ - INFO - [app.py:728] - Metrics server started on port 8000
2025-01-05 18:07:35,421 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-05 18:07:50,048 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-05 18:07:56,124 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-05 18:07:56,126 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-05 18:08:01,354 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-05 18:08:01,355 - __main__ - INFO - [app.py:691] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-05 18:08:01,355 - __main__ - INFO - [app.py:752] - ==================================================
2025-01-05 18:08:01,355 - __main__ - INFO - [app.py:753] - Starting LinguaSync Backend
2025-01-05 18:08:01,355 - __main__ - INFO - [app.py:754] - Starting Flask app on port 5001 using cpu
2025-01-05 18:08:01,355 - __main__ - INFO - [app.py:755] - Python version: 3.12.6 (v3.12.6:a4a2d2b0d85, Sep  6 2024, 16:08:03) [Clang 13.0.0 (clang-1300.0.29.30)]
2025-01-05 18:08:01,356 - __main__ - INFO - [app.py:756] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-05 18:08:01,356 - __main__ - INFO - [app.py:757] - Maximum audio length: 300 seconds
2025-01-05 18:08:01,356 - __main__ - INFO - [app.py:758] - Sample rate: 16000 Hz
2025-01-05 18:08:01,356 - __main__ - INFO - [app.py:762] - System memory: 36.0GB total, 17.2GB available
2025-01-05 18:08:01,356 - __main__ - INFO - [app.py:763] - CPU cores: 11
2025-01-05 18:08:01,356 - __main__ - INFO - [app.py:771] - Configuration:
2025-01-05 18:08:01,356 - __main__ - INFO - [app.py:772] - - Debug mode: False
2025-01-05 18:08:01,356 - __main__ - INFO - [app.py:773] - - CORS enabled: True
2025-01-05 18:08:01,356 - __main__ - INFO - [app.py:774] - - Rate limiting: 10 requests per minute
2025-01-05 18:08:01,356 - __main__ - INFO - [app.py:775] - - Metrics enabled: True (port 8000)
2025-01-05 18:08:01,356 - __main__ - INFO - [app.py:777] - ==================================================
2025-01-05 18:10:07,574 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-05 18:10:07,575 - __main__ - INFO - [app.py:326] - Starting translation request 84134c7a
2025-01-05 18:10:07,575 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-05 18:10:07,575 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-05 18:10:07,578 - __main__ - INFO - [app.py:384] - Request 84134c7a: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp5ysmfoxs.wav
2025-01-05 18:10:07,579 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 18.36 seconds
2025-01-05 18:10:07,579 - __main__ - INFO - [app.py:395] - Request 84134c7a: Beginning audio processing with diagnostics
2025-01-05 18:10:07,579 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp5ysmfoxs.wav
2025-01-05 18:10:07,579 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 44100, Channels: 2
2025-01-05 18:10:07,588 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([2, 809508]), Frequency: 44100Hz
2025-01-05 18:10:07,589 - services.audio_processor - INFO - [audio_processor.py:219] - Resampling from 44100Hz to 16000Hz
2025-01-05 18:10:07,615 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-05 18:10:07,617 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-05 18:10:07,650 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-05 18:10:07,667 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 18:10:07,667 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 18:10:07,677 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 18:10:07,677 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 18:10:07,687 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 18:10:07,687 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 18:10:07,697 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 18:10:07,697 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 18:10:08,149 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-05 18:10:08,149 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-05 18:10:08,185 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 18:10:08,185 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 18:10:08,192 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 18:10:08,192 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 18:10:08,199 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 18:10:08,199 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 18:10:08,206 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 18:10:08,206 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 18:10:08,645 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-05 18:10:08,645 - __main__ - INFO - [app.py:406] - 
==================================================
2025-01-05 18:10:08,645 - __main__ - INFO - [app.py:407] - Input Audio Quality Report
2025-01-05 18:10:08,645 - __main__ - INFO - [app.py:408] - ==================================================
2025-01-05 18:10:08,645 - __main__ - INFO - [app.py:409] - Request ID: 84134c7a
2025-01-05 18:10:08,645 - __main__ - INFO - [app.py:410] - Target Language: fra
2025-01-05 18:10:08,645 - __main__ - INFO - [app.py:411] - --------------------------------------------------
2025-01-05 18:10:08,645 - __main__ - INFO - [app.py:412] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.800
- Avg Amplitude: 0.013
- Rms Level: 0.039
- Crest Factor: 20.262
- Zero Crossings: 127716.000
- Silence Percentage: 62.168
- Clipping Points: 0.000
- Dynamic Range: 3022615.000

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.070
  - Temporal Flatness: 0.020

- Volume Metrics:
  - Volume Stability: -0.728
  - Volume Range: 29148040.000
  - Volume Variations: 0.034

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.003898838626448
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.6381455659866333, 'stability': 1.6408194303512573, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.23516440391540527, 'consistency': 0.2896541953086853, 'distinction': 0.11255760490894318}
  - Description: Moderate nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.670
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.340
  - Rhythm Quality: 0.358
  - Intonation Quality: 0.322

Vowel Quality:
  - Quality Score: 0.005
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-05 18:10:08,645 - __main__ - INFO - [app.py:413] - ==================================================

2025-01-05 18:10:08,645 - __main__ - INFO - [app.py:424] - Request 84134c7a: Audio processed successfully
2025-01-05 18:10:08,667 - __main__ - INFO - [app.py:443] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-05 18:10:22,425 - __main__ - INFO - [app.py:483] - Source text: the stale smell of old beer lingers it takes heat to bring out the odor a cold dip restores health and zest a salt pickle tastes fine with ham tacos al pastor are my favorite a zestful food is the hot cross bun
2025-01-05 18:10:36,987 - __main__ - INFO - [app.py:502] - Target text: l'odeur de la vieille bière lingoure il faut de la chaleur pour faire ressortir l'odore une dip froide restaure la santé et le zest un pickle salé goûte bien avec le jambon tacos al pasteur sont mon favori une nourriture zestueuse est le hot cross bun
2025-01-05 18:10:56,700 - __main__ - INFO - [app.py:525] - Processing tuple output from model
2025-01-05 18:10:56,714 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 18:10:56,714 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 18:10:56,723 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 18:10:56,723 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 18:10:56,731 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 18:10:56,731 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 18:10:56,740 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 18:10:56,740 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 18:10:57,056 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-05 18:10:57,057 - __main__ - INFO - [app.py:548] - 
==================================================
2025-01-05 18:10:57,057 - __main__ - INFO - [app.py:549] - Translated Audio Quality Report
2025-01-05 18:10:57,057 - __main__ - INFO - [app.py:550] - ==================================================
2025-01-05 18:10:57,057 - __main__ - INFO - [app.py:551] - Request ID: 84134c7a
2025-01-05 18:10:57,057 - __main__ - INFO - [app.py:552] - Target Language: fra
2025-01-05 18:10:57,057 - __main__ - INFO - [app.py:553] - --------------------------------------------------
2025-01-05 18:10:57,057 - __main__ - INFO - [app.py:554] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.750
- Avg Amplitude: 0.064
- Rms Level: 0.099
- Crest Factor: 7.613
- Zero Crossings: 27483.000
- Silence Percentage: 9.886
- Clipping Points: 0.000
- Dynamic Range: 164.603

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.048
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.027
  - Temporal Flatness: 0.016

- Volume Metrics:
  - Volume Stability: 0.343
  - Volume Range: 963.886
  - Volume Variations: 0.054

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0258947655232187
- Background Noise: 4.045029659911309
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 1.0627641677856445, 'stability': 3.681182622909546, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.02790275402367115, 'consistency': 0.0, 'distinction': 0.08906450867652893}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.530
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.003
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-05 18:10:57,057 - __main__ - INFO - [app.py:555] - ==================================================

2025-01-05 18:10:57,057 - __main__ - INFO - [app.py:561] - Request 84134c7a: Audio output processed successfully
2025-01-05 18:10:57,061 - __main__ - INFO - [app.py:615] - Request 84134c7a: Response prepared successfully
2025-01-05 18:10:57,061 - __main__ - INFO - [app.py:633] - Request 84134c7a completed in 49.49s
2025-01-05 18:10:57,065 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 49.49s, Memory Change: 1632.80MB
2025-01-05 18:10:57,065 - __main__ - INFO - [app.py:259] - Request to /translate took 54.71s
2025-01-05 18:29:38,878 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-05 18:29:38,881 - __main__ - INFO - [app.py:326] - Starting translation request 25dd0ad6
2025-01-05 18:29:38,881 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-05 18:29:38,881 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-05 18:29:38,883 - __main__ - INFO - [app.py:384] - Request 25dd0ad6: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpbcivx1k0.wav
2025-01-05 18:29:38,883 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 18.36 seconds
2025-01-05 18:29:38,883 - __main__ - INFO - [app.py:395] - Request 25dd0ad6: Beginning audio processing with diagnostics
2025-01-05 18:29:38,883 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpbcivx1k0.wav
2025-01-05 18:29:38,883 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 44100, Channels: 2
2025-01-05 18:29:38,891 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([2, 809508]), Frequency: 44100Hz
2025-01-05 18:29:38,891 - services.audio_processor - INFO - [audio_processor.py:219] - Resampling from 44100Hz to 16000Hz
2025-01-05 18:29:38,911 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-05 18:29:38,914 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-05 18:29:38,935 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-05 18:29:38,951 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 18:29:38,952 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 18:29:38,962 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 18:29:38,963 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 18:29:38,970 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 18:29:38,971 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 18:29:38,979 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 18:29:38,979 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 18:29:39,427 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-05 18:29:39,427 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-05 18:29:39,464 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 18:29:39,464 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 18:29:39,470 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 18:29:39,470 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 18:29:39,480 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 18:29:39,480 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 18:29:39,489 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 18:29:39,489 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 18:29:39,922 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-05 18:29:39,922 - __main__ - INFO - [app.py:406] - 
==================================================
2025-01-05 18:29:39,922 - __main__ - INFO - [app.py:407] - Input Audio Quality Report
2025-01-05 18:29:39,922 - __main__ - INFO - [app.py:408] - ==================================================
2025-01-05 18:29:39,922 - __main__ - INFO - [app.py:409] - Request ID: 25dd0ad6
2025-01-05 18:29:39,922 - __main__ - INFO - [app.py:410] - Target Language: fra
2025-01-05 18:29:39,922 - __main__ - INFO - [app.py:411] - --------------------------------------------------
2025-01-05 18:29:39,922 - __main__ - INFO - [app.py:412] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.800
- Avg Amplitude: 0.013
- Rms Level: 0.039
- Crest Factor: 20.262
- Zero Crossings: 127716.000
- Silence Percentage: 62.168
- Clipping Points: 0.000
- Dynamic Range: 3022615.000

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.070
  - Temporal Flatness: 0.020

- Volume Metrics:
  - Volume Stability: -0.728
  - Volume Range: 29148040.000
  - Volume Variations: 0.034

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.003898838626448
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.6381455659866333, 'stability': 1.6408194303512573, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.23516440391540527, 'consistency': 0.2896541953086853, 'distinction': 0.11255760490894318}
  - Description: Moderate nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.670
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.340
  - Rhythm Quality: 0.358
  - Intonation Quality: 0.322

Vowel Quality:
  - Quality Score: 0.005
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-05 18:29:39,922 - __main__ - INFO - [app.py:413] - ==================================================

2025-01-05 18:29:39,922 - __main__ - INFO - [app.py:424] - Request 25dd0ad6: Audio processed successfully
2025-01-05 18:29:39,944 - __main__ - INFO - [app.py:443] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-05 18:29:54,672 - __main__ - INFO - [app.py:483] - Source text: the stale smell of old beer lingers it takes heat to bring out the odor a cold dip restores health and zest a salt pickle tastes fine with ham tacos al pastor are my favorite a zestful food is the hot cross bun
2025-01-05 18:30:10,673 - __main__ - INFO - [app.py:502] - Target text: l'odeur de la vieille bière lingoure il faut de la chaleur pour faire ressortir l'odore une dip froide restaure la santé et le zest un pickle salé goûte bien avec le jambon tacos al pasteur sont mon favori une nourriture zestueuse est le hot cross bun
2025-01-05 18:30:30,387 - __main__ - ERROR - [app.py:538] - Translation error: index out of range in self
2025-01-05 18:30:30,428 - __main__ - INFO - [app.py:633] - Request 25dd0ad6 completed in 51.55s
2025-01-05 18:30:30,431 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 51.55s, Memory Change: 867.36MB
2025-01-05 18:30:30,431 - __main__ - INFO - [app.py:259] - Request to /translate took 59.34s
2025-01-05 18:31:08,541 - __main__ - INFO - [app.py:198] - Received SIGINT signal
2025-01-05 18:31:08,541 - __main__ - INFO - [app.py:183] - Initiating graceful shutdown...
2025-01-05 18:31:13,546 - __main__ - INFO - [app.py:698] - Application shutting down...
2025-01-05 18:31:13,547 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-05 18:31:13,547 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-05 18:31:13,548 - __main__ - INFO - [app.py:691] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-05 18:31:13,548 - __main__ - INFO - [app.py:711] - Cleanup completed successfully
2025-01-05 18:31:13,548 - __main__ - INFO - [app.py:187] - Graceful shutdown completed
2025-01-05 18:31:13,551 - __main__ - INFO - [app.py:698] - Application shutting down...
2025-01-05 18:31:13,551 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-05 18:31:13,551 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-05 18:31:13,552 - __main__ - INFO - [app.py:691] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-05 18:31:13,552 - __main__ - INFO - [app.py:711] - Cleanup completed successfully
2025-01-05 18:31:13,553 - __main__ - INFO - [app.py:698] - Application shutting down...
2025-01-05 18:31:13,553 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-05 18:31:13,554 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-05 18:31:13,554 - __main__ - INFO - [app.py:691] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-05 18:31:13,555 - __main__ - INFO - [app.py:711] - Cleanup completed successfully
2025-01-05 18:31:13,681 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-05 18:31:13,681 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-05 18:31:34,021 - __main__ - INFO - [app.py:728] - Metrics server started on port 8000
2025-01-05 18:31:34,021 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-05 18:31:48,575 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-05 18:31:54,716 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-05 18:31:54,718 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-05 18:31:59,460 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-05 18:31:59,462 - __main__ - INFO - [app.py:691] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-05 18:31:59,462 - __main__ - INFO - [app.py:752] - ==================================================
2025-01-05 18:31:59,462 - __main__ - INFO - [app.py:753] - Starting LinguaSync Backend
2025-01-05 18:31:59,462 - __main__ - INFO - [app.py:754] - Starting Flask app on port 5001 using cpu
2025-01-05 18:31:59,462 - __main__ - INFO - [app.py:755] - Python version: 3.12.6 (v3.12.6:a4a2d2b0d85, Sep  6 2024, 16:08:03) [Clang 13.0.0 (clang-1300.0.29.30)]
2025-01-05 18:31:59,462 - __main__ - INFO - [app.py:756] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-05 18:31:59,462 - __main__ - INFO - [app.py:757] - Maximum audio length: 300 seconds
2025-01-05 18:31:59,462 - __main__ - INFO - [app.py:758] - Sample rate: 16000 Hz
2025-01-05 18:31:59,462 - __main__ - INFO - [app.py:762] - System memory: 36.0GB total, 17.6GB available
2025-01-05 18:31:59,462 - __main__ - INFO - [app.py:763] - CPU cores: 11
2025-01-05 18:31:59,463 - __main__ - INFO - [app.py:771] - Configuration:
2025-01-05 18:31:59,463 - __main__ - INFO - [app.py:772] - - Debug mode: False
2025-01-05 18:31:59,463 - __main__ - INFO - [app.py:773] - - CORS enabled: True
2025-01-05 18:31:59,463 - __main__ - INFO - [app.py:774] - - Rate limiting: 10 requests per minute
2025-01-05 18:31:59,463 - __main__ - INFO - [app.py:775] - - Metrics enabled: True (port 8000)
2025-01-05 18:31:59,463 - __main__ - INFO - [app.py:777] - ==================================================
2025-01-05 18:33:38,371 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-05 18:33:38,372 - __main__ - INFO - [app.py:326] - Starting translation request 0e3d0896
2025-01-05 18:33:38,372 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-05 18:33:38,372 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-05 18:33:38,374 - __main__ - INFO - [app.py:384] - Request 0e3d0896: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpb77ed4a7.wav
2025-01-05 18:33:38,375 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 18.36 seconds
2025-01-05 18:33:38,375 - __main__ - INFO - [app.py:395] - Request 0e3d0896: Beginning audio processing with diagnostics
2025-01-05 18:33:38,375 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpb77ed4a7.wav
2025-01-05 18:33:38,375 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 44100, Channels: 2
2025-01-05 18:33:38,383 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([2, 809508]), Frequency: 44100Hz
2025-01-05 18:33:38,383 - services.audio_processor - INFO - [audio_processor.py:219] - Resampling from 44100Hz to 16000Hz
2025-01-05 18:33:38,403 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-05 18:33:38,405 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-05 18:33:38,425 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-05 18:33:38,440 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 18:33:38,440 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 18:33:38,447 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 18:33:38,447 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 18:33:38,454 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 18:33:38,454 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 18:33:38,462 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 18:33:38,462 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 18:33:38,911 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-05 18:33:38,911 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-05 18:33:38,948 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 18:33:38,948 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 18:33:38,954 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 18:33:38,954 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 18:33:38,961 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 18:33:38,962 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 18:33:38,969 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 18:33:38,969 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 18:33:39,405 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-05 18:33:39,405 - __main__ - INFO - [app.py:406] - 
==================================================
2025-01-05 18:33:39,405 - __main__ - INFO - [app.py:407] - Input Audio Quality Report
2025-01-05 18:33:39,405 - __main__ - INFO - [app.py:408] - ==================================================
2025-01-05 18:33:39,405 - __main__ - INFO - [app.py:409] - Request ID: 0e3d0896
2025-01-05 18:33:39,405 - __main__ - INFO - [app.py:410] - Target Language: fra
2025-01-05 18:33:39,405 - __main__ - INFO - [app.py:411] - --------------------------------------------------
2025-01-05 18:33:39,405 - __main__ - INFO - [app.py:412] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.800
- Avg Amplitude: 0.013
- Rms Level: 0.039
- Crest Factor: 20.262
- Zero Crossings: 127716.000
- Silence Percentage: 62.168
- Clipping Points: 0.000
- Dynamic Range: 3022615.000

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.070
  - Temporal Flatness: 0.020

- Volume Metrics:
  - Volume Stability: -0.728
  - Volume Range: 29148040.000
  - Volume Variations: 0.034

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.003898838626448
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.6381455659866333, 'stability': 1.6408194303512573, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.23516440391540527, 'consistency': 0.2896541953086853, 'distinction': 0.11255760490894318}
  - Description: Moderate nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.670
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.340
  - Rhythm Quality: 0.358
  - Intonation Quality: 0.322

Vowel Quality:
  - Quality Score: 0.005
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-05 18:33:39,405 - __main__ - INFO - [app.py:413] - ==================================================

2025-01-05 18:33:39,406 - __main__ - INFO - [app.py:424] - Request 0e3d0896: Audio processed successfully
2025-01-05 18:33:39,426 - __main__ - INFO - [app.py:443] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-05 18:33:54,130 - __main__ - INFO - [app.py:483] - Source text: the stale smell of old beer lingers it takes heat to bring out the odor a cold dip restores health and zest a salt pickle tastes fine with ham tacos al pastor are my favorite a zestful food is the hot cross bun
2025-01-05 18:34:11,549 - __main__ - INFO - [app.py:502] - Target text: l'odeur de la vieille bière lingoure il faut de la chaleur pour faire ressortir l'odore une dip froide restaure la santé et le zest un pickle salé goûte bien avec le jambon tacos al pasteur sont mon favori une nourriture zestueuse est le hot cross bun
2025-01-05 18:34:32,266 - __main__ - INFO - [app.py:525] - Processing tuple output from model
2025-01-05 18:34:32,278 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 18:34:32,278 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 18:34:32,283 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 18:34:32,283 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 18:34:32,290 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 18:34:32,291 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 18:34:32,296 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 18:34:32,297 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 18:34:32,607 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-05 18:34:32,607 - __main__ - INFO - [app.py:548] - 
==================================================
2025-01-05 18:34:32,607 - __main__ - INFO - [app.py:549] - Translated Audio Quality Report
2025-01-05 18:34:32,607 - __main__ - INFO - [app.py:550] - ==================================================
2025-01-05 18:34:32,607 - __main__ - INFO - [app.py:551] - Request ID: 0e3d0896
2025-01-05 18:34:32,607 - __main__ - INFO - [app.py:552] - Target Language: fra
2025-01-05 18:34:32,607 - __main__ - INFO - [app.py:553] - --------------------------------------------------
2025-01-05 18:34:32,607 - __main__ - INFO - [app.py:554] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.728
- Avg Amplitude: 0.064
- Rms Level: 0.099
- Crest Factor: 7.374
- Zero Crossings: 26381.000
- Silence Percentage: 10.271
- Clipping Points: 0.000
- Dynamic Range: 175.893

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.078
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.027
  - Temporal Flatness: 0.015

- Volume Metrics:
  - Volume Stability: 0.351
  - Volume Range: 1125.467
  - Volume Variations: 0.054

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.02677569730026
- Background Noise: 3.9497118949798495
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 1.048950433731079, 'stability': 3.704329013824463, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.0, 'distinction': 0.058808356523513794}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.525
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.003
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-05 18:34:32,607 - __main__ - INFO - [app.py:555] - ==================================================

2025-01-05 18:34:32,607 - __main__ - INFO - [app.py:561] - Request 0e3d0896: Audio output processed successfully
2025-01-05 18:34:32,612 - __main__ - INFO - [app.py:615] - Request 0e3d0896: Response prepared successfully
2025-01-05 18:34:32,613 - __main__ - INFO - [app.py:633] - Request 0e3d0896 completed in 54.24s
2025-01-05 18:34:32,616 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 54.24s, Memory Change: 1528.50MB
2025-01-05 18:34:32,616 - __main__ - INFO - [app.py:259] - Request to /translate took 59.40s
2025-01-05 18:41:05,120 - __main__ - INFO - [app.py:198] - Received SIGINT signal
2025-01-05 18:41:05,121 - __main__ - INFO - [app.py:183] - Initiating graceful shutdown...
2025-01-05 18:41:10,126 - __main__ - INFO - [app.py:698] - Application shutting down...
2025-01-05 18:41:10,127 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-05 18:41:10,127 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-05 18:41:10,129 - __main__ - INFO - [app.py:691] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-05 18:41:10,129 - __main__ - INFO - [app.py:711] - Cleanup completed successfully
2025-01-05 18:41:10,129 - __main__ - INFO - [app.py:187] - Graceful shutdown completed
2025-01-05 18:41:10,131 - __main__ - INFO - [app.py:698] - Application shutting down...
2025-01-05 18:41:10,132 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-05 18:41:10,132 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-05 18:41:10,133 - __main__ - INFO - [app.py:691] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-05 18:41:10,133 - __main__ - INFO - [app.py:711] - Cleanup completed successfully
2025-01-05 18:41:10,134 - __main__ - INFO - [app.py:698] - Application shutting down...
2025-01-05 18:41:10,134 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-05 18:41:10,134 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-05 18:41:10,135 - __main__ - INFO - [app.py:691] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-05 18:41:10,135 - __main__ - INFO - [app.py:711] - Cleanup completed successfully
2025-01-05 18:41:10,347 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-05 18:41:10,348 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-05 18:41:24,904 - __main__ - INFO - [app.py:728] - Metrics server started on port 8000
2025-01-05 18:41:24,904 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-05 18:41:39,020 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-05 18:41:45,370 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-05 18:41:45,373 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-05 18:41:49,420 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-05 18:41:49,422 - __main__ - INFO - [app.py:691] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-05 18:41:49,422 - __main__ - INFO - [app.py:752] - ==================================================
2025-01-05 18:41:49,422 - __main__ - INFO - [app.py:753] - Starting LinguaSync Backend
2025-01-05 18:41:49,422 - __main__ - INFO - [app.py:754] - Starting Flask app on port 5001 using cpu
2025-01-05 18:41:49,422 - __main__ - INFO - [app.py:755] - Python version: 3.12.6 (v3.12.6:a4a2d2b0d85, Sep  6 2024, 16:08:03) [Clang 13.0.0 (clang-1300.0.29.30)]
2025-01-05 18:41:49,422 - __main__ - INFO - [app.py:756] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-05 18:41:49,422 - __main__ - INFO - [app.py:757] - Maximum audio length: 300 seconds
2025-01-05 18:41:49,422 - __main__ - INFO - [app.py:758] - Sample rate: 16000 Hz
2025-01-05 18:41:49,422 - __main__ - INFO - [app.py:762] - System memory: 36.0GB total, 15.9GB available
2025-01-05 18:41:49,422 - __main__ - INFO - [app.py:763] - CPU cores: 11
2025-01-05 18:41:49,422 - __main__ - INFO - [app.py:771] - Configuration:
2025-01-05 18:41:49,422 - __main__ - INFO - [app.py:772] - - Debug mode: False
2025-01-05 18:41:49,422 - __main__ - INFO - [app.py:773] - - CORS enabled: True
2025-01-05 18:41:49,422 - __main__ - INFO - [app.py:774] - - Rate limiting: 10 requests per minute
2025-01-05 18:41:49,422 - __main__ - INFO - [app.py:775] - - Metrics enabled: True (port 8000)
2025-01-05 18:41:49,422 - __main__ - INFO - [app.py:777] - ==================================================
2025-01-05 18:42:35,377 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-05 18:42:35,379 - __main__ - INFO - [app.py:326] - Starting translation request 1e817dc2
2025-01-05 18:42:35,379 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-05 18:42:35,379 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-05 18:42:35,380 - __main__ - INFO - [app.py:384] - Request 1e817dc2: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpn0l7h282.wav
2025-01-05 18:42:35,381 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 18.36 seconds
2025-01-05 18:42:35,381 - __main__ - INFO - [app.py:395] - Request 1e817dc2: Beginning audio processing with diagnostics
2025-01-05 18:42:35,381 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpn0l7h282.wav
2025-01-05 18:42:35,381 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 44100, Channels: 2
2025-01-05 18:42:35,389 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([2, 809508]), Frequency: 44100Hz
2025-01-05 18:42:35,389 - services.audio_processor - INFO - [audio_processor.py:219] - Resampling from 44100Hz to 16000Hz
2025-01-05 18:42:35,412 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-05 18:42:35,415 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-05 18:42:35,441 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-05 18:42:35,455 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 18:42:35,456 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 18:42:35,462 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 18:42:35,463 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 18:42:35,470 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 18:42:35,471 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 18:42:35,479 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 18:42:35,480 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 18:42:35,927 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-05 18:42:35,927 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-05 18:42:35,972 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 18:42:35,972 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 18:42:35,981 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 18:42:35,981 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 18:42:35,990 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 18:42:35,990 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 18:42:35,998 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 18:42:35,998 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 18:42:36,429 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-05 18:42:36,429 - __main__ - INFO - [app.py:406] - 
==================================================
2025-01-05 18:42:36,429 - __main__ - INFO - [app.py:407] - Input Audio Quality Report
2025-01-05 18:42:36,429 - __main__ - INFO - [app.py:408] - ==================================================
2025-01-05 18:42:36,429 - __main__ - INFO - [app.py:409] - Request ID: 1e817dc2
2025-01-05 18:42:36,429 - __main__ - INFO - [app.py:410] - Target Language: fra
2025-01-05 18:42:36,429 - __main__ - INFO - [app.py:411] - --------------------------------------------------
2025-01-05 18:42:36,429 - __main__ - INFO - [app.py:412] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.800
- Avg Amplitude: 0.013
- Rms Level: 0.039
- Crest Factor: 20.262
- Zero Crossings: 127716.000
- Silence Percentage: 62.168
- Clipping Points: 0.000
- Dynamic Range: 3022615.000

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.070
  - Temporal Flatness: 0.020

- Volume Metrics:
  - Volume Stability: -0.728
  - Volume Range: 29148040.000
  - Volume Variations: 0.034

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.003898838626448
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.6381455659866333, 'stability': 1.6408194303512573, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.23516440391540527, 'consistency': 0.2896541953086853, 'distinction': 0.11255760490894318}
  - Description: Moderate nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.670
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.340
  - Rhythm Quality: 0.358
  - Intonation Quality: 0.322

Vowel Quality:
  - Quality Score: 0.005
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-05 18:42:36,429 - __main__ - INFO - [app.py:413] - ==================================================

2025-01-05 18:42:36,429 - __main__ - INFO - [app.py:424] - Request 1e817dc2: Audio processed successfully
2025-01-05 18:42:36,451 - __main__ - INFO - [app.py:443] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-05 18:42:50,830 - __main__ - INFO - [app.py:483] - Source text: the stale smell of old beer lingers it takes heat to bring out the odor a cold dip restores health and zest a salt pickle tastes fine with ham tacos al pastor are my favorite a zestful food is the hot cross bun
2025-01-05 18:43:06,988 - __main__ - INFO - [app.py:502] - Target text: l'odeur de la vieille bière lingoure il faut de la chaleur pour faire ressortir l'odore une dip froide restaure la santé et le zest un pickle salé goûte bien avec le jambon tacos al pasteur sont mon favori une nourriture zestueuse est le hot cross bun
2025-01-05 18:43:28,162 - __main__ - INFO - [app.py:525] - Processing tuple output from model
2025-01-05 18:43:28,181 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 18:43:28,182 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 18:43:28,194 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 18:43:28,194 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 18:43:28,205 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 18:43:28,206 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 18:43:28,215 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 18:43:28,216 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 18:43:28,567 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-05 18:43:28,567 - __main__ - INFO - [app.py:548] - 
==================================================
2025-01-05 18:43:28,567 - __main__ - INFO - [app.py:549] - Translated Audio Quality Report
2025-01-05 18:43:28,567 - __main__ - INFO - [app.py:550] - ==================================================
2025-01-05 18:43:28,567 - __main__ - INFO - [app.py:551] - Request ID: 1e817dc2
2025-01-05 18:43:28,567 - __main__ - INFO - [app.py:552] - Target Language: fra
2025-01-05 18:43:28,567 - __main__ - INFO - [app.py:553] - --------------------------------------------------
2025-01-05 18:43:28,567 - __main__ - INFO - [app.py:554] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.676
- Avg Amplitude: 0.063
- Rms Level: 0.098
- Crest Factor: 6.906
- Zero Crossings: 27602.000
- Silence Percentage: 9.736
- Clipping Points: 0.000
- Dynamic Range: 160.076

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.137
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.029
  - Temporal Flatness: 0.016

- Volume Metrics:
  - Volume Stability: 0.349
  - Volume Range: 333.956
  - Volume Variations: 0.054

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0283468379246243
- Background Noise: 3.7622166343814385
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 1.1074353456497192, 'stability': 3.7731070518493652, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.0, 'distinction': 0.11286024004220963}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.543
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.004
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-05 18:43:28,567 - __main__ - INFO - [app.py:555] - ==================================================

2025-01-05 18:43:28,567 - __main__ - INFO - [app.py:561] - Request 1e817dc2: Audio output processed successfully
2025-01-05 18:43:28,572 - __main__ - INFO - [app.py:615] - Request 1e817dc2: Response prepared successfully
2025-01-05 18:43:28,572 - __main__ - INFO - [app.py:633] - Request 1e817dc2 completed in 53.19s
2025-01-05 18:43:28,575 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 53.20s, Memory Change: 1400.53MB
2025-01-05 18:43:28,576 - __main__ - INFO - [app.py:259] - Request to /translate took 58.62s
2025-01-05 18:43:57,315 - __main__ - INFO - [app.py:198] - Received SIGINT signal
2025-01-05 18:43:57,316 - __main__ - INFO - [app.py:183] - Initiating graceful shutdown...
2025-01-05 18:43:57,577 - __main__ - INFO - [app.py:198] - Received SIGINT signal
2025-01-05 18:43:57,577 - __main__ - INFO - [app.py:183] - Initiating graceful shutdown...
2025-01-05 18:44:02,507 - __main__ - INFO - [app.py:198] - Received SIGINT signal
2025-01-05 18:44:02,508 - __main__ - INFO - [app.py:183] - Initiating graceful shutdown...
2025-01-05 18:44:07,509 - __main__ - INFO - [app.py:698] - Application shutting down...
2025-01-05 18:44:07,510 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-05 18:44:07,510 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-05 18:44:07,511 - __main__ - INFO - [app.py:691] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-05 18:44:07,512 - __main__ - INFO - [app.py:711] - Cleanup completed successfully
2025-01-05 18:44:07,512 - __main__ - INFO - [app.py:187] - Graceful shutdown completed
2025-01-05 18:44:07,513 - __main__ - INFO - [app.py:698] - Application shutting down...
2025-01-05 18:44:07,513 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-05 18:44:07,513 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-05 18:44:07,514 - __main__ - INFO - [app.py:691] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-05 18:44:07,514 - __main__ - INFO - [app.py:711] - Cleanup completed successfully
2025-01-05 18:44:07,515 - __main__ - INFO - [app.py:698] - Application shutting down...
2025-01-05 18:44:07,515 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-05 18:44:07,515 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-05 18:44:07,516 - __main__ - INFO - [app.py:691] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-05 18:44:07,516 - __main__ - INFO - [app.py:711] - Cleanup completed successfully
2025-01-05 18:44:07,667 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-05 18:44:07,667 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-05 19:00:53,629 - __main__ - INFO - [app.py:728] - Metrics server started on port 8000
2025-01-05 19:00:53,629 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-05 19:01:07,599 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-05 19:01:14,339 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-05 19:01:14,341 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-05 19:01:18,655 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-05 19:01:18,657 - __main__ - INFO - [app.py:691] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-05 19:01:18,657 - __main__ - INFO - [app.py:752] - ==================================================
2025-01-05 19:01:18,657 - __main__ - INFO - [app.py:753] - Starting LinguaSync Backend
2025-01-05 19:01:18,657 - __main__ - INFO - [app.py:754] - Starting Flask app on port 5001 using cpu
2025-01-05 19:01:18,657 - __main__ - INFO - [app.py:755] - Python version: 3.12.6 (v3.12.6:a4a2d2b0d85, Sep  6 2024, 16:08:03) [Clang 13.0.0 (clang-1300.0.29.30)]
2025-01-05 19:01:18,657 - __main__ - INFO - [app.py:756] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-05 19:01:18,657 - __main__ - INFO - [app.py:757] - Maximum audio length: 300 seconds
2025-01-05 19:01:18,657 - __main__ - INFO - [app.py:758] - Sample rate: 16000 Hz
2025-01-05 19:01:18,657 - __main__ - INFO - [app.py:762] - System memory: 36.0GB total, 14.6GB available
2025-01-05 19:01:18,657 - __main__ - INFO - [app.py:763] - CPU cores: 11
2025-01-05 19:01:18,657 - __main__ - INFO - [app.py:771] - Configuration:
2025-01-05 19:01:18,657 - __main__ - INFO - [app.py:772] - - Debug mode: False
2025-01-05 19:01:18,657 - __main__ - INFO - [app.py:773] - - CORS enabled: True
2025-01-05 19:01:18,657 - __main__ - INFO - [app.py:774] - - Rate limiting: 10 requests per minute
2025-01-05 19:01:18,657 - __main__ - INFO - [app.py:775] - - Metrics enabled: True (port 8000)
2025-01-05 19:01:18,657 - __main__ - INFO - [app.py:777] - ==================================================
2025-01-05 19:02:38,829 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-05 19:02:38,830 - __main__ - INFO - [app.py:326] - Starting translation request 4568478a
2025-01-05 19:02:38,830 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-05 19:02:38,831 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-05 19:02:38,832 - __main__ - INFO - [app.py:384] - Request 4568478a: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpx4mmkymr.wav
2025-01-05 19:02:38,833 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 18.36 seconds
2025-01-05 19:02:38,833 - __main__ - INFO - [app.py:395] - Request 4568478a: Beginning audio processing with diagnostics
2025-01-05 19:02:38,833 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpx4mmkymr.wav
2025-01-05 19:02:38,833 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 44100, Channels: 2
2025-01-05 19:02:38,842 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([2, 809508]), Frequency: 44100Hz
2025-01-05 19:02:38,842 - services.audio_processor - INFO - [audio_processor.py:219] - Resampling from 44100Hz to 16000Hz
2025-01-05 19:02:38,865 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-05 19:02:38,867 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-05 19:02:38,888 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-05 19:02:38,902 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 19:02:38,902 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 19:02:38,911 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 19:02:38,911 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 19:02:38,918 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 19:02:38,919 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 19:02:38,925 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 19:02:38,926 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 19:02:39,373 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-05 19:02:39,373 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-05 19:02:39,412 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 19:02:39,412 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 19:02:39,418 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 19:02:39,418 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 19:02:39,427 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 19:02:39,428 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 19:02:39,435 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 19:02:39,435 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 19:02:39,869 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-05 19:02:39,869 - __main__ - INFO - [app.py:406] - 
==================================================
2025-01-05 19:02:39,869 - __main__ - INFO - [app.py:407] - Input Audio Quality Report
2025-01-05 19:02:39,869 - __main__ - INFO - [app.py:408] - ==================================================
2025-01-05 19:02:39,869 - __main__ - INFO - [app.py:409] - Request ID: 4568478a
2025-01-05 19:02:39,869 - __main__ - INFO - [app.py:410] - Target Language: fra
2025-01-05 19:02:39,869 - __main__ - INFO - [app.py:411] - --------------------------------------------------
2025-01-05 19:02:39,869 - __main__ - INFO - [app.py:412] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.800
- Avg Amplitude: 0.013
- Rms Level: 0.039
- Crest Factor: 20.262
- Zero Crossings: 127716.000
- Silence Percentage: 62.168
- Clipping Points: 0.000
- Dynamic Range: 3022615.000

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.070
  - Temporal Flatness: 0.020

- Volume Metrics:
  - Volume Stability: -0.728
  - Volume Range: 29148040.000
  - Volume Variations: 0.034

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.003898838626448
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.6381455659866333, 'stability': 1.6408194303512573, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.23516440391540527, 'consistency': 0.2896541953086853, 'distinction': 0.11255760490894318}
  - Description: Moderate nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.670
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.340
  - Rhythm Quality: 0.358
  - Intonation Quality: 0.322

Vowel Quality:
  - Quality Score: 0.005
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-05 19:02:39,870 - __main__ - INFO - [app.py:413] - ==================================================

2025-01-05 19:02:39,870 - __main__ - INFO - [app.py:424] - Request 4568478a: Audio processed successfully
2025-01-05 19:02:39,891 - __main__ - INFO - [app.py:443] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-05 19:02:54,387 - __main__ - INFO - [app.py:483] - Source text: the stale smell of old beer lingers it takes heat to bring out the odor a cold dip restores health and zest a salt pickle tastes fine with ham tacos al pastor are my favorite a zestful food is the hot cross bun
2025-01-05 19:03:10,365 - __main__ - INFO - [app.py:502] - Target text: l'odeur de la vieille bière lingoure il faut de la chaleur pour faire ressortir l'odore une dip froide restaure la santé et le zest un pickle salé goûte bien avec le jambon tacos al pasteur sont mon favori une nourriture zestueuse est le hot cross bun
2025-01-05 19:03:30,820 - __main__ - INFO - [app.py:525] - Processing tuple output from model
2025-01-05 19:03:30,831 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 19:03:30,831 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 19:03:30,835 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 19:03:30,835 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 19:03:30,842 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 19:03:30,842 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 19:03:30,851 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 19:03:30,851 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 19:03:31,199 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-05 19:03:31,199 - __main__ - INFO - [app.py:548] - 
==================================================
2025-01-05 19:03:31,199 - __main__ - INFO - [app.py:549] - Translated Audio Quality Report
2025-01-05 19:03:31,199 - __main__ - INFO - [app.py:550] - ==================================================
2025-01-05 19:03:31,199 - __main__ - INFO - [app.py:551] - Request ID: 4568478a
2025-01-05 19:03:31,199 - __main__ - INFO - [app.py:552] - Target Language: fra
2025-01-05 19:03:31,199 - __main__ - INFO - [app.py:553] - --------------------------------------------------
2025-01-05 19:03:31,199 - __main__ - INFO - [app.py:554] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.740
- Avg Amplitude: 0.065
- Rms Level: 0.101
- Crest Factor: 7.343
- Zero Crossings: 25989.000
- Silence Percentage: 9.714
- Clipping Points: 0.000
- Dynamic Range: 161.473

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.082
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.027
  - Temporal Flatness: 0.015

- Volume Metrics:
  - Volume Stability: 0.308
  - Volume Range: 946.598
  - Volume Variations: 0.057

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.027435631314645
- Background Noise: 3.9370339699253902
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
No issues detected

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 1.0054609775543213, 'stability': 3.626356363296509, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0872984230518341, 'consistency': 0.0, 'distinction': 0.06605025380849838}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.534
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.002
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-05 19:03:31,199 - __main__ - INFO - [app.py:555] - ==================================================

2025-01-05 19:03:31,199 - __main__ - INFO - [app.py:561] - Request 4568478a: Audio output processed successfully
2025-01-05 19:03:31,203 - __main__ - INFO - [app.py:615] - Request 4568478a: Response prepared successfully
2025-01-05 19:03:31,204 - __main__ - INFO - [app.py:633] - Request 4568478a completed in 52.37s
2025-01-05 19:03:31,204 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 52.37s, Memory Change: 1486.98MB
2025-01-05 19:03:31,204 - __main__ - INFO - [app.py:259] - Request to /translate took 59.81s
2025-01-05 23:16:01,529 - services.model_manager - INFO - [model_manager.py:188] - Model inactive for too long, reloading...
2025-01-05 23:16:01,531 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-05 23:16:15,053 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-05 23:16:21,250 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-05 23:16:21,252 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-05 23:16:26,192 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-05 23:16:26,193 - __main__ - INFO - [app.py:326] - Starting translation request 45e040e5
2025-01-05 23:16:26,193 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-05 23:16:26,193 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-05 23:16:26,195 - __main__ - INFO - [app.py:384] - Request 45e040e5: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpsezy2bjw.wav
2025-01-05 23:16:26,196 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 18.36 seconds
2025-01-05 23:16:26,196 - __main__ - INFO - [app.py:395] - Request 45e040e5: Beginning audio processing with diagnostics
2025-01-05 23:16:26,196 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpsezy2bjw.wav
2025-01-05 23:16:26,196 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 44100, Channels: 2
2025-01-05 23:16:26,204 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([2, 809508]), Frequency: 44100Hz
2025-01-05 23:16:26,204 - services.audio_processor - INFO - [audio_processor.py:219] - Resampling from 44100Hz to 16000Hz
2025-01-05 23:16:26,225 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-05 23:16:26,227 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-05 23:16:26,250 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-05 23:16:26,264 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 23:16:26,264 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 23:16:26,273 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 23:16:26,273 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 23:16:26,279 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 23:16:26,280 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 23:16:26,286 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 23:16:26,286 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 23:16:26,742 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-05 23:16:26,743 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-05 23:16:26,779 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 23:16:26,779 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 23:16:26,786 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 23:16:26,786 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 23:16:26,793 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 23:16:26,793 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 23:16:26,801 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 23:16:26,801 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 23:16:27,232 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-05 23:16:27,233 - __main__ - INFO - [app.py:406] - 
==================================================
2025-01-05 23:16:27,233 - __main__ - INFO - [app.py:407] - Input Audio Quality Report
2025-01-05 23:16:27,233 - __main__ - INFO - [app.py:408] - ==================================================
2025-01-05 23:16:27,233 - __main__ - INFO - [app.py:409] - Request ID: 45e040e5
2025-01-05 23:16:27,233 - __main__ - INFO - [app.py:410] - Target Language: fra
2025-01-05 23:16:27,233 - __main__ - INFO - [app.py:411] - --------------------------------------------------
2025-01-05 23:16:27,233 - __main__ - INFO - [app.py:412] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.800
- Avg Amplitude: 0.013
- Rms Level: 0.039
- Crest Factor: 20.262
- Zero Crossings: 127716.000
- Silence Percentage: 62.168
- Clipping Points: 0.000
- Dynamic Range: 3022615.000

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.070
  - Temporal Flatness: 0.020

- Volume Metrics:
  - Volume Stability: -0.728
  - Volume Range: 29148040.000
  - Volume Variations: 0.034

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.003898838626448
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.6381455659866333, 'stability': 1.6408194303512573, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.23516440391540527, 'consistency': 0.2896541953086853, 'distinction': 0.11255760490894318}
  - Description: Moderate nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.670
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.340
  - Rhythm Quality: 0.358
  - Intonation Quality: 0.322

Vowel Quality:
  - Quality Score: 0.005
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-05 23:16:27,233 - __main__ - INFO - [app.py:413] - ==================================================

2025-01-05 23:16:27,233 - __main__ - INFO - [app.py:424] - Request 45e040e5: Audio processed successfully
2025-01-05 23:16:27,254 - __main__ - INFO - [app.py:443] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-05 23:16:41,721 - __main__ - INFO - [app.py:483] - Source text: the stale smell of old beer lingers it takes heat to bring out the odor a cold dip restores health and zest a salt pickle tastes fine with ham tacos al pastor are my favorite a zestful food is the hot cross bun
2025-01-05 23:16:57,697 - __main__ - INFO - [app.py:502] - Target text: l'odeur de la vieille bière lingoure il faut de la chaleur pour faire ressortir l'odore une dip froide restaure la santé et le zest un pickle salé goûte bien avec le jambon tacos al pasteur sont mon favori une nourriture zestueuse est le hot cross bun
2025-01-05 23:17:18,412 - __main__ - INFO - [app.py:525] - Processing tuple output from model
2025-01-05 23:17:18,425 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 23:17:18,426 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 23:17:18,432 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 23:17:18,432 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 23:17:18,440 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 23:17:18,440 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 23:17:18,447 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 23:17:18,447 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 23:17:18,770 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-05 23:17:18,771 - __main__ - INFO - [app.py:548] - 
==================================================
2025-01-05 23:17:18,771 - __main__ - INFO - [app.py:549] - Translated Audio Quality Report
2025-01-05 23:17:18,771 - __main__ - INFO - [app.py:550] - ==================================================
2025-01-05 23:17:18,771 - __main__ - INFO - [app.py:551] - Request ID: 45e040e5
2025-01-05 23:17:18,771 - __main__ - INFO - [app.py:552] - Target Language: fra
2025-01-05 23:17:18,771 - __main__ - INFO - [app.py:553] - --------------------------------------------------
2025-01-05 23:17:18,771 - __main__ - INFO - [app.py:554] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.688
- Avg Amplitude: 0.066
- Rms Level: 0.101
- Crest Factor: 6.800
- Zero Crossings: 26482.000
- Silence Percentage: 9.583
- Clipping Points: 0.000
- Dynamic Range: 161.752

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.150
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.027
  - Temporal Flatness: 0.016

- Volume Metrics:
  - Volume Stability: 0.339
  - Volume Range: 1102.067
  - Volume Variations: 0.056

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0297748576248713
- Background Noise: 3.7200818633045487
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
No issues detected

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 1.007481336593628, 'stability': 3.674450635910034, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.001738857594318688, 'consistency': 0.0, 'distinction': 0.06300119310617447}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.516
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.003
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-05 23:17:18,771 - __main__ - INFO - [app.py:555] - ==================================================

2025-01-05 23:17:18,771 - __main__ - INFO - [app.py:561] - Request 45e040e5: Audio output processed successfully
2025-01-05 23:17:18,775 - __main__ - INFO - [app.py:615] - Request 45e040e5: Response prepared successfully
2025-01-05 23:17:18,775 - __main__ - INFO - [app.py:633] - Request 45e040e5 completed in 52.58s
2025-01-05 23:17:18,776 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 52.58s, Memory Change: 1774.52MB
2025-01-05 23:17:18,776 - __main__ - INFO - [app.py:259] - Request to /translate took 77.25s
2025-01-05 23:18:29,241 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-05 23:18:29,245 - __main__ - INFO - [app.py:326] - Starting translation request 3f4cc584
2025-01-05 23:18:29,245 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-05 23:18:29,245 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-05 23:18:29,246 - __main__ - INFO - [app.py:384] - Request 3f4cc584: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpsrppyd1z.wav
2025-01-05 23:18:29,247 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 18.36 seconds
2025-01-05 23:18:29,247 - __main__ - INFO - [app.py:395] - Request 3f4cc584: Beginning audio processing with diagnostics
2025-01-05 23:18:29,247 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpsrppyd1z.wav
2025-01-05 23:18:29,247 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 44100, Channels: 2
2025-01-05 23:18:29,255 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([2, 809508]), Frequency: 44100Hz
2025-01-05 23:18:29,255 - services.audio_processor - INFO - [audio_processor.py:219] - Resampling from 44100Hz to 16000Hz
2025-01-05 23:18:29,276 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-05 23:18:29,278 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for ita
2025-01-05 23:18:29,278 - services.audio_processor - WARNING - [audio_processor.py:289] - No specific parameters for ita, using defaults
2025-01-05 23:18:29,300 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-05 23:18:29,315 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 23:18:29,315 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 23:18:29,323 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 23:18:29,323 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 23:18:29,332 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 23:18:29,332 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 23:18:29,339 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 23:18:29,339 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 23:18:29,792 - services.diagnostics.language_analysis.italian - ERROR - [italian.py:138] - Italian consonant analysis failed: 'ItalianAnalyzer' object has no attribute '_analyze_plosives'
2025-01-05 23:18:29,794 - services.diagnostics.language_analysis.italian - ERROR - [italian.py:184] - Italian stress analysis failed: 'ItalianAnalyzer' object has no attribute '_find_stress_peaks'
2025-01-05 23:18:29,795 - services.diagnostics.language_analysis.italian - ERROR - [italian.py:214] - Italian intonation analysis failed: 'ItalianAnalyzer' object has no attribute '_extract_pitch_contour'
2025-01-05 23:18:29,804 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for ita
2025-01-05 23:18:29,805 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-05 23:18:29,807 - services.audio_processor - WARNING - [audio_processor.py:289] - No specific parameters for ita, using defaults
2025-01-05 23:18:29,841 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 23:18:29,841 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 23:18:29,847 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 23:18:29,847 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 23:18:29,855 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 23:18:29,855 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 23:18:29,861 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 23:18:29,861 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 23:18:30,298 - services.diagnostics.language_analysis.italian - ERROR - [italian.py:138] - Italian consonant analysis failed: 'ItalianAnalyzer' object has no attribute '_analyze_plosives'
2025-01-05 23:18:30,300 - services.diagnostics.language_analysis.italian - ERROR - [italian.py:184] - Italian stress analysis failed: 'ItalianAnalyzer' object has no attribute '_find_stress_peaks'
2025-01-05 23:18:30,300 - services.diagnostics.language_analysis.italian - ERROR - [italian.py:214] - Italian intonation analysis failed: 'ItalianAnalyzer' object has no attribute '_extract_pitch_contour'
2025-01-05 23:18:30,308 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for ita
2025-01-05 23:18:30,308 - __main__ - INFO - [app.py:406] - 
==================================================
2025-01-05 23:18:30,308 - __main__ - INFO - [app.py:407] - Input Audio Quality Report
2025-01-05 23:18:30,308 - __main__ - INFO - [app.py:408] - ==================================================
2025-01-05 23:18:30,308 - __main__ - INFO - [app.py:409] - Request ID: 3f4cc584
2025-01-05 23:18:30,308 - __main__ - INFO - [app.py:410] - Target Language: ita
2025-01-05 23:18:30,308 - __main__ - INFO - [app.py:411] - --------------------------------------------------
2025-01-05 23:18:30,308 - __main__ - INFO - [app.py:412] - Audio Quality Analysis Report
==============================

Target Language: ita

Waveform Analysis:
--------------------
- Peak Amplitude: 0.800
- Avg Amplitude: 0.013
- Rms Level: 0.039
- Crest Factor: 20.262
- Zero Crossings: 127716.000
- Silence Percentage: 62.168
- Clipping Points: 0.000
- Dynamic Range: 3022615.000

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.070
  - Temporal Flatness: 0.020

- Volume Metrics:
  - Volume Stability: -0.728
  - Volume Range: 29148040.000
  - Volume Variations: 0.034

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.003898838626448
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Gemination:
  - Strength: 0.526
  - Consistency: 0.374
  - Duration Contrast: 0.564
  - Quality Score: 0.488

Vowel Quality:
  - Clarity: 0.617
  - Stability: -2.042
  - Formant Structure: {'peaks': [50.78125, 62.5, 93.75], 'stability': 0.4533462564077684}
  - Overall Quality: -0.324

Consonant Features:

Prosodic Features:
  - Stress Timing: {'regularity': 0.0, 'contrast': 0.0, 'pattern_quality': 0.0}
  - Intonation: {'melodic_range': 0.0, 'contour_smoothness': 0.0, 'pattern_quality': 0.0}
  - Rhythm: {'regularity': 0.582501249768624, 'pattern_strength': 0.5555804371833801, 'overall_quality': 0.5690408434760021}
2025-01-05 23:18:30,309 - __main__ - INFO - [app.py:413] - ==================================================

2025-01-05 23:18:30,310 - __main__ - INFO - [app.py:424] - Request 3f4cc584: Audio processed successfully
2025-01-05 23:18:30,331 - __main__ - INFO - [app.py:443] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-05 23:18:46,834 - __main__ - INFO - [app.py:483] - Source text: the stale smell of old beer lingers it takes heat to bring out the odor a cold dip restores health and zest a salt pickle tastes fine with ham tacos al pastor are my favorite a zestful food is the hot cross bun
2025-01-05 23:19:03,362 - __main__ - INFO - [app.py:502] - Target text: il stale odore di vecchia birra lingura prende calore per portare fuori l'odore un dip freddo ripristina la salute e lo zest un piccolo salato sa bene con il prosciutto tacos al pasteur sono il mio preferito un cibo zestoso è il hot cross bun
2025-01-05 23:19:26,478 - __main__ - INFO - [app.py:525] - Processing tuple output from model
2025-01-05 23:19:26,491 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 23:19:26,491 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 23:19:26,496 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 23:19:26,496 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 23:19:26,505 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 23:19:26,505 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 23:19:26,510 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 23:19:26,511 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 23:19:26,816 - services.diagnostics.language_analysis.italian - ERROR - [italian.py:138] - Italian consonant analysis failed: 'ItalianAnalyzer' object has no attribute '_analyze_plosives'
2025-01-05 23:19:26,817 - services.diagnostics.language_analysis.italian - ERROR - [italian.py:184] - Italian stress analysis failed: 'ItalianAnalyzer' object has no attribute '_find_stress_peaks'
2025-01-05 23:19:26,818 - services.diagnostics.language_analysis.italian - ERROR - [italian.py:214] - Italian intonation analysis failed: 'ItalianAnalyzer' object has no attribute '_extract_pitch_contour'
2025-01-05 23:19:26,826 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for ita
2025-01-05 23:19:26,826 - __main__ - INFO - [app.py:548] - 
==================================================
2025-01-05 23:19:26,826 - __main__ - INFO - [app.py:549] - Translated Audio Quality Report
2025-01-05 23:19:26,826 - __main__ - INFO - [app.py:550] - ==================================================
2025-01-05 23:19:26,826 - __main__ - INFO - [app.py:551] - Request ID: 3f4cc584
2025-01-05 23:19:26,826 - __main__ - INFO - [app.py:552] - Target Language: ita
2025-01-05 23:19:26,826 - __main__ - INFO - [app.py:553] - --------------------------------------------------
2025-01-05 23:19:26,826 - __main__ - INFO - [app.py:554] - Audio Quality Analysis Report
==============================

Target Language: ita

Waveform Analysis:
--------------------
- Peak Amplitude: 0.917
- Avg Amplitude: 0.062
- Rms Level: 0.096
- Crest Factor: 9.553
- Zero Crossings: 26415.000
- Silence Percentage: 10.931
- Clipping Points: 0.000
- Dynamic Range: 188.206

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.025
  - Temporal Flatness: 0.014

- Volume Metrics:
  - Volume Stability: 0.349
  - Volume Range: 1623.340
  - Volume Variations: 0.053

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0201032277078714
- Background Noise: 4.8213553108296425
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Gemination:
  - Strength: 0.776
  - Consistency: -1.163
  - Duration Contrast: 0.461
  - Quality Score: 0.025

Vowel Quality:
  - Clarity: 1.099
  - Stability: -3.105
  - Formant Structure: {'peaks': [7.8125, 19.53125, 27.34375], 'stability': 0.6295853255290789}
  - Overall Quality: -0.459

Consonant Features:

Prosodic Features:
  - Stress Timing: {'regularity': 0.0, 'contrast': 0.0, 'pattern_quality': 0.0}
  - Intonation: {'melodic_range': 0.0, 'contour_smoothness': 0.0, 'pattern_quality': 0.0}
  - Rhythm: {'regularity': 0.40784694348332573, 'pattern_strength': 0.8683123588562012, 'overall_quality': 0.6380796511697635}
2025-01-05 23:19:26,826 - __main__ - INFO - [app.py:555] - ==================================================

2025-01-05 23:19:26,826 - __main__ - INFO - [app.py:561] - Request 3f4cc584: Audio output processed successfully
2025-01-05 23:19:26,830 - __main__ - INFO - [app.py:615] - Request 3f4cc584: Response prepared successfully
2025-01-05 23:19:26,830 - __main__ - INFO - [app.py:633] - Request 3f4cc584 completed in 57.59s
2025-01-05 23:19:26,831 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 57.59s, Memory Change: 205.92MB
2025-01-05 23:19:26,831 - __main__ - INFO - [app.py:259] - Request to /translate took 63.13s
2025-01-05 23:28:42,477 - __main__ - INFO - [app.py:259] - Request to /translate took 0.00s
2025-01-05 23:28:48,155 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-05 23:28:48,157 - __main__ - INFO - [app.py:326] - Starting translation request 87bd25f0
2025-01-05 23:28:48,157 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-05 23:28:48,157 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-05 23:28:50,937 - __main__ - INFO - [app.py:384] - Request 87bd25f0: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp04c45b29.wav
2025-01-05 23:28:50,938 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 228.36 seconds
2025-01-05 23:28:50,938 - __main__ - INFO - [app.py:395] - Request 87bd25f0: Beginning audio processing with diagnostics
2025-01-05 23:28:50,938 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp04c45b29.wav
2025-01-05 23:28:50,938 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 44100, Channels: 2
2025-01-05 23:28:51,049 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([2, 10070784]), Frequency: 44100Hz
2025-01-05 23:28:51,049 - services.audio_processor - INFO - [audio_processor.py:219] - Resampling from 44100Hz to 16000Hz
2025-01-05 23:28:51,444 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-05 23:28:51,464 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-05 23:28:51,778 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-05 23:28:51,984 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 23:28:51,985 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 23:28:52,077 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 23:28:52,078 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 23:28:52,163 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 23:28:52,163 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 23:28:52,245 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 23:28:52,246 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 23:28:58,623 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-05 23:28:58,624 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-05 23:28:59,139 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 23:28:59,140 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 23:28:59,231 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 23:28:59,232 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 23:28:59,318 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 23:28:59,319 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 23:28:59,400 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 23:28:59,400 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 23:29:06,494 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-05 23:29:06,495 - __main__ - INFO - [app.py:406] - 
==================================================
2025-01-05 23:29:06,495 - __main__ - INFO - [app.py:407] - Input Audio Quality Report
2025-01-05 23:29:06,495 - __main__ - INFO - [app.py:408] - ==================================================
2025-01-05 23:29:06,495 - __main__ - INFO - [app.py:409] - Request ID: 87bd25f0
2025-01-05 23:29:06,495 - __main__ - INFO - [app.py:410] - Target Language: fra
2025-01-05 23:29:06,495 - __main__ - INFO - [app.py:411] - --------------------------------------------------
2025-01-05 23:29:06,495 - __main__ - INFO - [app.py:412] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.942
- Avg Amplitude: 0.023
- Rms Level: 0.049
- Crest Factor: 19.304
- Zero Crossings: 1843807.000
- Silence Percentage: 30.477
- Clipping Points: 0.000
- Dynamic Range: 5410542.500

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.072
  - Temporal Flatness: 0.032

- Volume Metrics:
  - Volume Stability: -0.103
  - Volume Range: 36311184.000
  - Volume Variations: 0.036

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0050558784546233
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.8112865090370178, 'stability': 1.1978098154067993, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.07388506829738617, 'consistency': 0.36461275815963745, 'distinction': 0.11199858039617538}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.563
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.472
  - Rhythm Quality: 0.575
  - Intonation Quality: 0.368

Vowel Quality:
  - Quality Score: 0.005
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-05 23:29:06,495 - __main__ - INFO - [app.py:413] - ==================================================

2025-01-05 23:29:06,496 - __main__ - INFO - [app.py:424] - Request 87bd25f0: Audio processed successfully
2025-01-05 23:29:06,815 - __main__ - INFO - [app.py:443] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-05 23:39:13,419 - __main__ - INFO - [app.py:728] - Metrics server started on port 8000
2025-01-05 23:39:13,419 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-05 23:39:27,383 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-05 23:39:41,035 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-05 23:39:41,036 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-05 23:39:46,040 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-05 23:39:46,044 - __main__ - INFO - [app.py:691] - Cleanup complete: removed 1 files, freed 38.42MB
2025-01-05 23:39:46,044 - __main__ - INFO - [app.py:752] - ==================================================
2025-01-05 23:39:46,044 - __main__ - INFO - [app.py:753] - Starting LinguaSync Backend
2025-01-05 23:39:46,044 - __main__ - INFO - [app.py:754] - Starting Flask app on port 5001 using cpu
2025-01-05 23:39:46,044 - __main__ - INFO - [app.py:755] - Python version: 3.12.6 (v3.12.6:a4a2d2b0d85, Sep  6 2024, 16:08:03) [Clang 13.0.0 (clang-1300.0.29.30)]
2025-01-05 23:39:46,044 - __main__ - INFO - [app.py:756] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-05 23:39:46,044 - __main__ - INFO - [app.py:757] - Maximum audio length: 300 seconds
2025-01-05 23:39:46,044 - __main__ - INFO - [app.py:758] - Sample rate: 16000 Hz
2025-01-05 23:39:46,044 - __main__ - INFO - [app.py:762] - System memory: 36.0GB total, 21.1GB available
2025-01-05 23:39:46,044 - __main__ - INFO - [app.py:763] - CPU cores: 11
2025-01-05 23:39:46,044 - __main__ - INFO - [app.py:771] - Configuration:
2025-01-05 23:39:46,044 - __main__ - INFO - [app.py:772] - - Debug mode: False
2025-01-05 23:39:46,044 - __main__ - INFO - [app.py:773] - - CORS enabled: True
2025-01-05 23:39:46,044 - __main__ - INFO - [app.py:774] - - Rate limiting: 10 requests per minute
2025-01-05 23:39:46,044 - __main__ - INFO - [app.py:775] - - Metrics enabled: True (port 8000)
2025-01-05 23:39:46,044 - __main__ - INFO - [app.py:777] - ==================================================
2025-01-05 23:47:29,023 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-05 23:47:29,025 - __main__ - INFO - [app.py:326] - Starting translation request 2adb4fb2
2025-01-05 23:47:29,025 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-05 23:47:29,025 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-05 23:47:29,027 - __main__ - INFO - [app.py:384] - Request 2adb4fb2: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp9i30eixo.wav
2025-01-05 23:47:29,028 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 18.36 seconds
2025-01-05 23:47:29,028 - __main__ - INFO - [app.py:395] - Request 2adb4fb2: Beginning audio processing with diagnostics
2025-01-05 23:47:29,028 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp9i30eixo.wav
2025-01-05 23:47:29,028 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 44100, Channels: 2
2025-01-05 23:47:29,036 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([2, 809508]), Frequency: 44100Hz
2025-01-05 23:47:29,036 - services.audio_processor - INFO - [audio_processor.py:219] - Resampling from 44100Hz to 16000Hz
2025-01-05 23:47:29,066 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-05 23:47:29,068 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-05 23:47:29,098 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-05 23:47:29,117 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 23:47:29,117 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 23:47:29,134 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 23:47:29,135 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 23:47:29,150 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 23:47:29,150 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 23:47:29,158 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 23:47:29,158 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 23:47:29,611 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-05 23:47:29,611 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-05 23:47:29,648 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 23:47:29,648 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 23:47:29,653 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 23:47:29,654 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 23:47:29,661 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 23:47:29,661 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 23:47:29,669 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 23:47:29,669 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 23:47:30,103 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-05 23:47:30,103 - __main__ - INFO - [app.py:406] - 
==================================================
2025-01-05 23:47:30,103 - __main__ - INFO - [app.py:407] - Input Audio Quality Report
2025-01-05 23:47:30,103 - __main__ - INFO - [app.py:408] - ==================================================
2025-01-05 23:47:30,103 - __main__ - INFO - [app.py:409] - Request ID: 2adb4fb2
2025-01-05 23:47:30,103 - __main__ - INFO - [app.py:410] - Target Language: fra
2025-01-05 23:47:30,103 - __main__ - INFO - [app.py:411] - --------------------------------------------------
2025-01-05 23:47:30,103 - __main__ - INFO - [app.py:412] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.800
- Avg Amplitude: 0.013
- Rms Level: 0.039
- Crest Factor: 20.262
- Zero Crossings: 127716.000
- Silence Percentage: 62.168
- Clipping Points: 0.000
- Dynamic Range: 3022615.000

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.070
  - Temporal Flatness: 0.020

- Volume Metrics:
  - Volume Stability: -0.728
  - Volume Range: 29148040.000
  - Volume Variations: 0.034

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.003898838626448
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.6381455659866333, 'stability': 1.6408194303512573, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.23516440391540527, 'consistency': 0.2896541953086853, 'distinction': 0.11255760490894318}
  - Description: Moderate nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.670
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.340
  - Rhythm Quality: 0.358
  - Intonation Quality: 0.322

Vowel Quality:
  - Quality Score: 0.005
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-05 23:47:30,103 - __main__ - INFO - [app.py:413] - ==================================================

2025-01-05 23:47:30,104 - __main__ - INFO - [app.py:424] - Request 2adb4fb2: Audio processed successfully
2025-01-05 23:47:30,126 - __main__ - INFO - [app.py:443] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-05 23:47:44,588 - __main__ - INFO - [app.py:483] - Source text: the stale smell of old beer lingers it takes heat to bring out the odor a cold dip restores health and zest a salt pickle tastes fine with ham tacos al pastor are my favorite a zestful food is the hot cross bun
2025-01-05 23:48:01,038 - __main__ - INFO - [app.py:502] - Target text: l'odeur de la vieille bière lingoure il faut de la chaleur pour faire ressortir l'odore une dip froide restaure la santé et le zest un pickle salé goûte bien avec le jambon tacos al pasteur sont mon favori une nourriture zestueuse est le hot cross bun
2025-01-05 23:48:20,296 - __main__ - INFO - [app.py:525] - Processing tuple output from model
2025-01-05 23:48:20,309 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 23:48:20,310 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 23:48:20,315 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 23:48:20,315 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 23:48:20,323 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 23:48:20,323 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 23:48:20,329 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 23:48:20,329 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 23:48:20,657 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-05 23:48:20,658 - __main__ - INFO - [app.py:548] - 
==================================================
2025-01-05 23:48:20,658 - __main__ - INFO - [app.py:549] - Translated Audio Quality Report
2025-01-05 23:48:20,658 - __main__ - INFO - [app.py:550] - ==================================================
2025-01-05 23:48:20,658 - __main__ - INFO - [app.py:551] - Request ID: 2adb4fb2
2025-01-05 23:48:20,658 - __main__ - INFO - [app.py:552] - Target Language: fra
2025-01-05 23:48:20,658 - __main__ - INFO - [app.py:553] - --------------------------------------------------
2025-01-05 23:48:20,658 - __main__ - INFO - [app.py:554] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.772
- Avg Amplitude: 0.066
- Rms Level: 0.102
- Crest Factor: 7.558
- Zero Crossings: 27346.000
- Silence Percentage: 10.292
- Clipping Points: 0.000
- Dynamic Range: 181.573

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.055
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.028
  - Temporal Flatness: 0.016

- Volume Metrics:
  - Volume Stability: 0.338
  - Volume Range: 869.311
  - Volume Variations: 0.056

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.027017206139416
- Background Noise: 4.023218151617164
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
No issues detected

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 1.0986577272415161, 'stability': 3.883645534515381, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.0, 'distinction': 0.09891226142644882}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.538
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.003
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-05 23:48:20,658 - __main__ - INFO - [app.py:555] - ==================================================

2025-01-05 23:48:20,658 - __main__ - INFO - [app.py:561] - Request 2adb4fb2: Audio output processed successfully
2025-01-05 23:48:20,662 - __main__ - INFO - [app.py:615] - Request 2adb4fb2: Response prepared successfully
2025-01-05 23:48:20,662 - __main__ - INFO - [app.py:633] - Request 2adb4fb2 completed in 51.64s
2025-01-05 23:48:20,664 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 51.64s, Memory Change: 1465.45MB
2025-01-05 23:48:20,665 - __main__ - INFO - [app.py:259] - Request to /translate took 57.21s
2025-01-05 23:49:59,803 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-05 23:49:59,808 - __main__ - INFO - [app.py:326] - Starting translation request 321c4758
2025-01-05 23:49:59,808 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-05 23:49:59,808 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-05 23:49:59,811 - __main__ - INFO - [app.py:384] - Request 321c4758: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpsgxqqp3w.wav
2025-01-05 23:49:59,812 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 18.36 seconds
2025-01-05 23:49:59,812 - __main__ - INFO - [app.py:395] - Request 321c4758: Beginning audio processing with diagnostics
2025-01-05 23:49:59,812 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpsgxqqp3w.wav
2025-01-05 23:49:59,812 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 44100, Channels: 2
2025-01-05 23:49:59,822 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([2, 809508]), Frequency: 44100Hz
2025-01-05 23:49:59,822 - services.audio_processor - INFO - [audio_processor.py:219] - Resampling from 44100Hz to 16000Hz
2025-01-05 23:49:59,850 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-05 23:49:59,852 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for ita
2025-01-05 23:49:59,852 - services.audio_processor - WARNING - [audio_processor.py:289] - No specific parameters for ita, using defaults
2025-01-05 23:49:59,874 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-05 23:49:59,890 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 23:49:59,890 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 23:49:59,896 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 23:49:59,896 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 23:49:59,905 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 23:49:59,905 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 23:49:59,917 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 23:49:59,917 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 23:50:00,375 - services.diagnostics.language_analysis.italian - ERROR - [italian.py:138] - Italian consonant analysis failed: 'ItalianAnalyzer' object has no attribute '_analyze_plosives'
2025-01-05 23:50:00,378 - services.diagnostics.language_analysis.italian - ERROR - [italian.py:184] - Italian stress analysis failed: 'ItalianAnalyzer' object has no attribute '_find_stress_peaks'
2025-01-05 23:50:00,378 - services.diagnostics.language_analysis.italian - ERROR - [italian.py:214] - Italian intonation analysis failed: 'ItalianAnalyzer' object has no attribute '_extract_pitch_contour'
2025-01-05 23:50:00,386 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for ita
2025-01-05 23:50:00,386 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-05 23:50:00,388 - services.audio_processor - WARNING - [audio_processor.py:289] - No specific parameters for ita, using defaults
2025-01-05 23:50:00,424 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 23:50:00,424 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 23:50:00,430 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 23:50:00,430 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 23:50:00,437 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 23:50:00,438 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 23:50:00,447 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 23:50:00,447 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 23:50:00,885 - services.diagnostics.language_analysis.italian - ERROR - [italian.py:138] - Italian consonant analysis failed: 'ItalianAnalyzer' object has no attribute '_analyze_plosives'
2025-01-05 23:50:00,887 - services.diagnostics.language_analysis.italian - ERROR - [italian.py:184] - Italian stress analysis failed: 'ItalianAnalyzer' object has no attribute '_find_stress_peaks'
2025-01-05 23:50:00,887 - services.diagnostics.language_analysis.italian - ERROR - [italian.py:214] - Italian intonation analysis failed: 'ItalianAnalyzer' object has no attribute '_extract_pitch_contour'
2025-01-05 23:50:00,896 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for ita
2025-01-05 23:50:00,897 - __main__ - INFO - [app.py:406] - 
==================================================
2025-01-05 23:50:00,897 - __main__ - INFO - [app.py:407] - Input Audio Quality Report
2025-01-05 23:50:00,897 - __main__ - INFO - [app.py:408] - ==================================================
2025-01-05 23:50:00,897 - __main__ - INFO - [app.py:409] - Request ID: 321c4758
2025-01-05 23:50:00,897 - __main__ - INFO - [app.py:410] - Target Language: ita
2025-01-05 23:50:00,897 - __main__ - INFO - [app.py:411] - --------------------------------------------------
2025-01-05 23:50:00,897 - __main__ - INFO - [app.py:412] - Audio Quality Analysis Report
==============================

Target Language: ita

Waveform Analysis:
--------------------
- Peak Amplitude: 0.800
- Avg Amplitude: 0.013
- Rms Level: 0.039
- Crest Factor: 20.262
- Zero Crossings: 127716.000
- Silence Percentage: 62.168
- Clipping Points: 0.000
- Dynamic Range: 3022615.000

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.070
  - Temporal Flatness: 0.020

- Volume Metrics:
  - Volume Stability: -0.728
  - Volume Range: 29148040.000
  - Volume Variations: 0.034

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.003898838626448
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Gemination:
  - Strength: 0.526
  - Consistency: 0.374
  - Duration Contrast: 0.564
  - Quality Score: 0.488

Vowel Quality:
  - Clarity: 0.617
  - Stability: -2.042
  - Formant Structure: {'peaks': [50.78125, 62.5, 93.75], 'stability': 0.4533462564077684}
  - Overall Quality: -0.324

Consonant Features:

Prosodic Features:
  - Stress Timing: {'regularity': 0.0, 'contrast': 0.0, 'pattern_quality': 0.0}
  - Intonation: {'melodic_range': 0.0, 'contour_smoothness': 0.0, 'pattern_quality': 0.0}
  - Rhythm: {'regularity': 0.582501249768624, 'pattern_strength': 0.5555804371833801, 'overall_quality': 0.5690408434760021}
2025-01-05 23:50:00,897 - __main__ - INFO - [app.py:413] - ==================================================

2025-01-05 23:50:00,897 - __main__ - INFO - [app.py:424] - Request 321c4758: Audio processed successfully
2025-01-05 23:50:00,919 - __main__ - INFO - [app.py:443] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-05 23:50:17,408 - __main__ - INFO - [app.py:483] - Source text: the stale smell of old beer lingers it takes heat to bring out the odor a cold dip restores health and zest a salt pickle tastes fine with ham tacos al pastor are my favorite a zestful food is the hot cross bun
2025-01-05 23:50:33,549 - __main__ - INFO - [app.py:502] - Target text: il stale odore di vecchia birra lingura prende calore per portare fuori l'odore un dip freddo ripristina la salute e lo zest un piccolo salato sa bene con il prosciutto tacos al pasteur sono il mio preferito un cibo zestoso è il hot cross bun
2025-01-05 23:50:52,984 - __main__ - INFO - [app.py:525] - Processing tuple output from model
2025-01-05 23:50:53,002 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 23:50:53,002 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 23:50:53,009 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 23:50:53,009 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 23:50:53,015 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 23:50:53,015 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 23:50:53,023 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-05 23:50:53,023 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-05 23:50:53,285 - services.diagnostics.language_analysis.italian - ERROR - [italian.py:138] - Italian consonant analysis failed: 'ItalianAnalyzer' object has no attribute '_analyze_plosives'
2025-01-05 23:50:53,287 - services.diagnostics.language_analysis.italian - ERROR - [italian.py:184] - Italian stress analysis failed: 'ItalianAnalyzer' object has no attribute '_find_stress_peaks'
2025-01-05 23:50:53,288 - services.diagnostics.language_analysis.italian - ERROR - [italian.py:214] - Italian intonation analysis failed: 'ItalianAnalyzer' object has no attribute '_extract_pitch_contour'
2025-01-05 23:50:53,296 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for ita
2025-01-05 23:50:53,296 - __main__ - INFO - [app.py:548] - 
==================================================
2025-01-05 23:50:53,296 - __main__ - INFO - [app.py:549] - Translated Audio Quality Report
2025-01-05 23:50:53,296 - __main__ - INFO - [app.py:550] - ==================================================
2025-01-05 23:50:53,296 - __main__ - INFO - [app.py:551] - Request ID: 321c4758
2025-01-05 23:50:53,296 - __main__ - INFO - [app.py:552] - Target Language: ita
2025-01-05 23:50:53,296 - __main__ - INFO - [app.py:553] - --------------------------------------------------
2025-01-05 23:50:53,296 - __main__ - INFO - [app.py:554] - Audio Quality Analysis Report
==============================

Target Language: ita

Waveform Analysis:
--------------------
- Peak Amplitude: 0.926
- Avg Amplitude: 0.063
- Rms Level: 0.098
- Crest Factor: 9.500
- Zero Crossings: 26485.000
- Silence Percentage: 10.649
- Clipping Points: 0.000
- Dynamic Range: 183.830

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.025
  - Temporal Flatness: 0.014

- Volume Metrics:
  - Volume Stability: 0.370
  - Volume Range: 2000.536
  - Volume Variations: 0.052

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0205271089674097
- Background Noise: 4.799965835342804
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Gemination:
  - Strength: 0.853
  - Consistency: -1.081
  - Duration Contrast: 0.545
  - Quality Score: 0.106

Vowel Quality:
  - Clarity: 1.060
  - Stability: -3.137
  - Formant Structure: {'peaks': [7.8125, 19.53125, 42.96875], 'stability': 0.6841309725396345}
  - Overall Quality: -0.464

Consonant Features:

Prosodic Features:
  - Stress Timing: {'regularity': 0.0, 'contrast': 0.0, 'pattern_quality': 0.0}
  - Intonation: {'melodic_range': 0.0, 'contour_smoothness': 0.0, 'pattern_quality': 0.0}
  - Rhythm: {'regularity': 0.473369754905275, 'pattern_strength': 0.8546707034111023, 'overall_quality': 0.6640202291581887}
2025-01-05 23:50:53,296 - __main__ - INFO - [app.py:555] - ==================================================

2025-01-05 23:50:53,296 - __main__ - INFO - [app.py:561] - Request 321c4758: Audio output processed successfully
2025-01-05 23:50:53,300 - __main__ - INFO - [app.py:615] - Request 321c4758: Response prepared successfully
2025-01-05 23:50:53,301 - __main__ - INFO - [app.py:633] - Request 321c4758 completed in 53.49s
2025-01-05 23:50:53,304 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 53.50s, Memory Change: 333.58MB
2025-01-05 23:50:53,304 - __main__ - INFO - [app.py:259] - Request to /translate took 61.31s
2025-01-05 23:59:54,023 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-05 23:59:54,023 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-06 00:00:02,945 - __main__ - INFO - [app.py:728] - Metrics server started on port 8000
2025-01-06 00:00:02,945 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-06 00:00:16,837 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-06 00:00:24,857 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-06 00:00:24,859 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-06 00:00:29,754 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-06 00:00:29,756 - __main__ - INFO - [app.py:691] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-06 00:00:29,756 - __main__ - INFO - [app.py:752] - ==================================================
2025-01-06 00:00:29,756 - __main__ - INFO - [app.py:753] - Starting LinguaSync Backend
2025-01-06 00:00:29,756 - __main__ - INFO - [app.py:754] - Starting Flask app on port 5001 using cpu
2025-01-06 00:00:29,756 - __main__ - INFO - [app.py:755] - Python version: 3.12.6 (v3.12.6:a4a2d2b0d85, Sep  6 2024, 16:08:03) [Clang 13.0.0 (clang-1300.0.29.30)]
2025-01-06 00:00:29,756 - __main__ - INFO - [app.py:756] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-06 00:00:29,756 - __main__ - INFO - [app.py:757] - Maximum audio length: 300 seconds
2025-01-06 00:00:29,756 - __main__ - INFO - [app.py:758] - Sample rate: 16000 Hz
2025-01-06 00:00:29,756 - __main__ - INFO - [app.py:762] - System memory: 36.0GB total, 17.6GB available
2025-01-06 00:00:29,756 - __main__ - INFO - [app.py:763] - CPU cores: 11
2025-01-06 00:00:29,757 - __main__ - INFO - [app.py:771] - Configuration:
2025-01-06 00:00:29,757 - __main__ - INFO - [app.py:772] - - Debug mode: False
2025-01-06 00:00:29,757 - __main__ - INFO - [app.py:773] - - CORS enabled: True
2025-01-06 00:00:29,757 - __main__ - INFO - [app.py:774] - - Rate limiting: 10 requests per minute
2025-01-06 00:00:29,757 - __main__ - INFO - [app.py:775] - - Metrics enabled: True (port 8000)
2025-01-06 00:00:29,757 - __main__ - INFO - [app.py:777] - ==================================================
2025-01-06 00:11:20,882 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-06 00:11:20,884 - __main__ - INFO - [app.py:326] - Starting translation request 1f1d7003
2025-01-06 00:11:20,884 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-06 00:11:20,884 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-06 00:11:20,886 - __main__ - INFO - [app.py:384] - Request 1f1d7003: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmprjt83s5l.wav
2025-01-06 00:11:20,887 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 18.36 seconds
2025-01-06 00:11:20,887 - __main__ - INFO - [app.py:395] - Request 1f1d7003: Beginning audio processing with diagnostics
2025-01-06 00:11:20,887 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmprjt83s5l.wav
2025-01-06 00:11:20,887 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 44100, Channels: 2
2025-01-06 00:11:20,896 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([2, 809508]), Frequency: 44100Hz
2025-01-06 00:11:20,896 - services.audio_processor - INFO - [audio_processor.py:219] - Resampling from 44100Hz to 16000Hz
2025-01-06 00:11:20,916 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-06 00:11:20,919 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-06 00:11:20,941 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-06 00:11:20,955 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-06 00:11:20,955 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-06 00:11:20,961 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-06 00:11:20,961 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-06 00:11:20,968 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-06 00:11:20,968 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-06 00:11:20,975 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-06 00:11:20,975 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-06 00:11:21,452 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-06 00:11:21,452 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-06 00:11:21,490 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-06 00:11:21,491 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-06 00:11:21,506 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-06 00:11:21,506 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-06 00:11:21,517 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-06 00:11:21,517 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-06 00:11:21,526 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-06 00:11:21,526 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-06 00:11:21,959 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-06 00:11:21,959 - __main__ - INFO - [app.py:406] - 
==================================================
2025-01-06 00:11:21,959 - __main__ - INFO - [app.py:407] - Input Audio Quality Report
2025-01-06 00:11:21,959 - __main__ - INFO - [app.py:408] - ==================================================
2025-01-06 00:11:21,959 - __main__ - INFO - [app.py:409] - Request ID: 1f1d7003
2025-01-06 00:11:21,959 - __main__ - INFO - [app.py:410] - Target Language: fra
2025-01-06 00:11:21,959 - __main__ - INFO - [app.py:411] - --------------------------------------------------
2025-01-06 00:11:21,959 - __main__ - INFO - [app.py:412] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.800
- Avg Amplitude: 0.013
- Rms Level: 0.039
- Crest Factor: 20.262
- Zero Crossings: 127716.000
- Silence Percentage: 62.168
- Clipping Points: 0.000
- Dynamic Range: 3022615.000

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.070
  - Temporal Flatness: 0.020

- Volume Metrics:
  - Volume Stability: -0.728
  - Volume Range: 29148040.000
  - Volume Variations: 0.034

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.003898838626448
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.6381455659866333, 'stability': 1.6408194303512573, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.23516440391540527, 'consistency': 0.2896541953086853, 'distinction': 0.11255760490894318}
  - Description: Moderate nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.670
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.340
  - Rhythm Quality: 0.358
  - Intonation Quality: 0.322

Vowel Quality:
  - Quality Score: 0.005
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-06 00:11:21,959 - __main__ - INFO - [app.py:413] - ==================================================

2025-01-06 00:11:21,960 - __main__ - INFO - [app.py:424] - Request 1f1d7003: Audio processed successfully
2025-01-06 00:11:21,980 - __main__ - INFO - [app.py:443] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-06 00:11:36,860 - __main__ - INFO - [app.py:483] - Source text: the stale smell of old beer lingers it takes heat to bring out the odor a cold dip restores health and zest a salt pickle tastes fine with ham tacos al pastor are my favorite a zestful food is the hot cross bun
2025-01-06 00:11:54,698 - __main__ - INFO - [app.py:502] - Target text: l'odeur de la vieille bière lingoure il faut de la chaleur pour faire ressortir l'odore une dip froide restaure la santé et le zest un pickle salé goûte bien avec le jambon tacos al pasteur sont mon favori une nourriture zestueuse est le hot cross bun
2025-01-06 00:12:19,139 - __main__ - INFO - [app.py:525] - Processing tuple output from model
2025-01-06 00:12:19,154 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-06 00:12:19,154 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-06 00:12:19,164 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-06 00:12:19,165 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-06 00:12:19,175 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-06 00:12:19,175 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-06 00:12:19,184 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-06 00:12:19,185 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-06 00:12:19,527 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-06 00:12:19,527 - __main__ - INFO - [app.py:548] - 
==================================================
2025-01-06 00:12:19,527 - __main__ - INFO - [app.py:549] - Translated Audio Quality Report
2025-01-06 00:12:19,527 - __main__ - INFO - [app.py:550] - ==================================================
2025-01-06 00:12:19,527 - __main__ - INFO - [app.py:551] - Request ID: 1f1d7003
2025-01-06 00:12:19,527 - __main__ - INFO - [app.py:552] - Target Language: fra
2025-01-06 00:12:19,527 - __main__ - INFO - [app.py:553] - --------------------------------------------------
2025-01-06 00:12:19,528 - __main__ - INFO - [app.py:554] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.687
- Avg Amplitude: 0.065
- Rms Level: 0.100
- Crest Factor: 6.867
- Zero Crossings: 27316.000
- Silence Percentage: 9.358
- Clipping Points: 0.000
- Dynamic Range: 149.783

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.142
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.028
  - Temporal Flatness: 0.016

- Volume Metrics:
  - Volume Stability: 0.345
  - Volume Range: 814.109
  - Volume Variations: 0.055

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.029130704395414
- Background Noise: 3.7466518566423272
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
No issues detected

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 1.0420191287994385, 'stability': 3.491217851638794, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.14156107604503632, 'consistency': 0.0, 'distinction': 0.07493152469396591}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.539
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.003
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-06 00:12:19,528 - __main__ - INFO - [app.py:555] - ==================================================

2025-01-06 00:12:19,528 - __main__ - INFO - [app.py:561] - Request 1f1d7003: Audio output processed successfully
2025-01-06 00:12:19,532 - __main__ - INFO - [app.py:615] - Request 1f1d7003: Response prepared successfully
2025-01-06 00:12:19,532 - __main__ - INFO - [app.py:633] - Request 1f1d7003 completed in 58.65s
2025-01-06 00:12:19,536 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 58.65s, Memory Change: 1627.80MB
2025-01-06 00:12:19,537 - __main__ - INFO - [app.py:259] - Request to /translate took 64.42s
2025-01-06 00:53:55,173 - __main__ - INFO - [app.py:259] - Request to /upload_podcast took 0.00s
2025-01-06 22:22:42,747 - __main__ - INFO - [app.py:259] - Request to /upload_podcast took 0.00s
2025-01-06 23:14:59,679 - __main__ - INFO - [app.py:259] - Request to /upload_podcast took 0.00s
2025-01-06 23:15:16,286 - __main__ - INFO - [app.py:198] - Received SIGINT signal
2025-01-06 23:15:16,287 - __main__ - INFO - [app.py:183] - Initiating graceful shutdown...
2025-01-06 23:15:21,293 - __main__ - INFO - [app.py:698] - Application shutting down...
2025-01-06 23:15:21,294 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-06 23:15:21,294 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-06 23:15:21,295 - __main__ - INFO - [app.py:691] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-06 23:15:21,296 - __main__ - INFO - [app.py:711] - Cleanup completed successfully
2025-01-06 23:15:21,296 - __main__ - INFO - [app.py:187] - Graceful shutdown completed
2025-01-06 23:15:21,297 - __main__ - INFO - [app.py:698] - Application shutting down...
2025-01-06 23:15:21,298 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-06 23:15:21,298 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-06 23:15:21,298 - __main__ - INFO - [app.py:691] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-06 23:15:21,298 - __main__ - INFO - [app.py:711] - Cleanup completed successfully
2025-01-06 23:15:21,299 - __main__ - INFO - [app.py:698] - Application shutting down...
2025-01-06 23:15:21,300 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-06 23:15:21,300 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-06 23:15:21,301 - __main__ - INFO - [app.py:691] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-06 23:15:21,301 - __main__ - INFO - [app.py:711] - Cleanup completed successfully
2025-01-06 23:15:21,536 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-06 23:15:21,536 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-06 23:16:55,244 - __main__ - INFO - [app.py:841] - Metrics server started on port 8000
2025-01-06 23:16:55,244 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-06 23:17:10,614 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-06 23:17:27,053 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-06 23:17:27,054 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-06 23:17:34,600 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-06 23:17:34,602 - __main__ - INFO - [app.py:792] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-06 23:17:34,602 - __main__ - INFO - [app.py:865] - ==================================================
2025-01-06 23:17:34,602 - __main__ - INFO - [app.py:866] - Starting LinguaSync Backend
2025-01-06 23:17:34,602 - __main__ - INFO - [app.py:867] - Starting Flask app on port 5001 using cpu
2025-01-06 23:17:34,602 - __main__ - INFO - [app.py:868] - Python version: 3.12.6 (v3.12.6:a4a2d2b0d85, Sep  6 2024, 16:08:03) [Clang 13.0.0 (clang-1300.0.29.30)]
2025-01-06 23:17:34,602 - __main__ - INFO - [app.py:869] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-06 23:17:34,602 - __main__ - INFO - [app.py:870] - Maximum audio length: 300 seconds
2025-01-06 23:17:34,602 - __main__ - INFO - [app.py:871] - Sample rate: 16000 Hz
2025-01-06 23:17:34,602 - __main__ - INFO - [app.py:875] - System memory: 36.0GB total, 15.2GB available
2025-01-06 23:17:34,602 - __main__ - INFO - [app.py:876] - CPU cores: 11
2025-01-06 23:17:34,602 - __main__ - INFO - [app.py:884] - Configuration:
2025-01-06 23:17:34,603 - __main__ - INFO - [app.py:885] - - Debug mode: False
2025-01-06 23:17:34,603 - __main__ - INFO - [app.py:886] - - CORS enabled: True
2025-01-06 23:17:34,603 - __main__ - INFO - [app.py:887] - - Rate limiting: 10 requests per minute
2025-01-06 23:17:34,603 - __main__ - INFO - [app.py:888] - - Metrics enabled: True (port 8000)
2025-01-06 23:17:34,603 - __main__ - INFO - [app.py:890] - ==================================================
2025-01-06 23:18:27,265 - __main__ - INFO - [app.py:667] - Starting podcast upload request 3a13da8e
2025-01-06 23:18:27,271 - __main__ - INFO - [app.py:697] - Request 3a13da8e: Saved file to uploads/podcasts/b0829834-4a61-4667-87fd-071cbb86395c_harvard.wav
2025-01-06 23:18:27,278 - __main__ - INFO - [app.py:727] - Request 3a13da8e: Successfully processed podcast upload: harvard
2025-01-06 23:18:27,278 - __main__ - INFO - [app.py:736] - Request 3a13da8e completed in 0.01s
2025-01-06 23:18:27,279 - services.utils - INFO - [utils.py:57] - Performance - Function: upload_podcast, Duration: 0.01s, Memory Change: 1.62MB
2025-01-06 23:18:27,279 - __main__ - INFO - [app.py:274] - Request to /upload_podcast took 0.01s
2025-01-07 22:43:02,960 - __main__ - INFO - [app.py:213] - Received SIGINT signal
2025-01-07 22:43:02,964 - __main__ - INFO - [app.py:198] - Initiating graceful shutdown...
2025-01-07 22:43:07,965 - __main__ - INFO - [app.py:810] - Application shutting down...
2025-01-07 22:43:07,965 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-07 22:43:07,966 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-07 22:43:07,967 - __main__ - INFO - [app.py:792] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-07 22:43:07,968 - __main__ - INFO - [app.py:824] - Cleanup completed successfully
2025-01-07 22:43:07,968 - __main__ - INFO - [app.py:202] - Graceful shutdown completed
2025-01-07 22:43:07,970 - __main__ - INFO - [app.py:810] - Application shutting down...
2025-01-07 22:43:07,970 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-07 22:43:07,971 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-07 22:43:07,971 - __main__ - INFO - [app.py:792] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-07 22:43:07,971 - __main__ - INFO - [app.py:824] - Cleanup completed successfully
2025-01-07 22:43:07,973 - __main__ - INFO - [app.py:810] - Application shutting down...
2025-01-07 22:43:07,974 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-07 22:43:07,974 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-07 22:43:07,974 - __main__ - INFO - [app.py:792] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-07 22:43:07,975 - __main__ - INFO - [app.py:824] - Cleanup completed successfully
2025-01-07 22:43:08,141 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-07 22:43:08,142 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-07 22:43:18,163 - __main__ - INFO - [app.py:763] - Metrics server started on port 8000
2025-01-07 22:43:18,163 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-07 22:43:32,788 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-07 22:43:43,902 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-07 22:43:43,905 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-07 22:43:48,433 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-07 22:43:48,436 - __main__ - INFO - [app.py:714] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-07 22:43:48,436 - __main__ - INFO - [app.py:787] - ==================================================
2025-01-07 22:43:48,436 - __main__ - INFO - [app.py:788] - Starting LinguaSync Backend
2025-01-07 22:43:48,436 - __main__ - INFO - [app.py:789] - Starting Flask app on port 5001 using cpu
2025-01-07 22:43:48,436 - __main__ - INFO - [app.py:790] - Python version: 3.12.6 (v3.12.6:a4a2d2b0d85, Sep  6 2024, 16:08:03) [Clang 13.0.0 (clang-1300.0.29.30)]
2025-01-07 22:43:48,436 - __main__ - INFO - [app.py:791] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-07 22:43:48,436 - __main__ - INFO - [app.py:792] - Maximum audio length: 300 seconds
2025-01-07 22:43:48,436 - __main__ - INFO - [app.py:793] - Sample rate: 16000 Hz
2025-01-07 22:43:48,436 - __main__ - INFO - [app.py:797] - System memory: 36.0GB total, 15.3GB available
2025-01-07 22:43:48,436 - __main__ - INFO - [app.py:798] - CPU cores: 11
2025-01-07 22:43:48,436 - __main__ - INFO - [app.py:806] - Configuration:
2025-01-07 22:43:48,436 - __main__ - INFO - [app.py:807] - - Debug mode: False
2025-01-07 22:43:48,436 - __main__ - INFO - [app.py:808] - - CORS enabled: True
2025-01-07 22:43:48,436 - __main__ - INFO - [app.py:809] - - Rate limiting: 10 requests per minute
2025-01-07 22:43:48,436 - __main__ - INFO - [app.py:810] - - Metrics enabled: True (port 8000)
2025-01-07 22:43:48,436 - __main__ - INFO - [app.py:812] - ==================================================
2025-01-07 22:44:50,302 - services.podcast_routes - INFO - [podcast_routes.py:25] - Starting podcast upload request a88a9bb9
2025-01-07 22:44:50,307 - services.podcast_routes - INFO - [podcast_routes.py:56] - Request a88a9bb9: Saved file to uploads/podcasts/51ffcf0e-cb93-401b-8060-4c333412660e_harvard.wav
2025-01-07 22:44:50,313 - services.podcast_routes - INFO - [podcast_routes.py:86] - Request a88a9bb9: Successfully processed podcast upload: harvard
2025-01-07 22:44:50,313 - services.podcast_routes - INFO - [podcast_routes.py:95] - Request a88a9bb9 completed in 0.01s
2025-01-07 22:44:50,314 - services.utils - INFO - [utils.py:57] - Performance - Function: upload_podcast, Duration: 0.01s, Memory Change: 0.31MB
2025-01-07 22:44:50,314 - __main__ - INFO - [app.py:276] - Request to /upload_podcast took 0.01s
2025-01-07 23:17:07,811 - __main__ - INFO - [app.py:215] - Received SIGINT signal
2025-01-07 23:17:07,812 - __main__ - INFO - [app.py:200] - Initiating graceful shutdown...
2025-01-07 23:17:12,812 - __main__ - INFO - [app.py:732] - Application shutting down...
2025-01-07 23:17:12,813 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-07 23:17:12,813 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-07 23:17:12,814 - __main__ - INFO - [app.py:714] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-07 23:17:12,815 - __main__ - INFO - [app.py:746] - Cleanup completed successfully
2025-01-07 23:17:12,815 - __main__ - INFO - [app.py:204] - Graceful shutdown completed
2025-01-07 23:17:12,816 - __main__ - INFO - [app.py:732] - Application shutting down...
2025-01-07 23:17:12,817 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-07 23:17:12,817 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-07 23:17:12,817 - __main__ - INFO - [app.py:714] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-07 23:17:12,817 - __main__ - INFO - [app.py:746] - Cleanup completed successfully
2025-01-07 23:17:12,818 - __main__ - INFO - [app.py:732] - Application shutting down...
2025-01-07 23:17:12,819 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-07 23:17:12,819 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-07 23:17:12,819 - __main__ - INFO - [app.py:714] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-07 23:17:12,820 - __main__ - INFO - [app.py:746] - Cleanup completed successfully
2025-01-07 23:17:12,958 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-07 23:17:12,958 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-07 23:17:39,157 - __main__ - INFO - [app.py:424] - Metrics server started on port 8000
2025-01-07 23:17:39,157 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-07 23:17:51,876 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-07 23:17:57,916 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-07 23:17:57,917 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-07 23:18:02,785 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-07 23:18:02,786 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-07 23:18:02,786 - __main__ - INFO - [app.py:448] - ==================================================
2025-01-07 23:18:02,786 - __main__ - INFO - [app.py:449] - Starting LinguaSync Backend
2025-01-07 23:18:02,786 - __main__ - INFO - [app.py:450] - Starting Flask app on port 5001 using cpu
2025-01-07 23:18:02,786 - __main__ - INFO - [app.py:451] - Python version: 3.12.6 (v3.12.6:a4a2d2b0d85, Sep  6 2024, 16:08:03) [Clang 13.0.0 (clang-1300.0.29.30)]
2025-01-07 23:18:02,786 - __main__ - INFO - [app.py:452] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-07 23:18:02,786 - __main__ - INFO - [app.py:453] - Maximum audio length: 300 seconds
2025-01-07 23:18:02,786 - __main__ - INFO - [app.py:454] - Sample rate: 16000 Hz
2025-01-07 23:18:02,786 - __main__ - INFO - [app.py:458] - System memory: 36.0GB total, 15.5GB available
2025-01-07 23:18:02,786 - __main__ - INFO - [app.py:459] - CPU cores: 11
2025-01-07 23:18:02,786 - __main__ - INFO - [app.py:467] - Configuration:
2025-01-07 23:18:02,786 - __main__ - INFO - [app.py:468] - - Debug mode: False
2025-01-07 23:18:02,786 - __main__ - INFO - [app.py:469] - - CORS enabled: True
2025-01-07 23:18:02,787 - __main__ - INFO - [app.py:470] - - Rate limiting: 10 requests per minute
2025-01-07 23:18:02,787 - __main__ - INFO - [app.py:471] - - Metrics enabled: True (port 8000)
2025-01-07 23:18:02,787 - __main__ - INFO - [app.py:473] - ==================================================
2025-01-07 23:18:25,336 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-07 23:18:25,338 - services.translation_routes - INFO - [translation_routes.py:29] - Starting translation request b97175d8
2025-01-07 23:18:25,338 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-07 23:18:25,338 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-07 23:18:25,340 - services.translation_routes - INFO - [translation_routes.py:86] - Request b97175d8: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpwy3amn77.wav
2025-01-07 23:18:25,340 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 18.36 seconds
2025-01-07 23:18:25,340 - services.translation_routes - INFO - [translation_routes.py:99] - Request b97175d8: Beginning audio processing with diagnostics
2025-01-07 23:18:25,340 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpwy3amn77.wav
2025-01-07 23:18:25,340 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 44100, Channels: 2
2025-01-07 23:18:25,348 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([2, 809508]), Frequency: 44100Hz
2025-01-07 23:18:25,348 - services.audio_processor - INFO - [audio_processor.py:219] - Resampling from 44100Hz to 16000Hz
2025-01-07 23:18:25,370 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-07 23:18:25,372 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-07 23:18:25,391 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-07 23:18:25,407 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-07 23:18:25,408 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-07 23:18:25,416 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-07 23:18:25,417 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-07 23:18:25,422 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-07 23:18:25,422 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-07 23:18:25,429 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-07 23:18:25,429 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-07 23:18:25,894 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-07 23:18:25,894 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-07 23:18:25,947 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-07 23:18:25,947 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-07 23:18:25,954 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-07 23:18:25,954 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-07 23:18:25,963 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-07 23:18:25,963 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-07 23:18:25,973 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-07 23:18:25,973 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-07 23:18:26,428 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-07 23:18:26,428 - services.translation_routes - INFO - [translation_routes.py:110] - 
==================================================
2025-01-07 23:18:26,428 - services.translation_routes - INFO - [translation_routes.py:111] - Input Audio Quality Report
2025-01-07 23:18:26,428 - services.translation_routes - INFO - [translation_routes.py:112] - ==================================================
2025-01-07 23:18:26,428 - services.translation_routes - INFO - [translation_routes.py:113] - Request ID: b97175d8
2025-01-07 23:18:26,428 - services.translation_routes - INFO - [translation_routes.py:114] - Target Language: fra
2025-01-07 23:18:26,428 - services.translation_routes - INFO - [translation_routes.py:115] - --------------------------------------------------
2025-01-07 23:18:26,428 - services.translation_routes - INFO - [translation_routes.py:116] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.800
- Avg Amplitude: 0.013
- Rms Level: 0.039
- Crest Factor: 20.262
- Zero Crossings: 127716.000
- Silence Percentage: 62.168
- Clipping Points: 0.000
- Dynamic Range: 3022615.000

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.070
  - Temporal Flatness: 0.020

- Volume Metrics:
  - Volume Stability: -0.728
  - Volume Range: 29148040.000
  - Volume Variations: 0.034

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.003898838626448
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.6381455659866333, 'stability': 1.6408194303512573, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.23516440391540527, 'consistency': 0.2896541953086853, 'distinction': 0.11255760490894318}
  - Description: Moderate nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.670
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.340
  - Rhythm Quality: 0.358
  - Intonation Quality: 0.322

Vowel Quality:
  - Quality Score: 0.005
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-07 23:18:26,429 - services.translation_routes - INFO - [translation_routes.py:117] - ==================================================

2025-01-07 23:18:26,429 - services.translation_routes - INFO - [translation_routes.py:128] - Request b97175d8: Audio processed successfully
2025-01-07 23:18:26,451 - services.translation_routes - INFO - [translation_routes.py:147] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-07 23:18:41,101 - services.translation_routes - INFO - [translation_routes.py:185] - Source text: the stale smell of old beer lingers it takes heat to bring out the odor a cold dip restores health and zest a salt pickle tastes fine with ham tacos al pastor are my favorite a zestful food is the hot cross bun
2025-01-07 23:18:56,906 - services.translation_routes - INFO - [translation_routes.py:204] - Target text: l'odeur de la vieille bière lingoure il faut de la chaleur pour faire ressortir l'odore une dip froide restaure la santé et le zest un pickle salé goûte bien avec le jambon tacos al pasteur sont mon favori une nourriture zestueuse est le hot cross bun
2025-01-07 23:19:17,357 - services.translation_routes - INFO - [translation_routes.py:227] - Processing tuple output from model
2025-01-07 23:19:17,370 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-07 23:19:17,370 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-07 23:19:17,374 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-07 23:19:17,374 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-07 23:19:17,381 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-07 23:19:17,381 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-07 23:19:17,387 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-07 23:19:17,387 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-07 23:19:17,695 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-07 23:19:17,695 - services.translation_routes - INFO - [translation_routes.py:251] - 
==================================================
2025-01-07 23:19:17,695 - services.translation_routes - INFO - [translation_routes.py:252] - Translated Audio Quality Report
2025-01-07 23:19:17,695 - services.translation_routes - INFO - [translation_routes.py:253] - ==================================================
2025-01-07 23:19:17,695 - services.translation_routes - INFO - [translation_routes.py:254] - Request ID: b97175d8
2025-01-07 23:19:17,695 - services.translation_routes - INFO - [translation_routes.py:255] - Target Language: fra
2025-01-07 23:19:17,695 - services.translation_routes - INFO - [translation_routes.py:256] - --------------------------------------------------
2025-01-07 23:19:17,695 - services.translation_routes - INFO - [translation_routes.py:257] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.752
- Avg Amplitude: 0.065
- Rms Level: 0.101
- Crest Factor: 7.463
- Zero Crossings: 27771.000
- Silence Percentage: 9.444
- Clipping Points: 0.000
- Dynamic Range: 153.654

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.067
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.029
  - Temporal Flatness: 0.016

- Volume Metrics:
  - Volume Stability: 0.320
  - Volume Range: 996.291
  - Volume Variations: 0.057

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0270009944905114
- Background Noise: 3.9850301446727814
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
No issues detected

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 1.0644828081130981, 'stability': 3.689324378967285, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.00418614037334919, 'consistency': 0.0, 'distinction': 0.06850316375494003}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.531
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.003
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-07 23:19:17,695 - services.translation_routes - INFO - [translation_routes.py:258] - ==================================================

2025-01-07 23:19:17,695 - services.translation_routes - INFO - [translation_routes.py:264] - Request b97175d8: Audio output processed successfully
2025-01-07 23:19:17,700 - services.translation_routes - INFO - [translation_routes.py:317] - Request b97175d8: Response prepared successfully
2025-01-07 23:19:17,700 - services.translation_routes - INFO - [translation_routes.py:328] - Request b97175d8 completed in 52.36s
2025-01-07 23:19:17,701 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 52.36s, Memory Change: 1581.12MB
2025-01-07 23:19:17,701 - __main__ - INFO - [app.py:277] - Request to /translate took 58.03s
2025-01-07 23:19:47,239 - services.podcast_routes - INFO - [podcast_routes.py:25] - Starting podcast upload request 1ae0cc16
2025-01-07 23:19:47,244 - services.podcast_routes - INFO - [podcast_routes.py:56] - Request 1ae0cc16: Saved file to uploads/podcasts/04211b51-8b1b-473c-b658-754d06307b8d_harvard.wav
2025-01-07 23:19:47,251 - services.podcast_routes - INFO - [podcast_routes.py:86] - Request 1ae0cc16: Successfully processed podcast upload: harvard
2025-01-07 23:19:47,251 - services.podcast_routes - INFO - [podcast_routes.py:95] - Request 1ae0cc16 completed in 0.01s
2025-01-07 23:19:47,253 - services.utils - INFO - [utils.py:57] - Performance - Function: upload_podcast, Duration: 0.01s, Memory Change: -0.02MB
2025-01-07 23:19:47,253 - __main__ - INFO - [app.py:277] - Request to /upload_podcast took 0.02s
2025-01-09 00:04:20,704 - __main__ - INFO - [app.py:216] - Received SIGINT signal
2025-01-09 00:04:20,748 - __main__ - INFO - [app.py:201] - Initiating graceful shutdown...
2025-01-09 00:04:25,754 - __main__ - INFO - [app.py:393] - Application shutting down...
2025-01-09 00:04:25,782 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-09 00:04:25,784 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-09 00:04:25,793 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-09 00:04:25,799 - __main__ - INFO - [app.py:387] - Removed old podcast file: uploads/podcasts/04211b51-8b1b-473c-b658-754d06307b8d_harvard.wav
2025-01-09 00:04:25,800 - __main__ - INFO - [app.py:387] - Removed old podcast file: uploads/podcasts/51ffcf0e-cb93-401b-8060-4c333412660e_harvard.wav
2025-01-09 00:04:25,801 - __main__ - INFO - [app.py:387] - Removed old podcast file: uploads/podcasts/b0829834-4a61-4667-87fd-071cbb86395c_harvard.wav
2025-01-09 00:04:25,801 - __main__ - INFO - [app.py:407] - Cleanup completed successfully
2025-01-09 00:04:25,801 - __main__ - INFO - [app.py:205] - Graceful shutdown completed
2025-01-09 00:04:25,833 - __main__ - INFO - [app.py:393] - Application shutting down...
2025-01-09 00:04:25,835 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-09 00:04:25,835 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-09 00:04:25,838 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-09 00:04:25,838 - __main__ - INFO - [app.py:407] - Cleanup completed successfully
2025-01-09 00:04:25,869 - __main__ - INFO - [app.py:393] - Application shutting down...
2025-01-09 00:04:25,870 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-09 00:04:25,870 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-09 00:04:25,871 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-09 00:04:25,872 - __main__ - INFO - [app.py:407] - Cleanup completed successfully
2025-01-09 00:04:26,251 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-09 00:04:26,252 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-09 00:04:37,966 - __main__ - INFO - [app.py:424] - Metrics server started on port 8000
2025-01-09 00:04:37,966 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-09 00:04:52,854 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-09 00:05:11,331 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-09 00:05:11,333 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-09 00:05:20,179 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-09 00:05:20,182 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-09 00:05:20,182 - __main__ - INFO - [app.py:448] - ==================================================
2025-01-09 00:05:20,182 - __main__ - INFO - [app.py:449] - Starting LinguaSync Backend
2025-01-09 00:05:20,182 - __main__ - INFO - [app.py:450] - Starting Flask app on port 5001 using cpu
2025-01-09 00:05:20,182 - __main__ - INFO - [app.py:451] - Python version: 3.12.6 (v3.12.6:a4a2d2b0d85, Sep  6 2024, 16:08:03) [Clang 13.0.0 (clang-1300.0.29.30)]
2025-01-09 00:05:20,182 - __main__ - INFO - [app.py:452] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-09 00:05:20,182 - __main__ - INFO - [app.py:453] - Maximum audio length: 300 seconds
2025-01-09 00:05:20,182 - __main__ - INFO - [app.py:454] - Sample rate: 16000 Hz
2025-01-09 00:05:20,182 - __main__ - INFO - [app.py:458] - System memory: 36.0GB total, 6.9GB available
2025-01-09 00:05:20,182 - __main__ - INFO - [app.py:459] - CPU cores: 11
2025-01-09 00:05:20,182 - __main__ - INFO - [app.py:467] - Configuration:
2025-01-09 00:05:20,182 - __main__ - INFO - [app.py:468] - - Debug mode: False
2025-01-09 00:05:20,182 - __main__ - INFO - [app.py:469] - - CORS enabled: True
2025-01-09 00:05:20,182 - __main__ - INFO - [app.py:470] - - Rate limiting: 10 requests per minute
2025-01-09 00:05:20,182 - __main__ - INFO - [app.py:471] - - Metrics enabled: True (port 8000)
2025-01-09 00:05:20,182 - __main__ - INFO - [app.py:473] - ==================================================
2025-01-11 11:07:46,899 - __main__ - INFO - [app.py:216] - Received SIGINT signal
2025-01-11 11:07:46,938 - __main__ - INFO - [app.py:201] - Initiating graceful shutdown...
2025-01-11 11:07:51,945 - __main__ - INFO - [app.py:393] - Application shutting down...
2025-01-11 11:07:51,952 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-11 11:07:51,962 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-11 11:07:51,970 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-11 11:07:51,974 - __main__ - INFO - [app.py:407] - Cleanup completed successfully
2025-01-11 11:07:51,974 - __main__ - INFO - [app.py:205] - Graceful shutdown completed
2025-01-11 11:07:51,985 - __main__ - INFO - [app.py:393] - Application shutting down...
2025-01-11 11:07:51,988 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-11 11:07:51,988 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-11 11:07:51,988 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-11 11:07:51,989 - __main__ - INFO - [app.py:407] - Cleanup completed successfully
2025-01-11 11:07:51,998 - __main__ - INFO - [app.py:393] - Application shutting down...
2025-01-11 11:07:51,998 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-11 11:07:51,998 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-11 11:07:51,998 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-11 11:07:51,998 - __main__ - INFO - [app.py:407] - Cleanup completed successfully
2025-01-11 11:07:52,348 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-11 11:07:52,348 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-11 11:08:06,104 - __main__ - INFO - [app.py:424] - Metrics server started on port 8000
2025-01-11 11:08:06,104 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-11 11:08:19,533 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-11 11:08:34,591 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-11 11:08:34,593 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-11 11:08:39,454 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-11 11:08:39,456 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-11 11:08:39,456 - __main__ - INFO - [app.py:448] - ==================================================
2025-01-11 11:08:39,456 - __main__ - INFO - [app.py:449] - Starting LinguaSync Backend
2025-01-11 11:08:39,456 - __main__ - INFO - [app.py:450] - Starting Flask app on port 5001 using cpu
2025-01-11 11:08:39,456 - __main__ - INFO - [app.py:451] - Python version: 3.12.6 (v3.12.6:a4a2d2b0d85, Sep  6 2024, 16:08:03) [Clang 13.0.0 (clang-1300.0.29.30)]
2025-01-11 11:08:39,456 - __main__ - INFO - [app.py:452] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-11 11:08:39,457 - __main__ - INFO - [app.py:453] - Maximum audio length: 300 seconds
2025-01-11 11:08:39,457 - __main__ - INFO - [app.py:454] - Sample rate: 16000 Hz
2025-01-11 11:08:39,457 - __main__ - INFO - [app.py:458] - System memory: 36.0GB total, 15.3GB available
2025-01-11 11:08:39,457 - __main__ - INFO - [app.py:459] - CPU cores: 11
2025-01-11 11:08:39,457 - __main__ - INFO - [app.py:467] - Configuration:
2025-01-11 11:08:39,457 - __main__ - INFO - [app.py:468] - - Debug mode: False
2025-01-11 11:08:39,457 - __main__ - INFO - [app.py:469] - - CORS enabled: True
2025-01-11 11:08:39,457 - __main__ - INFO - [app.py:470] - - Rate limiting: 10 requests per minute
2025-01-11 11:08:39,457 - __main__ - INFO - [app.py:471] - - Metrics enabled: True (port 8000)
2025-01-11 11:08:39,457 - __main__ - INFO - [app.py:473] - ==================================================
2025-01-11 20:52:14,707 - __main__ - INFO - [app.py:216] - Received SIGINT signal
2025-01-11 20:52:14,711 - __main__ - INFO - [app.py:201] - Initiating graceful shutdown...
2025-01-11 20:52:19,717 - __main__ - INFO - [app.py:393] - Application shutting down...
2025-01-11 20:52:19,720 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-11 20:52:19,721 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-11 20:52:19,723 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-11 20:52:19,724 - __main__ - INFO - [app.py:407] - Cleanup completed successfully
2025-01-11 20:52:19,724 - __main__ - INFO - [app.py:205] - Graceful shutdown completed
2025-01-11 20:52:19,727 - __main__ - INFO - [app.py:393] - Application shutting down...
2025-01-11 20:52:19,727 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-11 20:52:19,728 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-11 20:52:19,729 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-11 20:52:19,729 - __main__ - INFO - [app.py:407] - Cleanup completed successfully
2025-01-11 20:52:19,731 - __main__ - INFO - [app.py:393] - Application shutting down...
2025-01-11 20:52:19,731 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-11 20:52:19,732 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-11 20:52:19,734 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-11 20:52:19,734 - __main__ - INFO - [app.py:407] - Cleanup completed successfully
2025-01-11 20:52:19,884 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-11 20:52:19,884 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-11 20:52:40,100 - __main__ - INFO - [app.py:424] - Metrics server started on port 8000
2025-01-11 20:52:40,100 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-11 20:52:53,557 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-11 20:53:10,981 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-11 20:53:10,983 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-11 20:53:15,667 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-11 20:53:15,668 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-11 20:53:15,668 - __main__ - INFO - [app.py:448] - ==================================================
2025-01-11 20:53:15,668 - __main__ - INFO - [app.py:449] - Starting LinguaSync Backend
2025-01-11 20:53:15,668 - __main__ - INFO - [app.py:450] - Starting Flask app on port 5001 using cpu
2025-01-11 20:53:15,669 - __main__ - INFO - [app.py:451] - Python version: 3.12.6 (v3.12.6:a4a2d2b0d85, Sep  6 2024, 16:08:03) [Clang 13.0.0 (clang-1300.0.29.30)]
2025-01-11 20:53:15,669 - __main__ - INFO - [app.py:452] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-11 20:53:15,669 - __main__ - INFO - [app.py:453] - Maximum audio length: 300 seconds
2025-01-11 20:53:15,669 - __main__ - INFO - [app.py:454] - Sample rate: 16000 Hz
2025-01-11 20:53:15,669 - __main__ - INFO - [app.py:458] - System memory: 36.0GB total, 6.7GB available
2025-01-11 20:53:15,669 - __main__ - INFO - [app.py:459] - CPU cores: 11
2025-01-11 20:53:15,669 - __main__ - INFO - [app.py:467] - Configuration:
2025-01-11 20:53:15,669 - __main__ - INFO - [app.py:468] - - Debug mode: False
2025-01-11 20:53:15,669 - __main__ - INFO - [app.py:469] - - CORS enabled: True
2025-01-11 20:53:15,669 - __main__ - INFO - [app.py:470] - - Rate limiting: 10 requests per minute
2025-01-11 20:53:15,669 - __main__ - INFO - [app.py:471] - - Metrics enabled: True (port 8000)
2025-01-11 20:53:15,669 - __main__ - INFO - [app.py:473] - ==================================================
2025-01-11 23:36:14,715 - __main__ - INFO - [app.py:216] - Received SIGINT signal
2025-01-11 23:36:14,720 - __main__ - INFO - [app.py:201] - Initiating graceful shutdown...
2025-01-11 23:36:19,725 - __main__ - INFO - [app.py:393] - Application shutting down...
2025-01-11 23:36:19,727 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-11 23:36:19,727 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-11 23:36:19,730 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-11 23:36:19,734 - __main__ - INFO - [app.py:407] - Cleanup completed successfully
2025-01-11 23:36:19,734 - __main__ - INFO - [app.py:205] - Graceful shutdown completed
2025-01-11 23:36:19,737 - __main__ - INFO - [app.py:393] - Application shutting down...
2025-01-11 23:36:19,737 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-11 23:36:19,737 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-11 23:36:19,738 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-11 23:36:19,738 - __main__ - INFO - [app.py:407] - Cleanup completed successfully
2025-01-11 23:36:19,740 - __main__ - INFO - [app.py:393] - Application shutting down...
2025-01-11 23:36:19,741 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-11 23:36:19,744 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-11 23:36:19,744 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-11 23:36:19,744 - __main__ - INFO - [app.py:407] - Cleanup completed successfully
2025-01-11 23:36:19,885 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-11 23:36:19,885 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-11 23:37:16,083 - __main__ - INFO - [app.py:424] - Metrics server started on port 8000
2025-01-11 23:37:16,083 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-11 23:37:30,705 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-11 23:37:49,600 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-11 23:37:49,602 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-11 23:37:55,601 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-11 23:37:55,604 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-11 23:37:55,604 - __main__ - INFO - [app.py:448] - ==================================================
2025-01-11 23:37:55,604 - __main__ - INFO - [app.py:449] - Starting LinguaSync Backend
2025-01-11 23:37:55,604 - __main__ - INFO - [app.py:450] - Starting Flask app on port 5001 using cpu
2025-01-11 23:37:55,604 - __main__ - INFO - [app.py:451] - Python version: 3.12.6 (v3.12.6:a4a2d2b0d85, Sep  6 2024, 16:08:03) [Clang 13.0.0 (clang-1300.0.29.30)]
2025-01-11 23:37:55,604 - __main__ - INFO - [app.py:452] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-11 23:37:55,604 - __main__ - INFO - [app.py:453] - Maximum audio length: 300 seconds
2025-01-11 23:37:55,604 - __main__ - INFO - [app.py:454] - Sample rate: 16000 Hz
2025-01-11 23:37:55,604 - __main__ - INFO - [app.py:458] - System memory: 36.0GB total, 7.6GB available
2025-01-11 23:37:55,604 - __main__ - INFO - [app.py:459] - CPU cores: 11
2025-01-11 23:37:55,604 - __main__ - INFO - [app.py:467] - Configuration:
2025-01-11 23:37:55,604 - __main__ - INFO - [app.py:468] - - Debug mode: False
2025-01-11 23:37:55,604 - __main__ - INFO - [app.py:469] - - CORS enabled: True
2025-01-11 23:37:55,604 - __main__ - INFO - [app.py:470] - - Rate limiting: 10 requests per minute
2025-01-11 23:37:55,604 - __main__ - INFO - [app.py:471] - - Metrics enabled: True (port 8000)
2025-01-11 23:37:55,604 - __main__ - INFO - [app.py:473] - ==================================================
2025-01-12 08:51:32,102 - __main__ - INFO - [app.py:216] - Received SIGINT signal
2025-01-12 08:51:32,109 - __main__ - INFO - [app.py:201] - Initiating graceful shutdown...
2025-01-12 08:51:37,114 - __main__ - INFO - [app.py:393] - Application shutting down...
2025-01-12 08:51:37,117 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-12 08:51:37,117 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-12 08:51:37,120 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-12 08:51:37,121 - __main__ - INFO - [app.py:407] - Cleanup completed successfully
2025-01-12 08:51:37,121 - __main__ - INFO - [app.py:205] - Graceful shutdown completed
2025-01-12 08:51:37,123 - __main__ - INFO - [app.py:393] - Application shutting down...
2025-01-12 08:51:37,123 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-12 08:51:37,123 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-12 08:51:37,124 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-12 08:51:37,124 - __main__ - INFO - [app.py:407] - Cleanup completed successfully
2025-01-12 08:51:37,126 - __main__ - INFO - [app.py:393] - Application shutting down...
2025-01-12 08:51:37,126 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-12 08:51:37,126 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-12 08:51:37,127 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-12 08:51:37,128 - __main__ - INFO - [app.py:407] - Cleanup completed successfully
2025-01-12 08:51:37,293 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-12 08:51:37,294 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-12 08:51:44,796 - __main__ - INFO - [app.py:424] - Metrics server started on port 8000
2025-01-12 08:51:44,796 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-12 08:51:58,930 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-12 08:52:13,223 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-12 08:52:13,225 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-12 08:52:17,980 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-12 08:52:17,981 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-12 08:52:17,981 - __main__ - INFO - [app.py:448] - ==================================================
2025-01-12 08:52:17,981 - __main__ - INFO - [app.py:449] - Starting LinguaSync Backend
2025-01-12 08:52:17,982 - __main__ - INFO - [app.py:450] - Starting Flask app on port 5001 using cpu
2025-01-12 08:52:17,982 - __main__ - INFO - [app.py:451] - Python version: 3.12.6 (v3.12.6:a4a2d2b0d85, Sep  6 2024, 16:08:03) [Clang 13.0.0 (clang-1300.0.29.30)]
2025-01-12 08:52:17,982 - __main__ - INFO - [app.py:452] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-12 08:52:17,982 - __main__ - INFO - [app.py:453] - Maximum audio length: 300 seconds
2025-01-12 08:52:17,982 - __main__ - INFO - [app.py:454] - Sample rate: 16000 Hz
2025-01-12 08:52:17,982 - __main__ - INFO - [app.py:458] - System memory: 36.0GB total, 20.6GB available
2025-01-12 08:52:17,982 - __main__ - INFO - [app.py:459] - CPU cores: 11
2025-01-12 08:52:17,982 - __main__ - INFO - [app.py:467] - Configuration:
2025-01-12 08:52:17,982 - __main__ - INFO - [app.py:468] - - Debug mode: False
2025-01-12 08:52:17,982 - __main__ - INFO - [app.py:469] - - CORS enabled: True
2025-01-12 08:52:17,982 - __main__ - INFO - [app.py:470] - - Rate limiting: 10 requests per minute
2025-01-12 08:52:17,982 - __main__ - INFO - [app.py:471] - - Metrics enabled: True (port 8000)
2025-01-12 08:52:17,982 - __main__ - INFO - [app.py:473] - ==================================================
2025-01-12 09:15:18,646 - __main__ - INFO - [app.py:216] - Received SIGINT signal
2025-01-12 09:15:18,646 - __main__ - INFO - [app.py:201] - Initiating graceful shutdown...
2025-01-12 09:15:23,652 - __main__ - INFO - [app.py:393] - Application shutting down...
2025-01-12 09:15:23,652 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-12 09:15:23,653 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-12 09:15:23,654 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-12 09:15:23,655 - __main__ - INFO - [app.py:407] - Cleanup completed successfully
2025-01-12 09:15:23,655 - __main__ - INFO - [app.py:205] - Graceful shutdown completed
2025-01-12 09:15:23,656 - __main__ - INFO - [app.py:393] - Application shutting down...
2025-01-12 09:15:23,656 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-12 09:15:23,656 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-12 09:15:23,657 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-12 09:15:23,657 - __main__ - INFO - [app.py:407] - Cleanup completed successfully
2025-01-12 09:15:23,658 - __main__ - INFO - [app.py:393] - Application shutting down...
2025-01-12 09:15:23,658 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-12 09:15:23,658 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-12 09:15:23,659 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-12 09:15:23,659 - __main__ - INFO - [app.py:407] - Cleanup completed successfully
2025-01-12 09:15:23,792 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-12 09:15:23,792 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-12 09:15:30,438 - __main__ - INFO - [app.py:424] - Metrics server started on port 8000
2025-01-12 09:15:30,438 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-12 09:15:44,616 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-12 09:15:52,775 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-12 09:15:52,777 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-12 09:15:57,824 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-12 09:15:57,826 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-12 09:15:57,826 - __main__ - INFO - [app.py:448] - ==================================================
2025-01-12 09:15:57,826 - __main__ - INFO - [app.py:449] - Starting LinguaSync Backend
2025-01-12 09:15:57,826 - __main__ - INFO - [app.py:450] - Starting Flask app on port 5001 using cpu
2025-01-12 09:15:57,826 - __main__ - INFO - [app.py:451] - Python version: 3.12.6 (v3.12.6:a4a2d2b0d85, Sep  6 2024, 16:08:03) [Clang 13.0.0 (clang-1300.0.29.30)]
2025-01-12 09:15:57,826 - __main__ - INFO - [app.py:452] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-12 09:15:57,826 - __main__ - INFO - [app.py:453] - Maximum audio length: 300 seconds
2025-01-12 09:15:57,826 - __main__ - INFO - [app.py:454] - Sample rate: 16000 Hz
2025-01-12 09:15:57,826 - __main__ - INFO - [app.py:458] - System memory: 36.0GB total, 16.9GB available
2025-01-12 09:15:57,826 - __main__ - INFO - [app.py:459] - CPU cores: 11
2025-01-12 09:15:57,826 - __main__ - INFO - [app.py:467] - Configuration:
2025-01-12 09:15:57,826 - __main__ - INFO - [app.py:468] - - Debug mode: False
2025-01-12 09:15:57,826 - __main__ - INFO - [app.py:469] - - CORS enabled: True
2025-01-12 09:15:57,827 - __main__ - INFO - [app.py:470] - - Rate limiting: 10 requests per minute
2025-01-12 09:15:57,827 - __main__ - INFO - [app.py:471] - - Metrics enabled: True (port 8000)
2025-01-12 09:15:57,827 - __main__ - INFO - [app.py:473] - ==================================================
2025-01-12 09:26:41,398 - __main__ - INFO - [app.py:216] - Received SIGINT signal
2025-01-12 09:26:41,398 - __main__ - INFO - [app.py:201] - Initiating graceful shutdown...
2025-01-12 09:26:46,400 - __main__ - INFO - [app.py:393] - Application shutting down...
2025-01-12 09:26:46,400 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-12 09:26:46,400 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-12 09:26:46,401 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-12 09:26:46,401 - __main__ - INFO - [app.py:407] - Cleanup completed successfully
2025-01-12 09:26:46,401 - __main__ - INFO - [app.py:205] - Graceful shutdown completed
2025-01-12 09:26:46,402 - __main__ - INFO - [app.py:393] - Application shutting down...
2025-01-12 09:26:46,402 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-12 09:26:46,402 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-12 09:26:46,402 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-12 09:26:46,402 - __main__ - INFO - [app.py:407] - Cleanup completed successfully
2025-01-12 09:26:46,403 - __main__ - INFO - [app.py:393] - Application shutting down...
2025-01-12 09:26:46,403 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-12 09:26:46,403 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-12 09:26:46,403 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-12 09:26:46,404 - __main__ - INFO - [app.py:407] - Cleanup completed successfully
2025-01-12 09:26:46,517 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-12 09:26:46,518 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-12 09:27:03,183 - __main__ - INFO - [app.py:424] - Metrics server started on port 8000
2025-01-12 09:27:03,183 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-12 09:27:16,701 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-12 09:27:23,239 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-12 09:27:23,241 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-12 09:27:28,329 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-12 09:27:28,331 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-12 09:27:28,331 - __main__ - INFO - [app.py:448] - ==================================================
2025-01-12 09:27:28,331 - __main__ - INFO - [app.py:449] - Starting LinguaSync Backend
2025-01-12 09:27:28,331 - __main__ - INFO - [app.py:450] - Starting Flask app on port 5001 using cpu
2025-01-12 09:27:28,331 - __main__ - INFO - [app.py:451] - Python version: 3.12.6 (v3.12.6:a4a2d2b0d85, Sep  6 2024, 16:08:03) [Clang 13.0.0 (clang-1300.0.29.30)]
2025-01-12 09:27:28,331 - __main__ - INFO - [app.py:452] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-12 09:27:28,331 - __main__ - INFO - [app.py:453] - Maximum audio length: 300 seconds
2025-01-12 09:27:28,331 - __main__ - INFO - [app.py:454] - Sample rate: 16000 Hz
2025-01-12 09:27:28,331 - __main__ - INFO - [app.py:458] - System memory: 36.0GB total, 15.8GB available
2025-01-12 09:27:28,331 - __main__ - INFO - [app.py:459] - CPU cores: 11
2025-01-12 09:27:28,331 - __main__ - INFO - [app.py:467] - Configuration:
2025-01-12 09:27:28,331 - __main__ - INFO - [app.py:468] - - Debug mode: False
2025-01-12 09:27:28,331 - __main__ - INFO - [app.py:469] - - CORS enabled: True
2025-01-12 09:27:28,331 - __main__ - INFO - [app.py:470] - - Rate limiting: 10 requests per minute
2025-01-12 09:27:28,331 - __main__ - INFO - [app.py:471] - - Metrics enabled: True (port 8000)
2025-01-12 09:27:28,331 - __main__ - INFO - [app.py:473] - ==================================================
2025-01-13 21:38:41,378 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-13 21:38:41,379 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-13 21:39:36,158 - __main__ - INFO - [app.py:424] - Metrics server started on port 8000
2025-01-13 21:39:36,158 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-13 21:39:50,542 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-13 21:40:10,250 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-13 21:40:10,252 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-13 21:40:16,329 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-13 21:40:16,332 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-13 21:40:16,332 - __main__ - INFO - [app.py:448] - ==================================================
2025-01-13 21:40:16,332 - __main__ - INFO - [app.py:449] - Starting LinguaSync Backend
2025-01-13 21:40:16,332 - __main__ - INFO - [app.py:450] - Starting Flask app on port 5001 using cpu
2025-01-13 21:40:16,332 - __main__ - INFO - [app.py:451] - Python version: 3.12.6 (v3.12.6:a4a2d2b0d85, Sep  6 2024, 16:08:03) [Clang 13.0.0 (clang-1300.0.29.30)]
2025-01-13 21:40:16,332 - __main__ - INFO - [app.py:452] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-13 21:40:16,332 - __main__ - INFO - [app.py:453] - Maximum audio length: 300 seconds
2025-01-13 21:40:16,332 - __main__ - INFO - [app.py:454] - Sample rate: 16000 Hz
2025-01-13 21:40:16,332 - __main__ - INFO - [app.py:458] - System memory: 36.0GB total, 11.7GB available
2025-01-13 21:40:16,332 - __main__ - INFO - [app.py:459] - CPU cores: 11
2025-01-13 21:40:16,332 - __main__ - INFO - [app.py:467] - Configuration:
2025-01-13 21:40:16,332 - __main__ - INFO - [app.py:468] - - Debug mode: False
2025-01-13 21:40:16,332 - __main__ - INFO - [app.py:469] - - CORS enabled: True
2025-01-13 21:40:16,332 - __main__ - INFO - [app.py:470] - - Rate limiting: 10 requests per minute
2025-01-13 21:40:16,332 - __main__ - INFO - [app.py:471] - - Metrics enabled: True (port 8000)
2025-01-13 21:40:16,332 - __main__ - INFO - [app.py:473] - ==================================================
2025-01-13 23:38:19,221 - services.model_manager - INFO - [model_manager.py:188] - Model inactive for too long, reloading...
2025-01-13 23:38:19,222 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-13 23:38:33,075 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-13 23:38:42,706 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-13 23:38:42,707 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-13 23:38:48,037 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-13 23:38:48,039 - services.translation_routes - INFO - [translation_routes.py:29] - Starting translation request 20a59f27
2025-01-13 23:38:48,039 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-13 23:38:48,039 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-13 23:38:48,043 - services.translation_routes - INFO - [translation_routes.py:86] - Request 20a59f27: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpifbggizd.wav
2025-01-13 23:38:48,047 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 18.36 seconds
2025-01-13 23:38:48,047 - services.translation_routes - INFO - [translation_routes.py:99] - Request 20a59f27: Beginning audio processing with diagnostics
2025-01-13 23:38:48,047 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpifbggizd.wav
2025-01-13 23:38:48,047 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 44100, Channels: 2
2025-01-13 23:38:48,057 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([2, 809508]), Frequency: 44100Hz
2025-01-13 23:38:48,057 - services.audio_processor - INFO - [audio_processor.py:219] - Resampling from 44100Hz to 16000Hz
2025-01-13 23:38:48,091 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-13 23:38:48,094 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-13 23:38:48,117 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-13 23:38:48,136 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-13 23:38:48,139 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-13 23:38:48,147 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-13 23:38:48,147 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-13 23:38:48,154 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-13 23:38:48,154 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-13 23:38:48,162 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-13 23:38:48,162 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-13 23:38:48,619 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-13 23:38:48,619 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-13 23:38:48,656 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-13 23:38:48,657 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-13 23:38:48,663 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-13 23:38:48,663 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-13 23:38:48,670 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-13 23:38:48,670 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-13 23:38:48,677 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-13 23:38:48,677 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-13 23:38:49,116 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-13 23:38:49,116 - services.translation_routes - INFO - [translation_routes.py:110] - 
==================================================
2025-01-13 23:38:49,116 - services.translation_routes - INFO - [translation_routes.py:111] - Input Audio Quality Report
2025-01-13 23:38:49,116 - services.translation_routes - INFO - [translation_routes.py:112] - ==================================================
2025-01-13 23:38:49,116 - services.translation_routes - INFO - [translation_routes.py:113] - Request ID: 20a59f27
2025-01-13 23:38:49,116 - services.translation_routes - INFO - [translation_routes.py:114] - Target Language: fra
2025-01-13 23:38:49,116 - services.translation_routes - INFO - [translation_routes.py:115] - --------------------------------------------------
2025-01-13 23:38:49,116 - services.translation_routes - INFO - [translation_routes.py:116] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.800
- Avg Amplitude: 0.013
- Rms Level: 0.039
- Crest Factor: 20.262
- Zero Crossings: 127716.000
- Silence Percentage: 62.168
- Clipping Points: 0.000
- Dynamic Range: 3022615.000

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.070
  - Temporal Flatness: 0.020

- Volume Metrics:
  - Volume Stability: -0.728
  - Volume Range: 29148040.000
  - Volume Variations: 0.034

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.003898838626448
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.6381455659866333, 'stability': 1.6408194303512573, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.23516440391540527, 'consistency': 0.2896541953086853, 'distinction': 0.11255760490894318}
  - Description: Moderate nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.670
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.340
  - Rhythm Quality: 0.358
  - Intonation Quality: 0.322

Vowel Quality:
  - Quality Score: 0.005
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-13 23:38:49,116 - services.translation_routes - INFO - [translation_routes.py:117] - ==================================================

2025-01-13 23:38:49,117 - services.translation_routes - INFO - [translation_routes.py:128] - Request 20a59f27: Audio processed successfully
2025-01-13 23:38:49,142 - services.translation_routes - INFO - [translation_routes.py:147] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-13 23:39:03,923 - services.translation_routes - INFO - [translation_routes.py:185] - Source text: the stale smell of old beer lingers it takes heat to bring out the odor a cold dip restores health and zest a salt pickle tastes fine with ham tacos al pastor are my favorite a zestful food is the hot cross bun
2025-01-13 23:39:19,813 - services.translation_routes - INFO - [translation_routes.py:204] - Target text: l'odeur de la vieille bière lingoure il faut de la chaleur pour faire ressortir l'odore une dip froide restaure la santé et le zest un pickle salé goûte bien avec le jambon tacos al pasteur sont mon favori une nourriture zestueuse est le hot cross bun
2025-01-13 23:39:40,606 - services.translation_routes - INFO - [translation_routes.py:227] - Processing tuple output from model
2025-01-13 23:39:40,619 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-13 23:39:40,619 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-13 23:39:40,623 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-13 23:39:40,624 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-13 23:39:40,630 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-13 23:39:40,630 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-13 23:39:40,639 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-13 23:39:40,640 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-13 23:39:40,953 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-13 23:39:40,953 - services.translation_routes - INFO - [translation_routes.py:251] - 
==================================================
2025-01-13 23:39:40,953 - services.translation_routes - INFO - [translation_routes.py:252] - Translated Audio Quality Report
2025-01-13 23:39:40,953 - services.translation_routes - INFO - [translation_routes.py:253] - ==================================================
2025-01-13 23:39:40,953 - services.translation_routes - INFO - [translation_routes.py:254] - Request ID: 20a59f27
2025-01-13 23:39:40,953 - services.translation_routes - INFO - [translation_routes.py:255] - Target Language: fra
2025-01-13 23:39:40,953 - services.translation_routes - INFO - [translation_routes.py:256] - --------------------------------------------------
2025-01-13 23:39:40,953 - services.translation_routes - INFO - [translation_routes.py:257] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.633
- Avg Amplitude: 0.066
- Rms Level: 0.100
- Crest Factor: 6.312
- Zero Crossings: 27024.000
- Silence Percentage: 9.616
- Clipping Points: 0.000
- Dynamic Range: 160.758

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.211
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.028
  - Temporal Flatness: 0.016

- Volume Metrics:
  - Volume Stability: 0.363
  - Volume Range: 356.507
  - Volume Variations: 0.054

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0317824049164983
- Background Noise: 3.5247159744685335
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
No issues detected

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 1.0902342796325684, 'stability': 3.641831398010254, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.015205835923552513, 'consistency': 0.0, 'distinction': 0.08077314496040344}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.533
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.004
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-13 23:39:40,953 - services.translation_routes - INFO - [translation_routes.py:258] - ==================================================

2025-01-13 23:39:40,953 - services.translation_routes - INFO - [translation_routes.py:264] - Request 20a59f27: Audio output processed successfully
2025-01-13 23:39:40,960 - services.translation_routes - INFO - [translation_routes.py:317] - Request 20a59f27: Response prepared successfully
2025-01-13 23:39:40,961 - services.translation_routes - INFO - [translation_routes.py:328] - Request 20a59f27 completed in 52.92s
2025-01-13 23:39:40,962 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 52.92s, Memory Change: 5129.45MB
2025-01-13 23:39:40,962 - __main__ - INFO - [app.py:277] - Request to /translate took 81.74s
2025-01-13 23:40:43,733 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-13 23:40:43,738 - services.translation_routes - INFO - [translation_routes.py:29] - Starting translation request 9cdf3424
2025-01-13 23:40:43,738 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-13 23:40:43,738 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-13 23:40:43,740 - services.translation_routes - INFO - [translation_routes.py:86] - Request 9cdf3424: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpygcq7xmq.wav
2025-01-13 23:40:43,740 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 18.36 seconds
2025-01-13 23:40:43,740 - services.translation_routes - INFO - [translation_routes.py:99] - Request 9cdf3424: Beginning audio processing with diagnostics
2025-01-13 23:40:43,741 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpygcq7xmq.wav
2025-01-13 23:40:43,741 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 44100, Channels: 2
2025-01-13 23:40:43,749 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([2, 809508]), Frequency: 44100Hz
2025-01-13 23:40:43,749 - services.audio_processor - INFO - [audio_processor.py:219] - Resampling from 44100Hz to 16000Hz
2025-01-13 23:40:43,772 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-13 23:40:43,774 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-13 23:40:43,795 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-13 23:40:43,809 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-13 23:40:43,809 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-13 23:40:43,815 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-13 23:40:43,815 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-13 23:40:43,823 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-13 23:40:43,823 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-13 23:40:43,831 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-13 23:40:43,831 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-13 23:40:44,290 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-13 23:40:44,290 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-13 23:40:44,328 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-13 23:40:44,328 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-13 23:40:44,334 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-13 23:40:44,334 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-13 23:40:44,344 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-13 23:40:44,344 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-13 23:40:44,352 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-13 23:40:44,353 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-13 23:40:44,804 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-13 23:40:44,805 - services.translation_routes - INFO - [translation_routes.py:110] - 
==================================================
2025-01-13 23:40:44,805 - services.translation_routes - INFO - [translation_routes.py:111] - Input Audio Quality Report
2025-01-13 23:40:44,805 - services.translation_routes - INFO - [translation_routes.py:112] - ==================================================
2025-01-13 23:40:44,805 - services.translation_routes - INFO - [translation_routes.py:113] - Request ID: 9cdf3424
2025-01-13 23:40:44,805 - services.translation_routes - INFO - [translation_routes.py:114] - Target Language: fra
2025-01-13 23:40:44,805 - services.translation_routes - INFO - [translation_routes.py:115] - --------------------------------------------------
2025-01-13 23:40:44,805 - services.translation_routes - INFO - [translation_routes.py:116] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.800
- Avg Amplitude: 0.013
- Rms Level: 0.039
- Crest Factor: 20.262
- Zero Crossings: 127716.000
- Silence Percentage: 62.168
- Clipping Points: 0.000
- Dynamic Range: 3022615.000

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.070
  - Temporal Flatness: 0.020

- Volume Metrics:
  - Volume Stability: -0.728
  - Volume Range: 29148040.000
  - Volume Variations: 0.034

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.003898838626448
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.6381455659866333, 'stability': 1.6408194303512573, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.23516440391540527, 'consistency': 0.2896541953086853, 'distinction': 0.11255760490894318}
  - Description: Moderate nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.670
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.340
  - Rhythm Quality: 0.358
  - Intonation Quality: 0.322

Vowel Quality:
  - Quality Score: 0.005
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-13 23:40:44,805 - services.translation_routes - INFO - [translation_routes.py:117] - ==================================================

2025-01-13 23:40:44,805 - services.translation_routes - INFO - [translation_routes.py:128] - Request 9cdf3424: Audio processed successfully
2025-01-13 23:40:44,826 - services.translation_routes - INFO - [translation_routes.py:147] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-13 23:40:59,638 - services.translation_routes - INFO - [translation_routes.py:185] - Source text: the stale smell of old beer lingers it takes heat to bring out the odor a cold dip restores health and zest a salt pickle tastes fine with ham tacos al pastor are my favorite a zestful food is the hot cross bun
2025-01-13 23:41:15,469 - services.translation_routes - INFO - [translation_routes.py:204] - Target text: l'odeur de la vieille bière lingoure il faut de la chaleur pour faire ressortir l'odore une dip froide restaure la santé et le zest un pickle salé goûte bien avec le jambon tacos al pasteur sont mon favori une nourriture zestueuse est le hot cross bun
2025-01-13 23:41:36,268 - services.translation_routes - INFO - [translation_routes.py:227] - Processing tuple output from model
2025-01-13 23:41:36,280 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-13 23:41:36,280 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-13 23:41:36,284 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-13 23:41:36,284 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-13 23:41:36,293 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-13 23:41:36,293 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-13 23:41:36,299 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-13 23:41:36,299 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-13 23:41:36,613 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-13 23:41:36,613 - services.translation_routes - INFO - [translation_routes.py:251] - 
==================================================
2025-01-13 23:41:36,613 - services.translation_routes - INFO - [translation_routes.py:252] - Translated Audio Quality Report
2025-01-13 23:41:36,613 - services.translation_routes - INFO - [translation_routes.py:253] - ==================================================
2025-01-13 23:41:36,613 - services.translation_routes - INFO - [translation_routes.py:254] - Request ID: 9cdf3424
2025-01-13 23:41:36,613 - services.translation_routes - INFO - [translation_routes.py:255] - Target Language: fra
2025-01-13 23:41:36,613 - services.translation_routes - INFO - [translation_routes.py:256] - --------------------------------------------------
2025-01-13 23:41:36,613 - services.translation_routes - INFO - [translation_routes.py:257] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.664
- Avg Amplitude: 0.065
- Rms Level: 0.099
- Crest Factor: 6.710
- Zero Crossings: 25886.000
- Silence Percentage: 9.535
- Clipping Points: 0.000
- Dynamic Range: 157.347

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.161
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.027
  - Temporal Flatness: 0.016

- Volume Metrics:
  - Volume Stability: 0.362
  - Volume Range: 690.762
  - Volume Variations: 0.053

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0294997238696393
- Background Noise: 3.6839109352667063
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 1.0773881673812866, 'stability': 3.776276111602783, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.0, 'distinction': 0.11070529371500015}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.529
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.005
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-13 23:41:36,613 - services.translation_routes - INFO - [translation_routes.py:258] - ==================================================

2025-01-13 23:41:36,613 - services.translation_routes - INFO - [translation_routes.py:264] - Request 9cdf3424: Audio output processed successfully
2025-01-13 23:41:36,619 - services.translation_routes - INFO - [translation_routes.py:317] - Request 9cdf3424: Response prepared successfully
2025-01-13 23:41:36,619 - services.translation_routes - INFO - [translation_routes.py:328] - Request 9cdf3424 completed in 52.88s
2025-01-13 23:41:36,621 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 52.88s, Memory Change: 1344.03MB
2025-01-13 23:41:36,621 - __main__ - INFO - [app.py:277] - Request to /translate took 58.45s
2025-01-14 07:23:31,624 - services.model_manager - INFO - [model_manager.py:188] - Model inactive for too long, reloading...
2025-01-14 07:23:31,627 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-14 07:23:46,929 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-14 07:24:00,545 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-14 07:24:00,546 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-14 07:24:08,334 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-14 07:24:08,468 - services.translation_routes - INFO - [translation_routes.py:29] - Starting translation request d4eb790f
2025-01-14 07:24:08,470 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-14 07:24:08,470 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-14 07:24:08,473 - services.translation_routes - INFO - [translation_routes.py:86] - Request d4eb790f: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpyqj5vdpm.wav
2025-01-14 07:24:08,474 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 18.36 seconds
2025-01-14 07:24:08,474 - services.translation_routes - INFO - [translation_routes.py:99] - Request d4eb790f: Beginning audio processing with diagnostics
2025-01-14 07:24:08,474 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpyqj5vdpm.wav
2025-01-14 07:24:08,474 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 44100, Channels: 2
2025-01-14 07:24:08,482 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([2, 809508]), Frequency: 44100Hz
2025-01-14 07:24:08,483 - services.audio_processor - INFO - [audio_processor.py:219] - Resampling from 44100Hz to 16000Hz
2025-01-14 07:24:08,504 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-14 07:24:08,506 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-14 07:24:08,528 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-14 07:24:08,546 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-14 07:24:08,546 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-14 07:24:08,552 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-14 07:24:08,552 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-14 07:24:08,559 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-14 07:24:08,559 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-14 07:24:08,567 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-14 07:24:08,567 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-14 07:24:09,044 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-14 07:24:09,044 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-14 07:24:09,127 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-14 07:24:09,128 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-14 07:24:09,142 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-14 07:24:09,142 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-14 07:24:09,152 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-14 07:24:09,152 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-14 07:24:09,163 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-14 07:24:09,163 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-14 07:24:09,615 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-14 07:24:09,615 - services.translation_routes - INFO - [translation_routes.py:110] - 
==================================================
2025-01-14 07:24:09,615 - services.translation_routes - INFO - [translation_routes.py:111] - Input Audio Quality Report
2025-01-14 07:24:09,615 - services.translation_routes - INFO - [translation_routes.py:112] - ==================================================
2025-01-14 07:24:09,615 - services.translation_routes - INFO - [translation_routes.py:113] - Request ID: d4eb790f
2025-01-14 07:24:09,615 - services.translation_routes - INFO - [translation_routes.py:114] - Target Language: fra
2025-01-14 07:24:09,615 - services.translation_routes - INFO - [translation_routes.py:115] - --------------------------------------------------
2025-01-14 07:24:09,615 - services.translation_routes - INFO - [translation_routes.py:116] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.800
- Avg Amplitude: 0.013
- Rms Level: 0.039
- Crest Factor: 20.262
- Zero Crossings: 127716.000
- Silence Percentage: 62.168
- Clipping Points: 0.000
- Dynamic Range: 3022615.000

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.070
  - Temporal Flatness: 0.020

- Volume Metrics:
  - Volume Stability: -0.728
  - Volume Range: 29148040.000
  - Volume Variations: 0.034

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.003898838626448
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.6381455659866333, 'stability': 1.6408194303512573, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.23516440391540527, 'consistency': 0.2896541953086853, 'distinction': 0.11255760490894318}
  - Description: Moderate nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.670
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.340
  - Rhythm Quality: 0.358
  - Intonation Quality: 0.322

Vowel Quality:
  - Quality Score: 0.005
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-14 07:24:09,615 - services.translation_routes - INFO - [translation_routes.py:117] - ==================================================

2025-01-14 07:24:09,615 - services.translation_routes - INFO - [translation_routes.py:128] - Request d4eb790f: Audio processed successfully
2025-01-14 07:24:09,680 - services.translation_routes - INFO - [translation_routes.py:147] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-14 07:24:24,935 - services.translation_routes - INFO - [translation_routes.py:185] - Source text: the stale smell of old beer lingers it takes heat to bring out the odor a cold dip restores health and zest a salt pickle tastes fine with ham tacos al pastor are my favorite a zestful food is the hot cross bun
2025-01-14 07:24:44,128 - services.translation_routes - INFO - [translation_routes.py:204] - Target text: l'odeur de la vieille bière lingoure il faut de la chaleur pour faire ressortir l'odore une dip froide restaure la santé et le zest un pickle salé goûte bien avec le jambon tacos al pasteur sont mon favori une nourriture zestueuse est le hot cross bun
2025-01-14 07:25:07,942 - services.translation_routes - INFO - [translation_routes.py:227] - Processing tuple output from model
2025-01-14 07:25:07,962 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-14 07:25:07,962 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-14 07:25:07,973 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-14 07:25:07,974 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-14 07:25:07,983 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-14 07:25:07,984 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-14 07:25:07,990 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-14 07:25:07,991 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-14 07:25:08,416 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-14 07:25:08,417 - services.translation_routes - INFO - [translation_routes.py:251] - 
==================================================
2025-01-14 07:25:08,417 - services.translation_routes - INFO - [translation_routes.py:252] - Translated Audio Quality Report
2025-01-14 07:25:08,417 - services.translation_routes - INFO - [translation_routes.py:253] - ==================================================
2025-01-14 07:25:08,417 - services.translation_routes - INFO - [translation_routes.py:254] - Request ID: d4eb790f
2025-01-14 07:25:08,417 - services.translation_routes - INFO - [translation_routes.py:255] - Target Language: fra
2025-01-14 07:25:08,417 - services.translation_routes - INFO - [translation_routes.py:256] - --------------------------------------------------
2025-01-14 07:25:08,417 - services.translation_routes - INFO - [translation_routes.py:257] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.599
- Avg Amplitude: 0.063
- Rms Level: 0.097
- Crest Factor: 6.178
- Zero Crossings: 27485.000
- Silence Percentage: 10.128
- Clipping Points: 0.000
- Dynamic Range: 169.437

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.228
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.027
  - Temporal Flatness: 0.015

- Volume Metrics:
  - Volume Stability: 0.344
  - Volume Range: 853.003
  - Volume Variations: 0.053

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.031380950017571
- Background Noise: 3.471381910163934
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 1.0574101209640503, 'stability': 3.5980324745178223, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.0, 'distinction': 0.09415197372436523}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.520
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.003
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-14 07:25:08,417 - services.translation_routes - INFO - [translation_routes.py:258] - ==================================================

2025-01-14 07:25:08,417 - services.translation_routes - INFO - [translation_routes.py:264] - Request d4eb790f: Audio output processed successfully
2025-01-14 07:25:08,423 - services.translation_routes - INFO - [translation_routes.py:317] - Request d4eb790f: Response prepared successfully
2025-01-14 07:25:08,423 - services.translation_routes - INFO - [translation_routes.py:328] - Request d4eb790f completed in 59.95s
2025-01-14 07:25:08,425 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 59.96s, Memory Change: 7256.50MB
2025-01-14 07:25:08,425 - __main__ - INFO - [app.py:277] - Request to /translate took 96.80s
2025-01-15 08:56:40,559 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-15 08:56:40,560 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-15 08:56:51,959 - __main__ - INFO - [app.py:424] - Metrics server started on port 8000
2025-01-15 08:56:51,959 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-15 08:57:05,830 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-15 08:57:27,016 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-15 08:57:27,018 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-15 08:57:33,264 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-15 08:57:33,267 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-15 08:57:33,268 - __main__ - INFO - [app.py:448] - ==================================================
2025-01-15 08:57:33,268 - __main__ - INFO - [app.py:449] - Starting LinguaSync Backend
2025-01-15 08:57:33,268 - __main__ - INFO - [app.py:450] - Starting Flask app on port 5001 using cpu
2025-01-15 08:57:33,268 - __main__ - INFO - [app.py:451] - Python version: 3.12.6 (v3.12.6:a4a2d2b0d85, Sep  6 2024, 16:08:03) [Clang 13.0.0 (clang-1300.0.29.30)]
2025-01-15 08:57:33,268 - __main__ - INFO - [app.py:452] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-15 08:57:33,268 - __main__ - INFO - [app.py:453] - Maximum audio length: 300 seconds
2025-01-15 08:57:33,268 - __main__ - INFO - [app.py:454] - Sample rate: 16000 Hz
2025-01-15 08:57:33,268 - __main__ - INFO - [app.py:458] - System memory: 36.0GB total, 6.6GB available
2025-01-15 08:57:33,268 - __main__ - INFO - [app.py:459] - CPU cores: 11
2025-01-15 08:57:33,268 - __main__ - INFO - [app.py:467] - Configuration:
2025-01-15 08:57:33,268 - __main__ - INFO - [app.py:468] - - Debug mode: False
2025-01-15 08:57:33,268 - __main__ - INFO - [app.py:469] - - CORS enabled: True
2025-01-15 08:57:33,268 - __main__ - INFO - [app.py:470] - - Rate limiting: 10 requests per minute
2025-01-15 08:57:33,268 - __main__ - INFO - [app.py:471] - - Metrics enabled: True (port 8000)
2025-01-15 08:57:33,268 - __main__ - INFO - [app.py:473] - ==================================================
2025-01-15 08:58:50,276 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-15 08:58:50,278 - services.translation_routes - INFO - [translation_routes.py:29] - Starting translation request 6266c9ae
2025-01-15 08:58:50,278 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-15 08:58:50,278 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-15 08:58:50,281 - services.translation_routes - INFO - [translation_routes.py:86] - Request 6266c9ae: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpcunggvym.wav
2025-01-15 08:58:50,283 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 18.36 seconds
2025-01-15 08:58:50,283 - services.translation_routes - INFO - [translation_routes.py:99] - Request 6266c9ae: Beginning audio processing with diagnostics
2025-01-15 08:58:50,283 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpcunggvym.wav
2025-01-15 08:58:50,283 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 44100, Channels: 2
2025-01-15 08:58:50,292 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([2, 809508]), Frequency: 44100Hz
2025-01-15 08:58:50,292 - services.audio_processor - INFO - [audio_processor.py:219] - Resampling from 44100Hz to 16000Hz
2025-01-15 08:58:50,314 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-15 08:58:50,316 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-15 08:58:50,338 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-15 08:58:50,357 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 08:58:50,357 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 08:58:50,366 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 08:58:50,366 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 08:58:50,375 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 08:58:50,375 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 08:58:50,386 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 08:58:50,386 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 08:58:50,853 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-15 08:58:50,853 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-15 08:58:50,901 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 08:58:50,901 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 08:58:50,910 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 08:58:50,910 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 08:58:50,920 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 08:58:50,920 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 08:58:50,931 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 08:58:50,931 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 08:58:51,371 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-15 08:58:51,371 - services.translation_routes - INFO - [translation_routes.py:110] - 
==================================================
2025-01-15 08:58:51,371 - services.translation_routes - INFO - [translation_routes.py:111] - Input Audio Quality Report
2025-01-15 08:58:51,371 - services.translation_routes - INFO - [translation_routes.py:112] - ==================================================
2025-01-15 08:58:51,371 - services.translation_routes - INFO - [translation_routes.py:113] - Request ID: 6266c9ae
2025-01-15 08:58:51,372 - services.translation_routes - INFO - [translation_routes.py:114] - Target Language: fra
2025-01-15 08:58:51,372 - services.translation_routes - INFO - [translation_routes.py:115] - --------------------------------------------------
2025-01-15 08:58:51,372 - services.translation_routes - INFO - [translation_routes.py:116] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.800
- Avg Amplitude: 0.013
- Rms Level: 0.039
- Crest Factor: 20.262
- Zero Crossings: 127716.000
- Silence Percentage: 62.168
- Clipping Points: 0.000
- Dynamic Range: 3022615.000

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.070
  - Temporal Flatness: 0.020

- Volume Metrics:
  - Volume Stability: -0.728
  - Volume Range: 29148040.000
  - Volume Variations: 0.034

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.003898838626448
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.6381455659866333, 'stability': 1.6408194303512573, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.23516440391540527, 'consistency': 0.2896541953086853, 'distinction': 0.11255760490894318}
  - Description: Moderate nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.670
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.340
  - Rhythm Quality: 0.358
  - Intonation Quality: 0.322

Vowel Quality:
  - Quality Score: 0.005
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-15 08:58:51,372 - services.translation_routes - INFO - [translation_routes.py:117] - ==================================================

2025-01-15 08:58:51,372 - services.translation_routes - INFO - [translation_routes.py:128] - Request 6266c9ae: Audio processed successfully
2025-01-15 08:58:51,396 - services.translation_routes - INFO - [translation_routes.py:147] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-15 08:59:08,880 - services.translation_routes - INFO - [translation_routes.py:185] - Source text: the stale smell of old beer lingers it takes heat to bring out the odor a cold dip restores health and zest a salt pickle tastes fine with ham tacos al pastor are my favorite a zestful food is the hot cross bun
2025-01-15 08:59:27,828 - services.translation_routes - INFO - [translation_routes.py:204] - Target text: l'odeur de la vieille bière lingoure il faut de la chaleur pour faire ressortir l'odore une dip froide restaure la santé et le zest un pickle salé goûte bien avec le jambon tacos al pasteur sont mon favori une nourriture zestueuse est le hot cross bun
2025-01-15 08:59:53,365 - services.translation_routes - INFO - [translation_routes.py:227] - Processing tuple output from model
2025-01-15 08:59:53,384 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 08:59:53,384 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 08:59:53,393 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 08:59:53,393 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 08:59:53,398 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 08:59:53,398 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 08:59:53,404 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 08:59:53,404 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 08:59:53,715 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-15 08:59:53,716 - services.translation_routes - INFO - [translation_routes.py:251] - 
==================================================
2025-01-15 08:59:53,716 - services.translation_routes - INFO - [translation_routes.py:252] - Translated Audio Quality Report
2025-01-15 08:59:53,716 - services.translation_routes - INFO - [translation_routes.py:253] - ==================================================
2025-01-15 08:59:53,716 - services.translation_routes - INFO - [translation_routes.py:254] - Request ID: 6266c9ae
2025-01-15 08:59:53,716 - services.translation_routes - INFO - [translation_routes.py:255] - Target Language: fra
2025-01-15 08:59:53,716 - services.translation_routes - INFO - [translation_routes.py:256] - --------------------------------------------------
2025-01-15 08:59:53,716 - services.translation_routes - INFO - [translation_routes.py:257] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.750
- Avg Amplitude: 0.066
- Rms Level: 0.101
- Crest Factor: 7.433
- Zero Crossings: 27969.000
- Silence Percentage: 9.885
- Clipping Points: 0.000
- Dynamic Range: 165.801

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.071
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.029
  - Temporal Flatness: 0.016

- Volume Metrics:
  - Volume Stability: 0.349
  - Volume Range: 747.330
  - Volume Variations: 0.055

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0271333601091364
- Background Noise: 3.9731332095247374
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
No issues detected

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 1.1307824850082397, 'stability': 3.8330910205841064, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.03674091398715973, 'consistency': 0.0, 'distinction': 0.10692695528268814}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.561
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.003
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-15 08:59:53,716 - services.translation_routes - INFO - [translation_routes.py:258] - ==================================================

2025-01-15 08:59:53,716 - services.translation_routes - INFO - [translation_routes.py:264] - Request 6266c9ae: Audio output processed successfully
2025-01-15 08:59:53,721 - services.translation_routes - INFO - [translation_routes.py:317] - Request 6266c9ae: Response prepared successfully
2025-01-15 08:59:53,722 - services.translation_routes - INFO - [translation_routes.py:328] - Request 6266c9ae completed in 63.44s
2025-01-15 08:59:53,723 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 63.45s, Memory Change: 1440.27MB
2025-01-15 08:59:53,723 - __main__ - INFO - [app.py:277] - Request to /translate took 73.99s
2025-01-15 09:02:40,071 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-15 09:02:40,073 - services.translation_routes - INFO - [translation_routes.py:29] - Starting translation request 55462e35
2025-01-15 09:02:40,073 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-15 09:02:40,073 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-15 09:02:40,079 - services.translation_routes - INFO - [translation_routes.py:86] - Request 55462e35: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpvp593z3i.wav
2025-01-15 09:02:40,080 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 18.36 seconds
2025-01-15 09:02:40,080 - services.translation_routes - INFO - [translation_routes.py:99] - Request 55462e35: Beginning audio processing with diagnostics
2025-01-15 09:02:40,080 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpvp593z3i.wav
2025-01-15 09:02:40,080 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 44100, Channels: 2
2025-01-15 09:02:40,090 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([2, 809508]), Frequency: 44100Hz
2025-01-15 09:02:40,090 - services.audio_processor - INFO - [audio_processor.py:219] - Resampling from 44100Hz to 16000Hz
2025-01-15 09:02:40,126 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-15 09:02:40,128 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-15 09:02:40,173 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-15 09:02:40,203 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 09:02:40,203 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 09:02:40,218 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 09:02:40,218 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 09:02:40,230 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 09:02:40,230 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 09:02:40,244 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 09:02:40,244 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 09:02:40,750 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-15 09:02:40,750 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-15 09:02:40,811 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 09:02:40,812 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 09:02:40,826 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 09:02:40,826 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 09:02:40,840 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 09:02:40,840 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 09:02:40,852 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 09:02:40,852 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 09:02:41,348 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-15 09:02:41,348 - services.translation_routes - INFO - [translation_routes.py:110] - 
==================================================
2025-01-15 09:02:41,348 - services.translation_routes - INFO - [translation_routes.py:111] - Input Audio Quality Report
2025-01-15 09:02:41,348 - services.translation_routes - INFO - [translation_routes.py:112] - ==================================================
2025-01-15 09:02:41,348 - services.translation_routes - INFO - [translation_routes.py:113] - Request ID: 55462e35
2025-01-15 09:02:41,348 - services.translation_routes - INFO - [translation_routes.py:114] - Target Language: fra
2025-01-15 09:02:41,348 - services.translation_routes - INFO - [translation_routes.py:115] - --------------------------------------------------
2025-01-15 09:02:41,348 - services.translation_routes - INFO - [translation_routes.py:116] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.800
- Avg Amplitude: 0.013
- Rms Level: 0.039
- Crest Factor: 20.262
- Zero Crossings: 127716.000
- Silence Percentage: 62.168
- Clipping Points: 0.000
- Dynamic Range: 3022615.000

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.070
  - Temporal Flatness: 0.020

- Volume Metrics:
  - Volume Stability: -0.728
  - Volume Range: 29148040.000
  - Volume Variations: 0.034

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.003898838626448
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.6381455659866333, 'stability': 1.6408194303512573, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.23516440391540527, 'consistency': 0.2896541953086853, 'distinction': 0.11255760490894318}
  - Description: Moderate nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.670
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.340
  - Rhythm Quality: 0.358
  - Intonation Quality: 0.322

Vowel Quality:
  - Quality Score: 0.005
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-15 09:02:41,348 - services.translation_routes - INFO - [translation_routes.py:117] - ==================================================

2025-01-15 09:02:41,348 - services.translation_routes - INFO - [translation_routes.py:128] - Request 55462e35: Audio processed successfully
2025-01-15 09:02:41,370 - services.translation_routes - INFO - [translation_routes.py:147] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-15 09:02:43,254 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-15 09:02:43,259 - services.translation_routes - INFO - [translation_routes.py:29] - Starting translation request c41e51ea
2025-01-15 09:02:43,260 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-15 09:02:43,260 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-15 09:02:43,267 - services.translation_routes - INFO - [translation_routes.py:86] - Request c41e51ea: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpkgq_n2n1.wav
2025-01-15 09:02:43,267 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 18.36 seconds
2025-01-15 09:02:43,267 - services.translation_routes - INFO - [translation_routes.py:99] - Request c41e51ea: Beginning audio processing with diagnostics
2025-01-15 09:02:43,267 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpkgq_n2n1.wav
2025-01-15 09:02:43,267 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 44100, Channels: 2
2025-01-15 09:02:43,287 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([2, 809508]), Frequency: 44100Hz
2025-01-15 09:02:43,287 - services.audio_processor - INFO - [audio_processor.py:219] - Resampling from 44100Hz to 16000Hz
2025-01-15 09:02:43,353 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-15 09:02:43,356 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-15 09:02:43,416 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-15 09:02:43,448 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 09:02:43,448 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 09:02:43,462 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 09:02:43,462 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 09:02:43,485 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 09:02:43,486 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 09:02:43,505 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 09:02:43,505 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 09:02:44,044 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-15 09:02:44,044 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-15 09:02:44,107 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 09:02:44,107 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 09:02:44,119 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 09:02:44,119 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 09:02:44,138 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 09:02:44,138 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 09:02:44,150 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 09:02:44,150 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 09:02:44,653 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-15 09:02:44,654 - services.translation_routes - INFO - [translation_routes.py:110] - 
==================================================
2025-01-15 09:02:44,654 - services.translation_routes - INFO - [translation_routes.py:111] - Input Audio Quality Report
2025-01-15 09:02:44,654 - services.translation_routes - INFO - [translation_routes.py:112] - ==================================================
2025-01-15 09:02:44,654 - services.translation_routes - INFO - [translation_routes.py:113] - Request ID: c41e51ea
2025-01-15 09:02:44,654 - services.translation_routes - INFO - [translation_routes.py:114] - Target Language: fra
2025-01-15 09:02:44,654 - services.translation_routes - INFO - [translation_routes.py:115] - --------------------------------------------------
2025-01-15 09:02:44,654 - services.translation_routes - INFO - [translation_routes.py:116] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.800
- Avg Amplitude: 0.013
- Rms Level: 0.039
- Crest Factor: 20.262
- Zero Crossings: 127716.000
- Silence Percentage: 62.168
- Clipping Points: 0.000
- Dynamic Range: 3022615.000

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.070
  - Temporal Flatness: 0.020

- Volume Metrics:
  - Volume Stability: -0.728
  - Volume Range: 29148040.000
  - Volume Variations: 0.034

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.003898838626448
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.6381455659866333, 'stability': 1.6408194303512573, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.23516440391540527, 'consistency': 0.2896541953086853, 'distinction': 0.11255760490894318}
  - Description: Moderate nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.670
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.340
  - Rhythm Quality: 0.358
  - Intonation Quality: 0.322

Vowel Quality:
  - Quality Score: 0.005
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-15 09:02:44,654 - services.translation_routes - INFO - [translation_routes.py:117] - ==================================================

2025-01-15 09:02:44,655 - services.translation_routes - INFO - [translation_routes.py:128] - Request c41e51ea: Audio processed successfully
2025-01-15 09:02:44,677 - services.translation_routes - INFO - [translation_routes.py:147] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-15 09:03:07,536 - services.translation_routes - INFO - [translation_routes.py:185] - Source text: the stale smell of old beer lingers it takes heat to bring out the odor a cold dip restores health and zest a salt pickle tastes fine with ham tacos al pastor are my favorite a zestful food is the hot cross bun
2025-01-15 09:03:10,128 - services.translation_routes - INFO - [translation_routes.py:185] - Source text: the stale smell of old beer lingers it takes heat to bring out the odor a cold dip restores health and zest a salt pickle tastes fine with ham tacos al pastor are my favorite a zestful food is the hot cross bun
2025-01-15 09:03:36,320 - services.translation_routes - INFO - [translation_routes.py:204] - Target text: l'odeur de la vieille bière lingoure il faut de la chaleur pour faire ressortir l'odore une dip froide restaure la santé et le zest un pickle salé goûte bien avec le jambon tacos al pasteur sont mon favori une nourriture zestueuse est le hot cross bun
2025-01-15 09:03:36,876 - services.translation_routes - INFO - [translation_routes.py:204] - Target text: l'odeur de la vieille bière lingoure il faut de la chaleur pour faire ressortir l'odore une dip froide restaure la santé et le zest un pickle salé goûte bien avec le jambon tacos al pasteur sont mon favori une nourriture zestueuse est le hot cross bun
2025-01-15 09:04:12,370 - services.translation_routes - INFO - [translation_routes.py:227] - Processing tuple output from model
2025-01-15 09:04:12,396 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 09:04:12,396 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 09:04:12,413 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 09:04:12,413 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 09:04:12,427 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 09:04:12,427 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 09:04:12,440 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 09:04:12,440 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 09:04:12,815 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-15 09:04:12,815 - services.translation_routes - INFO - [translation_routes.py:251] - 
==================================================
2025-01-15 09:04:12,815 - services.translation_routes - INFO - [translation_routes.py:252] - Translated Audio Quality Report
2025-01-15 09:04:12,815 - services.translation_routes - INFO - [translation_routes.py:253] - ==================================================
2025-01-15 09:04:12,815 - services.translation_routes - INFO - [translation_routes.py:254] - Request ID: c41e51ea
2025-01-15 09:04:12,815 - services.translation_routes - INFO - [translation_routes.py:255] - Target Language: fra
2025-01-15 09:04:12,815 - services.translation_routes - INFO - [translation_routes.py:256] - --------------------------------------------------
2025-01-15 09:04:12,815 - services.translation_routes - INFO - [translation_routes.py:257] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.699
- Avg Amplitude: 0.065
- Rms Level: 0.100
- Crest Factor: 7.022
- Zero Crossings: 26725.000
- Silence Percentage: 9.412
- Clipping Points: 0.000
- Dynamic Range: 153.468

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.122
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.028
  - Temporal Flatness: 0.016

- Volume Metrics:
  - Volume Stability: 0.350
  - Volume Range: 782.081
  - Volume Variations: 0.054

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0283478472567924
- Background Noise: 3.808798963221734
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 1.0444257259368896, 'stability': 3.6349267959594727, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0628737360239029, 'consistency': 0.0, 'distinction': 0.07266174256801605}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.537
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.004
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-15 09:04:12,815 - services.translation_routes - INFO - [translation_routes.py:258] - ==================================================

2025-01-15 09:04:12,815 - services.translation_routes - INFO - [translation_routes.py:264] - Request c41e51ea: Audio output processed successfully
2025-01-15 09:04:12,823 - services.translation_routes - INFO - [translation_routes.py:317] - Request c41e51ea: Response prepared successfully
2025-01-15 09:04:12,823 - services.translation_routes - INFO - [translation_routes.py:328] - Request c41e51ea completed in 89.56s
2025-01-15 09:04:12,825 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 89.57s, Memory Change: 1658.92MB
2025-01-15 09:04:12,825 - __main__ - INFO - [app.py:277] - Request to /translate took 99.30s
2025-01-15 09:04:12,838 - services.translation_routes - INFO - [translation_routes.py:227] - Processing tuple output from model
2025-01-15 09:04:12,869 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 09:04:12,870 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 09:04:12,882 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 09:04:12,882 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 09:04:12,895 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 09:04:12,895 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 09:04:12,906 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 09:04:12,906 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 09:04:13,221 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-15 09:04:13,221 - services.translation_routes - INFO - [translation_routes.py:251] - 
==================================================
2025-01-15 09:04:13,222 - services.translation_routes - INFO - [translation_routes.py:252] - Translated Audio Quality Report
2025-01-15 09:04:13,222 - services.translation_routes - INFO - [translation_routes.py:253] - ==================================================
2025-01-15 09:04:13,222 - services.translation_routes - INFO - [translation_routes.py:254] - Request ID: 55462e35
2025-01-15 09:04:13,222 - services.translation_routes - INFO - [translation_routes.py:255] - Target Language: fra
2025-01-15 09:04:13,222 - services.translation_routes - INFO - [translation_routes.py:256] - --------------------------------------------------
2025-01-15 09:04:13,222 - services.translation_routes - INFO - [translation_routes.py:257] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.702
- Avg Amplitude: 0.062
- Rms Level: 0.095
- Crest Factor: 7.405
- Zero Crossings: 26658.000
- Silence Percentage: 10.606
- Clipping Points: 0.000
- Dynamic Range: 177.528

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.074
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.026
  - Temporal Flatness: 0.015

- Volume Metrics:
  - Volume Stability: 0.355
  - Volume Range: 410.810
  - Volume Variations: 0.052

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0256054732365696
- Background Noise: 3.9621661774052304
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 1.0573242902755737, 'stability': 3.5496342182159424, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.017199454829096794, 'consistency': 0.0, 'distinction': 0.11212129890918732}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.514
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.004
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-15 09:04:13,222 - services.translation_routes - INFO - [translation_routes.py:258] - ==================================================

2025-01-15 09:04:13,222 - services.translation_routes - INFO - [translation_routes.py:264] - Request 55462e35: Audio output processed successfully
2025-01-15 09:04:13,226 - services.translation_routes - INFO - [translation_routes.py:317] - Request 55462e35: Response prepared successfully
2025-01-15 09:04:13,226 - services.translation_routes - INFO - [translation_routes.py:328] - Request 55462e35 completed in 93.15s
2025-01-15 09:04:13,228 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 93.16s, Memory Change: 2222.12MB
2025-01-15 09:04:13,229 - __main__ - INFO - [app.py:277] - Request to /translate took 116.20s
2025-01-15 09:04:38,758 - __main__ - INFO - [app.py:216] - Received SIGINT signal
2025-01-15 09:04:38,760 - __main__ - INFO - [app.py:201] - Initiating graceful shutdown...
2025-01-15 09:04:43,765 - __main__ - INFO - [app.py:393] - Application shutting down...
2025-01-15 09:04:43,766 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-15 09:04:43,767 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-15 09:04:43,769 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-15 09:04:43,770 - __main__ - INFO - [app.py:407] - Cleanup completed successfully
2025-01-15 09:04:43,770 - __main__ - INFO - [app.py:205] - Graceful shutdown completed
2025-01-15 09:04:43,771 - __main__ - INFO - [app.py:393] - Application shutting down...
2025-01-15 09:04:43,772 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-15 09:04:43,772 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-15 09:04:43,773 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-15 09:04:43,773 - __main__ - INFO - [app.py:407] - Cleanup completed successfully
2025-01-15 09:04:43,774 - __main__ - INFO - [app.py:393] - Application shutting down...
2025-01-15 09:04:43,775 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-15 09:04:43,775 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-15 09:04:43,776 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-15 09:04:43,776 - __main__ - INFO - [app.py:407] - Cleanup completed successfully
2025-01-15 09:04:43,946 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-15 09:04:43,947 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-15 09:04:54,187 - __main__ - INFO - [app.py:424] - Metrics server started on port 8000
2025-01-15 09:04:54,188 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-15 09:05:08,737 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-15 09:05:21,778 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-15 09:05:21,780 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-15 09:05:27,832 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-15 09:05:27,834 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-15 09:05:27,835 - __main__ - INFO - [app.py:448] - ==================================================
2025-01-15 09:05:27,835 - __main__ - INFO - [app.py:449] - Starting LinguaSync Backend
2025-01-15 09:05:27,835 - __main__ - INFO - [app.py:450] - Starting Flask app on port 5001 using cpu
2025-01-15 09:05:27,835 - __main__ - INFO - [app.py:451] - Python version: 3.12.6 (v3.12.6:a4a2d2b0d85, Sep  6 2024, 16:08:03) [Clang 13.0.0 (clang-1300.0.29.30)]
2025-01-15 09:05:27,835 - __main__ - INFO - [app.py:452] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-15 09:05:27,835 - __main__ - INFO - [app.py:453] - Maximum audio length: 300 seconds
2025-01-15 09:05:27,835 - __main__ - INFO - [app.py:454] - Sample rate: 16000 Hz
2025-01-15 09:05:27,835 - __main__ - INFO - [app.py:458] - System memory: 36.0GB total, 9.0GB available
2025-01-15 09:05:27,835 - __main__ - INFO - [app.py:459] - CPU cores: 11
2025-01-15 09:05:27,835 - __main__ - INFO - [app.py:467] - Configuration:
2025-01-15 09:05:27,835 - __main__ - INFO - [app.py:468] - - Debug mode: False
2025-01-15 09:05:27,835 - __main__ - INFO - [app.py:469] - - CORS enabled: True
2025-01-15 09:05:27,835 - __main__ - INFO - [app.py:470] - - Rate limiting: 10 requests per minute
2025-01-15 09:05:27,835 - __main__ - INFO - [app.py:471] - - Metrics enabled: True (port 8000)
2025-01-15 09:05:27,835 - __main__ - INFO - [app.py:473] - ==================================================
2025-01-15 09:06:11,818 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-15 09:06:11,822 - services.translation_routes - INFO - [translation_routes.py:29] - Starting translation request 3215e7f0
2025-01-15 09:06:11,822 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-15 09:06:11,822 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-15 09:06:11,826 - services.translation_routes - INFO - [translation_routes.py:86] - Request 3215e7f0: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp2wffrde6.wav
2025-01-15 09:06:11,828 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 18.36 seconds
2025-01-15 09:06:11,828 - services.translation_routes - INFO - [translation_routes.py:99] - Request 3215e7f0: Beginning audio processing with diagnostics
2025-01-15 09:06:11,828 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp2wffrde6.wav
2025-01-15 09:06:11,828 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 44100, Channels: 2
2025-01-15 09:06:11,837 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([2, 809508]), Frequency: 44100Hz
2025-01-15 09:06:11,837 - services.audio_processor - INFO - [audio_processor.py:219] - Resampling from 44100Hz to 16000Hz
2025-01-15 09:06:11,861 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-15 09:06:11,864 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-15 09:06:11,892 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-15 09:06:11,910 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 09:06:11,910 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 09:06:11,920 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 09:06:11,920 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 09:06:11,931 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 09:06:11,931 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 09:06:11,940 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 09:06:11,940 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 09:06:12,638 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-15 09:06:12,638 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-15 09:06:12,701 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 09:06:12,701 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 09:06:12,716 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 09:06:12,716 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 09:06:12,731 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 09:06:12,732 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 09:06:12,743 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 09:06:12,743 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 09:06:13,218 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-15 09:06:13,218 - services.translation_routes - INFO - [translation_routes.py:110] - 
==================================================
2025-01-15 09:06:13,218 - services.translation_routes - INFO - [translation_routes.py:111] - Input Audio Quality Report
2025-01-15 09:06:13,218 - services.translation_routes - INFO - [translation_routes.py:112] - ==================================================
2025-01-15 09:06:13,218 - services.translation_routes - INFO - [translation_routes.py:113] - Request ID: 3215e7f0
2025-01-15 09:06:13,218 - services.translation_routes - INFO - [translation_routes.py:114] - Target Language: fra
2025-01-15 09:06:13,218 - services.translation_routes - INFO - [translation_routes.py:115] - --------------------------------------------------
2025-01-15 09:06:13,218 - services.translation_routes - INFO - [translation_routes.py:116] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.800
- Avg Amplitude: 0.013
- Rms Level: 0.039
- Crest Factor: 20.262
- Zero Crossings: 127716.000
- Silence Percentage: 62.168
- Clipping Points: 0.000
- Dynamic Range: 3022615.000

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.070
  - Temporal Flatness: 0.020

- Volume Metrics:
  - Volume Stability: -0.728
  - Volume Range: 29148040.000
  - Volume Variations: 0.034

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.003898838626448
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.6381455659866333, 'stability': 1.6408194303512573, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.23516440391540527, 'consistency': 0.2896541953086853, 'distinction': 0.11255760490894318}
  - Description: Moderate nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.670
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.340
  - Rhythm Quality: 0.358
  - Intonation Quality: 0.322

Vowel Quality:
  - Quality Score: 0.005
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-15 09:06:13,218 - services.translation_routes - INFO - [translation_routes.py:117] - ==================================================

2025-01-15 09:06:13,219 - services.translation_routes - INFO - [translation_routes.py:128] - Request 3215e7f0: Audio processed successfully
2025-01-15 09:06:13,244 - services.translation_routes - INFO - [translation_routes.py:147] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-15 09:06:29,871 - services.translation_routes - INFO - [translation_routes.py:185] - Source text: the stale smell of old beer lingers it takes heat to bring out the odor a cold dip restores health and zest a salt pickle tastes fine with ham tacos al pastor are my favorite a zestful food is the hot cross bun
2025-01-15 09:06:45,835 - services.translation_routes - INFO - [translation_routes.py:204] - Target text: l'odeur de la vieille bière lingoure il faut de la chaleur pour faire ressortir l'odore une dip froide restaure la santé et le zest un pickle salé goûte bien avec le jambon tacos al pasteur sont mon favori une nourriture zestueuse est le hot cross bun
2025-01-15 09:07:06,591 - services.translation_routes - INFO - [translation_routes.py:227] - Processing tuple output from model
2025-01-15 09:07:06,608 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 09:07:06,609 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 09:07:06,616 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 09:07:06,616 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 09:07:06,622 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 09:07:06,622 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 09:07:06,628 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 09:07:06,628 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 09:07:06,944 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-15 09:07:06,944 - services.translation_routes - INFO - [translation_routes.py:251] - 
==================================================
2025-01-15 09:07:06,944 - services.translation_routes - INFO - [translation_routes.py:252] - Translated Audio Quality Report
2025-01-15 09:07:06,944 - services.translation_routes - INFO - [translation_routes.py:253] - ==================================================
2025-01-15 09:07:06,944 - services.translation_routes - INFO - [translation_routes.py:254] - Request ID: 3215e7f0
2025-01-15 09:07:06,944 - services.translation_routes - INFO - [translation_routes.py:255] - Target Language: fra
2025-01-15 09:07:06,944 - services.translation_routes - INFO - [translation_routes.py:256] - --------------------------------------------------
2025-01-15 09:07:06,944 - services.translation_routes - INFO - [translation_routes.py:257] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.747
- Avg Amplitude: 0.066
- Rms Level: 0.102
- Crest Factor: 7.353
- Zero Crossings: 27293.000
- Silence Percentage: 9.724
- Clipping Points: 0.000
- Dynamic Range: 163.182

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.081
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.028
  - Temporal Flatness: 0.016

- Volume Metrics:
  - Volume Stability: 0.334
  - Volume Range: 686.857
  - Volume Variations: 0.056

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0276206958947762
- Background Noise: 3.94110042910796
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
No issues detected

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 1.0345174074172974, 'stability': 3.6124579906463623, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.025447623804211617, 'consistency': 0.0, 'distinction': 0.057874877005815506}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.538
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.002
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-15 09:07:06,945 - services.translation_routes - INFO - [translation_routes.py:258] - ==================================================

2025-01-15 09:07:06,945 - services.translation_routes - INFO - [translation_routes.py:264] - Request 3215e7f0: Audio output processed successfully
2025-01-15 09:07:06,949 - services.translation_routes - INFO - [translation_routes.py:317] - Request 3215e7f0: Response prepared successfully
2025-01-15 09:07:06,949 - services.translation_routes - INFO - [translation_routes.py:328] - Request 3215e7f0 completed in 55.13s
2025-01-15 09:07:06,951 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 55.13s, Memory Change: 1445.22MB
2025-01-15 09:07:06,951 - __main__ - INFO - [app.py:277] - Request to /translate took 64.87s
2025-01-15 09:30:32,239 - __main__ - INFO - [app.py:216] - Received SIGINT signal
2025-01-15 09:30:32,242 - __main__ - INFO - [app.py:201] - Initiating graceful shutdown...
2025-01-15 09:30:37,245 - __main__ - INFO - [app.py:393] - Application shutting down...
2025-01-15 09:30:37,246 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-15 09:30:37,247 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-15 09:30:37,251 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-15 09:30:37,253 - __main__ - INFO - [app.py:407] - Cleanup completed successfully
2025-01-15 09:30:37,256 - __main__ - INFO - [app.py:205] - Graceful shutdown completed
2025-01-15 09:30:37,260 - __main__ - INFO - [app.py:393] - Application shutting down...
2025-01-15 09:30:37,262 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-15 09:30:37,262 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-15 09:30:37,263 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-15 09:30:37,264 - __main__ - INFO - [app.py:407] - Cleanup completed successfully
2025-01-15 09:30:37,265 - __main__ - INFO - [app.py:393] - Application shutting down...
2025-01-15 09:30:37,265 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-15 09:30:37,265 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-15 09:30:37,266 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-15 09:30:37,266 - __main__ - INFO - [app.py:407] - Cleanup completed successfully
2025-01-15 09:30:37,415 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-15 09:30:37,415 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-15 09:30:45,133 - __main__ - INFO - [app.py:424] - Metrics server started on port 8000
2025-01-15 09:30:45,133 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-15 09:30:58,457 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-15 09:31:11,579 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-15 09:31:11,580 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-15 09:31:18,855 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-15 09:31:18,858 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-15 09:31:18,858 - __main__ - INFO - [app.py:448] - ==================================================
2025-01-15 09:31:18,858 - __main__ - INFO - [app.py:449] - Starting LinguaSync Backend
2025-01-15 09:31:18,858 - __main__ - INFO - [app.py:450] - Starting Flask app on port 5001 using cpu
2025-01-15 09:31:18,858 - __main__ - INFO - [app.py:451] - Python version: 3.12.6 (v3.12.6:a4a2d2b0d85, Sep  6 2024, 16:08:03) [Clang 13.0.0 (clang-1300.0.29.30)]
2025-01-15 09:31:18,859 - __main__ - INFO - [app.py:452] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-15 09:31:18,859 - __main__ - INFO - [app.py:453] - Maximum audio length: 300 seconds
2025-01-15 09:31:18,859 - __main__ - INFO - [app.py:454] - Sample rate: 16000 Hz
2025-01-15 09:31:18,859 - __main__ - INFO - [app.py:458] - System memory: 36.0GB total, 10.0GB available
2025-01-15 09:31:18,859 - __main__ - INFO - [app.py:459] - CPU cores: 11
2025-01-15 09:31:18,859 - __main__ - INFO - [app.py:467] - Configuration:
2025-01-15 09:31:18,859 - __main__ - INFO - [app.py:468] - - Debug mode: False
2025-01-15 09:31:18,859 - __main__ - INFO - [app.py:469] - - CORS enabled: True
2025-01-15 09:31:18,859 - __main__ - INFO - [app.py:470] - - Rate limiting: 10 requests per minute
2025-01-15 09:31:18,859 - __main__ - INFO - [app.py:471] - - Metrics enabled: True (port 8000)
2025-01-15 09:31:18,859 - __main__ - INFO - [app.py:473] - ==================================================
2025-01-15 09:36:05,908 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-15 09:36:05,910 - services.translation_routes - INFO - [translation_routes.py:29] - Starting translation request 896a1db4
2025-01-15 09:36:05,910 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-15 09:36:05,910 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-15 09:36:05,912 - services.translation_routes - INFO - [translation_routes.py:86] - Request 896a1db4: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpvb45bxg_.wav
2025-01-15 09:36:05,913 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 18.36 seconds
2025-01-15 09:36:05,913 - services.translation_routes - INFO - [translation_routes.py:99] - Request 896a1db4: Beginning audio processing with diagnostics
2025-01-15 09:36:05,913 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpvb45bxg_.wav
2025-01-15 09:36:05,913 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 44100, Channels: 2
2025-01-15 09:36:05,921 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([2, 809508]), Frequency: 44100Hz
2025-01-15 09:36:05,921 - services.audio_processor - INFO - [audio_processor.py:219] - Resampling from 44100Hz to 16000Hz
2025-01-15 09:36:05,943 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-15 09:36:05,945 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-15 09:36:05,967 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-15 09:36:05,981 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 09:36:05,981 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 09:36:05,989 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 09:36:05,989 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 09:36:05,996 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 09:36:05,996 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 09:36:06,003 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 09:36:06,003 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 09:36:06,447 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-15 09:36:06,447 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-15 09:36:06,483 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 09:36:06,483 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 09:36:06,489 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 09:36:06,489 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 09:36:06,496 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 09:36:06,496 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 09:36:06,503 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 09:36:06,503 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 09:36:06,934 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-15 09:36:06,934 - services.translation_routes - INFO - [translation_routes.py:110] - 
==================================================
2025-01-15 09:36:06,934 - services.translation_routes - INFO - [translation_routes.py:111] - Input Audio Quality Report
2025-01-15 09:36:06,934 - services.translation_routes - INFO - [translation_routes.py:112] - ==================================================
2025-01-15 09:36:06,934 - services.translation_routes - INFO - [translation_routes.py:113] - Request ID: 896a1db4
2025-01-15 09:36:06,934 - services.translation_routes - INFO - [translation_routes.py:114] - Target Language: fra
2025-01-15 09:36:06,934 - services.translation_routes - INFO - [translation_routes.py:115] - --------------------------------------------------
2025-01-15 09:36:06,934 - services.translation_routes - INFO - [translation_routes.py:116] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.800
- Avg Amplitude: 0.013
- Rms Level: 0.039
- Crest Factor: 20.262
- Zero Crossings: 127716.000
- Silence Percentage: 62.168
- Clipping Points: 0.000
- Dynamic Range: 3022615.000

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.070
  - Temporal Flatness: 0.020

- Volume Metrics:
  - Volume Stability: -0.728
  - Volume Range: 29148040.000
  - Volume Variations: 0.034

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.003898838626448
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.6381455659866333, 'stability': 1.6408194303512573, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.23516440391540527, 'consistency': 0.2896541953086853, 'distinction': 0.11255760490894318}
  - Description: Moderate nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.670
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.340
  - Rhythm Quality: 0.358
  - Intonation Quality: 0.322

Vowel Quality:
  - Quality Score: 0.005
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-15 09:36:06,935 - services.translation_routes - INFO - [translation_routes.py:117] - ==================================================

2025-01-15 09:36:06,935 - services.translation_routes - INFO - [translation_routes.py:128] - Request 896a1db4: Audio processed successfully
2025-01-15 09:36:06,960 - services.translation_routes - INFO - [translation_routes.py:147] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-15 09:36:21,304 - services.translation_routes - INFO - [translation_routes.py:185] - Source text: the stale smell of old beer lingers it takes heat to bring out the odor a cold dip restores health and zest a salt pickle tastes fine with ham tacos al pastor are my favorite a zestful food is the hot cross bun
2025-01-15 09:36:35,869 - services.translation_routes - INFO - [translation_routes.py:204] - Target text: l'odeur de la vieille bière lingoure il faut de la chaleur pour faire ressortir l'odore une dip froide restaure la santé et le zest un pickle salé goûte bien avec le jambon tacos al pasteur sont mon favori une nourriture zestueuse est le hot cross bun
2025-01-15 09:36:55,772 - services.translation_routes - INFO - [translation_routes.py:227] - Processing tuple output from model
2025-01-15 09:36:55,785 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 09:36:55,785 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 09:36:55,797 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 09:36:55,798 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 09:36:55,806 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 09:36:55,806 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 09:36:55,820 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 09:36:55,820 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 09:36:56,132 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-15 09:36:56,132 - services.translation_routes - INFO - [translation_routes.py:251] - 
==================================================
2025-01-15 09:36:56,132 - services.translation_routes - INFO - [translation_routes.py:252] - Translated Audio Quality Report
2025-01-15 09:36:56,132 - services.translation_routes - INFO - [translation_routes.py:253] - ==================================================
2025-01-15 09:36:56,132 - services.translation_routes - INFO - [translation_routes.py:254] - Request ID: 896a1db4
2025-01-15 09:36:56,132 - services.translation_routes - INFO - [translation_routes.py:255] - Target Language: fra
2025-01-15 09:36:56,132 - services.translation_routes - INFO - [translation_routes.py:256] - --------------------------------------------------
2025-01-15 09:36:56,132 - services.translation_routes - INFO - [translation_routes.py:257] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.784
- Avg Amplitude: 0.065
- Rms Level: 0.100
- Crest Factor: 7.844
- Zero Crossings: 26714.000
- Silence Percentage: 9.776
- Clipping Points: 0.000
- Dynamic Range: 163.406

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.019
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.027
  - Temporal Flatness: 0.015

- Volume Metrics:
  - Volume Stability: 0.329
  - Volume Range: 652.227
  - Volume Variations: 0.056

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.025493078932222
- Background Noise: 4.1376912835188575
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 1.034140706062317, 'stability': 3.705514669418335, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0001441143685951829, 'consistency': 0.0, 'distinction': 0.05822793021798134}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.543
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.003
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-15 09:36:56,132 - services.translation_routes - INFO - [translation_routes.py:258] - ==================================================

2025-01-15 09:36:56,132 - services.translation_routes - INFO - [translation_routes.py:264] - Request 896a1db4: Audio output processed successfully
2025-01-15 09:36:56,136 - services.translation_routes - INFO - [translation_routes.py:317] - Request 896a1db4: Response prepared successfully
2025-01-15 09:36:56,137 - services.translation_routes - INFO - [translation_routes.py:328] - Request 896a1db4 completed in 50.23s
2025-01-15 09:36:56,137 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 50.23s, Memory Change: 1753.61MB
2025-01-15 09:36:56,137 - __main__ - INFO - [app.py:277] - Request to /translate took 58.42s
2025-01-15 09:43:15,532 - __main__ - INFO - [app.py:216] - Received SIGINT signal
2025-01-15 09:43:15,532 - __main__ - INFO - [app.py:201] - Initiating graceful shutdown...
2025-01-15 09:43:20,538 - __main__ - INFO - [app.py:393] - Application shutting down...
2025-01-15 09:43:20,539 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-15 09:43:20,539 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-15 09:43:20,540 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-15 09:43:20,541 - __main__ - INFO - [app.py:407] - Cleanup completed successfully
2025-01-15 09:43:20,541 - __main__ - INFO - [app.py:205] - Graceful shutdown completed
2025-01-15 09:43:20,544 - __main__ - INFO - [app.py:393] - Application shutting down...
2025-01-15 09:43:20,545 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-15 09:43:20,545 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-15 09:43:20,546 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-15 09:43:20,546 - __main__ - INFO - [app.py:407] - Cleanup completed successfully
2025-01-15 09:43:20,548 - __main__ - INFO - [app.py:393] - Application shutting down...
2025-01-15 09:43:20,548 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-15 09:43:20,548 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-15 09:43:20,549 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-15 09:43:20,549 - __main__ - INFO - [app.py:407] - Cleanup completed successfully
2025-01-15 09:43:20,691 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-15 09:43:20,692 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-15 09:43:41,718 - __main__ - INFO - [app.py:424] - Metrics server started on port 8000
2025-01-15 09:43:41,718 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-15 09:43:54,785 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-15 09:44:02,781 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-15 09:44:02,782 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-15 09:44:07,522 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-15 09:44:07,523 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-15 09:44:07,523 - __main__ - INFO - [app.py:448] - ==================================================
2025-01-15 09:44:07,523 - __main__ - INFO - [app.py:449] - Starting LinguaSync Backend
2025-01-15 09:44:07,523 - __main__ - INFO - [app.py:450] - Starting Flask app on port 5001 using cpu
2025-01-15 09:44:07,523 - __main__ - INFO - [app.py:451] - Python version: 3.12.6 (v3.12.6:a4a2d2b0d85, Sep  6 2024, 16:08:03) [Clang 13.0.0 (clang-1300.0.29.30)]
2025-01-15 09:44:07,524 - __main__ - INFO - [app.py:452] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-15 09:44:07,524 - __main__ - INFO - [app.py:453] - Maximum audio length: 300 seconds
2025-01-15 09:44:07,524 - __main__ - INFO - [app.py:454] - Sample rate: 16000 Hz
2025-01-15 09:44:07,524 - __main__ - INFO - [app.py:458] - System memory: 36.0GB total, 18.8GB available
2025-01-15 09:44:07,524 - __main__ - INFO - [app.py:459] - CPU cores: 11
2025-01-15 09:44:07,524 - __main__ - INFO - [app.py:467] - Configuration:
2025-01-15 09:44:07,524 - __main__ - INFO - [app.py:468] - - Debug mode: False
2025-01-15 09:44:07,524 - __main__ - INFO - [app.py:469] - - CORS enabled: True
2025-01-15 09:44:07,524 - __main__ - INFO - [app.py:470] - - Rate limiting: 10 requests per minute
2025-01-15 09:44:07,524 - __main__ - INFO - [app.py:471] - - Metrics enabled: True (port 8000)
2025-01-15 09:44:07,524 - __main__ - INFO - [app.py:473] - ==================================================
2025-01-15 09:46:33,614 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-15 09:46:33,615 - services.translation_routes - INFO - [translation_routes.py:29] - Starting translation request 41f1fd3e
2025-01-15 09:46:33,616 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-15 09:46:33,616 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-15 09:46:33,618 - services.translation_routes - INFO - [translation_routes.py:86] - Request 41f1fd3e: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpz0vo1td8.wav
2025-01-15 09:46:33,618 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 18.36 seconds
2025-01-15 09:46:33,618 - services.translation_routes - INFO - [translation_routes.py:99] - Request 41f1fd3e: Beginning audio processing with diagnostics
2025-01-15 09:46:33,618 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpz0vo1td8.wav
2025-01-15 09:46:33,619 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 44100, Channels: 2
2025-01-15 09:46:33,627 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([2, 809508]), Frequency: 44100Hz
2025-01-15 09:46:33,627 - services.audio_processor - INFO - [audio_processor.py:219] - Resampling from 44100Hz to 16000Hz
2025-01-15 09:46:33,647 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-15 09:46:33,649 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-15 09:46:33,670 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-15 09:46:33,688 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 09:46:33,688 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 09:46:33,696 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 09:46:33,697 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 09:46:33,705 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 09:46:33,706 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 09:46:33,713 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 09:46:33,713 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 09:46:34,170 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-15 09:46:34,170 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-15 09:46:34,206 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 09:46:34,207 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 09:46:34,212 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 09:46:34,212 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 09:46:34,235 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 09:46:34,235 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 09:46:34,242 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 09:46:34,242 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 09:46:34,678 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-15 09:46:34,678 - services.translation_routes - INFO - [translation_routes.py:110] - 
==================================================
2025-01-15 09:46:34,678 - services.translation_routes - INFO - [translation_routes.py:111] - Input Audio Quality Report
2025-01-15 09:46:34,678 - services.translation_routes - INFO - [translation_routes.py:112] - ==================================================
2025-01-15 09:46:34,678 - services.translation_routes - INFO - [translation_routes.py:113] - Request ID: 41f1fd3e
2025-01-15 09:46:34,678 - services.translation_routes - INFO - [translation_routes.py:114] - Target Language: fra
2025-01-15 09:46:34,678 - services.translation_routes - INFO - [translation_routes.py:115] - --------------------------------------------------
2025-01-15 09:46:34,678 - services.translation_routes - INFO - [translation_routes.py:116] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.800
- Avg Amplitude: 0.013
- Rms Level: 0.039
- Crest Factor: 20.262
- Zero Crossings: 127716.000
- Silence Percentage: 62.168
- Clipping Points: 0.000
- Dynamic Range: 3022615.000

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.070
  - Temporal Flatness: 0.020

- Volume Metrics:
  - Volume Stability: -0.728
  - Volume Range: 29148040.000
  - Volume Variations: 0.034

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.003898838626448
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.6381455659866333, 'stability': 1.6408194303512573, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.23516440391540527, 'consistency': 0.2896541953086853, 'distinction': 0.11255760490894318}
  - Description: Moderate nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.670
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.340
  - Rhythm Quality: 0.358
  - Intonation Quality: 0.322

Vowel Quality:
  - Quality Score: 0.005
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-15 09:46:34,678 - services.translation_routes - INFO - [translation_routes.py:117] - ==================================================

2025-01-15 09:46:34,678 - services.translation_routes - INFO - [translation_routes.py:128] - Request 41f1fd3e: Audio processed successfully
2025-01-15 09:46:34,700 - services.translation_routes - INFO - [translation_routes.py:147] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-15 09:46:48,660 - services.translation_routes - INFO - [translation_routes.py:185] - Source text: the stale smell of old beer lingers it takes heat to bring out the odor a cold dip restores health and zest a salt pickle tastes fine with ham tacos al pastor are my favorite a zestful food is the hot cross bun
2025-01-15 09:47:04,138 - services.translation_routes - INFO - [translation_routes.py:204] - Target text: l'odeur de la vieille bière lingoure il faut de la chaleur pour faire ressortir l'odore une dip froide restaure la santé et le zest un pickle salé goûte bien avec le jambon tacos al pasteur sont mon favori une nourriture zestueuse est le hot cross bun
2025-01-15 09:47:23,868 - services.translation_routes - INFO - [translation_routes.py:227] - Processing tuple output from model
2025-01-15 09:47:23,880 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 09:47:23,880 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 09:47:23,884 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 09:47:23,884 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 09:47:23,891 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 09:47:23,891 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 09:47:23,897 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 09:47:23,897 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 09:47:24,210 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-15 09:47:24,210 - services.translation_routes - INFO - [translation_routes.py:251] - 
==================================================
2025-01-15 09:47:24,210 - services.translation_routes - INFO - [translation_routes.py:252] - Translated Audio Quality Report
2025-01-15 09:47:24,210 - services.translation_routes - INFO - [translation_routes.py:253] - ==================================================
2025-01-15 09:47:24,210 - services.translation_routes - INFO - [translation_routes.py:254] - Request ID: 41f1fd3e
2025-01-15 09:47:24,210 - services.translation_routes - INFO - [translation_routes.py:255] - Target Language: fra
2025-01-15 09:47:24,210 - services.translation_routes - INFO - [translation_routes.py:256] - --------------------------------------------------
2025-01-15 09:47:24,210 - services.translation_routes - INFO - [translation_routes.py:257] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.641
- Avg Amplitude: 0.064
- Rms Level: 0.098
- Crest Factor: 6.552
- Zero Crossings: 27623.000
- Silence Percentage: 9.249
- Clipping Points: 0.000
- Dynamic Range: 146.202

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.181
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.028
  - Temporal Flatness: 0.016

- Volume Metrics:
  - Volume Stability: 0.354
  - Volume Range: 454.567
  - Volume Variations: 0.053

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0298720933094523
- Background Noise: 3.6209858615853827
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 1.0542340278625488, 'stability': 3.556915283203125, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.01593565009534359, 'consistency': 0.0, 'distinction': 0.09022802114486694}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.508
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.003
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-15 09:47:24,210 - services.translation_routes - INFO - [translation_routes.py:258] - ==================================================

2025-01-15 09:47:24,210 - services.translation_routes - INFO - [translation_routes.py:264] - Request 41f1fd3e: Audio output processed successfully
2025-01-15 09:47:24,214 - services.translation_routes - INFO - [translation_routes.py:317] - Request 41f1fd3e: Response prepared successfully
2025-01-15 09:47:24,215 - services.translation_routes - INFO - [translation_routes.py:328] - Request 41f1fd3e completed in 50.60s
2025-01-15 09:47:24,217 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 50.60s, Memory Change: 1641.75MB
2025-01-15 09:47:24,217 - __main__ - INFO - [app.py:277] - Request to /translate took 58.12s
2025-01-15 10:02:26,482 - __main__ - INFO - [app.py:216] - Received SIGINT signal
2025-01-15 10:02:26,484 - __main__ - INFO - [app.py:201] - Initiating graceful shutdown...
2025-01-15 10:02:31,490 - __main__ - INFO - [app.py:393] - Application shutting down...
2025-01-15 10:02:31,491 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-15 10:02:31,491 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-15 10:02:31,493 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-15 10:02:31,494 - __main__ - INFO - [app.py:407] - Cleanup completed successfully
2025-01-15 10:02:31,494 - __main__ - INFO - [app.py:205] - Graceful shutdown completed
2025-01-15 10:02:31,500 - __main__ - INFO - [app.py:393] - Application shutting down...
2025-01-15 10:02:31,500 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-15 10:02:31,501 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-15 10:02:31,501 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-15 10:02:31,502 - __main__ - INFO - [app.py:407] - Cleanup completed successfully
2025-01-15 10:02:31,503 - __main__ - INFO - [app.py:393] - Application shutting down...
2025-01-15 10:02:31,503 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-15 10:02:31,503 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-15 10:02:31,504 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-15 10:02:31,504 - __main__ - INFO - [app.py:407] - Cleanup completed successfully
2025-01-15 10:02:31,633 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-15 10:02:31,633 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-15 10:06:41,295 - __main__ - INFO - [app.py:424] - Metrics server started on port 8000
2025-01-15 10:06:41,295 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-15 10:06:54,002 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-15 10:07:00,157 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-15 10:07:00,159 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-15 10:07:05,003 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-15 10:07:05,005 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-15 10:07:05,005 - __main__ - INFO - [app.py:448] - ==================================================
2025-01-15 10:07:05,005 - __main__ - INFO - [app.py:449] - Starting LinguaSync Backend
2025-01-15 10:07:05,005 - __main__ - INFO - [app.py:450] - Starting Flask app on port 5001 using cpu
2025-01-15 10:07:05,005 - __main__ - INFO - [app.py:451] - Python version: 3.12.6 (v3.12.6:a4a2d2b0d85, Sep  6 2024, 16:08:03) [Clang 13.0.0 (clang-1300.0.29.30)]
2025-01-15 10:07:05,005 - __main__ - INFO - [app.py:452] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-15 10:07:05,005 - __main__ - INFO - [app.py:453] - Maximum audio length: 300 seconds
2025-01-15 10:07:05,005 - __main__ - INFO - [app.py:454] - Sample rate: 16000 Hz
2025-01-15 10:07:05,005 - __main__ - INFO - [app.py:458] - System memory: 36.0GB total, 16.7GB available
2025-01-15 10:07:05,005 - __main__ - INFO - [app.py:459] - CPU cores: 11
2025-01-15 10:07:05,005 - __main__ - INFO - [app.py:467] - Configuration:
2025-01-15 10:07:05,005 - __main__ - INFO - [app.py:468] - - Debug mode: False
2025-01-15 10:07:05,005 - __main__ - INFO - [app.py:469] - - CORS enabled: True
2025-01-15 10:07:05,005 - __main__ - INFO - [app.py:470] - - Rate limiting: 10 requests per minute
2025-01-15 10:07:05,005 - __main__ - INFO - [app.py:471] - - Metrics enabled: True (port 8000)
2025-01-15 10:07:05,005 - __main__ - INFO - [app.py:473] - ==================================================
2025-01-15 10:07:51,987 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-15 10:07:51,989 - services.translation_routes - INFO - [translation_routes.py:29] - Starting translation request 77f249c0
2025-01-15 10:07:51,989 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-15 10:07:51,989 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-15 10:07:51,991 - services.translation_routes - INFO - [translation_routes.py:86] - Request 77f249c0: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpbhnxtk07.wav
2025-01-15 10:07:51,992 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 18.36 seconds
2025-01-15 10:07:51,992 - services.translation_routes - INFO - [translation_routes.py:99] - Request 77f249c0: Beginning audio processing with diagnostics
2025-01-15 10:07:51,992 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpbhnxtk07.wav
2025-01-15 10:07:51,992 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 44100, Channels: 2
2025-01-15 10:07:52,000 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([2, 809508]), Frequency: 44100Hz
2025-01-15 10:07:52,000 - services.audio_processor - INFO - [audio_processor.py:219] - Resampling from 44100Hz to 16000Hz
2025-01-15 10:07:52,020 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-15 10:07:52,023 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-15 10:07:52,044 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-15 10:07:52,057 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 10:07:52,058 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 10:07:52,063 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 10:07:52,063 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 10:07:52,070 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 10:07:52,071 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 10:07:52,078 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 10:07:52,078 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 10:07:52,527 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-15 10:07:52,527 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-15 10:07:52,562 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 10:07:52,563 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 10:07:52,568 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 10:07:52,568 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 10:07:52,575 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 10:07:52,576 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 10:07:52,582 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 10:07:52,582 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 10:07:53,015 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-15 10:07:53,015 - services.translation_routes - INFO - [translation_routes.py:110] - 
==================================================
2025-01-15 10:07:53,015 - services.translation_routes - INFO - [translation_routes.py:111] - Input Audio Quality Report
2025-01-15 10:07:53,015 - services.translation_routes - INFO - [translation_routes.py:112] - ==================================================
2025-01-15 10:07:53,015 - services.translation_routes - INFO - [translation_routes.py:113] - Request ID: 77f249c0
2025-01-15 10:07:53,015 - services.translation_routes - INFO - [translation_routes.py:114] - Target Language: fra
2025-01-15 10:07:53,015 - services.translation_routes - INFO - [translation_routes.py:115] - --------------------------------------------------
2025-01-15 10:07:53,015 - services.translation_routes - INFO - [translation_routes.py:116] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.800
- Avg Amplitude: 0.013
- Rms Level: 0.039
- Crest Factor: 20.262
- Zero Crossings: 127716.000
- Silence Percentage: 62.168
- Clipping Points: 0.000
- Dynamic Range: 3022615.000

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.070
  - Temporal Flatness: 0.020

- Volume Metrics:
  - Volume Stability: -0.728
  - Volume Range: 29148040.000
  - Volume Variations: 0.034

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.003898838626448
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.6381455659866333, 'stability': 1.6408194303512573, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.23516440391540527, 'consistency': 0.2896541953086853, 'distinction': 0.11255760490894318}
  - Description: Moderate nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.670
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.340
  - Rhythm Quality: 0.358
  - Intonation Quality: 0.322

Vowel Quality:
  - Quality Score: 0.005
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-15 10:07:53,016 - services.translation_routes - INFO - [translation_routes.py:117] - ==================================================

2025-01-15 10:07:53,016 - services.translation_routes - INFO - [translation_routes.py:128] - Request 77f249c0: Audio processed successfully
2025-01-15 10:07:53,036 - services.translation_routes - INFO - [translation_routes.py:147] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-15 10:08:07,006 - services.translation_routes - INFO - [translation_routes.py:185] - Source text: the stale smell of old beer lingers it takes heat to bring out the odor a cold dip restores health and zest a salt pickle tastes fine with ham tacos al pastor are my favorite a zestful food is the hot cross bun
2025-01-15 10:08:22,833 - services.translation_routes - INFO - [translation_routes.py:204] - Target text: l'odeur de la vieille bière lingoure il faut de la chaleur pour faire ressortir l'odore une dip froide restaure la santé et le zest un pickle salé goûte bien avec le jambon tacos al pasteur sont mon favori une nourriture zestueuse est le hot cross bun
2025-01-15 10:08:43,607 - services.translation_routes - INFO - [translation_routes.py:227] - Processing tuple output from model
2025-01-15 10:08:43,622 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 10:08:43,623 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 10:08:43,629 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 10:08:43,629 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 10:08:43,636 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 10:08:43,636 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 10:08:43,644 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 10:08:43,644 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 10:08:43,945 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-15 10:08:43,946 - services.translation_routes - INFO - [translation_routes.py:251] - 
==================================================
2025-01-15 10:08:43,946 - services.translation_routes - INFO - [translation_routes.py:252] - Translated Audio Quality Report
2025-01-15 10:08:43,946 - services.translation_routes - INFO - [translation_routes.py:253] - ==================================================
2025-01-15 10:08:43,946 - services.translation_routes - INFO - [translation_routes.py:254] - Request ID: 77f249c0
2025-01-15 10:08:43,946 - services.translation_routes - INFO - [translation_routes.py:255] - Target Language: fra
2025-01-15 10:08:43,946 - services.translation_routes - INFO - [translation_routes.py:256] - --------------------------------------------------
2025-01-15 10:08:43,946 - services.translation_routes - INFO - [translation_routes.py:257] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.709
- Avg Amplitude: 0.064
- Rms Level: 0.099
- Crest Factor: 7.145
- Zero Crossings: 27618.000
- Silence Percentage: 8.994
- Clipping Points: 0.000
- Dynamic Range: 142.380

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.107
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.028
  - Temporal Flatness: 0.016

- Volume Metrics:
  - Volume Stability: 0.346
  - Volume Range: 807.888
  - Volume Variations: 0.054

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.027776191239056
- Background Noise: 3.8579453864873012
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 1.0661664009094238, 'stability': 3.7544522285461426, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.00260128453373909, 'consistency': 0.0, 'distinction': 0.07566527277231216}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.515
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.004
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-15 10:08:43,946 - services.translation_routes - INFO - [translation_routes.py:258] - ==================================================

2025-01-15 10:08:43,946 - services.translation_routes - INFO - [translation_routes.py:264] - Request 77f249c0: Audio output processed successfully
2025-01-15 10:08:43,951 - services.translation_routes - INFO - [translation_routes.py:317] - Request 77f249c0: Response prepared successfully
2025-01-15 10:08:43,951 - services.translation_routes - INFO - [translation_routes.py:328] - Request 77f249c0 completed in 51.96s
2025-01-15 10:08:43,952 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 51.96s, Memory Change: 1408.38MB
2025-01-15 10:08:43,952 - __main__ - INFO - [app.py:277] - Request to /translate took 57.68s
2025-01-15 13:26:53,684 - __main__ - INFO - [app.py:216] - Received SIGINT signal
2025-01-15 13:26:53,686 - __main__ - INFO - [app.py:201] - Initiating graceful shutdown...
2025-01-15 13:26:58,688 - __main__ - INFO - [app.py:393] - Application shutting down...
2025-01-15 13:26:58,688 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-15 13:26:58,688 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-15 13:26:58,689 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-15 13:26:58,690 - __main__ - INFO - [app.py:407] - Cleanup completed successfully
2025-01-15 13:26:58,690 - __main__ - INFO - [app.py:205] - Graceful shutdown completed
2025-01-15 13:26:58,690 - __main__ - INFO - [app.py:393] - Application shutting down...
2025-01-15 13:26:58,690 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-15 13:26:58,691 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-15 13:26:58,691 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-15 13:26:58,691 - __main__ - INFO - [app.py:407] - Cleanup completed successfully
2025-01-15 13:26:58,691 - __main__ - INFO - [app.py:393] - Application shutting down...
2025-01-15 13:26:58,691 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-15 13:26:58,692 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-15 13:26:58,692 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-15 13:26:58,692 - __main__ - INFO - [app.py:407] - Cleanup completed successfully
2025-01-15 13:26:58,818 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-15 13:26:58,818 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-15 13:27:05,310 - __main__ - INFO - [app.py:424] - Metrics server started on port 8000
2025-01-15 13:27:05,310 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-15 13:27:18,313 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-15 13:27:24,926 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-15 13:27:24,927 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-15 13:27:31,701 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-15 13:27:31,704 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-15 13:27:31,704 - __main__ - INFO - [app.py:448] - ==================================================
2025-01-15 13:27:31,704 - __main__ - INFO - [app.py:449] - Starting LinguaSync Backend
2025-01-15 13:27:31,704 - __main__ - INFO - [app.py:450] - Starting Flask app on port 5001 using cpu
2025-01-15 13:27:31,704 - __main__ - INFO - [app.py:451] - Python version: 3.12.6 (v3.12.6:a4a2d2b0d85, Sep  6 2024, 16:08:03) [Clang 13.0.0 (clang-1300.0.29.30)]
2025-01-15 13:27:31,704 - __main__ - INFO - [app.py:452] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-15 13:27:31,704 - __main__ - INFO - [app.py:453] - Maximum audio length: 300 seconds
2025-01-15 13:27:31,704 - __main__ - INFO - [app.py:454] - Sample rate: 16000 Hz
2025-01-15 13:27:31,704 - __main__ - INFO - [app.py:458] - System memory: 36.0GB total, 15.5GB available
2025-01-15 13:27:31,704 - __main__ - INFO - [app.py:459] - CPU cores: 11
2025-01-15 13:27:31,704 - __main__ - INFO - [app.py:467] - Configuration:
2025-01-15 13:27:31,704 - __main__ - INFO - [app.py:468] - - Debug mode: False
2025-01-15 13:27:31,704 - __main__ - INFO - [app.py:469] - - CORS enabled: True
2025-01-15 13:27:31,704 - __main__ - INFO - [app.py:470] - - Rate limiting: 10 requests per minute
2025-01-15 13:27:31,704 - __main__ - INFO - [app.py:471] - - Metrics enabled: True (port 8000)
2025-01-15 13:27:31,704 - __main__ - INFO - [app.py:473] - ==================================================
2025-01-15 13:28:33,178 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-15 13:28:33,180 - services.translation_routes - INFO - [translation_routes.py:29] - Starting translation request b15228d6
2025-01-15 13:28:33,180 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-15 13:28:33,180 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-15 13:28:33,182 - services.translation_routes - INFO - [translation_routes.py:86] - Request b15228d6: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp8pyl2qw4.wav
2025-01-15 13:28:33,183 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 18.36 seconds
2025-01-15 13:28:33,183 - services.translation_routes - INFO - [translation_routes.py:99] - Request b15228d6: Beginning audio processing with diagnostics
2025-01-15 13:28:33,183 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp8pyl2qw4.wav
2025-01-15 13:28:33,183 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 44100, Channels: 2
2025-01-15 13:28:33,192 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([2, 809508]), Frequency: 44100Hz
2025-01-15 13:28:33,192 - services.audio_processor - INFO - [audio_processor.py:219] - Resampling from 44100Hz to 16000Hz
2025-01-15 13:28:33,213 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-15 13:28:33,216 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-15 13:28:33,241 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-15 13:28:33,260 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 13:28:33,260 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 13:28:33,268 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 13:28:33,268 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 13:28:33,276 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 13:28:33,276 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 13:28:33,285 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 13:28:33,286 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 13:28:33,750 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-15 13:28:33,750 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-15 13:28:33,786 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 13:28:33,786 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 13:28:33,791 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 13:28:33,791 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 13:28:33,800 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 13:28:33,800 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 13:28:33,808 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 13:28:33,808 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 13:28:34,245 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-15 13:28:34,245 - services.translation_routes - INFO - [translation_routes.py:110] - 
==================================================
2025-01-15 13:28:34,245 - services.translation_routes - INFO - [translation_routes.py:111] - Input Audio Quality Report
2025-01-15 13:28:34,245 - services.translation_routes - INFO - [translation_routes.py:112] - ==================================================
2025-01-15 13:28:34,245 - services.translation_routes - INFO - [translation_routes.py:113] - Request ID: b15228d6
2025-01-15 13:28:34,245 - services.translation_routes - INFO - [translation_routes.py:114] - Target Language: fra
2025-01-15 13:28:34,245 - services.translation_routes - INFO - [translation_routes.py:115] - --------------------------------------------------
2025-01-15 13:28:34,245 - services.translation_routes - INFO - [translation_routes.py:116] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.800
- Avg Amplitude: 0.013
- Rms Level: 0.039
- Crest Factor: 20.262
- Zero Crossings: 127716.000
- Silence Percentage: 62.168
- Clipping Points: 0.000
- Dynamic Range: 3022615.000

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.070
  - Temporal Flatness: 0.020

- Volume Metrics:
  - Volume Stability: -0.728
  - Volume Range: 29148040.000
  - Volume Variations: 0.034

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.003898838626448
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.6381455659866333, 'stability': 1.6408194303512573, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.23516440391540527, 'consistency': 0.2896541953086853, 'distinction': 0.11255760490894318}
  - Description: Moderate nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.670
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.340
  - Rhythm Quality: 0.358
  - Intonation Quality: 0.322

Vowel Quality:
  - Quality Score: 0.005
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-15 13:28:34,245 - services.translation_routes - INFO - [translation_routes.py:117] - ==================================================

2025-01-15 13:28:34,245 - services.translation_routes - INFO - [translation_routes.py:128] - Request b15228d6: Audio processed successfully
2025-01-15 13:28:34,266 - services.translation_routes - INFO - [translation_routes.py:147] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-15 13:28:49,035 - services.translation_routes - INFO - [translation_routes.py:185] - Source text: the stale smell of old beer lingers it takes heat to bring out the odor a cold dip restores health and zest a salt pickle tastes fine with ham tacos al pastor are my favorite a zestful food is the hot cross bun
2025-01-15 13:29:05,431 - services.translation_routes - INFO - [translation_routes.py:204] - Target text: l'odeur de la vieille bière lingoure il faut de la chaleur pour faire ressortir l'odore une dip froide restaure la santé et le zest un pickle salé goûte bien avec le jambon tacos al pasteur sont mon favori une nourriture zestueuse est le hot cross bun
2025-01-15 13:29:25,985 - services.translation_routes - INFO - [translation_routes.py:227] - Processing tuple output from model
2025-01-15 13:29:25,998 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 13:29:25,998 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 13:29:26,006 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 13:29:26,006 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 13:29:26,013 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 13:29:26,013 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 13:29:26,020 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 13:29:26,020 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 13:29:26,331 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-15 13:29:26,331 - services.translation_routes - INFO - [translation_routes.py:251] - 
==================================================
2025-01-15 13:29:26,331 - services.translation_routes - INFO - [translation_routes.py:252] - Translated Audio Quality Report
2025-01-15 13:29:26,331 - services.translation_routes - INFO - [translation_routes.py:253] - ==================================================
2025-01-15 13:29:26,331 - services.translation_routes - INFO - [translation_routes.py:254] - Request ID: b15228d6
2025-01-15 13:29:26,331 - services.translation_routes - INFO - [translation_routes.py:255] - Target Language: fra
2025-01-15 13:29:26,331 - services.translation_routes - INFO - [translation_routes.py:256] - --------------------------------------------------
2025-01-15 13:29:26,331 - services.translation_routes - INFO - [translation_routes.py:257] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.752
- Avg Amplitude: 0.065
- Rms Level: 0.100
- Crest Factor: 7.524
- Zero Crossings: 27509.000
- Silence Percentage: 10.035
- Clipping Points: 0.000
- Dynamic Range: 169.283

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.059
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.027
  - Temporal Flatness: 0.015

- Volume Metrics:
  - Volume Stability: 0.327
  - Volume Range: 800.867
  - Volume Variations: 0.056

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0265767532551013
- Background Noise: 4.009653731941482
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 1.042994737625122, 'stability': 3.729914665222168, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.07451587170362473, 'consistency': 0.0, 'distinction': 0.07096657156944275}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.523
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.003
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-15 13:29:26,331 - services.translation_routes - INFO - [translation_routes.py:258] - ==================================================

2025-01-15 13:29:26,331 - services.translation_routes - INFO - [translation_routes.py:264] - Request b15228d6: Audio output processed successfully
2025-01-15 13:29:26,336 - services.translation_routes - INFO - [translation_routes.py:317] - Request b15228d6: Response prepared successfully
2025-01-15 13:29:26,336 - services.translation_routes - INFO - [translation_routes.py:328] - Request b15228d6 completed in 53.16s
2025-01-15 13:29:26,337 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 53.16s, Memory Change: 1771.22MB
2025-01-15 13:29:26,337 - __main__ - INFO - [app.py:277] - Request to /translate took 60.78s
2025-01-15 14:27:29,141 - __main__ - INFO - [app.py:216] - Received SIGINT signal
2025-01-15 14:27:29,143 - __main__ - INFO - [app.py:201] - Initiating graceful shutdown...
2025-01-15 14:27:34,146 - __main__ - INFO - [app.py:393] - Application shutting down...
2025-01-15 14:27:34,147 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-15 14:27:34,147 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-15 14:27:34,149 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-15 14:27:34,150 - __main__ - INFO - [app.py:407] - Cleanup completed successfully
2025-01-15 14:27:34,150 - __main__ - INFO - [app.py:205] - Graceful shutdown completed
2025-01-15 14:27:34,151 - __main__ - INFO - [app.py:393] - Application shutting down...
2025-01-15 14:27:34,152 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-15 14:27:34,152 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-15 14:27:34,153 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-15 14:27:34,153 - __main__ - INFO - [app.py:407] - Cleanup completed successfully
2025-01-15 14:27:34,154 - __main__ - INFO - [app.py:393] - Application shutting down...
2025-01-15 14:27:34,155 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-15 14:27:34,155 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-15 14:27:34,155 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-15 14:27:34,156 - __main__ - INFO - [app.py:407] - Cleanup completed successfully
2025-01-15 14:27:34,306 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-15 14:27:34,306 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-15 14:27:41,291 - __main__ - INFO - [app.py:424] - Metrics server started on port 8000
2025-01-15 14:27:41,291 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-15 14:27:54,606 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-15 14:28:03,524 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-15 14:28:03,526 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-15 14:28:08,388 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-15 14:28:08,390 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-15 14:28:08,390 - __main__ - INFO - [app.py:448] - ==================================================
2025-01-15 14:28:08,390 - __main__ - INFO - [app.py:449] - Starting LinguaSync Backend
2025-01-15 14:28:08,390 - __main__ - INFO - [app.py:450] - Starting Flask app on port 5001 using cpu
2025-01-15 14:28:08,390 - __main__ - INFO - [app.py:451] - Python version: 3.12.6 (v3.12.6:a4a2d2b0d85, Sep  6 2024, 16:08:03) [Clang 13.0.0 (clang-1300.0.29.30)]
2025-01-15 14:28:08,390 - __main__ - INFO - [app.py:452] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-15 14:28:08,390 - __main__ - INFO - [app.py:453] - Maximum audio length: 300 seconds
2025-01-15 14:28:08,390 - __main__ - INFO - [app.py:454] - Sample rate: 16000 Hz
2025-01-15 14:28:08,390 - __main__ - INFO - [app.py:458] - System memory: 36.0GB total, 15.3GB available
2025-01-15 14:28:08,390 - __main__ - INFO - [app.py:459] - CPU cores: 11
2025-01-15 14:28:08,390 - __main__ - INFO - [app.py:467] - Configuration:
2025-01-15 14:28:08,390 - __main__ - INFO - [app.py:468] - - Debug mode: False
2025-01-15 14:28:08,390 - __main__ - INFO - [app.py:469] - - CORS enabled: True
2025-01-15 14:28:08,390 - __main__ - INFO - [app.py:470] - - Rate limiting: 10 requests per minute
2025-01-15 14:28:08,390 - __main__ - INFO - [app.py:471] - - Metrics enabled: True (port 8000)
2025-01-15 14:28:08,390 - __main__ - INFO - [app.py:473] - ==================================================
2025-01-15 14:30:17,162 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-15 14:30:17,163 - services.translation_routes - INFO - [translation_routes.py:29] - Starting translation request 2d770627
2025-01-15 14:30:17,163 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-15 14:30:17,163 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-15 14:30:17,165 - services.translation_routes - INFO - [translation_routes.py:86] - Request 2d770627: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp613cxqz4.wav
2025-01-15 14:30:17,165 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 18.36 seconds
2025-01-15 14:30:17,166 - services.translation_routes - INFO - [translation_routes.py:99] - Request 2d770627: Beginning audio processing with diagnostics
2025-01-15 14:30:17,166 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp613cxqz4.wav
2025-01-15 14:30:17,166 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 44100, Channels: 2
2025-01-15 14:30:17,174 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([2, 809508]), Frequency: 44100Hz
2025-01-15 14:30:17,174 - services.audio_processor - INFO - [audio_processor.py:219] - Resampling from 44100Hz to 16000Hz
2025-01-15 14:30:17,195 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-15 14:30:17,197 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-15 14:30:17,219 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-15 14:30:17,232 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 14:30:17,232 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 14:30:17,238 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 14:30:17,238 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 14:30:17,246 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 14:30:17,246 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 14:30:17,253 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 14:30:17,253 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 14:30:17,783 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-15 14:30:17,783 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-15 14:30:17,824 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 14:30:17,825 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 14:30:17,835 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 14:30:17,835 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 14:30:17,842 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 14:30:17,842 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 14:30:17,851 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 14:30:17,851 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 14:30:18,273 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-15 14:30:18,273 - services.translation_routes - INFO - [translation_routes.py:110] - 
==================================================
2025-01-15 14:30:18,273 - services.translation_routes - INFO - [translation_routes.py:111] - Input Audio Quality Report
2025-01-15 14:30:18,273 - services.translation_routes - INFO - [translation_routes.py:112] - ==================================================
2025-01-15 14:30:18,274 - services.translation_routes - INFO - [translation_routes.py:113] - Request ID: 2d770627
2025-01-15 14:30:18,274 - services.translation_routes - INFO - [translation_routes.py:114] - Target Language: fra
2025-01-15 14:30:18,274 - services.translation_routes - INFO - [translation_routes.py:115] - --------------------------------------------------
2025-01-15 14:30:18,274 - services.translation_routes - INFO - [translation_routes.py:116] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.800
- Avg Amplitude: 0.013
- Rms Level: 0.039
- Crest Factor: 20.262
- Zero Crossings: 127716.000
- Silence Percentage: 62.168
- Clipping Points: 0.000
- Dynamic Range: 3022615.000

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.070
  - Temporal Flatness: 0.020

- Volume Metrics:
  - Volume Stability: -0.728
  - Volume Range: 29148040.000
  - Volume Variations: 0.034

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.003898838626448
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.6381455659866333, 'stability': 1.6408194303512573, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.23516440391540527, 'consistency': 0.2896541953086853, 'distinction': 0.11255760490894318}
  - Description: Moderate nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.670
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.340
  - Rhythm Quality: 0.358
  - Intonation Quality: 0.322

Vowel Quality:
  - Quality Score: 0.005
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-15 14:30:18,274 - services.translation_routes - INFO - [translation_routes.py:117] - ==================================================

2025-01-15 14:30:18,274 - services.translation_routes - INFO - [translation_routes.py:128] - Request 2d770627: Audio processed successfully
2025-01-15 14:30:18,294 - services.translation_routes - INFO - [translation_routes.py:147] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-15 14:30:31,987 - services.translation_routes - INFO - [translation_routes.py:185] - Source text: the stale smell of old beer lingers it takes heat to bring out the odor a cold dip restores health and zest a salt pickle tastes fine with ham tacos al pastor are my favorite a zestful food is the hot cross bun
2025-01-15 14:30:47,140 - services.translation_routes - INFO - [translation_routes.py:204] - Target text: l'odeur de la vieille bière lingoure il faut de la chaleur pour faire ressortir l'odore une dip froide restaure la santé et le zest un pickle salé goûte bien avec le jambon tacos al pasteur sont mon favori une nourriture zestueuse est le hot cross bun
2025-01-15 14:31:06,963 - services.translation_routes - INFO - [translation_routes.py:227] - Processing tuple output from model
2025-01-15 14:31:06,976 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 14:31:06,977 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 14:31:06,982 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 14:31:06,982 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 14:31:06,989 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 14:31:06,989 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 14:31:06,994 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 14:31:06,994 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 14:31:07,302 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-15 14:31:07,302 - services.translation_routes - INFO - [translation_routes.py:251] - 
==================================================
2025-01-15 14:31:07,302 - services.translation_routes - INFO - [translation_routes.py:252] - Translated Audio Quality Report
2025-01-15 14:31:07,302 - services.translation_routes - INFO - [translation_routes.py:253] - ==================================================
2025-01-15 14:31:07,302 - services.translation_routes - INFO - [translation_routes.py:254] - Request ID: 2d770627
2025-01-15 14:31:07,302 - services.translation_routes - INFO - [translation_routes.py:255] - Target Language: fra
2025-01-15 14:31:07,302 - services.translation_routes - INFO - [translation_routes.py:256] - --------------------------------------------------
2025-01-15 14:31:07,302 - services.translation_routes - INFO - [translation_routes.py:257] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.766
- Avg Amplitude: 0.066
- Rms Level: 0.103
- Crest Factor: 7.441
- Zero Crossings: 26841.000
- Silence Percentage: 10.494
- Clipping Points: 0.000
- Dynamic Range: 185.441

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.070
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.028
  - Temporal Flatness: 0.016

- Volume Metrics:
  - Volume Stability: 0.320
  - Volume Range: 1053.268
  - Volume Variations: 0.058

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0276524517662313
- Background Noise: 3.976464324886124
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
No issues detected

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 1.0830187797546387, 'stability': 3.7765774726867676, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.0, 'distinction': 0.10012152045965195}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.516
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.003
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-15 14:31:07,302 - services.translation_routes - INFO - [translation_routes.py:258] - ==================================================

2025-01-15 14:31:07,302 - services.translation_routes - INFO - [translation_routes.py:264] - Request 2d770627: Audio output processed successfully
2025-01-15 14:31:07,307 - services.translation_routes - INFO - [translation_routes.py:317] - Request 2d770627: Response prepared successfully
2025-01-15 14:31:07,307 - services.translation_routes - INFO - [translation_routes.py:328] - Request 2d770627 completed in 50.14s
2025-01-15 14:31:07,311 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 50.15s, Memory Change: 973.30MB
2025-01-15 14:31:07,312 - __main__ - INFO - [app.py:277] - Request to /translate took 54.36s
2025-01-15 19:05:46,771 - __main__ - INFO - [app.py:216] - Received SIGINT signal
2025-01-15 19:05:46,775 - __main__ - INFO - [app.py:201] - Initiating graceful shutdown...
2025-01-15 19:05:51,780 - __main__ - INFO - [app.py:393] - Application shutting down...
2025-01-15 19:05:51,782 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-15 19:05:51,783 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-15 19:05:51,787 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-15 19:05:51,788 - __main__ - INFO - [app.py:407] - Cleanup completed successfully
2025-01-15 19:05:51,789 - __main__ - INFO - [app.py:205] - Graceful shutdown completed
2025-01-15 19:05:51,791 - __main__ - INFO - [app.py:393] - Application shutting down...
2025-01-15 19:05:51,791 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-15 19:05:51,791 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-15 19:05:51,792 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-15 19:05:51,792 - __main__ - INFO - [app.py:407] - Cleanup completed successfully
2025-01-15 19:05:51,795 - __main__ - INFO - [app.py:393] - Application shutting down...
2025-01-15 19:05:51,795 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-15 19:05:51,796 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-15 19:05:51,796 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-15 19:05:51,797 - __main__ - INFO - [app.py:407] - Cleanup completed successfully
2025-01-15 19:05:51,958 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-15 19:05:51,958 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-15 19:06:29,501 - __main__ - INFO - [app.py:424] - Metrics server started on port 8000
2025-01-15 19:06:29,502 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-15 19:06:43,797 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-15 19:07:02,242 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-15 19:07:02,244 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-15 19:07:10,722 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-15 19:07:10,725 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-15 19:07:10,725 - __main__ - INFO - [app.py:448] - ==================================================
2025-01-15 19:07:10,725 - __main__ - INFO - [app.py:449] - Starting LinguaSync Backend
2025-01-15 19:07:10,725 - __main__ - INFO - [app.py:450] - Starting Flask app on port 5001 using cpu
2025-01-15 19:07:10,725 - __main__ - INFO - [app.py:451] - Python version: 3.12.6 (v3.12.6:a4a2d2b0d85, Sep  6 2024, 16:08:03) [Clang 13.0.0 (clang-1300.0.29.30)]
2025-01-15 19:07:10,726 - __main__ - INFO - [app.py:452] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-15 19:07:10,726 - __main__ - INFO - [app.py:453] - Maximum audio length: 300 seconds
2025-01-15 19:07:10,726 - __main__ - INFO - [app.py:454] - Sample rate: 16000 Hz
2025-01-15 19:07:10,726 - __main__ - INFO - [app.py:458] - System memory: 36.0GB total, 6.7GB available
2025-01-15 19:07:10,726 - __main__ - INFO - [app.py:459] - CPU cores: 11
2025-01-15 19:07:10,726 - __main__ - INFO - [app.py:467] - Configuration:
2025-01-15 19:07:10,726 - __main__ - INFO - [app.py:468] - - Debug mode: False
2025-01-15 19:07:10,726 - __main__ - INFO - [app.py:469] - - CORS enabled: True
2025-01-15 19:07:10,726 - __main__ - INFO - [app.py:470] - - Rate limiting: 10 requests per minute
2025-01-15 19:07:10,726 - __main__ - INFO - [app.py:471] - - Metrics enabled: True (port 8000)
2025-01-15 19:07:10,726 - __main__ - INFO - [app.py:473] - ==================================================
2025-01-15 19:09:12,617 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-15 19:09:12,622 - services.translation_routes - INFO - [translation_routes.py:29] - Starting translation request 5b92376a
2025-01-15 19:09:12,622 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-15 19:09:12,622 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-15 19:09:12,624 - services.translation_routes - INFO - [translation_routes.py:86] - Request 5b92376a: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpybufmcys.wav
2025-01-15 19:09:12,629 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 18.36 seconds
2025-01-15 19:09:12,629 - services.translation_routes - INFO - [translation_routes.py:99] - Request 5b92376a: Beginning audio processing with diagnostics
2025-01-15 19:09:12,629 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpybufmcys.wav
2025-01-15 19:09:12,629 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 44100, Channels: 2
2025-01-15 19:09:12,638 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([2, 809508]), Frequency: 44100Hz
2025-01-15 19:09:12,639 - services.audio_processor - INFO - [audio_processor.py:219] - Resampling from 44100Hz to 16000Hz
2025-01-15 19:09:12,667 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-15 19:09:12,669 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-15 19:09:12,692 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-15 19:09:12,708 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 19:09:12,709 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 19:09:12,717 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 19:09:12,717 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 19:09:12,724 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 19:09:12,724 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 19:09:12,731 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 19:09:12,731 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 19:09:13,181 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-15 19:09:13,183 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-15 19:09:13,221 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 19:09:13,222 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 19:09:13,228 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 19:09:13,229 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 19:09:13,236 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 19:09:13,236 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 19:09:13,244 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 19:09:13,245 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 19:09:13,679 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-15 19:09:13,679 - services.translation_routes - INFO - [translation_routes.py:110] - 
==================================================
2025-01-15 19:09:13,679 - services.translation_routes - INFO - [translation_routes.py:111] - Input Audio Quality Report
2025-01-15 19:09:13,679 - services.translation_routes - INFO - [translation_routes.py:112] - ==================================================
2025-01-15 19:09:13,679 - services.translation_routes - INFO - [translation_routes.py:113] - Request ID: 5b92376a
2025-01-15 19:09:13,679 - services.translation_routes - INFO - [translation_routes.py:114] - Target Language: fra
2025-01-15 19:09:13,679 - services.translation_routes - INFO - [translation_routes.py:115] - --------------------------------------------------
2025-01-15 19:09:13,679 - services.translation_routes - INFO - [translation_routes.py:116] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.800
- Avg Amplitude: 0.013
- Rms Level: 0.039
- Crest Factor: 20.262
- Zero Crossings: 127716.000
- Silence Percentage: 62.168
- Clipping Points: 0.000
- Dynamic Range: 3022615.000

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.070
  - Temporal Flatness: 0.020

- Volume Metrics:
  - Volume Stability: -0.728
  - Volume Range: 29148040.000
  - Volume Variations: 0.034

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.003898838626448
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.6381455659866333, 'stability': 1.6408194303512573, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.23516440391540527, 'consistency': 0.2896541953086853, 'distinction': 0.11255760490894318}
  - Description: Moderate nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.670
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.340
  - Rhythm Quality: 0.358
  - Intonation Quality: 0.322

Vowel Quality:
  - Quality Score: 0.005
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-15 19:09:13,679 - services.translation_routes - INFO - [translation_routes.py:117] - ==================================================

2025-01-15 19:09:13,680 - services.translation_routes - INFO - [translation_routes.py:128] - Request 5b92376a: Audio processed successfully
2025-01-15 19:09:13,703 - services.translation_routes - INFO - [translation_routes.py:147] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-15 19:09:28,777 - services.translation_routes - INFO - [translation_routes.py:185] - Source text: the stale smell of old beer lingers it takes heat to bring out the odor a cold dip restores health and zest a salt pickle tastes fine with ham tacos al pastor are my favorite a zestful food is the hot cross bun
2025-01-15 19:09:45,038 - services.translation_routes - INFO - [translation_routes.py:204] - Target text: l'odeur de la vieille bière lingoure il faut de la chaleur pour faire ressortir l'odore une dip froide restaure la santé et le zest un pickle salé goûte bien avec le jambon tacos al pasteur sont mon favori une nourriture zestueuse est le hot cross bun
2025-01-15 19:10:05,982 - services.translation_routes - INFO - [translation_routes.py:227] - Processing tuple output from model
2025-01-15 19:10:05,996 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 19:10:05,996 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 19:10:06,003 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 19:10:06,003 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 19:10:06,010 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 19:10:06,010 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 19:10:06,017 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-15 19:10:06,017 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-15 19:10:06,338 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-15 19:10:06,338 - services.translation_routes - INFO - [translation_routes.py:251] - 
==================================================
2025-01-15 19:10:06,338 - services.translation_routes - INFO - [translation_routes.py:252] - Translated Audio Quality Report
2025-01-15 19:10:06,338 - services.translation_routes - INFO - [translation_routes.py:253] - ==================================================
2025-01-15 19:10:06,338 - services.translation_routes - INFO - [translation_routes.py:254] - Request ID: 5b92376a
2025-01-15 19:10:06,338 - services.translation_routes - INFO - [translation_routes.py:255] - Target Language: fra
2025-01-15 19:10:06,338 - services.translation_routes - INFO - [translation_routes.py:256] - --------------------------------------------------
2025-01-15 19:10:06,338 - services.translation_routes - INFO - [translation_routes.py:257] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.757
- Avg Amplitude: 0.066
- Rms Level: 0.101
- Crest Factor: 7.533
- Zero Crossings: 26392.000
- Silence Percentage: 9.249
- Clipping Points: 0.000
- Dynamic Range: 154.010

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.058
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.027
  - Temporal Flatness: 0.016

- Volume Metrics:
  - Volume Stability: 0.356
  - Volume Range: 1352.907
  - Volume Variations: 0.054

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.02669067430969
- Background Noise: 4.013112813880249
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
No issues detected

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 1.0560309886932373, 'stability': 3.719334840774536, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.011901987716555595, 'consistency': 0.0, 'distinction': 0.056998226791620255}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.554
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.003
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-15 19:10:06,338 - services.translation_routes - INFO - [translation_routes.py:258] - ==================================================

2025-01-15 19:10:06,338 - services.translation_routes - INFO - [translation_routes.py:264] - Request 5b92376a: Audio output processed successfully
2025-01-15 19:10:06,342 - services.translation_routes - INFO - [translation_routes.py:317] - Request 5b92376a: Response prepared successfully
2025-01-15 19:10:06,342 - services.translation_routes - INFO - [translation_routes.py:328] - Request 5b92376a completed in 53.72s
2025-01-15 19:10:06,344 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 53.72s, Memory Change: 1491.83MB
2025-01-15 19:10:06,344 - __main__ - INFO - [app.py:277] - Request to /translate took 64.73s
2025-01-17 21:07:40,654 - services.model_manager - INFO - [model_manager.py:188] - Model inactive for too long, reloading...
2025-01-17 21:07:40,662 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-17 21:07:57,384 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-17 21:08:21,141 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-17 21:08:21,143 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-17 21:08:27,149 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-17 21:08:27,153 - services.translation_routes - INFO - [translation_routes.py:29] - Starting translation request 766fc9b4
2025-01-17 21:08:27,154 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-17 21:08:27,154 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-17 21:08:27,158 - services.translation_routes - INFO - [translation_routes.py:86] - Request 766fc9b4: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpm_mb_ao3.wav
2025-01-17 21:08:27,164 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 18.36 seconds
2025-01-17 21:08:27,164 - services.translation_routes - INFO - [translation_routes.py:99] - Request 766fc9b4: Beginning audio processing with diagnostics
2025-01-17 21:08:27,164 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpm_mb_ao3.wav
2025-01-17 21:08:27,164 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 44100, Channels: 2
2025-01-17 21:08:27,176 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([2, 809508]), Frequency: 44100Hz
2025-01-17 21:08:27,176 - services.audio_processor - INFO - [audio_processor.py:219] - Resampling from 44100Hz to 16000Hz
2025-01-17 21:08:27,219 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-17 21:08:27,223 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-17 21:08:27,248 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-17 21:08:27,299 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-17 21:08:27,303 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-17 21:08:27,310 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-17 21:08:27,310 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-17 21:08:27,316 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-17 21:08:27,316 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-17 21:08:27,324 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-17 21:08:27,324 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-17 21:08:27,779 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-17 21:08:27,779 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-17 21:08:27,816 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-17 21:08:27,817 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-17 21:08:27,824 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-17 21:08:27,824 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-17 21:08:27,836 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-17 21:08:27,836 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-17 21:08:27,849 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-17 21:08:27,849 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-17 21:08:28,283 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-17 21:08:28,283 - services.translation_routes - INFO - [translation_routes.py:110] - 
==================================================
2025-01-17 21:08:28,283 - services.translation_routes - INFO - [translation_routes.py:111] - Input Audio Quality Report
2025-01-17 21:08:28,283 - services.translation_routes - INFO - [translation_routes.py:112] - ==================================================
2025-01-17 21:08:28,283 - services.translation_routes - INFO - [translation_routes.py:113] - Request ID: 766fc9b4
2025-01-17 21:08:28,284 - services.translation_routes - INFO - [translation_routes.py:114] - Target Language: fra
2025-01-17 21:08:28,284 - services.translation_routes - INFO - [translation_routes.py:115] - --------------------------------------------------
2025-01-17 21:08:28,284 - services.translation_routes - INFO - [translation_routes.py:116] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.800
- Avg Amplitude: 0.013
- Rms Level: 0.039
- Crest Factor: 20.262
- Zero Crossings: 127716.000
- Silence Percentage: 62.168
- Clipping Points: 0.000
- Dynamic Range: 3022615.000

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.070
  - Temporal Flatness: 0.020

- Volume Metrics:
  - Volume Stability: -0.728
  - Volume Range: 29148040.000
  - Volume Variations: 0.034

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.003898838626448
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.6381455659866333, 'stability': 1.6408194303512573, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.23516440391540527, 'consistency': 0.2896541953086853, 'distinction': 0.11255760490894318}
  - Description: Moderate nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.670
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.340
  - Rhythm Quality: 0.358
  - Intonation Quality: 0.322

Vowel Quality:
  - Quality Score: 0.005
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-17 21:08:28,284 - services.translation_routes - INFO - [translation_routes.py:117] - ==================================================

2025-01-17 21:08:28,284 - services.translation_routes - INFO - [translation_routes.py:128] - Request 766fc9b4: Audio processed successfully
2025-01-17 21:08:28,305 - services.translation_routes - INFO - [translation_routes.py:147] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-17 21:08:46,478 - services.translation_routes - INFO - [translation_routes.py:185] - Source text: the stale smell of old beer lingers it takes heat to bring out the odor a cold dip restores health and zest a salt pickle tastes fine with ham tacos al pastor are my favorite a zestful food is the hot cross bun
2025-01-17 21:09:06,452 - services.translation_routes - INFO - [translation_routes.py:204] - Target text: l'odeur de la vieille bière lingoure il faut de la chaleur pour faire ressortir l'odore une dip froide restaure la santé et le zest un pickle salé goûte bien avec le jambon tacos al pasteur sont mon favori une nourriture zestueuse est le hot cross bun
2025-01-17 21:09:31,175 - services.translation_routes - INFO - [translation_routes.py:227] - Processing tuple output from model
2025-01-17 21:09:31,191 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-17 21:09:31,192 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-17 21:09:31,197 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-17 21:09:31,197 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-17 21:09:31,204 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-17 21:09:31,204 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-17 21:09:31,209 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-01-17 21:09:31,209 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-17 21:09:31,531 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-17 21:09:31,532 - services.translation_routes - INFO - [translation_routes.py:251] - 
==================================================
2025-01-17 21:09:31,532 - services.translation_routes - INFO - [translation_routes.py:252] - Translated Audio Quality Report
2025-01-17 21:09:31,532 - services.translation_routes - INFO - [translation_routes.py:253] - ==================================================
2025-01-17 21:09:31,532 - services.translation_routes - INFO - [translation_routes.py:254] - Request ID: 766fc9b4
2025-01-17 21:09:31,532 - services.translation_routes - INFO - [translation_routes.py:255] - Target Language: fra
2025-01-17 21:09:31,532 - services.translation_routes - INFO - [translation_routes.py:256] - --------------------------------------------------
2025-01-17 21:09:31,532 - services.translation_routes - INFO - [translation_routes.py:257] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.681
- Avg Amplitude: 0.065
- Rms Level: 0.100
- Crest Factor: 6.845
- Zero Crossings: 27542.000
- Silence Percentage: 9.761
- Clipping Points: 0.000
- Dynamic Range: 161.741

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.144
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.027
  - Temporal Flatness: 0.015

- Volume Metrics:
  - Volume Stability: 0.358
  - Volume Range: 674.685
  - Volume Variations: 0.054

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0290801988723586
- Background Noise: 3.7380053769565347
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 1.0121961832046509, 'stability': 3.7616119384765625, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.0, 'distinction': 0.06779065728187561}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.522
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.003
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-17 21:09:31,532 - services.translation_routes - INFO - [translation_routes.py:258] - ==================================================

2025-01-17 21:09:31,532 - services.translation_routes - INFO - [translation_routes.py:264] - Request 766fc9b4: Audio output processed successfully
2025-01-17 21:09:31,538 - services.translation_routes - INFO - [translation_routes.py:317] - Request 766fc9b4: Response prepared successfully
2025-01-17 21:09:31,538 - services.translation_routes - INFO - [translation_routes.py:328] - Request 766fc9b4 completed in 64.39s
2025-01-17 21:09:31,539 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 64.39s, Memory Change: 9152.03MB
2025-01-17 21:09:31,540 - __main__ - INFO - [app.py:277] - Request to /translate took 110.89s
2025-01-17 22:06:40,230 - __main__ - INFO - [app.py:424] - Metrics server started on port 8000
2025-01-17 22:06:40,230 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-17 22:06:53,791 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-17 22:07:08,199 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-17 22:07:08,200 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-17 22:07:12,339 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-17 22:07:12,341 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-17 22:07:12,341 - __main__ - INFO - [app.py:448] - ==================================================
2025-01-17 22:07:12,341 - __main__ - INFO - [app.py:449] - Starting LinguaSync Backend
2025-01-17 22:07:12,341 - __main__ - INFO - [app.py:450] - Starting Flask app on port 5001 using cpu
2025-01-17 22:07:12,341 - __main__ - INFO - [app.py:451] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-01-17 22:07:12,341 - __main__ - INFO - [app.py:452] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-17 22:07:12,341 - __main__ - INFO - [app.py:453] - Maximum audio length: 300 seconds
2025-01-17 22:07:12,341 - __main__ - INFO - [app.py:454] - Sample rate: 16000 Hz
2025-01-17 22:07:12,341 - __main__ - INFO - [app.py:458] - System memory: 36.0GB total, 18.2GB available
2025-01-17 22:07:12,341 - __main__ - INFO - [app.py:459] - CPU cores: 11
2025-01-17 22:07:12,341 - __main__ - INFO - [app.py:467] - Configuration:
2025-01-17 22:07:12,341 - __main__ - INFO - [app.py:468] - - Debug mode: False
2025-01-17 22:07:12,341 - __main__ - INFO - [app.py:469] - - CORS enabled: True
2025-01-17 22:07:12,341 - __main__ - INFO - [app.py:470] - - Rate limiting: 10 requests per minute
2025-01-17 22:07:12,341 - __main__ - INFO - [app.py:471] - - Metrics enabled: True (port 8000)
2025-01-17 22:07:12,341 - __main__ - INFO - [app.py:473] - ==================================================
2025-01-17 23:28:51,800 - services.model_manager - INFO - [model_manager.py:188] - Model inactive for too long, reloading...
2025-01-17 23:28:51,801 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-17 23:29:05,550 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-17 23:29:14,394 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-17 23:29:14,396 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-17 23:29:21,868 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-17 23:29:21,871 - services.translation_routes - INFO - [translation_routes.py:29] - Starting translation request 446ed522
2025-01-17 23:29:21,871 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-17 23:29:21,871 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-17 23:29:21,872 - services.translation_routes - INFO - [translation_routes.py:86] - Request 446ed522: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp93485eh8.wav
2025-01-17 23:29:21,872 - services.audio_processor - ERROR - [audio_processor.py:144] - Error validating audio: Error opening '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp93485eh8.wav': Format not recognised.
2025-01-17 23:29:21,873 - services.translation_routes - ERROR - [translation_routes.py:94] - Request 446ed522: Audio validation failed - Error validating audio: Error opening '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp93485eh8.wav': Format not recognised.
2025-01-17 23:29:21,873 - services.translation_routes - INFO - [translation_routes.py:328] - Request 446ed522 completed in 0.00s
2025-01-17 23:29:21,873 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 0.00s, Memory Change: 0.39MB
2025-01-17 23:29:21,873 - __main__ - INFO - [app.py:277] - Request to /translate took 30.07s
2025-01-17 23:31:35,509 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-17 23:31:35,511 - services.translation_routes - INFO - [translation_routes.py:29] - Starting translation request be558f42
2025-01-17 23:31:35,511 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-17 23:31:35,511 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-17 23:31:35,511 - services.translation_routes - INFO - [translation_routes.py:86] - Request be558f42: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpcxmms_2f.wav
2025-01-17 23:31:35,511 - services.audio_processor - ERROR - [audio_processor.py:144] - Error validating audio: Error opening '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpcxmms_2f.wav': Format not recognised.
2025-01-17 23:31:35,511 - services.translation_routes - ERROR - [translation_routes.py:94] - Request be558f42: Audio validation failed - Error validating audio: Error opening '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpcxmms_2f.wav': Format not recognised.
2025-01-17 23:31:35,512 - services.translation_routes - INFO - [translation_routes.py:328] - Request be558f42 completed in 0.00s
2025-01-17 23:31:35,512 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 0.00s, Memory Change: 0.03MB
2025-01-17 23:31:35,512 - __main__ - INFO - [app.py:277] - Request to /translate took 5.89s
2025-01-17 23:37:14,923 - __main__ - INFO - [app.py:216] - Received SIGINT signal
2025-01-17 23:37:14,924 - __main__ - INFO - [app.py:201] - Initiating graceful shutdown...
2025-01-17 23:37:19,925 - __main__ - INFO - [app.py:393] - Application shutting down...
2025-01-17 23:37:19,926 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-17 23:37:19,926 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-17 23:37:19,927 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-17 23:37:19,928 - __main__ - INFO - [app.py:407] - Cleanup completed successfully
2025-01-17 23:37:19,928 - __main__ - INFO - [app.py:205] - Graceful shutdown completed
2025-01-17 23:37:19,929 - __main__ - INFO - [app.py:393] - Application shutting down...
2025-01-17 23:37:19,929 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-17 23:37:19,929 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-17 23:37:19,930 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-17 23:37:19,930 - __main__ - INFO - [app.py:407] - Cleanup completed successfully
2025-01-17 23:37:19,931 - __main__ - INFO - [app.py:393] - Application shutting down...
2025-01-17 23:37:19,931 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-17 23:37:19,931 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-17 23:37:19,932 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-17 23:37:19,932 - __main__ - INFO - [app.py:407] - Cleanup completed successfully
2025-01-17 23:37:42,718 - __main__ - INFO - [app.py:424] - Metrics server started on port 8000
2025-01-17 23:37:42,718 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-17 23:37:57,273 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-17 23:38:03,875 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-17 23:38:03,876 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-17 23:38:08,884 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-17 23:38:08,887 - __main__ - INFO - [app.py:375] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-17 23:38:08,887 - __main__ - INFO - [app.py:448] - ==================================================
2025-01-17 23:38:08,887 - __main__ - INFO - [app.py:449] - Starting LinguaSync Backend
2025-01-17 23:38:08,887 - __main__ - INFO - [app.py:450] - Starting Flask app on port 5001 using cpu
2025-01-17 23:38:08,887 - __main__ - INFO - [app.py:451] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-01-17 23:38:08,887 - __main__ - INFO - [app.py:452] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-17 23:38:08,887 - __main__ - INFO - [app.py:453] - Maximum audio length: 300 seconds
2025-01-17 23:38:08,887 - __main__ - INFO - [app.py:454] - Sample rate: 16000 Hz
2025-01-17 23:38:08,887 - __main__ - INFO - [app.py:458] - System memory: 36.0GB total, 15.3GB available
2025-01-17 23:38:08,887 - __main__ - INFO - [app.py:459] - CPU cores: 11
2025-01-17 23:38:08,887 - __main__ - INFO - [app.py:467] - Configuration:
2025-01-17 23:38:08,887 - __main__ - INFO - [app.py:468] - - Debug mode: False
2025-01-17 23:38:08,887 - __main__ - INFO - [app.py:469] - - CORS enabled: True
2025-01-17 23:38:08,887 - __main__ - INFO - [app.py:470] - - Rate limiting: 10 requests per minute
2025-01-17 23:38:08,887 - __main__ - INFO - [app.py:471] - - Metrics enabled: True (port 8000)
2025-01-17 23:38:08,887 - __main__ - INFO - [app.py:473] - ==================================================
2025-01-18 00:01:06,275 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-18 00:01:06,278 - services.translation_routes - INFO - [translation_routes.py:29] - Starting translation request 29fa4852
2025-01-18 00:01:06,278 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-18 00:01:06,278 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-18 00:01:06,279 - services.translation_routes - INFO - [translation_routes.py:86] - Request 29fa4852: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp98t47yh_.wav
2025-01-18 00:01:06,279 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 17.82 seconds
2025-01-18 00:01:06,279 - services.translation_routes - INFO - [translation_routes.py:99] - Request 29fa4852: Beginning audio processing with diagnostics
2025-01-18 00:01:06,279 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp98t47yh_.wav
2025-01-18 00:01:06,279 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 16000, Channels: 1
2025-01-18 00:01:06,280 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([1, 285120]), Frequency: 16000Hz
2025-01-18 00:01:06,294 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-18 00:01:06,296 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-18 00:01:06,317 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-18 00:01:06,339 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-18 00:01:06,340 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-18 00:01:06,347 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-18 00:01:06,347 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-18 00:01:06,355 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-18 00:01:06,355 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-18 00:01:06,363 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-18 00:01:06,363 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-18 00:01:06,553 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-18 00:01:06,553 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-18 00:01:06,592 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-18 00:01:06,592 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-18 00:01:06,601 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-18 00:01:06,602 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-18 00:01:06,608 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-18 00:01:06,609 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-18 00:01:06,617 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-18 00:01:06,617 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-18 00:01:06,786 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-18 00:01:06,786 - services.translation_routes - INFO - [translation_routes.py:110] - 
==================================================
2025-01-18 00:01:06,786 - services.translation_routes - INFO - [translation_routes.py:111] - Input Audio Quality Report
2025-01-18 00:01:06,786 - services.translation_routes - INFO - [translation_routes.py:112] - ==================================================
2025-01-18 00:01:06,787 - services.translation_routes - INFO - [translation_routes.py:113] - Request ID: 29fa4852
2025-01-18 00:01:06,787 - services.translation_routes - INFO - [translation_routes.py:114] - Target Language: fra
2025-01-18 00:01:06,787 - services.translation_routes - INFO - [translation_routes.py:115] - --------------------------------------------------
2025-01-18 00:01:06,787 - services.translation_routes - INFO - [translation_routes.py:116] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.822
- Avg Amplitude: 0.008
- Rms Level: 0.042
- Crest Factor: 19.634
- Zero Crossings: 34956.000
- Silence Percentage: 88.453
- Clipping Points: 0.000
- Dynamic Range: 652475.157

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.072
  - Temporal Flatness: 0.014

- Volume Metrics:
  - Volume Stability: -2.535
  - Volume Range: 24283739.924
  - Volume Variations: 0.040

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.004265547511332
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 1.177080512046814, 'stability': 2.912121534347534, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.4504966735839844, 'consistency': 0.2064235806465149, 'distinction': 1.0}
  - Description: Strong nasal resonance. Unstable nasal resonance. Clear distinction between nasal and oral vowels

Liaison:
  - Detected: True
  - Confidence: 0.707
  - Description: Clear liaison patterns detected

Prosody:
  - Score: 0.179
  - Rhythm Quality: 0.223
  - Intonation Quality: 0.135

Vowel Quality:
  - Quality Score: 0.007
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-18 00:01:06,787 - services.translation_routes - INFO - [translation_routes.py:117] - ==================================================

2025-01-18 00:01:06,787 - services.translation_routes - INFO - [translation_routes.py:128] - Request 29fa4852: Audio processed successfully
2025-01-18 00:01:06,805 - services.translation_routes - INFO - [translation_routes.py:147] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-18 00:01:13,212 - services.translation_routes - INFO - [translation_routes.py:185] - Source text: Okay, let's try this. Let's see if this works.
2025-01-18 00:01:18,495 - services.translation_routes - INFO - [translation_routes.py:204] - Target text: Ok, essayons ça, voyons si ça fonctionne.
2025-01-18 00:01:26,807 - services.translation_routes - INFO - [translation_routes.py:227] - Processing tuple output from model
2025-01-18 00:01:26,812 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-18 00:01:26,812 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-18 00:01:26,815 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-18 00:01:26,815 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-18 00:01:26,817 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-18 00:01:26,817 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-18 00:01:26,820 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-18 00:01:26,820 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-18 00:01:26,878 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-18 00:01:26,878 - services.translation_routes - INFO - [translation_routes.py:251] - 
==================================================
2025-01-18 00:01:26,878 - services.translation_routes - INFO - [translation_routes.py:252] - Translated Audio Quality Report
2025-01-18 00:01:26,878 - services.translation_routes - INFO - [translation_routes.py:253] - ==================================================
2025-01-18 00:01:26,878 - services.translation_routes - INFO - [translation_routes.py:254] - Request ID: 29fa4852
2025-01-18 00:01:26,878 - services.translation_routes - INFO - [translation_routes.py:255] - Target Language: fra
2025-01-18 00:01:26,878 - services.translation_routes - INFO - [translation_routes.py:256] - --------------------------------------------------
2025-01-18 00:01:26,878 - services.translation_routes - INFO - [translation_routes.py:257] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.727
- Avg Amplitude: 0.056
- Rms Level: 0.098
- Crest Factor: 7.416
- Zero Crossings: 6685.000
- Silence Percentage: 16.726
- Clipping Points: 0.000
- Dynamic Range: 417.611

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.073
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.032
  - Temporal Flatness: 0.018

- Volume Metrics:
  - Volume Stability: 0.266
  - Volume Range: 843.838
  - Volume Variations: 0.059

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.026420785919579
- Background Noise: 3.966580218654595
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.6438602805137634, 'stability': 2.18398380279541, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.6906270384788513, 'consistency': 0.0, 'distinction': 1.0}
  - Description: Moderate nasal resonance. Unstable nasal resonance. Clear distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.531
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.030
  - Rhythm Quality: 0.000
  - Intonation Quality: 1.000

Vowel Quality:
  - Quality Score: 0.010
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-18 00:01:26,878 - services.translation_routes - INFO - [translation_routes.py:258] - ==================================================

2025-01-18 00:01:26,878 - services.translation_routes - INFO - [translation_routes.py:264] - Request 29fa4852: Audio output processed successfully
2025-01-18 00:01:26,880 - services.translation_routes - INFO - [translation_routes.py:317] - Request 29fa4852: Response prepared successfully
2025-01-18 00:01:26,880 - services.translation_routes - INFO - [translation_routes.py:328] - Request 29fa4852 completed in 20.60s
2025-01-18 00:01:26,881 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 20.60s, Memory Change: 921.38MB
2025-01-18 00:01:26,881 - __main__ - INFO - [app.py:277] - Request to /translate took 25.97s
2025-01-18 01:03:39,296 - __main__ - INFO - [app.py:277] - Request to /process-audio-url took 0.00s
2025-01-18 01:03:58,468 - __main__ - INFO - [app.py:277] - Request to /process-audio-url took 0.00s
2025-01-18 01:08:54,509 - __main__ - INFO - [app.py:277] - Request to /process-audio-url took 0.00s
2025-01-18 01:12:42,523 - __main__ - INFO - [app.py:277] - Request to /process-audio-url took 0.00s
2025-01-18 01:12:54,905 - __main__ - INFO - [app.py:277] - Request to /process-audio-url took 0.00s
2025-01-18 01:12:55,454 - __main__ - INFO - [app.py:277] - Request to /favicon.ico took 0.00s
2025-01-18 07:41:36,409 - __main__ - INFO - [app.py:469] - Metrics server started on port 8000
2025-01-18 07:41:36,409 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-18 07:41:49,570 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-18 07:42:06,460 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-18 07:42:06,461 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-18 07:42:13,985 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-18 07:42:13,987 - __main__ - INFO - [app.py:420] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-18 07:42:13,987 - __main__ - INFO - [app.py:493] - ==================================================
2025-01-18 07:42:13,987 - __main__ - INFO - [app.py:494] - Starting LinguaSync Backend
2025-01-18 07:42:13,987 - __main__ - INFO - [app.py:495] - Starting Flask app on port 5001 using cpu
2025-01-18 07:42:13,987 - __main__ - INFO - [app.py:496] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-01-18 07:42:13,987 - __main__ - INFO - [app.py:497] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-18 07:42:13,987 - __main__ - INFO - [app.py:498] - Maximum audio length: 300 seconds
2025-01-18 07:42:13,987 - __main__ - INFO - [app.py:499] - Sample rate: 16000 Hz
2025-01-18 07:42:13,987 - __main__ - INFO - [app.py:503] - System memory: 36.0GB total, 16.5GB available
2025-01-18 07:42:13,987 - __main__ - INFO - [app.py:504] - CPU cores: 11
2025-01-18 07:42:13,987 - __main__ - INFO - [app.py:512] - Configuration:
2025-01-18 07:42:13,987 - __main__ - INFO - [app.py:513] - - Debug mode: False
2025-01-18 07:42:13,987 - __main__ - INFO - [app.py:514] - - CORS enabled: True
2025-01-18 07:42:13,987 - __main__ - INFO - [app.py:515] - - Rate limiting: 10 requests per minute
2025-01-18 07:42:13,987 - __main__ - INFO - [app.py:516] - - Metrics enabled: True (port 8000)
2025-01-18 07:42:13,987 - __main__ - INFO - [app.py:518] - ==================================================
2025-01-18 08:00:00,391 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-18 08:00:04,664 - services.audio_link_routes - ERROR - [audio_link_routes.py:59] - YouTube processing error: Failed to download audio
2025-01-18 08:00:04,664 - services.audio_link_routes - ERROR - [audio_link_routes.py:118] - URL processing error: Failed to download audio
2025-01-18 08:00:04,665 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 4.27s, Memory Change: 57.62MB
2025-01-18 08:00:04,665 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 4.27s
2025-01-18 08:05:27,151 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-18 08:05:29,091 - services.audio_link_routes - ERROR - [audio_link_routes.py:59] - YouTube processing error: Failed to download audio
2025-01-18 08:05:29,091 - services.audio_link_routes - ERROR - [audio_link_routes.py:118] - URL processing error: Failed to download audio
2025-01-18 08:05:29,092 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 1.94s, Memory Change: 10.88MB
2025-01-18 08:05:29,092 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 1.94s
2025-01-18 08:05:47,650 - __main__ - INFO - [app.py:217] - Received SIGINT signal
2025-01-18 08:05:47,652 - __main__ - INFO - [app.py:202] - Initiating graceful shutdown...
2025-01-18 08:05:52,653 - __main__ - INFO - [app.py:438] - Application shutting down...
2025-01-18 08:05:52,654 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-18 08:05:52,655 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-18 08:05:52,656 - __main__ - INFO - [app.py:420] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-18 08:05:52,659 - __main__ - INFO - [app.py:452] - Cleanup completed successfully
2025-01-18 08:05:52,659 - __main__ - INFO - [app.py:206] - Graceful shutdown completed
2025-01-18 08:05:52,661 - __main__ - INFO - [app.py:438] - Application shutting down...
2025-01-18 08:05:52,662 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-18 08:05:52,662 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-18 08:05:52,663 - __main__ - INFO - [app.py:420] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-18 08:05:52,664 - __main__ - INFO - [app.py:452] - Cleanup completed successfully
2025-01-18 08:05:52,664 - __main__ - INFO - [app.py:438] - Application shutting down...
2025-01-18 08:05:52,665 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-18 08:05:52,665 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-18 08:05:52,665 - __main__ - INFO - [app.py:420] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-18 08:05:52,665 - __main__ - INFO - [app.py:452] - Cleanup completed successfully
2025-01-18 08:11:59,253 - __main__ - INFO - [app.py:467] - Metrics server started on port 8000
2025-01-18 08:11:59,253 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-18 08:12:12,736 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-18 08:12:20,953 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-18 08:12:20,955 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-18 08:12:25,793 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-18 08:12:25,795 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-18 08:12:25,795 - __main__ - INFO - [app.py:491] - ==================================================
2025-01-18 08:12:25,795 - __main__ - INFO - [app.py:492] - Starting LinguaSync Backend
2025-01-18 08:12:25,795 - __main__ - INFO - [app.py:493] - Starting Flask app on port 5001 using cpu
2025-01-18 08:12:25,795 - __main__ - INFO - [app.py:494] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-01-18 08:12:25,795 - __main__ - INFO - [app.py:495] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-18 08:12:25,795 - __main__ - INFO - [app.py:496] - Maximum audio length: 300 seconds
2025-01-18 08:12:25,796 - __main__ - INFO - [app.py:497] - Sample rate: 16000 Hz
2025-01-18 08:12:25,796 - __main__ - INFO - [app.py:501] - System memory: 36.0GB total, 16.5GB available
2025-01-18 08:12:25,796 - __main__ - INFO - [app.py:502] - CPU cores: 11
2025-01-18 08:12:25,796 - __main__ - INFO - [app.py:510] - Configuration:
2025-01-18 08:12:25,796 - __main__ - INFO - [app.py:511] - - Debug mode: False
2025-01-18 08:12:25,796 - __main__ - INFO - [app.py:512] - - CORS enabled: True
2025-01-18 08:12:25,796 - __main__ - INFO - [app.py:513] - - Rate limiting: 10 requests per minute
2025-01-18 08:12:25,796 - __main__ - INFO - [app.py:514] - - Metrics enabled: True (port 8000)
2025-01-18 08:12:25,796 - __main__ - INFO - [app.py:516] - ==================================================
2025-01-18 08:13:02,350 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-01-18 08:13:02,353 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-18 08:13:04,504 - services.audio_link_routes - ERROR - [audio_link_routes.py:117] - Output file not found at /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp0t4mxcur/output.wav
2025-01-18 08:13:04,504 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 2.15s, Memory Change: 0.27MB
2025-01-18 08:13:04,504 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 2.15s
2025-01-18 08:22:26,867 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-01-18 08:22:26,870 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-18 08:22:29,014 - services.audio_link_routes - ERROR - [audio_link_routes.py:117] - Output file not found at /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp44zv14l1/output.wav
2025-01-18 08:22:29,015 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 2.14s, Memory Change: 6.69MB
2025-01-18 08:22:29,015 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 2.14s
2025-01-18 08:22:44,398 - __main__ - INFO - [app.py:217] - Received SIGINT signal
2025-01-18 08:22:44,399 - __main__ - INFO - [app.py:202] - Initiating graceful shutdown...
2025-01-18 08:22:49,404 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-18 08:22:49,405 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-18 08:22:49,406 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-18 08:22:49,407 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-18 08:22:49,408 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-18 08:22:49,408 - __main__ - INFO - [app.py:206] - Graceful shutdown completed
2025-01-18 08:22:49,409 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-18 08:22:49,409 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-18 08:22:49,409 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-18 08:22:49,410 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-18 08:22:49,410 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-18 08:22:49,411 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-18 08:22:49,411 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-18 08:22:49,412 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-18 08:22:49,412 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-18 08:22:49,413 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-18 08:23:03,270 - __main__ - INFO - [app.py:467] - Metrics server started on port 8000
2025-01-18 08:23:03,270 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-18 08:23:16,248 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-18 08:23:22,188 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-18 08:23:22,189 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-18 08:23:29,298 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-18 08:23:29,300 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-18 08:23:29,300 - __main__ - INFO - [app.py:491] - ==================================================
2025-01-18 08:23:29,300 - __main__ - INFO - [app.py:492] - Starting LinguaSync Backend
2025-01-18 08:23:29,300 - __main__ - INFO - [app.py:493] - Starting Flask app on port 5001 using cpu
2025-01-18 08:23:29,300 - __main__ - INFO - [app.py:494] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-01-18 08:23:29,300 - __main__ - INFO - [app.py:495] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-18 08:23:29,300 - __main__ - INFO - [app.py:496] - Maximum audio length: 300 seconds
2025-01-18 08:23:29,300 - __main__ - INFO - [app.py:497] - Sample rate: 16000 Hz
2025-01-18 08:23:29,300 - __main__ - INFO - [app.py:501] - System memory: 36.0GB total, 16.8GB available
2025-01-18 08:23:29,300 - __main__ - INFO - [app.py:502] - CPU cores: 11
2025-01-18 08:23:29,300 - __main__ - INFO - [app.py:510] - Configuration:
2025-01-18 08:23:29,300 - __main__ - INFO - [app.py:511] - - Debug mode: False
2025-01-18 08:23:29,300 - __main__ - INFO - [app.py:512] - - CORS enabled: True
2025-01-18 08:23:29,300 - __main__ - INFO - [app.py:513] - - Rate limiting: 10 requests per minute
2025-01-18 08:23:29,300 - __main__ - INFO - [app.py:514] - - Metrics enabled: True (port 8000)
2025-01-18 08:23:29,300 - __main__ - INFO - [app.py:516] - ==================================================
2025-01-18 08:24:08,753 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 2.19s, Memory Change: 5.58MB
2025-01-18 08:24:08,753 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 2.19s
2025-01-18 08:24:14,878 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 1.91s, Memory Change: 5.12MB
2025-01-18 08:24:14,878 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 1.91s
2025-01-18 08:41:03,353 - __main__ - INFO - [app.py:217] - Received SIGINT signal
2025-01-18 08:41:03,355 - __main__ - INFO - [app.py:202] - Initiating graceful shutdown...
2025-01-18 08:41:08,361 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-18 08:41:08,361 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-18 08:41:08,362 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-18 08:41:08,363 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-18 08:41:08,364 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-18 08:41:08,364 - __main__ - INFO - [app.py:206] - Graceful shutdown completed
2025-01-18 08:41:08,365 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-18 08:41:08,366 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-18 08:41:08,366 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-18 08:41:08,367 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-18 08:41:08,367 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-18 08:41:08,368 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-18 08:41:08,369 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-18 08:41:08,369 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-18 08:41:08,370 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-18 08:41:08,370 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-18 08:41:30,022 - __main__ - INFO - [app.py:467] - Metrics server started on port 8000
2025-01-18 08:41:30,022 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-18 08:41:44,456 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-18 08:41:52,752 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-18 08:41:52,752 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-18 08:42:00,095 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-18 08:42:00,096 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-18 08:42:00,096 - __main__ - INFO - [app.py:491] - ==================================================
2025-01-18 08:42:00,096 - __main__ - INFO - [app.py:492] - Starting LinguaSync Backend
2025-01-18 08:42:00,096 - __main__ - INFO - [app.py:493] - Starting Flask app on port 5001 using cpu
2025-01-18 08:42:00,097 - __main__ - INFO - [app.py:494] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-01-18 08:42:00,097 - __main__ - INFO - [app.py:495] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-18 08:42:00,097 - __main__ - INFO - [app.py:496] - Maximum audio length: 300 seconds
2025-01-18 08:42:00,097 - __main__ - INFO - [app.py:497] - Sample rate: 16000 Hz
2025-01-18 08:42:00,097 - __main__ - INFO - [app.py:501] - System memory: 36.0GB total, 16.7GB available
2025-01-18 08:42:00,097 - __main__ - INFO - [app.py:502] - CPU cores: 11
2025-01-18 08:42:00,097 - __main__ - INFO - [app.py:510] - Configuration:
2025-01-18 08:42:00,097 - __main__ - INFO - [app.py:511] - - Debug mode: False
2025-01-18 08:42:00,097 - __main__ - INFO - [app.py:512] - - CORS enabled: True
2025-01-18 08:42:00,097 - __main__ - INFO - [app.py:513] - - Rate limiting: 10 requests per minute
2025-01-18 08:42:00,097 - __main__ - INFO - [app.py:514] - - Metrics enabled: True (port 8000)
2025-01-18 08:42:00,097 - __main__ - INFO - [app.py:516] - ==================================================
2025-01-18 08:43:00,514 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-01-18 08:43:00,514 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-18 08:43:02,755 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 2.24s, Memory Change: 4.33MB
2025-01-18 08:43:02,755 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 2.24s
2025-01-18 08:45:24,432 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-01-18 08:45:24,434 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-18 08:45:26,479 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 2.04s, Memory Change: 1.73MB
2025-01-18 08:45:26,480 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 2.04s
2025-01-18 08:45:40,689 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-18 08:45:40,690 - services.translation_routes - INFO - [translation_routes.py:29] - Starting translation request 3771072e
2025-01-18 08:45:40,690 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-18 08:45:40,690 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-18 08:45:40,696 - services.translation_routes - INFO - [translation_routes.py:86] - Request 3771072e: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpzzeecmfe.wav
2025-01-18 08:45:40,696 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 52.42 seconds
2025-01-18 08:45:40,696 - services.translation_routes - INFO - [translation_routes.py:99] - Request 3771072e: Beginning audio processing with diagnostics
2025-01-18 08:45:40,696 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpzzeecmfe.wav
2025-01-18 08:45:40,696 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 48000, Channels: 2
2025-01-18 08:45:40,722 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([2, 2516115]), Frequency: 48000Hz
2025-01-18 08:45:40,722 - services.audio_processor - INFO - [audio_processor.py:219] - Resampling from 48000Hz to 16000Hz
2025-01-18 08:45:42,162 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-18 08:45:42,167 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-18 08:45:42,234 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-18 08:45:42,321 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-18 08:45:42,322 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-18 08:45:42,339 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-18 08:45:42,339 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-18 08:45:42,355 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-18 08:45:42,355 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-18 08:45:42,374 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-18 08:45:42,374 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-18 08:45:44,351 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-18 08:45:44,351 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-18 08:45:44,505 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-18 08:45:44,505 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-18 08:45:44,523 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-18 08:45:44,523 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-18 08:45:44,539 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-18 08:45:44,539 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-18 08:45:44,556 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-18 08:45:44,557 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-18 08:45:46,402 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-18 08:45:46,402 - services.translation_routes - INFO - [translation_routes.py:110] - 
==================================================
2025-01-18 08:45:46,402 - services.translation_routes - INFO - [translation_routes.py:111] - Input Audio Quality Report
2025-01-18 08:45:46,402 - services.translation_routes - INFO - [translation_routes.py:112] - ==================================================
2025-01-18 08:45:46,402 - services.translation_routes - INFO - [translation_routes.py:113] - Request ID: 3771072e
2025-01-18 08:45:46,402 - services.translation_routes - INFO - [translation_routes.py:114] - Target Language: fra
2025-01-18 08:45:46,402 - services.translation_routes - INFO - [translation_routes.py:115] - --------------------------------------------------
2025-01-18 08:45:46,402 - services.translation_routes - INFO - [translation_routes.py:116] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.036
- Rms Level: 0.077
- Crest Factor: 12.378
- Zero Crossings: 468467.000
- Silence Percentage: 35.160
- Clipping Points: 0.000
- Dynamic Range: 9128175.349

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 0.000
  - Temporal Variation: 0.137
  - Temporal Flatness: 0.061

- Volume Metrics:
  - Volume Stability: -0.142
  - Volume Range: 37566521.764
  - Volume Variations: 0.058

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0124004758728593
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.7600672841072083, 'stability': 1.425754427909851, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.41630202531814575, 'distinction': 0.1015029102563858}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.517
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.413
  - Rhythm Quality: 0.395
  - Intonation Quality: 0.431

Vowel Quality:
  - Quality Score: 0.006
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-18 08:45:46,402 - services.translation_routes - INFO - [translation_routes.py:117] - ==================================================

2025-01-18 08:45:46,403 - services.translation_routes - INFO - [translation_routes.py:128] - Request 3771072e: Audio processed successfully
2025-01-18 08:45:46,452 - services.translation_routes - INFO - [translation_routes.py:147] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-18 08:46:09,689 - services.translation_routes - INFO - [translation_routes.py:185] - Source text: The main thing is to make sure you're balanced on both feet, hands up, elbows in, a lot of people box with their elbows like this.
2025-01-18 08:46:24,527 - services.translation_routes - INFO - [translation_routes.py:204] - Target text: [Musique épique]
2025-01-18 08:46:55,920 - services.translation_routes - INFO - [translation_routes.py:227] - Processing tuple output from model
2025-01-18 08:46:55,924 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-18 08:46:55,924 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-18 08:46:55,928 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-18 08:46:55,928 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-18 08:46:55,930 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-18 08:46:55,930 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-18 08:46:55,933 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-18 08:46:55,933 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-18 08:46:55,966 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-18 08:46:55,966 - services.translation_routes - INFO - [translation_routes.py:251] - 
==================================================
2025-01-18 08:46:55,966 - services.translation_routes - INFO - [translation_routes.py:252] - Translated Audio Quality Report
2025-01-18 08:46:55,966 - services.translation_routes - INFO - [translation_routes.py:253] - ==================================================
2025-01-18 08:46:55,966 - services.translation_routes - INFO - [translation_routes.py:254] - Request ID: 3771072e
2025-01-18 08:46:55,966 - services.translation_routes - INFO - [translation_routes.py:255] - Target Language: fra
2025-01-18 08:46:55,966 - services.translation_routes - INFO - [translation_routes.py:256] - --------------------------------------------------
2025-01-18 08:46:55,966 - services.translation_routes - INFO - [translation_routes.py:257] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.494
- Avg Amplitude: 0.038
- Rms Level: 0.077
- Crest Factor: 6.412
- Zero Crossings: 1546.000
- Silence Percentage: 40.746
- Clipping Points: 0.000
- Dynamic Range: 1305.922

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.199
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.019
  - Temporal Flatness: 0.008

- Volume Metrics:
  - Volume Stability: -0.173
  - Volume Range: 1020.269
  - Volume Variations: 0.060

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0240319538794056
- Background Noise: 3.5647964520997624
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': nan, 'stability': nan, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 1.0, 'distinction': 1.0}
  - Description: Weak nasal resonance. Unstable nasal resonance. Clear distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.588
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 1.000

Vowel Quality:
  - Quality Score: 0.002
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-18 08:46:55,966 - services.translation_routes - INFO - [translation_routes.py:258] - ==================================================

2025-01-18 08:46:55,966 - services.translation_routes - INFO - [translation_routes.py:264] - Request 3771072e: Audio output processed successfully
2025-01-18 08:46:55,967 - services.translation_routes - INFO - [translation_routes.py:317] - Request 3771072e: Response prepared successfully
2025-01-18 08:46:55,968 - services.translation_routes - INFO - [translation_routes.py:328] - Request 3771072e completed in 75.28s
2025-01-18 08:46:55,970 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 75.28s, Memory Change: 2917.42MB
2025-01-18 08:46:55,970 - __main__ - INFO - [app.py:278] - Request to /translate took 80.97s
2025-01-19 00:26:31,749 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.52MB
2025-01-19 00:26:31,768 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.03s
2025-01-19 00:26:31,775 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.97MB
2025-01-19 00:26:31,775 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-20 01:02:14,470 - __main__ - INFO - [app.py:467] - Metrics server started on port 8000
2025-01-20 01:02:14,470 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-20 01:02:27,297 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-20 01:02:40,419 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-20 01:02:40,422 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-20 01:02:45,551 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-20 01:02:45,553 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-20 01:02:45,553 - __main__ - INFO - [app.py:491] - ==================================================
2025-01-20 01:02:45,553 - __main__ - INFO - [app.py:492] - Starting LinguaSync Backend
2025-01-20 01:02:45,553 - __main__ - INFO - [app.py:493] - Starting Flask app on port 5001 using cpu
2025-01-20 01:02:45,553 - __main__ - INFO - [app.py:494] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-01-20 01:02:45,553 - __main__ - INFO - [app.py:495] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-20 01:02:45,553 - __main__ - INFO - [app.py:496] - Maximum audio length: 300 seconds
2025-01-20 01:02:45,553 - __main__ - INFO - [app.py:497] - Sample rate: 16000 Hz
2025-01-20 01:02:45,553 - __main__ - INFO - [app.py:501] - System memory: 36.0GB total, 10.7GB available
2025-01-20 01:02:45,553 - __main__ - INFO - [app.py:502] - CPU cores: 11
2025-01-20 01:02:45,553 - __main__ - INFO - [app.py:510] - Configuration:
2025-01-20 01:02:45,553 - __main__ - INFO - [app.py:511] - - Debug mode: False
2025-01-20 01:02:45,553 - __main__ - INFO - [app.py:512] - - CORS enabled: True
2025-01-20 01:02:45,553 - __main__ - INFO - [app.py:513] - - Rate limiting: 10 requests per minute
2025-01-20 01:02:45,553 - __main__ - INFO - [app.py:514] - - Metrics enabled: True (port 8000)
2025-01-20 01:02:45,553 - __main__ - INFO - [app.py:516] - ==================================================
2025-01-20 01:03:46,255 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.25MB
2025-01-20 01:03:46,257 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-20 01:03:48,860 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 2.60s, Memory Change: 34.03MB
2025-01-20 01:03:48,860 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 2.60s
2025-01-20 01:05:53,902 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-01-20 01:05:53,903 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-20 01:05:55,862 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 1.96s, Memory Change: 10.84MB
2025-01-20 01:05:55,863 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 1.96s
2025-01-20 01:06:30,871 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 1.85s, Memory Change: 20.17MB
2025-01-20 01:06:30,871 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 1.85s
2025-01-20 01:19:30,585 - __main__ - INFO - [app.py:217] - Received SIGINT signal
2025-01-20 01:19:30,589 - __main__ - INFO - [app.py:202] - Initiating graceful shutdown...
2025-01-20 01:19:35,589 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-20 01:19:35,590 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-20 01:19:35,591 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-20 01:19:35,592 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-20 01:19:35,594 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-20 01:19:35,594 - __main__ - INFO - [app.py:206] - Graceful shutdown completed
2025-01-20 01:19:35,596 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-20 01:19:35,596 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-20 01:19:35,596 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-20 01:19:35,597 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-20 01:19:35,597 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-20 01:19:35,598 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-20 01:19:35,598 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-20 01:19:35,598 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-20 01:19:35,598 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-20 01:19:35,599 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-20 01:19:43,700 - __main__ - INFO - [app.py:467] - Metrics server started on port 8000
2025-01-20 01:19:43,700 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-20 01:19:56,861 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-20 01:20:07,908 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-20 01:20:07,909 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-20 01:20:15,013 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-20 01:20:15,016 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-20 01:20:15,016 - __main__ - INFO - [app.py:491] - ==================================================
2025-01-20 01:20:15,016 - __main__ - INFO - [app.py:492] - Starting LinguaSync Backend
2025-01-20 01:20:15,016 - __main__ - INFO - [app.py:493] - Starting Flask app on port 5001 using cpu
2025-01-20 01:20:15,016 - __main__ - INFO - [app.py:494] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-01-20 01:20:15,016 - __main__ - INFO - [app.py:495] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-20 01:20:15,016 - __main__ - INFO - [app.py:496] - Maximum audio length: 300 seconds
2025-01-20 01:20:15,016 - __main__ - INFO - [app.py:497] - Sample rate: 16000 Hz
2025-01-20 01:20:15,016 - __main__ - INFO - [app.py:501] - System memory: 36.0GB total, 10.8GB available
2025-01-20 01:20:15,016 - __main__ - INFO - [app.py:502] - CPU cores: 11
2025-01-20 01:20:15,016 - __main__ - INFO - [app.py:510] - Configuration:
2025-01-20 01:20:15,016 - __main__ - INFO - [app.py:511] - - Debug mode: False
2025-01-20 01:20:15,017 - __main__ - INFO - [app.py:512] - - CORS enabled: True
2025-01-20 01:20:15,017 - __main__ - INFO - [app.py:513] - - Rate limiting: 10 requests per minute
2025-01-20 01:20:15,017 - __main__ - INFO - [app.py:514] - - Metrics enabled: True (port 8000)
2025-01-20 01:20:15,017 - __main__ - INFO - [app.py:516] - ==================================================
2025-01-20 01:23:51,060 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.52MB
2025-01-20 01:23:51,062 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-20 01:23:53,100 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 2.03s, Memory Change: -37.80MB
2025-01-20 01:23:53,100 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 2.03s
2025-01-20 01:24:03,841 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-20 01:24:03,842 - services.translation_routes - INFO - [translation_routes.py:29] - Starting translation request 82993986
2025-01-20 01:24:03,842 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-20 01:24:03,843 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-20 01:24:03,849 - services.translation_routes - INFO - [translation_routes.py:86] - Request 82993986: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpoa3ktsj2.wav
2025-01-20 01:24:03,852 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 52.42 seconds
2025-01-20 01:24:03,852 - services.translation_routes - INFO - [translation_routes.py:99] - Request 82993986: Beginning audio processing with diagnostics
2025-01-20 01:24:03,852 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpoa3ktsj2.wav
2025-01-20 01:24:03,853 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 48000, Channels: 2
2025-01-20 01:24:03,879 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([2, 2516115]), Frequency: 48000Hz
2025-01-20 01:24:03,879 - services.audio_processor - INFO - [audio_processor.py:219] - Resampling from 48000Hz to 16000Hz
2025-01-20 01:24:06,044 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-20 01:24:06,049 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-20 01:24:06,115 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-20 01:24:06,208 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-20 01:24:06,211 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-20 01:24:06,231 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-20 01:24:06,231 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-20 01:24:06,248 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-20 01:24:06,248 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-20 01:24:06,265 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-20 01:24:06,265 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-20 01:24:08,184 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-20 01:24:08,184 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-20 01:24:08,332 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-20 01:24:08,333 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-20 01:24:08,348 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-20 01:24:08,349 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-20 01:24:08,365 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-20 01:24:08,365 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-20 01:24:08,381 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-20 01:24:08,381 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-20 01:24:10,134 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-20 01:24:10,134 - services.translation_routes - INFO - [translation_routes.py:110] - 
==================================================
2025-01-20 01:24:10,134 - services.translation_routes - INFO - [translation_routes.py:111] - Input Audio Quality Report
2025-01-20 01:24:10,134 - services.translation_routes - INFO - [translation_routes.py:112] - ==================================================
2025-01-20 01:24:10,134 - services.translation_routes - INFO - [translation_routes.py:113] - Request ID: 82993986
2025-01-20 01:24:10,134 - services.translation_routes - INFO - [translation_routes.py:114] - Target Language: fra
2025-01-20 01:24:10,134 - services.translation_routes - INFO - [translation_routes.py:115] - --------------------------------------------------
2025-01-20 01:24:10,134 - services.translation_routes - INFO - [translation_routes.py:116] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.036
- Rms Level: 0.077
- Crest Factor: 12.378
- Zero Crossings: 468467.000
- Silence Percentage: 35.160
- Clipping Points: 0.000
- Dynamic Range: 9128175.349

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 0.000
  - Temporal Variation: 0.137
  - Temporal Flatness: 0.061

- Volume Metrics:
  - Volume Stability: -0.142
  - Volume Range: 37566521.764
  - Volume Variations: 0.058

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0124004758728593
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.7600672841072083, 'stability': 1.425754427909851, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.41630202531814575, 'distinction': 0.1015029102563858}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.517
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.413
  - Rhythm Quality: 0.395
  - Intonation Quality: 0.431

Vowel Quality:
  - Quality Score: 0.006
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-20 01:24:10,134 - services.translation_routes - INFO - [translation_routes.py:117] - ==================================================

2025-01-20 01:24:10,135 - services.translation_routes - INFO - [translation_routes.py:128] - Request 82993986: Audio processed successfully
2025-01-20 01:24:10,182 - services.translation_routes - INFO - [translation_routes.py:147] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-20 01:24:33,418 - services.translation_routes - INFO - [translation_routes.py:185] - Source text: The main thing is to make sure you're balanced on both feet, hands up, elbows in, a lot of people box with their elbows like this.
2025-01-20 01:24:49,072 - services.translation_routes - INFO - [translation_routes.py:204] - Target text: [Musique épique]
2025-01-20 01:25:24,333 - services.translation_routes - INFO - [translation_routes.py:227] - Processing tuple output from model
2025-01-20 01:25:24,342 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-20 01:25:24,342 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-20 01:25:24,345 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-20 01:25:24,346 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-20 01:25:24,349 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-20 01:25:24,350 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-20 01:25:24,352 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-20 01:25:24,352 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-20 01:25:24,471 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-20 01:25:24,471 - services.translation_routes - INFO - [translation_routes.py:251] - 
==================================================
2025-01-20 01:25:24,471 - services.translation_routes - INFO - [translation_routes.py:252] - Translated Audio Quality Report
2025-01-20 01:25:24,471 - services.translation_routes - INFO - [translation_routes.py:253] - ==================================================
2025-01-20 01:25:24,471 - services.translation_routes - INFO - [translation_routes.py:254] - Request ID: 82993986
2025-01-20 01:25:24,471 - services.translation_routes - INFO - [translation_routes.py:255] - Target Language: fra
2025-01-20 01:25:24,471 - services.translation_routes - INFO - [translation_routes.py:256] - --------------------------------------------------
2025-01-20 01:25:24,471 - services.translation_routes - INFO - [translation_routes.py:257] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.702
- Avg Amplitude: 0.058
- Rms Level: 0.095
- Crest Factor: 7.389
- Zero Crossings: 10257.000
- Silence Percentage: 11.367
- Clipping Points: 0.000
- Dynamic Range: 199.144

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.076
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.028
  - Temporal Flatness: 0.015

- Volume Metrics:
  - Volume Stability: 0.249
  - Volume Range: 174.700
  - Volume Variations: 0.058

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.025735410379754
- Background Noise: 3.955403629409288
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.7432696223258972, 'stability': 3.026303291320801, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.0, 'distinction': 1.0}
  - Description: Strong nasal resonance. Unstable nasal resonance. Clear distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.465
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.005
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-20 01:25:24,471 - services.translation_routes - INFO - [translation_routes.py:258] - ==================================================

2025-01-20 01:25:24,471 - services.translation_routes - INFO - [translation_routes.py:264] - Request 82993986: Audio output processed successfully
2025-01-20 01:25:24,474 - services.translation_routes - INFO - [translation_routes.py:317] - Request 82993986: Response prepared successfully
2025-01-20 01:25:24,475 - services.translation_routes - INFO - [translation_routes.py:328] - Request 82993986 completed in 80.63s
2025-01-20 01:25:24,476 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 80.63s, Memory Change: 1418.39MB
2025-01-20 01:25:24,476 - __main__ - INFO - [app.py:278] - Request to /translate took 88.92s
2025-01-21 00:59:15,535 - __main__ - INFO - [app.py:217] - Received SIGINT signal
2025-01-21 00:59:15,538 - __main__ - INFO - [app.py:202] - Initiating graceful shutdown...
2025-01-21 00:59:20,544 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-21 00:59:20,546 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-21 00:59:20,546 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-21 00:59:20,548 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-21 00:59:20,550 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-21 00:59:20,550 - __main__ - INFO - [app.py:206] - Graceful shutdown completed
2025-01-21 00:59:20,553 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-21 00:59:20,553 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-21 00:59:20,554 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-21 00:59:20,557 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-21 00:59:20,558 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-21 00:59:20,558 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-21 00:59:20,559 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-21 00:59:20,560 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-21 00:59:20,561 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-21 00:59:20,561 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-21 01:00:24,222 - __main__ - INFO - [app.py:467] - Metrics server started on port 8000
2025-01-21 01:00:24,222 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-21 01:00:37,450 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-21 01:00:49,872 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-21 01:00:49,874 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-21 01:00:54,763 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-21 01:00:54,765 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-21 01:00:54,765 - __main__ - INFO - [app.py:491] - ==================================================
2025-01-21 01:00:54,765 - __main__ - INFO - [app.py:492] - Starting LinguaSync Backend
2025-01-21 01:00:54,765 - __main__ - INFO - [app.py:493] - Starting Flask app on port 5001 using cpu
2025-01-21 01:00:54,765 - __main__ - INFO - [app.py:494] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-01-21 01:00:54,765 - __main__ - INFO - [app.py:495] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-21 01:00:54,765 - __main__ - INFO - [app.py:496] - Maximum audio length: 300 seconds
2025-01-21 01:00:54,765 - __main__ - INFO - [app.py:497] - Sample rate: 16000 Hz
2025-01-21 01:00:54,765 - __main__ - INFO - [app.py:501] - System memory: 36.0GB total, 14.8GB available
2025-01-21 01:00:54,765 - __main__ - INFO - [app.py:502] - CPU cores: 11
2025-01-21 01:00:54,765 - __main__ - INFO - [app.py:510] - Configuration:
2025-01-21 01:00:54,765 - __main__ - INFO - [app.py:511] - - Debug mode: False
2025-01-21 01:00:54,765 - __main__ - INFO - [app.py:512] - - CORS enabled: True
2025-01-21 01:00:54,765 - __main__ - INFO - [app.py:513] - - Rate limiting: 10 requests per minute
2025-01-21 01:00:54,765 - __main__ - INFO - [app.py:514] - - Metrics enabled: True (port 8000)
2025-01-21 01:00:54,765 - __main__ - INFO - [app.py:516] - ==================================================
2025-01-21 01:02:55,300 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-01-21 01:02:55,302 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-21 01:02:55,307 - services.audio_link_routes - ERROR - [audio_link_routes.py:104] - Spotify processing error: No client_id. Pass it or set a SPOTIPY_CLIENT_ID environment variable.
2025-01-21 01:02:55,307 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.38MB
2025-01-21 01:02:55,308 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-21 01:08:31,363 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-01-21 01:08:31,365 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-21 01:08:31,368 - services.audio_link_routes - ERROR - [audio_link_routes.py:104] - Spotify processing error: No client_id. Pass it or set a SPOTIPY_CLIENT_ID environment variable.
2025-01-21 01:08:31,369 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.02MB
2025-01-21 01:08:31,369 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-21 01:11:09,809 - __main__ - INFO - [app.py:217] - Received SIGINT signal
2025-01-21 01:11:09,811 - __main__ - INFO - [app.py:202] - Initiating graceful shutdown...
2025-01-21 01:11:14,814 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-21 01:11:14,815 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-21 01:11:14,815 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-21 01:11:14,817 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-21 01:11:14,817 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-21 01:11:14,818 - __main__ - INFO - [app.py:206] - Graceful shutdown completed
2025-01-21 01:11:14,820 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-21 01:11:14,821 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-21 01:11:14,821 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-21 01:11:14,822 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-21 01:11:14,823 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-21 01:11:14,823 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-21 01:11:14,823 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-21 01:11:14,823 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-21 01:11:14,824 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-21 01:11:14,824 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-21 01:11:35,095 - __main__ - INFO - [app.py:467] - Metrics server started on port 8000
2025-01-21 01:11:35,095 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-21 01:11:47,953 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-21 01:11:56,286 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-21 01:11:56,290 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-21 01:12:01,304 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-21 01:12:01,305 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-21 01:12:01,305 - __main__ - INFO - [app.py:491] - ==================================================
2025-01-21 01:12:01,305 - __main__ - INFO - [app.py:492] - Starting LinguaSync Backend
2025-01-21 01:12:01,305 - __main__ - INFO - [app.py:493] - Starting Flask app on port 5001 using cpu
2025-01-21 01:12:01,305 - __main__ - INFO - [app.py:494] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-01-21 01:12:01,305 - __main__ - INFO - [app.py:495] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-21 01:12:01,305 - __main__ - INFO - [app.py:496] - Maximum audio length: 300 seconds
2025-01-21 01:12:01,305 - __main__ - INFO - [app.py:497] - Sample rate: 16000 Hz
2025-01-21 01:12:01,305 - __main__ - INFO - [app.py:501] - System memory: 36.0GB total, 15.0GB available
2025-01-21 01:12:01,305 - __main__ - INFO - [app.py:502] - CPU cores: 11
2025-01-21 01:12:01,305 - __main__ - INFO - [app.py:510] - Configuration:
2025-01-21 01:12:01,305 - __main__ - INFO - [app.py:511] - - Debug mode: False
2025-01-21 01:12:01,305 - __main__ - INFO - [app.py:512] - - CORS enabled: True
2025-01-21 01:12:01,305 - __main__ - INFO - [app.py:513] - - Rate limiting: 10 requests per minute
2025-01-21 01:12:01,305 - __main__ - INFO - [app.py:514] - - Metrics enabled: True (port 8000)
2025-01-21 01:12:01,305 - __main__ - INFO - [app.py:516] - ==================================================
2025-01-21 01:12:41,390 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-01-21 01:12:41,392 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-21 01:12:41,395 - services.audio_link_routes - ERROR - [audio_link_routes.py:104] - Spotify processing error: No client_id. Pass it or set a SPOTIPY_CLIENT_ID environment variable.
2025-01-21 01:12:41,396 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.02MB
2025-01-21 01:12:41,396 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-21 01:21:27,405 - __main__ - INFO - [app.py:217] - Received SIGINT signal
2025-01-21 01:21:27,407 - __main__ - INFO - [app.py:202] - Initiating graceful shutdown...
2025-01-21 01:21:32,412 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-21 01:21:32,413 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-21 01:21:32,413 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-21 01:21:32,415 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-21 01:21:32,415 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-21 01:21:32,415 - __main__ - INFO - [app.py:206] - Graceful shutdown completed
2025-01-21 01:21:32,416 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-21 01:21:32,416 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-21 01:21:32,416 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-21 01:21:32,417 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-21 01:21:32,418 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-21 01:21:32,418 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-21 01:21:32,418 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-21 01:21:32,418 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-21 01:21:32,419 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-21 01:21:32,419 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-21 01:22:14,604 - __main__ - INFO - [app.py:467] - Metrics server started on port 8000
2025-01-21 01:22:14,604 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-21 01:22:27,554 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-21 01:22:33,749 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-21 01:22:33,750 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-21 01:22:38,428 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-21 01:22:38,429 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-21 01:22:38,430 - __main__ - INFO - [app.py:491] - ==================================================
2025-01-21 01:22:38,430 - __main__ - INFO - [app.py:492] - Starting LinguaSync Backend
2025-01-21 01:22:38,430 - __main__ - INFO - [app.py:493] - Starting Flask app on port 5001 using cpu
2025-01-21 01:22:38,430 - __main__ - INFO - [app.py:494] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-01-21 01:22:38,430 - __main__ - INFO - [app.py:495] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-21 01:22:38,430 - __main__ - INFO - [app.py:496] - Maximum audio length: 300 seconds
2025-01-21 01:22:38,430 - __main__ - INFO - [app.py:497] - Sample rate: 16000 Hz
2025-01-21 01:22:38,430 - __main__ - INFO - [app.py:501] - System memory: 36.0GB total, 13.7GB available
2025-01-21 01:22:38,430 - __main__ - INFO - [app.py:502] - CPU cores: 11
2025-01-21 01:22:38,430 - __main__ - INFO - [app.py:510] - Configuration:
2025-01-21 01:22:38,430 - __main__ - INFO - [app.py:511] - - Debug mode: False
2025-01-21 01:22:38,430 - __main__ - INFO - [app.py:512] - - CORS enabled: True
2025-01-21 01:22:38,430 - __main__ - INFO - [app.py:513] - - Rate limiting: 10 requests per minute
2025-01-21 01:22:38,430 - __main__ - INFO - [app.py:514] - - Metrics enabled: True (port 8000)
2025-01-21 01:22:38,430 - __main__ - INFO - [app.py:516] - ==================================================
2025-01-21 01:23:51,753 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-01-21 01:23:51,755 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-21 01:23:51,760 - services.audio_link_routes - ERROR - [audio_link_routes.py:104] - Spotify processing error: No client_id. Pass it or set a SPOTIPY_CLIENT_ID environment variable.
2025-01-21 01:23:51,761 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.02MB
2025-01-21 01:23:51,761 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-21 01:24:25,540 - services.audio_link_routes - ERROR - [audio_link_routes.py:104] - Spotify processing error: No client_id. Pass it or set a SPOTIPY_CLIENT_ID environment variable.
2025-01-21 01:24:25,543 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-01-21 01:24:25,543 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-21 01:24:26,595 - services.audio_link_routes - ERROR - [audio_link_routes.py:104] - Spotify processing error: No client_id. Pass it or set a SPOTIPY_CLIENT_ID environment variable.
2025-01-21 01:24:26,596 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-01-21 01:24:26,596 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-21 01:24:27,496 - services.audio_link_routes - ERROR - [audio_link_routes.py:104] - Spotify processing error: No client_id. Pass it or set a SPOTIPY_CLIENT_ID environment variable.
2025-01-21 01:24:27,497 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-01-21 01:24:27,498 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-21 01:24:28,208 - services.audio_link_routes - ERROR - [audio_link_routes.py:104] - Spotify processing error: No client_id. Pass it or set a SPOTIPY_CLIENT_ID environment variable.
2025-01-21 01:24:28,210 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-01-21 01:24:28,210 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-21 01:24:28,765 - services.audio_link_routes - ERROR - [audio_link_routes.py:104] - Spotify processing error: No client_id. Pass it or set a SPOTIPY_CLIENT_ID environment variable.
2025-01-21 01:24:28,766 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-01-21 01:24:28,767 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-21 01:24:29,923 - services.audio_link_routes - ERROR - [audio_link_routes.py:104] - Spotify processing error: No client_id. Pass it or set a SPOTIPY_CLIENT_ID environment variable.
2025-01-21 01:24:29,924 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-01-21 01:24:29,924 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-21 01:24:30,495 - services.audio_link_routes - ERROR - [audio_link_routes.py:104] - Spotify processing error: No client_id. Pass it or set a SPOTIPY_CLIENT_ID environment variable.
2025-01-21 01:24:30,496 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-01-21 01:24:30,496 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-21 01:24:31,442 - services.audio_link_routes - ERROR - [audio_link_routes.py:104] - Spotify processing error: No client_id. Pass it or set a SPOTIPY_CLIENT_ID environment variable.
2025-01-21 01:24:31,444 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-01-21 01:24:31,444 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-21 22:13:30,822 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.56MB
2025-01-21 22:13:30,824 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-21 22:13:33,433 - services.audio_link_routes - ERROR - [audio_link_routes.py:61] - YouTube processing error: Failed to download audio
2025-01-21 22:13:33,434 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 2.61s, Memory Change: 95.19MB
2025-01-21 22:13:33,434 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 2.61s
2025-01-21 22:21:52,030 - __main__ - INFO - [app.py:217] - Received SIGINT signal
2025-01-21 22:21:52,031 - __main__ - INFO - [app.py:202] - Initiating graceful shutdown...
2025-01-21 22:21:57,035 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-21 22:21:57,036 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-21 22:21:57,037 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-21 22:21:57,039 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-21 22:21:57,040 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-21 22:21:57,040 - __main__ - INFO - [app.py:206] - Graceful shutdown completed
2025-01-21 22:21:57,041 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-21 22:21:57,041 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-21 22:21:57,041 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-21 22:21:57,042 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-21 22:21:57,042 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-21 22:21:57,042 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-21 22:21:57,042 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-21 22:21:57,042 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-21 22:21:57,043 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-21 22:21:57,043 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-22 16:43:58,139 - __main__ - INFO - [app.py:467] - Metrics server started on port 8000
2025-01-22 16:43:58,140 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-22 16:44:11,152 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-22 16:44:25,741 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-22 16:44:25,742 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-22 16:44:30,546 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-22 16:44:30,548 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-22 16:44:30,548 - __main__ - INFO - [app.py:491] - ==================================================
2025-01-22 16:44:30,548 - __main__ - INFO - [app.py:492] - Starting LinguaSync Backend
2025-01-22 16:44:30,548 - __main__ - INFO - [app.py:493] - Starting Flask app on port 5001 using cpu
2025-01-22 16:44:30,548 - __main__ - INFO - [app.py:494] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-01-22 16:44:30,548 - __main__ - INFO - [app.py:495] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-22 16:44:30,548 - __main__ - INFO - [app.py:496] - Maximum audio length: 300 seconds
2025-01-22 16:44:30,548 - __main__ - INFO - [app.py:497] - Sample rate: 16000 Hz
2025-01-22 16:44:30,548 - __main__ - INFO - [app.py:501] - System memory: 36.0GB total, 16.2GB available
2025-01-22 16:44:30,548 - __main__ - INFO - [app.py:502] - CPU cores: 11
2025-01-22 16:44:30,548 - __main__ - INFO - [app.py:510] - Configuration:
2025-01-22 16:44:30,549 - __main__ - INFO - [app.py:511] - - Debug mode: False
2025-01-22 16:44:30,549 - __main__ - INFO - [app.py:512] - - CORS enabled: True
2025-01-22 16:44:30,549 - __main__ - INFO - [app.py:513] - - Rate limiting: 10 requests per minute
2025-01-22 16:44:30,549 - __main__ - INFO - [app.py:514] - - Metrics enabled: True (port 8000)
2025-01-22 16:44:30,549 - __main__ - INFO - [app.py:516] - ==================================================
2025-01-22 16:46:57,247 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-01-22 16:46:57,248 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-22 16:46:59,870 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 2.62s, Memory Change: 5.09MB
2025-01-22 16:46:59,870 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 2.62s
2025-01-22 16:47:24,100 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-22 16:47:24,101 - services.translation_routes - INFO - [translation_routes.py:29] - Starting translation request cb93ac87
2025-01-22 16:47:24,102 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-22 16:47:24,102 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-22 16:47:24,103 - services.translation_routes - INFO - [translation_routes.py:86] - Request cb93ac87: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpdh263_47.wav
2025-01-22 16:47:24,106 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 14.72 seconds
2025-01-22 16:47:24,106 - services.translation_routes - INFO - [translation_routes.py:99] - Request cb93ac87: Beginning audio processing with diagnostics
2025-01-22 16:47:24,106 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpdh263_47.wav
2025-01-22 16:47:24,106 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 48000, Channels: 2
2025-01-22 16:47:24,114 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([2, 706630]), Frequency: 48000Hz
2025-01-22 16:47:24,115 - services.audio_processor - INFO - [audio_processor.py:219] - Resampling from 48000Hz to 16000Hz
2025-01-22 16:47:24,391 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-22 16:47:24,394 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-22 16:47:24,428 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-22 16:47:24,474 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-22 16:47:24,477 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-22 16:47:24,488 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-22 16:47:24,488 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-22 16:47:24,495 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-22 16:47:24,495 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-22 16:47:24,504 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-22 16:47:24,505 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-22 16:47:25,137 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-22 16:47:25,138 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-22 16:47:25,178 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-22 16:47:25,179 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-22 16:47:25,184 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-22 16:47:25,184 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-22 16:47:25,191 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-22 16:47:25,192 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-22 16:47:25,197 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-22 16:47:25,197 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-22 16:47:25,835 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-22 16:47:25,835 - services.translation_routes - INFO - [translation_routes.py:110] - 
==================================================
2025-01-22 16:47:25,835 - services.translation_routes - INFO - [translation_routes.py:111] - Input Audio Quality Report
2025-01-22 16:47:25,835 - services.translation_routes - INFO - [translation_routes.py:112] - ==================================================
2025-01-22 16:47:25,835 - services.translation_routes - INFO - [translation_routes.py:113] - Request ID: cb93ac87
2025-01-22 16:47:25,835 - services.translation_routes - INFO - [translation_routes.py:114] - Target Language: fra
2025-01-22 16:47:25,835 - services.translation_routes - INFO - [translation_routes.py:115] - --------------------------------------------------
2025-01-22 16:47:25,835 - services.translation_routes - INFO - [translation_routes.py:116] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.044
- Rms Level: 0.071
- Crest Factor: 13.338
- Zero Crossings: 119371.000
- Silence Percentage: 18.952
- Clipping Points: 0.000
- Dynamic Range: 9441643.984

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 0.000
  - Temporal Variation: 0.110
  - Temporal Flatness: 0.064

- Volume Metrics:
  - Volume Stability: 0.528
  - Volume Range: 17379805.446
  - Volume Variations: 0.030

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0106805384694932
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 1.9114741086959839, 'stability': 2.0176730155944824, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.5319951176643372, 'distinction': 0.08972425013780594}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.394
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.591
  - Rhythm Quality: 0.609
  - Intonation Quality: 0.573

Vowel Quality:
  - Quality Score: 0.030
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-22 16:47:25,835 - services.translation_routes - INFO - [translation_routes.py:117] - ==================================================

2025-01-22 16:47:25,836 - services.translation_routes - INFO - [translation_routes.py:128] - Request cb93ac87: Audio processed successfully
2025-01-22 16:47:25,851 - services.translation_routes - INFO - [translation_routes.py:147] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-22 16:47:32,606 - services.translation_routes - INFO - [translation_routes.py:185] - Source text: Booster now hovering as it aligns with the tower or down to three engines
2025-01-22 16:47:40,442 - services.translation_routes - INFO - [translation_routes.py:204] - Target text: Booster maintenant flottant comme il s'aligne avec la tour&nbsp; pour toucher les trois moteurs
2025-01-22 16:47:50,835 - services.translation_routes - INFO - [translation_routes.py:227] - Processing tuple output from model
2025-01-22 16:47:50,843 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-22 16:47:50,844 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-22 16:47:50,847 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-22 16:47:50,848 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-22 16:47:50,852 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-22 16:47:50,852 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-22 16:47:50,856 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-22 16:47:50,856 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-22 16:47:50,974 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-22 16:47:50,974 - services.translation_routes - INFO - [translation_routes.py:251] - 
==================================================
2025-01-22 16:47:50,974 - services.translation_routes - INFO - [translation_routes.py:252] - Translated Audio Quality Report
2025-01-22 16:47:50,974 - services.translation_routes - INFO - [translation_routes.py:253] - ==================================================
2025-01-22 16:47:50,974 - services.translation_routes - INFO - [translation_routes.py:254] - Request ID: cb93ac87
2025-01-22 16:47:50,974 - services.translation_routes - INFO - [translation_routes.py:255] - Target Language: fra
2025-01-22 16:47:50,974 - services.translation_routes - INFO - [translation_routes.py:256] - --------------------------------------------------
2025-01-22 16:47:50,974 - services.translation_routes - INFO - [translation_routes.py:257] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.596
- Avg Amplitude: 0.059
- Rms Level: 0.098
- Crest Factor: 6.114
- Zero Crossings: 9701.000
- Silence Percentage: 19.814
- Clipping Points: 0.000
- Dynamic Range: 530.368

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.236
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.029
  - Temporal Flatness: 0.015

- Volume Metrics:
  - Volume Stability: 0.241
  - Volume Range: 1290.852
  - Volume Variations: 0.059

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.031910880528552
- Background Noise: 3.445415417248203
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.8043986558914185, 'stability': 3.027261257171631, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.10401983559131622, 'consistency': 0.0, 'distinction': 1.0}
  - Description: Strong nasal resonance. Unstable nasal resonance. Clear distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.560
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.004
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-22 16:47:50,974 - services.translation_routes - INFO - [translation_routes.py:258] - ==================================================

2025-01-22 16:47:50,974 - services.translation_routes - INFO - [translation_routes.py:264] - Request cb93ac87: Audio output processed successfully
2025-01-22 16:47:50,978 - services.translation_routes - INFO - [translation_routes.py:317] - Request cb93ac87: Response prepared successfully
2025-01-22 16:47:50,978 - services.translation_routes - INFO - [translation_routes.py:328] - Request cb93ac87 completed in 26.88s
2025-01-22 16:47:50,978 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 26.88s, Memory Change: 754.08MB
2025-01-22 16:47:50,978 - __main__ - INFO - [app.py:278] - Request to /translate took 34.59s
2025-01-22 16:53:00,798 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-01-22 16:53:00,799 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-22 16:53:00,808 - services.audio_link_routes - ERROR - [audio_link_routes.py:104] - Spotify processing error: No client_id. Pass it or set a SPOTIPY_CLIENT_ID environment variable.
2025-01-22 16:53:00,810 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: -0.02MB
2025-01-22 16:53:00,811 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-22 17:01:42,845 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-01-22 17:01:42,846 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-22 17:01:42,855 - services.audio_link_routes - ERROR - [audio_link_routes.py:104] - Spotify processing error: No client_id. Pass it or set a SPOTIPY_CLIENT_ID environment variable.
2025-01-22 17:01:42,855 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.02MB
2025-01-22 17:01:42,856 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-22 17:02:03,105 - __main__ - INFO - [app.py:217] - Received SIGINT signal
2025-01-22 17:02:03,106 - __main__ - INFO - [app.py:202] - Initiating graceful shutdown...
2025-01-22 17:02:08,109 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-22 17:02:08,110 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-22 17:02:08,111 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-22 17:02:08,112 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-22 17:02:08,113 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-22 17:02:08,113 - __main__ - INFO - [app.py:206] - Graceful shutdown completed
2025-01-22 17:02:08,114 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-22 17:02:08,115 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-22 17:02:08,115 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-22 17:02:08,116 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-22 17:02:08,116 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-22 17:02:08,117 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-22 17:02:08,117 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-22 17:02:08,117 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-22 17:02:08,118 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-22 17:02:08,119 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-22 17:04:00,756 - __main__ - INFO - [app.py:467] - Metrics server started on port 8000
2025-01-22 17:04:00,756 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-22 17:04:14,531 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-22 17:04:21,205 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-22 17:04:21,207 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-22 17:04:26,747 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-22 17:04:26,749 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-22 17:04:26,749 - __main__ - INFO - [app.py:491] - ==================================================
2025-01-22 17:04:26,749 - __main__ - INFO - [app.py:492] - Starting LinguaSync Backend
2025-01-22 17:04:26,749 - __main__ - INFO - [app.py:493] - Starting Flask app on port 5001 using cpu
2025-01-22 17:04:26,749 - __main__ - INFO - [app.py:494] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-01-22 17:04:26,749 - __main__ - INFO - [app.py:495] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-22 17:04:26,749 - __main__ - INFO - [app.py:496] - Maximum audio length: 300 seconds
2025-01-22 17:04:26,749 - __main__ - INFO - [app.py:497] - Sample rate: 16000 Hz
2025-01-22 17:04:26,749 - __main__ - INFO - [app.py:501] - System memory: 36.0GB total, 15.7GB available
2025-01-22 17:04:26,749 - __main__ - INFO - [app.py:502] - CPU cores: 11
2025-01-22 17:04:26,749 - __main__ - INFO - [app.py:510] - Configuration:
2025-01-22 17:04:26,749 - __main__ - INFO - [app.py:511] - - Debug mode: False
2025-01-22 17:04:26,749 - __main__ - INFO - [app.py:512] - - CORS enabled: True
2025-01-22 17:04:26,749 - __main__ - INFO - [app.py:513] - - Rate limiting: 10 requests per minute
2025-01-22 17:04:26,749 - __main__ - INFO - [app.py:514] - - Metrics enabled: True (port 8000)
2025-01-22 17:04:26,749 - __main__ - INFO - [app.py:516] - ==================================================
2025-01-22 17:06:50,035 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-01-22 17:06:50,035 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-22 17:06:50,275 - services.audio_link_routes - ERROR - [audio_link_routes.py:104] - Spotify processing error: No preview available for this track
2025-01-22 17:06:50,277 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.24s, Memory Change: 0.09MB
2025-01-22 17:06:50,278 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.24s
2025-01-22 17:07:41,403 - services.audio_link_routes - ERROR - [audio_link_routes.py:104] - Spotify processing error: No preview available for this track
2025-01-22 17:07:41,405 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.11s, Memory Change: -0.03MB
2025-01-22 17:07:41,406 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.11s
2025-01-22 17:08:08,896 - services.audio_link_routes - ERROR - [audio_link_routes.py:104] - Spotify processing error: Invalid Spotify URL
2025-01-22 17:08:08,897 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-01-22 17:08:08,897 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-22 17:12:55,834 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-01-22 17:12:55,834 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-22 17:12:55,978 - services.audio_link_routes - ERROR - [audio_link_routes.py:104] - Spotify processing error: No preview available for this track
2025-01-22 17:12:55,979 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.14s, Memory Change: 0.00MB
2025-01-22 17:12:55,979 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.14s
2025-01-22 17:13:25,348 - services.audio_link_routes - ERROR - [audio_link_routes.py:104] - Spotify processing error: No preview available for this track
2025-01-22 17:13:25,350 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.13s, Memory Change: -0.03MB
2025-01-22 17:13:25,351 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.13s
2025-01-22 17:13:42,770 - services.audio_link_routes - ERROR - [audio_link_routes.py:104] - Spotify processing error: No preview available for this track
2025-01-22 17:13:42,772 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.13s, Memory Change: -0.03MB
2025-01-22 17:13:42,773 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.13s
2025-01-22 17:13:48,751 - services.audio_link_routes - ERROR - [audio_link_routes.py:104] - Spotify processing error: No preview available for this track
2025-01-22 17:13:48,753 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.13s, Memory Change: -0.03MB
2025-01-22 17:13:48,753 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.13s
2025-01-22 17:14:12,616 - services.audio_link_routes - ERROR - [audio_link_routes.py:104] - Spotify processing error: No preview available for this track
2025-01-22 17:14:12,618 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.14s, Memory Change: -0.03MB
2025-01-22 17:14:12,618 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.14s
2025-01-22 17:14:41,082 - services.audio_link_routes - ERROR - [audio_link_routes.py:104] - Spotify processing error: No preview available for this track
2025-01-22 17:14:41,084 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.13s, Memory Change: -0.03MB
2025-01-22 17:14:41,084 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.13s
2025-01-22 17:15:07,297 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-01-22 17:15:07,297 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-22 17:15:07,390 - services.audio_link_routes - ERROR - [audio_link_routes.py:104] - Spotify processing error: No preview available for this track
2025-01-22 17:15:07,392 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.09s, Memory Change: 0.02MB
2025-01-22 17:15:07,392 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.09s
2025-01-22 17:32:40,078 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-01-22 17:32:40,080 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-22 17:32:40,206 - services.audio_link_routes - ERROR - [audio_link_routes.py:104] - Spotify processing error: No preview available for this track
2025-01-22 17:32:40,207 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.12s, Memory Change: -0.02MB
2025-01-22 17:32:40,208 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.12s
2025-01-22 17:33:46,211 - __main__ - INFO - [app.py:217] - Received SIGINT signal
2025-01-22 17:33:46,212 - __main__ - INFO - [app.py:202] - Initiating graceful shutdown...
2025-01-22 17:33:51,218 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-22 17:33:51,219 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-22 17:33:51,219 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-22 17:33:51,221 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-22 17:33:51,222 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-22 17:33:51,222 - __main__ - INFO - [app.py:206] - Graceful shutdown completed
2025-01-22 17:33:51,223 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-22 17:33:51,223 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-22 17:33:51,224 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-22 17:33:51,224 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-22 17:33:51,225 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-22 17:33:51,225 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-22 17:33:51,226 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-22 17:33:51,226 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-22 17:33:51,227 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-22 17:33:51,227 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-22 17:33:59,762 - __main__ - INFO - [app.py:467] - Metrics server started on port 8000
2025-01-22 17:33:59,762 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-22 17:34:12,673 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-22 17:34:19,063 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-22 17:34:19,065 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-22 17:34:24,249 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-22 17:34:24,251 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-22 17:34:24,251 - __main__ - INFO - [app.py:491] - ==================================================
2025-01-22 17:34:24,251 - __main__ - INFO - [app.py:492] - Starting LinguaSync Backend
2025-01-22 17:34:24,251 - __main__ - INFO - [app.py:493] - Starting Flask app on port 5001 using cpu
2025-01-22 17:34:24,251 - __main__ - INFO - [app.py:494] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-01-22 17:34:24,251 - __main__ - INFO - [app.py:495] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-22 17:34:24,251 - __main__ - INFO - [app.py:496] - Maximum audio length: 300 seconds
2025-01-22 17:34:24,251 - __main__ - INFO - [app.py:497] - Sample rate: 16000 Hz
2025-01-22 17:34:24,251 - __main__ - INFO - [app.py:501] - System memory: 36.0GB total, 15.8GB available
2025-01-22 17:34:24,251 - __main__ - INFO - [app.py:502] - CPU cores: 11
2025-01-22 17:34:24,251 - __main__ - INFO - [app.py:510] - Configuration:
2025-01-22 17:34:24,251 - __main__ - INFO - [app.py:511] - - Debug mode: False
2025-01-22 17:34:24,251 - __main__ - INFO - [app.py:512] - - CORS enabled: True
2025-01-22 17:34:24,251 - __main__ - INFO - [app.py:513] - - Rate limiting: 10 requests per minute
2025-01-22 17:34:24,251 - __main__ - INFO - [app.py:514] - - Metrics enabled: True (port 8000)
2025-01-22 17:34:24,251 - __main__ - INFO - [app.py:516] - ==================================================
2025-01-22 17:34:44,740 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-01-22 17:34:44,740 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-22 17:34:44,862 - services.audio_link_routes - INFO - [audio_link_routes.py:85] - Converting Spotify track to YouTube search: Blackbird - Remastered 2009 The Beatles audio
2025-01-22 17:34:49,034 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 4.29s, Memory Change: 37.94MB
2025-01-22 17:34:49,034 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 4.29s
2025-01-22 17:34:57,539 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-22 17:34:57,541 - services.translation_routes - INFO - [translation_routes.py:29] - Starting translation request a5d7ebb0
2025-01-22 17:34:57,541 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-22 17:34:57,541 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-22 17:34:57,556 - services.translation_routes - INFO - [translation_routes.py:86] - Request a5d7ebb0: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpkqoxtqjo.wav
2025-01-22 17:34:57,556 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 138.39 seconds
2025-01-22 17:34:57,556 - services.translation_routes - INFO - [translation_routes.py:99] - Request a5d7ebb0: Beginning audio processing with diagnostics
2025-01-22 17:34:57,556 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpkqoxtqjo.wav
2025-01-22 17:34:57,557 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 48000, Channels: 2
2025-01-22 17:34:57,623 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([2, 6642560]), Frequency: 48000Hz
2025-01-22 17:34:57,623 - services.audio_processor - INFO - [audio_processor.py:219] - Resampling from 48000Hz to 16000Hz
2025-01-22 17:35:03,280 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-22 17:35:03,292 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-22 17:35:03,470 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-22 17:35:03,714 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-22 17:35:03,715 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-22 17:35:03,763 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-22 17:35:03,764 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-22 17:35:03,811 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-22 17:35:03,812 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-22 17:35:03,859 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-22 17:35:03,859 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-22 17:35:08,309 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-22 17:35:08,310 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-22 17:35:08,731 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-22 17:35:08,732 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-22 17:35:08,781 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-22 17:35:08,781 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-22 17:35:08,831 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-22 17:35:08,831 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-22 17:35:08,879 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-22 17:35:08,880 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-22 17:35:13,545 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-22 17:35:13,545 - services.translation_routes - INFO - [translation_routes.py:110] - 
==================================================
2025-01-22 17:35:13,545 - services.translation_routes - INFO - [translation_routes.py:111] - Input Audio Quality Report
2025-01-22 17:35:13,545 - services.translation_routes - INFO - [translation_routes.py:112] - ==================================================
2025-01-22 17:35:13,545 - services.translation_routes - INFO - [translation_routes.py:113] - Request ID: a5d7ebb0
2025-01-22 17:35:13,545 - services.translation_routes - INFO - [translation_routes.py:114] - Target Language: fra
2025-01-22 17:35:13,545 - services.translation_routes - INFO - [translation_routes.py:115] - --------------------------------------------------
2025-01-22 17:35:13,545 - services.translation_routes - INFO - [translation_routes.py:116] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.038
- Rms Level: 0.074
- Crest Factor: 12.841
- Zero Crossings: 1050598.000
- Silence Percentage: 31.065
- Clipping Points: 0.000
- Dynamic Range: 10176418.245

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.091
  - Temporal Flatness: 0.048

- Volume Metrics:
  - Volume Stability: -0.030
  - Volume Range: 33138662.577
  - Volume Variations: 0.053

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.01152323681047
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.4135950803756714, 'stability': 0.8007574677467346, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.4870680570602417, 'distinction': 0.2212282121181488}
  - Description: Moderate nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.385
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.390
  - Rhythm Quality: 0.414
  - Intonation Quality: 0.366

Vowel Quality:
  - Quality Score: 0.003
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-22 17:35:13,545 - services.translation_routes - INFO - [translation_routes.py:117] - ==================================================

2025-01-22 17:35:13,546 - services.translation_routes - INFO - [translation_routes.py:128] - Request a5d7ebb0: Audio processed successfully
2025-01-22 17:35:13,890 - services.translation_routes - INFO - [translation_routes.py:147] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-22 17:38:13,378 - services.translation_routes - INFO - [translation_routes.py:185] - Source text: Black bird singing in the dead of night Take these broken wings and learn to fly All your life you're just waiting for this moment to arise
2025-01-22 17:41:06,929 - services.translation_routes - INFO - [translation_routes.py:204] - Target text: ♫ Black bird singing in the dead of night ♫
2025-01-22 17:46:29,770 - services.translation_routes - INFO - [translation_routes.py:227] - Processing tuple output from model
2025-01-22 17:46:29,812 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-22 17:46:29,816 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-22 17:46:29,820 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-22 17:46:29,820 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-22 17:46:29,823 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-22 17:46:29,823 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-22 17:46:29,826 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-22 17:46:29,826 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-22 17:46:29,887 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-22 17:46:29,890 - services.translation_routes - INFO - [translation_routes.py:251] - 
==================================================
2025-01-22 17:46:29,890 - services.translation_routes - INFO - [translation_routes.py:252] - Translated Audio Quality Report
2025-01-22 17:46:29,890 - services.translation_routes - INFO - [translation_routes.py:253] - ==================================================
2025-01-22 17:46:29,890 - services.translation_routes - INFO - [translation_routes.py:254] - Request ID: a5d7ebb0
2025-01-22 17:46:29,890 - services.translation_routes - INFO - [translation_routes.py:255] - Target Language: fra
2025-01-22 17:46:29,890 - services.translation_routes - INFO - [translation_routes.py:256] - --------------------------------------------------
2025-01-22 17:46:29,890 - services.translation_routes - INFO - [translation_routes.py:257] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.800
- Avg Amplitude: 0.065
- Rms Level: 0.102
- Crest Factor: 7.828
- Zero Crossings: 4180.000
- Silence Percentage: 12.188
- Clipping Points: 0.000
- Dynamic Range: 222.855

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.021
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.027
  - Temporal Flatness: 0.014

- Volume Metrics:
  - Volume Stability: 0.265
  - Volume Range: 279.475
  - Volume Variations: 0.061

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0261218309799087
- Background Noise: 4.1312263218165555
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
No issues detected

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.7969030141830444, 'stability': 2.902991533279419, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.7394996881484985, 'consistency': 0.0, 'distinction': 1.0}
  - Description: Strong nasal resonance. Unstable nasal resonance. Clear distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.559
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 1.000

Vowel Quality:
  - Quality Score: 0.005
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-22 17:46:29,890 - services.translation_routes - INFO - [translation_routes.py:258] - ==================================================

2025-01-22 17:46:29,890 - services.translation_routes - INFO - [translation_routes.py:264] - Request a5d7ebb0: Audio output processed successfully
2025-01-22 17:46:29,910 - services.translation_routes - INFO - [translation_routes.py:317] - Request a5d7ebb0: Response prepared successfully
2025-01-22 17:46:29,912 - services.translation_routes - INFO - [translation_routes.py:328] - Request a5d7ebb0 completed in 692.37s
2025-01-22 17:46:29,916 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 692.37s, Memory Change: -6491.53MB
2025-01-22 17:46:29,919 - __main__ - INFO - [app.py:278] - Request to /translate took 697.63s
2025-01-22 23:17:04,289 - __main__ - INFO - [app.py:217] - Received SIGINT signal
2025-01-22 23:17:04,293 - __main__ - INFO - [app.py:202] - Initiating graceful shutdown...
2025-01-22 23:17:09,299 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-22 23:17:09,303 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-22 23:17:09,304 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-22 23:17:09,318 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-22 23:17:09,336 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-22 23:17:09,341 - __main__ - INFO - [app.py:206] - Graceful shutdown completed
2025-01-22 23:17:09,350 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-22 23:17:09,350 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-22 23:17:09,350 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-22 23:17:09,351 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-22 23:17:09,351 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-22 23:17:09,351 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-22 23:17:09,351 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-22 23:17:09,351 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-22 23:17:09,352 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-22 23:17:09,352 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-22 23:17:32,819 - __main__ - INFO - [app.py:467] - Metrics server started on port 8000
2025-01-22 23:17:32,819 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-22 23:17:46,956 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-22 23:17:59,138 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-22 23:17:59,141 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-22 23:18:04,932 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-22 23:18:04,933 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-22 23:18:04,933 - __main__ - INFO - [app.py:491] - ==================================================
2025-01-22 23:18:04,933 - __main__ - INFO - [app.py:492] - Starting LinguaSync Backend
2025-01-22 23:18:04,933 - __main__ - INFO - [app.py:493] - Starting Flask app on port 5001 using cpu
2025-01-22 23:18:04,933 - __main__ - INFO - [app.py:494] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-01-22 23:18:04,933 - __main__ - INFO - [app.py:495] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-22 23:18:04,934 - __main__ - INFO - [app.py:496] - Maximum audio length: 300 seconds
2025-01-22 23:18:04,934 - __main__ - INFO - [app.py:497] - Sample rate: 16000 Hz
2025-01-22 23:18:04,934 - __main__ - INFO - [app.py:501] - System memory: 36.0GB total, 17.6GB available
2025-01-22 23:18:04,934 - __main__ - INFO - [app.py:502] - CPU cores: 11
2025-01-22 23:18:04,934 - __main__ - INFO - [app.py:510] - Configuration:
2025-01-22 23:18:04,934 - __main__ - INFO - [app.py:511] - - Debug mode: False
2025-01-22 23:18:04,934 - __main__ - INFO - [app.py:512] - - CORS enabled: True
2025-01-22 23:18:04,934 - __main__ - INFO - [app.py:513] - - Rate limiting: 10 requests per minute
2025-01-22 23:18:04,934 - __main__ - INFO - [app.py:514] - - Metrics enabled: True (port 8000)
2025-01-22 23:18:04,934 - __main__ - INFO - [app.py:516] - ==================================================
2025-01-22 23:58:31,735 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-01-22 23:58:31,737 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-22 23:58:31,903 - services.audio_link_routes - ERROR - [audio_link_routes.py:146] - Direct audio processing error: Failed to download audio file
2025-01-22 23:58:31,904 - services.audio_link_routes - ERROR - [audio_link_routes.py:211] - Direct audio processing error: Failed to download audio file
2025-01-22 23:58:31,906 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.16s, Memory Change: 0.61MB
2025-01-22 23:58:31,906 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.17s
2025-01-23 08:34:50,533 - __main__ - INFO - [app.py:217] - Received SIGINT signal
2025-01-23 08:34:50,538 - __main__ - INFO - [app.py:202] - Initiating graceful shutdown...
2025-01-23 08:34:55,539 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-23 08:34:55,541 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-23 08:34:55,541 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-23 08:34:55,544 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 08:34:55,545 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-23 08:34:55,545 - __main__ - INFO - [app.py:206] - Graceful shutdown completed
2025-01-23 08:34:55,547 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-23 08:34:55,548 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-23 08:34:55,548 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-23 08:34:55,549 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 08:34:55,549 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-23 08:34:55,550 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-23 08:34:55,550 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-23 08:34:55,551 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-23 08:34:55,551 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 08:34:55,552 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-23 08:36:06,237 - __main__ - INFO - [app.py:467] - Metrics server started on port 8000
2025-01-23 08:36:06,238 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-23 08:36:19,507 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-23 08:36:26,158 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-23 08:36:26,159 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-23 08:36:31,950 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-23 08:36:31,952 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 08:36:31,952 - __main__ - INFO - [app.py:491] - ==================================================
2025-01-23 08:36:31,952 - __main__ - INFO - [app.py:492] - Starting LinguaSync Backend
2025-01-23 08:36:31,952 - __main__ - INFO - [app.py:493] - Starting Flask app on port 5001 using cpu
2025-01-23 08:36:31,952 - __main__ - INFO - [app.py:494] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-01-23 08:36:31,952 - __main__ - INFO - [app.py:495] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-23 08:36:31,952 - __main__ - INFO - [app.py:496] - Maximum audio length: 300 seconds
2025-01-23 08:36:31,952 - __main__ - INFO - [app.py:497] - Sample rate: 16000 Hz
2025-01-23 08:36:31,952 - __main__ - INFO - [app.py:501] - System memory: 36.0GB total, 17.7GB available
2025-01-23 08:36:31,952 - __main__ - INFO - [app.py:502] - CPU cores: 11
2025-01-23 08:36:31,952 - __main__ - INFO - [app.py:510] - Configuration:
2025-01-23 08:36:31,952 - __main__ - INFO - [app.py:511] - - Debug mode: False
2025-01-23 08:36:31,952 - __main__ - INFO - [app.py:512] - - CORS enabled: True
2025-01-23 08:36:31,952 - __main__ - INFO - [app.py:513] - - Rate limiting: 10 requests per minute
2025-01-23 08:36:31,952 - __main__ - INFO - [app.py:514] - - Metrics enabled: True (port 8000)
2025-01-23 08:36:31,952 - __main__ - INFO - [app.py:516] - ==================================================
2025-01-23 08:37:51,973 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-01-23 08:37:51,974 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-23 08:37:51,978 - services.audio_link_routes - INFO - [audio_link_routes.py:173] - Processing URL: https://www.tiktok.com/@ellendegeneres/video/7462053313240927534
2025-01-23 08:37:51,979 - services.audio_link_routes - INFO - [audio_link_routes.py:193] - Processing TikTok URL
2025-01-23 08:37:52,302 - services.audio_link_routes - ERROR - [audio_link_routes.py:123] - Download error for tiktok: [0;31mERROR:[0m [TikTok] 7462053313240927534: Unable to extract webpage video data; please report this issue on  https://github.com/yt-dlp/yt-dlp/issues?q= , filling out the appropriate issue template. Confirm you are on the latest version using  yt-dlp -U
2025-01-23 08:37:52,302 - services.audio_link_routes - ERROR - [audio_link_routes.py:139] - tiktok processing error: Unable to access this tiktok content. Please check the URL and try again
2025-01-23 08:37:52,303 - services.audio_link_routes - ERROR - [audio_link_routes.py:207] - Processing error: Unable to access this tiktok content. Please check the URL and try again
2025-01-23 08:37:52,304 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.33s, Memory Change: 0.44MB
2025-01-23 08:37:52,305 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.33s
2025-01-23 08:38:42,805 - services.audio_link_routes - INFO - [audio_link_routes.py:173] - Processing URL: https://www.youtube.com/watch?v=HMF3tpA0TL4&list=RDGMEMHDXYb1_DDSgDsobPsOFxpAVMHMF3tpA0TL4&start_radio=1
2025-01-23 08:38:42,806 - services.audio_link_routes - INFO - [audio_link_routes.py:190] - Processing YouTube URL
2025-01-23 08:46:04,416 - services.audio_link_routes - ERROR - [audio_link_routes.py:123] - Download error for youtube: [0;31mERROR:[0m [youtube] HrTWjrYYxBU: Video unavailable. This content isn't available, try again later.
2025-01-23 08:46:04,423 - services.audio_link_routes - ERROR - [audio_link_routes.py:139] - youtube processing error: Unable to access this youtube content. Please check the URL and try again
2025-01-23 08:46:04,423 - services.audio_link_routes - ERROR - [audio_link_routes.py:207] - Processing error: Unable to access this youtube content. Please check the URL and try again
2025-01-23 08:46:04,454 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 441.65s, Memory Change: 162.72MB
2025-01-23 08:46:04,455 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 441.65s
2025-01-23 08:56:07,613 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.02MB
2025-01-23 08:56:07,614 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-23 08:56:07,617 - services.audio_link_routes - INFO - [audio_link_routes.py:173] - Processing URL: https://youtu.be/xDYy5qafTXY?si=RD40B2xq90RYg2Q0
2025-01-23 08:56:07,618 - services.audio_link_routes - INFO - [audio_link_routes.py:190] - Processing YouTube URL
2025-01-23 08:56:11,314 - services.audio_link_routes - ERROR - [audio_link_routes.py:139] - youtube processing error: Unable to process this youtube content. Please try a different video
2025-01-23 08:56:11,315 - services.audio_link_routes - ERROR - [audio_link_routes.py:207] - Processing error: Unable to process this youtube content. Please try a different video
2025-01-23 08:56:11,316 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 3.70s, Memory Change: 14.77MB
2025-01-23 08:56:11,316 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 3.70s
2025-01-23 09:03:21,558 - __main__ - INFO - [app.py:217] - Received SIGINT signal
2025-01-23 09:03:21,561 - __main__ - INFO - [app.py:202] - Initiating graceful shutdown...
2025-01-23 09:03:26,561 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-23 09:03:26,563 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-23 09:03:26,563 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-23 09:03:26,566 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 09:03:26,567 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-23 09:03:26,567 - __main__ - INFO - [app.py:206] - Graceful shutdown completed
2025-01-23 09:03:26,569 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-23 09:03:26,569 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-23 09:03:26,570 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-23 09:03:26,570 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 09:03:26,571 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-23 09:03:26,571 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-23 09:03:26,572 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-23 09:03:26,572 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-23 09:03:26,573 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 09:03:26,573 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-23 09:04:18,083 - __main__ - INFO - [app.py:467] - Metrics server started on port 8000
2025-01-23 09:04:18,083 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-23 09:04:31,212 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-23 09:04:38,378 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-23 09:04:38,379 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-23 09:04:43,364 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-23 09:04:43,366 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 09:04:43,366 - __main__ - INFO - [app.py:491] - ==================================================
2025-01-23 09:04:43,366 - __main__ - INFO - [app.py:492] - Starting LinguaSync Backend
2025-01-23 09:04:43,366 - __main__ - INFO - [app.py:493] - Starting Flask app on port 5001 using cpu
2025-01-23 09:04:43,366 - __main__ - INFO - [app.py:494] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-01-23 09:04:43,366 - __main__ - INFO - [app.py:495] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-23 09:04:43,366 - __main__ - INFO - [app.py:496] - Maximum audio length: 300 seconds
2025-01-23 09:04:43,366 - __main__ - INFO - [app.py:497] - Sample rate: 16000 Hz
2025-01-23 09:04:43,366 - __main__ - INFO - [app.py:501] - System memory: 36.0GB total, 15.1GB available
2025-01-23 09:04:43,366 - __main__ - INFO - [app.py:502] - CPU cores: 11
2025-01-23 09:04:43,366 - __main__ - INFO - [app.py:510] - Configuration:
2025-01-23 09:04:43,366 - __main__ - INFO - [app.py:511] - - Debug mode: False
2025-01-23 09:04:43,366 - __main__ - INFO - [app.py:512] - - CORS enabled: True
2025-01-23 09:04:43,366 - __main__ - INFO - [app.py:513] - - Rate limiting: 10 requests per minute
2025-01-23 09:04:43,366 - __main__ - INFO - [app.py:514] - - Metrics enabled: True (port 8000)
2025-01-23 09:04:43,366 - __main__ - INFO - [app.py:516] - ==================================================
2025-01-23 09:05:46,250 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-01-23 09:05:46,251 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-23 09:05:46,254 - services.audio_link_routes - INFO - [audio_link_routes.py:174] - Processing URL: https://youtube.com/shorts/dOfQCX8fzZg?si=3ZB0P1f9YrHWs6_t
2025-01-23 09:05:46,255 - services.audio_link_routes - INFO - [audio_link_routes.py:191] - Processing YouTube URL
2025-01-23 09:05:49,926 - services.audio_link_routes - INFO - [audio_link_routes.py:200] - Successfully processed audio
2025-01-23 09:05:49,926 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 3.67s, Memory Change: 7.84MB
2025-01-23 09:05:49,926 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 3.67s
2025-01-23 09:06:00,644 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-23 09:06:00,645 - services.translation_routes - INFO - [translation_routes.py:29] - Starting translation request dc390d56
2025-01-23 09:06:00,645 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-23 09:06:00,645 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-23 09:06:00,646 - services.translation_routes - INFO - [translation_routes.py:86] - Request dc390d56: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpfpknrpar.wav
2025-01-23 09:06:00,647 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 49.32 seconds
2025-01-23 09:06:00,647 - services.translation_routes - INFO - [translation_routes.py:99] - Request dc390d56: Beginning audio processing with diagnostics
2025-01-23 09:06:00,647 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpfpknrpar.wav
2025-01-23 09:06:00,647 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 16000, Channels: 1
2025-01-23 09:06:00,651 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([1, 789107]), Frequency: 16000Hz
2025-01-23 09:06:00,695 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-23 09:06:00,700 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-23 09:06:00,762 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-23 09:06:00,845 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:06:00,845 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:06:00,862 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:06:00,862 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:06:00,877 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:06:00,877 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:06:00,893 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:06:00,894 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:06:02,681 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-23 09:06:02,682 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-23 09:06:02,825 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:06:02,825 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:06:02,841 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:06:02,841 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:06:02,857 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:06:02,858 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:06:02,873 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:06:02,873 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:06:04,704 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-23 09:06:04,704 - services.translation_routes - INFO - [translation_routes.py:110] - 
==================================================
2025-01-23 09:06:04,704 - services.translation_routes - INFO - [translation_routes.py:111] - Input Audio Quality Report
2025-01-23 09:06:04,704 - services.translation_routes - INFO - [translation_routes.py:112] - ==================================================
2025-01-23 09:06:04,704 - services.translation_routes - INFO - [translation_routes.py:113] - Request ID: dc390d56
2025-01-23 09:06:04,704 - services.translation_routes - INFO - [translation_routes.py:114] - Target Language: fra
2025-01-23 09:06:04,705 - services.translation_routes - INFO - [translation_routes.py:115] - --------------------------------------------------
2025-01-23 09:06:04,705 - services.translation_routes - INFO - [translation_routes.py:116] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.805
- Avg Amplitude: 0.029
- Rms Level: 0.054
- Crest Factor: 15.007
- Zero Crossings: 394279.000
- Silence Percentage: 35.615
- Clipping Points: 0.000
- Dynamic Range: 8355702.910

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.080
  - Temporal Flatness: 0.043

- Volume Metrics:
  - Volume Stability: 0.140
  - Volume Range: 22859556.973
  - Volume Variations: 0.035

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.007151714733603
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 2.146029233932495, 'stability': 2.325944185256958, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.593830943107605, 'distinction': 0.09012619405984879}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.515
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.633
  - Rhythm Quality: 0.674
  - Intonation Quality: 0.592

Vowel Quality:
  - Quality Score: 0.013
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-23 09:06:04,705 - services.translation_routes - INFO - [translation_routes.py:117] - ==================================================

2025-01-23 09:06:04,705 - services.translation_routes - INFO - [translation_routes.py:128] - Request dc390d56: Audio processed successfully
2025-01-23 09:06:04,751 - services.translation_routes - INFO - [translation_routes.py:147] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-23 09:06:25,963 - services.translation_routes - INFO - [translation_routes.py:185] - Source text: I'd like to thank my wife because she's my best friend, and my daughter because she thinks I'm cool because I did The Lion King.
2025-01-23 09:06:47,581 - services.translation_routes - INFO - [translation_routes.py:204] - Target text: J'aimerais remercier ma femme parce qu'elle est ma meilleure amie, je voudrais remercier mon fille parce quelle pense que je suis cool parce que j'ai fait le Lion King.
2025-01-23 09:07:24,890 - services.translation_routes - INFO - [translation_routes.py:227] - Processing tuple output from model
2025-01-23 09:07:24,904 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:07:24,905 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:07:24,910 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:07:24,910 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:07:24,914 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:07:24,914 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:07:24,921 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:07:24,921 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:07:25,084 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-23 09:07:25,084 - services.translation_routes - INFO - [translation_routes.py:251] - 
==================================================
2025-01-23 09:07:25,084 - services.translation_routes - INFO - [translation_routes.py:252] - Translated Audio Quality Report
2025-01-23 09:07:25,084 - services.translation_routes - INFO - [translation_routes.py:253] - ==================================================
2025-01-23 09:07:25,084 - services.translation_routes - INFO - [translation_routes.py:254] - Request ID: dc390d56
2025-01-23 09:07:25,084 - services.translation_routes - INFO - [translation_routes.py:255] - Target Language: fra
2025-01-23 09:07:25,084 - services.translation_routes - INFO - [translation_routes.py:256] - --------------------------------------------------
2025-01-23 09:07:25,084 - services.translation_routes - INFO - [translation_routes.py:257] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.693
- Avg Amplitude: 0.064
- Rms Level: 0.096
- Crest Factor: 7.180
- Zero Crossings: 9155.000
- Silence Percentage: 13.512
- Clipping Points: 0.000
- Dynamic Range: 250.840

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.103
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.020
  - Temporal Flatness: 0.012

- Volume Metrics:
  - Volume Stability: 0.259
  - Volume Range: 462.288
  - Volume Variations: 0.058

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0268752743591336
- Background Noise: 3.871986466373222
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.6399332284927368, 'stability': 3.4097635746002197, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.2834731638431549, 'consistency': 0.0, 'distinction': 1.0}
  - Description: Moderate nasal resonance. Unstable nasal resonance. Clear distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.534
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.003
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-23 09:07:25,084 - services.translation_routes - INFO - [translation_routes.py:258] - ==================================================

2025-01-23 09:07:25,084 - services.translation_routes - INFO - [translation_routes.py:264] - Request dc390d56: Audio output processed successfully
2025-01-23 09:07:25,087 - services.translation_routes - INFO - [translation_routes.py:317] - Request dc390d56: Response prepared successfully
2025-01-23 09:07:25,087 - services.translation_routes - INFO - [translation_routes.py:328] - Request dc390d56 completed in 84.44s
2025-01-23 09:07:25,090 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 84.45s, Memory Change: 2425.56MB
2025-01-23 09:07:25,090 - __main__ - INFO - [app.py:278] - Request to /translate took 90.18s
2025-01-23 09:10:03,662 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-01-23 09:10:03,664 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-23 09:10:03,668 - services.audio_link_routes - INFO - [audio_link_routes.py:174] - Processing URL: https://www.tiktok.com/@ellendegeneres/video/7462053313240927534
2025-01-23 09:10:03,669 - services.audio_link_routes - INFO - [audio_link_routes.py:194] - Processing TikTok URL
2025-01-23 09:10:05,273 - services.audio_link_routes - INFO - [audio_link_routes.py:200] - Successfully processed audio
2025-01-23 09:10:05,273 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 1.61s, Memory Change: 2.95MB
2025-01-23 09:10:05,274 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 1.61s
2025-01-23 09:10:17,054 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-23 09:10:17,058 - services.translation_routes - INFO - [translation_routes.py:29] - Starting translation request f674c248
2025-01-23 09:10:17,058 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-23 09:10:17,058 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-23 09:10:17,060 - services.translation_routes - INFO - [translation_routes.py:86] - Request f674c248: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpbpluk4zd.wav
2025-01-23 09:10:17,060 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 96.85 seconds
2025-01-23 09:10:17,060 - services.translation_routes - INFO - [translation_routes.py:99] - Request f674c248: Beginning audio processing with diagnostics
2025-01-23 09:10:17,060 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpbpluk4zd.wav
2025-01-23 09:10:17,060 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 16000, Channels: 1
2025-01-23 09:10:17,066 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([1, 1549630]), Frequency: 16000Hz
2025-01-23 09:10:17,152 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-23 09:10:17,160 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-23 09:10:17,309 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-23 09:10:17,472 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:10:17,473 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:10:17,507 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:10:17,507 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:10:17,542 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:10:17,542 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:10:17,576 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:10:17,577 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:10:20,599 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-23 09:10:20,599 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-23 09:10:20,887 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:10:20,887 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:10:20,920 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:10:20,920 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:10:20,955 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:10:20,955 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:10:20,988 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:10:20,988 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:10:24,108 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-23 09:10:24,108 - services.translation_routes - INFO - [translation_routes.py:110] - 
==================================================
2025-01-23 09:10:24,108 - services.translation_routes - INFO - [translation_routes.py:111] - Input Audio Quality Report
2025-01-23 09:10:24,108 - services.translation_routes - INFO - [translation_routes.py:112] - ==================================================
2025-01-23 09:10:24,108 - services.translation_routes - INFO - [translation_routes.py:113] - Request ID: f674c248
2025-01-23 09:10:24,109 - services.translation_routes - INFO - [translation_routes.py:114] - Target Language: fra
2025-01-23 09:10:24,109 - services.translation_routes - INFO - [translation_routes.py:115] - --------------------------------------------------
2025-01-23 09:10:24,109 - services.translation_routes - INFO - [translation_routes.py:116] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.021
- Rms Level: 0.046
- Crest Factor: 20.598
- Zero Crossings: 726921.000
- Silence Percentage: 43.257
- Clipping Points: 0.000
- Dynamic Range: 5833420.895

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.072
  - Temporal Flatness: 0.030

- Volume Metrics:
  - Volume Stability: -0.134
  - Volume Range: 23558643.460
  - Volume Variations: 0.035

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.004478381776771
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.37451744079589844, 'stability': 0.7744566798210144, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.09089379012584686, 'consistency': 0.5062854290008545, 'distinction': 0.401911199092865}
  - Description: Weak nasal resonance. Unstable nasal resonance. Moderate distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.566
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.572
  - Rhythm Quality: 0.624
  - Intonation Quality: 0.519

Vowel Quality:
  - Quality Score: 0.006
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-23 09:10:24,109 - services.translation_routes - INFO - [translation_routes.py:117] - ==================================================

2025-01-23 09:10:24,109 - services.translation_routes - INFO - [translation_routes.py:128] - Request f674c248: Audio processed successfully
2025-01-23 09:10:24,193 - services.translation_routes - INFO - [translation_routes.py:147] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-23 09:11:29,978 - services.translation_routes - INFO - [translation_routes.py:185] - Source text: It's the highest melting point of all the elements.
2025-01-23 09:12:31,567 - services.translation_routes - INFO - [translation_routes.py:204] - Target text: C'est le plus haut point de fusion de tous les éléments.
2025-01-23 09:14:43,218 - services.translation_routes - INFO - [translation_routes.py:227] - Processing tuple output from model
2025-01-23 09:14:43,247 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:14:43,251 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:14:43,253 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:14:43,253 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:14:43,256 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:14:43,256 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:14:43,258 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:14:43,258 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:14:43,329 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-23 09:14:43,331 - services.translation_routes - INFO - [translation_routes.py:251] - 
==================================================
2025-01-23 09:14:43,331 - services.translation_routes - INFO - [translation_routes.py:252] - Translated Audio Quality Report
2025-01-23 09:14:43,331 - services.translation_routes - INFO - [translation_routes.py:253] - ==================================================
2025-01-23 09:14:43,331 - services.translation_routes - INFO - [translation_routes.py:254] - Request ID: f674c248
2025-01-23 09:14:43,331 - services.translation_routes - INFO - [translation_routes.py:255] - Target Language: fra
2025-01-23 09:14:43,331 - services.translation_routes - INFO - [translation_routes.py:256] - --------------------------------------------------
2025-01-23 09:14:43,331 - services.translation_routes - INFO - [translation_routes.py:257] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.563
- Avg Amplitude: 0.064
- Rms Level: 0.103
- Crest Factor: 5.483
- Zero Crossings: 3675.000
- Silence Percentage: 18.120
- Clipping Points: 0.000
- Dynamic Range: 435.690

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.315
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.021
  - Temporal Flatness: 0.012

- Volume Metrics:
  - Volume Stability: 0.265
  - Volume Range: 691.879
  - Volume Variations: 0.061

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0374802083957566
- Background Noise: 3.1933310075472146
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
No issues detected

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.6256275773048401, 'stability': 3.1791577339172363, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.6216173768043518, 'consistency': 0.0, 'distinction': 1.0}
  - Description: Moderate nasal resonance. Unstable nasal resonance. Clear distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.516
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 1.000

Vowel Quality:
  - Quality Score: 0.003
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-23 09:14:43,331 - services.translation_routes - INFO - [translation_routes.py:258] - ==================================================

2025-01-23 09:14:43,331 - services.translation_routes - INFO - [translation_routes.py:264] - Request f674c248: Audio output processed successfully
2025-01-23 09:14:43,337 - services.translation_routes - INFO - [translation_routes.py:317] - Request f674c248: Response prepared successfully
2025-01-23 09:14:43,338 - services.translation_routes - INFO - [translation_routes.py:328] - Request f674c248 completed in 266.28s
2025-01-23 09:14:43,340 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 266.28s, Memory Change: -6257.03MB
2025-01-23 09:14:43,340 - __main__ - INFO - [app.py:278] - Request to /translate took 272.21s
2025-01-23 10:38:13,662 - __main__ - INFO - [app.py:217] - Received SIGINT signal
2025-01-23 10:38:13,663 - __main__ - INFO - [app.py:202] - Initiating graceful shutdown...
2025-01-23 10:38:18,665 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-23 10:38:18,666 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-23 10:38:18,667 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-23 10:38:18,669 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 10:38:18,671 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-23 10:38:18,671 - __main__ - INFO - [app.py:206] - Graceful shutdown completed
2025-01-23 10:38:18,678 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-23 10:38:18,679 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-23 10:38:18,679 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-23 10:38:18,682 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 10:38:18,682 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-23 10:38:18,682 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-23 10:38:18,683 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-23 10:38:18,683 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-23 10:38:18,684 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 10:38:18,684 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-23 10:38:40,627 - __main__ - INFO - [app.py:467] - Metrics server started on port 8000
2025-01-23 10:38:40,627 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-23 10:38:53,404 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-23 10:39:00,514 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-23 10:39:00,516 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-23 10:39:05,542 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-23 10:39:05,544 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 10:39:05,545 - __main__ - INFO - [app.py:491] - ==================================================
2025-01-23 10:39:05,545 - __main__ - INFO - [app.py:492] - Starting LinguaSync Backend
2025-01-23 10:39:05,545 - __main__ - INFO - [app.py:493] - Starting Flask app on port 5001 using cpu
2025-01-23 10:39:05,545 - __main__ - INFO - [app.py:494] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-01-23 10:39:05,545 - __main__ - INFO - [app.py:495] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-23 10:39:05,545 - __main__ - INFO - [app.py:496] - Maximum audio length: 300 seconds
2025-01-23 10:39:05,545 - __main__ - INFO - [app.py:497] - Sample rate: 16000 Hz
2025-01-23 10:39:05,545 - __main__ - INFO - [app.py:501] - System memory: 36.0GB total, 14.4GB available
2025-01-23 10:39:05,545 - __main__ - INFO - [app.py:502] - CPU cores: 11
2025-01-23 10:39:05,545 - __main__ - INFO - [app.py:510] - Configuration:
2025-01-23 10:39:05,545 - __main__ - INFO - [app.py:511] - - Debug mode: False
2025-01-23 10:39:05,545 - __main__ - INFO - [app.py:512] - - CORS enabled: True
2025-01-23 10:39:05,545 - __main__ - INFO - [app.py:513] - - Rate limiting: 10 requests per minute
2025-01-23 10:39:05,545 - __main__ - INFO - [app.py:514] - - Metrics enabled: True (port 8000)
2025-01-23 10:39:05,545 - __main__ - INFO - [app.py:516] - ==================================================
2025-01-23 10:41:46,621 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.42MB
2025-01-23 10:41:46,622 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-23 10:41:46,624 - services.audio_link_routes - INFO - [audio_link_routes.py:205] - Processing URL: https://www.tiktok.com/@ellendegeneres/video/7462053313240927534
2025-01-23 10:41:46,625 - services.audio_link_routes - INFO - [audio_link_routes.py:225] - Processing TikTok URL
2025-01-23 10:41:46,625 - services.audio_link_routes - INFO - [audio_link_routes.py:132] - Using options for tiktok: {'format': 'bestaudio/best', 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpgg5eebc2/output.wav', 'quiet': False, 'no_warnings': True, 'extract_audio': True, 'extractor_args': {'tiktok': {'app_version': '34.1.2', 'manifest_app_version': '2023401020', 'aid': '1180'}}}
2025-01-23 10:41:48,150 - services.audio_link_routes - INFO - [audio_link_routes.py:147] - Successfully downloaded tiktok content
2025-01-23 10:41:48,152 - services.audio_link_routes - ERROR - [audio_link_routes.py:171] - tiktok processing error: Failed to download audio from tiktok
2025-01-23 10:41:48,152 - services.audio_link_routes - ERROR - [audio_link_routes.py:239] - Processing error: Failed to download audio from tiktok
2025-01-23 10:41:48,153 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 1.53s, Memory Change: 29.67MB
2025-01-23 10:41:48,153 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 1.53s
2025-01-23 10:43:47,529 - __main__ - INFO - [app.py:217] - Received SIGINT signal
2025-01-23 10:43:47,530 - __main__ - INFO - [app.py:202] - Initiating graceful shutdown...
2025-01-23 10:43:52,534 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-23 10:43:52,535 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-23 10:43:52,535 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-23 10:43:52,537 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 10:43:52,538 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-23 10:43:52,538 - __main__ - INFO - [app.py:206] - Graceful shutdown completed
2025-01-23 10:43:52,539 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-23 10:43:52,539 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-23 10:43:52,539 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-23 10:43:52,540 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 10:43:52,540 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-23 10:43:52,541 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-23 10:43:52,541 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-23 10:43:52,541 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-23 10:43:52,542 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 10:43:52,542 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-23 10:44:07,862 - __main__ - INFO - [app.py:467] - Metrics server started on port 8000
2025-01-23 10:44:07,863 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-23 10:44:21,076 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-23 10:44:27,468 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-23 10:44:27,469 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-23 10:44:32,699 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-23 10:44:32,701 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 10:44:32,701 - __main__ - INFO - [app.py:491] - ==================================================
2025-01-23 10:44:32,701 - __main__ - INFO - [app.py:492] - Starting LinguaSync Backend
2025-01-23 10:44:32,701 - __main__ - INFO - [app.py:493] - Starting Flask app on port 5001 using cpu
2025-01-23 10:44:32,701 - __main__ - INFO - [app.py:494] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-01-23 10:44:32,701 - __main__ - INFO - [app.py:495] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-23 10:44:32,701 - __main__ - INFO - [app.py:496] - Maximum audio length: 300 seconds
2025-01-23 10:44:32,701 - __main__ - INFO - [app.py:497] - Sample rate: 16000 Hz
2025-01-23 10:44:32,701 - __main__ - INFO - [app.py:501] - System memory: 36.0GB total, 14.3GB available
2025-01-23 10:44:32,702 - __main__ - INFO - [app.py:502] - CPU cores: 11
2025-01-23 10:44:32,702 - __main__ - INFO - [app.py:510] - Configuration:
2025-01-23 10:44:32,702 - __main__ - INFO - [app.py:511] - - Debug mode: False
2025-01-23 10:44:32,702 - __main__ - INFO - [app.py:512] - - CORS enabled: True
2025-01-23 10:44:32,702 - __main__ - INFO - [app.py:513] - - Rate limiting: 10 requests per minute
2025-01-23 10:44:32,702 - __main__ - INFO - [app.py:514] - - Metrics enabled: True (port 8000)
2025-01-23 10:44:32,702 - __main__ - INFO - [app.py:516] - ==================================================
2025-01-23 10:45:21,889 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-01-23 10:45:21,890 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-23 10:45:21,893 - services.audio_link_routes - INFO - [audio_link_routes.py:205] - Processing URL: https://www.tiktok.com/@ellendegeneres/video/7462053313240927534
2025-01-23 10:45:21,894 - services.audio_link_routes - INFO - [audio_link_routes.py:225] - Processing TikTok URL
2025-01-23 10:45:21,894 - services.audio_link_routes - ERROR - [audio_link_routes.py:171] - tiktok processing error: name 'random' is not defined
2025-01-23 10:45:21,895 - services.audio_link_routes - ERROR - [audio_link_routes.py:239] - Processing error: name 'random' is not defined
2025-01-23 10:45:21,895 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.02MB
2025-01-23 10:45:21,895 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-23 10:45:53,177 - services.audio_link_routes - INFO - [audio_link_routes.py:205] - Processing URL: https://www.tiktok.com/@ellendegeneres/video/7462053313240927534
2025-01-23 10:45:53,178 - services.audio_link_routes - INFO - [audio_link_routes.py:225] - Processing TikTok URL
2025-01-23 10:45:53,179 - services.audio_link_routes - ERROR - [audio_link_routes.py:171] - tiktok processing error: name 'random' is not defined
2025-01-23 10:45:53,179 - services.audio_link_routes - ERROR - [audio_link_routes.py:239] - Processing error: name 'random' is not defined
2025-01-23 10:45:53,180 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-01-23 10:45:53,180 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-23 10:46:03,465 - __main__ - INFO - [app.py:217] - Received SIGINT signal
2025-01-23 10:46:03,466 - __main__ - INFO - [app.py:202] - Initiating graceful shutdown...
2025-01-23 10:46:08,471 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-23 10:46:08,472 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-23 10:46:08,472 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-23 10:46:08,474 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 10:46:08,475 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-23 10:46:08,475 - __main__ - INFO - [app.py:206] - Graceful shutdown completed
2025-01-23 10:46:08,476 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-23 10:46:08,476 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-23 10:46:08,476 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-23 10:46:08,477 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 10:46:08,477 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-23 10:46:08,478 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-23 10:46:08,478 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-23 10:46:08,478 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-23 10:46:08,479 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 10:46:08,480 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-23 10:46:59,154 - __main__ - INFO - [app.py:467] - Metrics server started on port 8000
2025-01-23 10:46:59,154 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-23 10:47:12,366 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-23 10:47:21,075 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-23 10:47:21,076 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-23 10:47:26,454 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-23 10:47:26,456 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 10:47:26,456 - __main__ - INFO - [app.py:491] - ==================================================
2025-01-23 10:47:26,456 - __main__ - INFO - [app.py:492] - Starting LinguaSync Backend
2025-01-23 10:47:26,456 - __main__ - INFO - [app.py:493] - Starting Flask app on port 5001 using cpu
2025-01-23 10:47:26,456 - __main__ - INFO - [app.py:494] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-01-23 10:47:26,456 - __main__ - INFO - [app.py:495] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-23 10:47:26,456 - __main__ - INFO - [app.py:496] - Maximum audio length: 300 seconds
2025-01-23 10:47:26,456 - __main__ - INFO - [app.py:497] - Sample rate: 16000 Hz
2025-01-23 10:47:26,456 - __main__ - INFO - [app.py:501] - System memory: 36.0GB total, 14.1GB available
2025-01-23 10:47:26,456 - __main__ - INFO - [app.py:502] - CPU cores: 11
2025-01-23 10:47:26,456 - __main__ - INFO - [app.py:510] - Configuration:
2025-01-23 10:47:26,456 - __main__ - INFO - [app.py:511] - - Debug mode: False
2025-01-23 10:47:26,456 - __main__ - INFO - [app.py:512] - - CORS enabled: True
2025-01-23 10:47:26,456 - __main__ - INFO - [app.py:513] - - Rate limiting: 10 requests per minute
2025-01-23 10:47:26,456 - __main__ - INFO - [app.py:514] - - Metrics enabled: True (port 8000)
2025-01-23 10:47:26,456 - __main__ - INFO - [app.py:516] - ==================================================
2025-01-23 10:49:26,331 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-01-23 10:49:26,332 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-23 10:49:26,336 - services.audio_link_routes - INFO - [audio_link_routes.py:206] - Processing URL: https://www.tiktok.com/@ellendegeneres/video/7462053313240927534
2025-01-23 10:49:26,336 - services.audio_link_routes - INFO - [audio_link_routes.py:226] - Processing TikTok URL
2025-01-23 10:49:26,337 - services.audio_link_routes - INFO - [audio_link_routes.py:133] - Using options for tiktok: {'format': 'bestaudio/best', 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpapq60hpr/output.wav', 'quiet': False, 'no_warnings': True, 'extract_audio': True, 'extractor_args': {'tiktok': {'api_hostname': 'api22-normal-c-alisg.tiktokv.com', 'app_name': 'trill', 'app_version': '34.1.2', 'manifest_app_version': '2023401020', 'app_info': '1234567890123456789/trill///1180', 'device_id': '0147365705519617337'}}}
2025-01-23 10:49:27,853 - services.audio_link_routes - INFO - [audio_link_routes.py:148] - Successfully downloaded tiktok content
2025-01-23 10:49:27,854 - services.audio_link_routes - ERROR - [audio_link_routes.py:172] - tiktok processing error: Failed to download audio from tiktok
2025-01-23 10:49:27,854 - services.audio_link_routes - ERROR - [audio_link_routes.py:240] - Processing error: Failed to download audio from tiktok
2025-01-23 10:49:27,855 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 1.52s, Memory Change: 5.41MB
2025-01-23 10:49:27,855 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 1.52s
2025-01-23 14:07:26,659 - __main__ - INFO - [app.py:217] - Received SIGINT signal
2025-01-23 14:07:26,663 - __main__ - INFO - [app.py:202] - Initiating graceful shutdown...
2025-01-23 14:07:31,667 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-23 14:07:31,669 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-23 14:07:31,669 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-23 14:07:31,672 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 14:07:31,673 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-23 14:07:31,673 - __main__ - INFO - [app.py:206] - Graceful shutdown completed
2025-01-23 14:07:31,675 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-23 14:07:31,675 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-23 14:07:31,675 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-23 14:07:31,676 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 14:07:31,676 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-23 14:07:31,677 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-23 14:07:31,677 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-23 14:07:31,678 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-23 14:07:31,678 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 14:07:31,679 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-23 14:11:06,119 - __main__ - INFO - [app.py:467] - Metrics server started on port 8000
2025-01-23 14:11:06,119 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-23 14:11:18,663 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-23 14:11:28,508 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-23 14:11:28,510 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-23 14:11:35,343 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-23 14:11:35,344 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 14:11:35,344 - __main__ - INFO - [app.py:491] - ==================================================
2025-01-23 14:11:35,344 - __main__ - INFO - [app.py:492] - Starting LinguaSync Backend
2025-01-23 14:11:35,344 - __main__ - INFO - [app.py:493] - Starting Flask app on port 5001 using cpu
2025-01-23 14:11:35,344 - __main__ - INFO - [app.py:494] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-01-23 14:11:35,344 - __main__ - INFO - [app.py:495] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-23 14:11:35,344 - __main__ - INFO - [app.py:496] - Maximum audio length: 300 seconds
2025-01-23 14:11:35,344 - __main__ - INFO - [app.py:497] - Sample rate: 16000 Hz
2025-01-23 14:11:35,344 - __main__ - INFO - [app.py:501] - System memory: 36.0GB total, 17.5GB available
2025-01-23 14:11:35,344 - __main__ - INFO - [app.py:502] - CPU cores: 11
2025-01-23 14:11:35,344 - __main__ - INFO - [app.py:510] - Configuration:
2025-01-23 14:11:35,344 - __main__ - INFO - [app.py:511] - - Debug mode: False
2025-01-23 14:11:35,344 - __main__ - INFO - [app.py:512] - - CORS enabled: True
2025-01-23 14:11:35,344 - __main__ - INFO - [app.py:513] - - Rate limiting: 10 requests per minute
2025-01-23 14:11:35,344 - __main__ - INFO - [app.py:514] - - Metrics enabled: True (port 8000)
2025-01-23 14:11:35,344 - __main__ - INFO - [app.py:516] - ==================================================
2025-01-23 14:13:12,912 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-01-23 14:13:12,912 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-23 14:13:12,915 - services.audio_link_routes - INFO - [audio_link_routes.py:206] - Processing URL: https://www.tiktok.com/@loganpaul/video/7138576512512478510?is_from_webapp=1&sender_device=pc&web_id=7412617488065742368
2025-01-23 14:13:12,915 - services.audio_link_routes - INFO - [audio_link_routes.py:226] - Processing TikTok URL
2025-01-23 14:13:12,916 - services.audio_link_routes - INFO - [audio_link_routes.py:133] - Using options for tiktok: {'format': 'bestaudio/best', 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpksvttcxh/output.wav', 'quiet': False, 'no_warnings': True, 'extract_audio': True, 'extractor_args': {'tiktok': {'app_version': '34.1.2', 'manifest_app_version': '2023401020', 'aid': '1180'}}}
2025-01-23 14:13:14,674 - services.audio_link_routes - INFO - [audio_link_routes.py:148] - Successfully downloaded tiktok content
2025-01-23 14:13:14,676 - services.audio_link_routes - ERROR - [audio_link_routes.py:172] - tiktok processing error: Failed to download audio from tiktok
2025-01-23 14:13:14,676 - services.audio_link_routes - ERROR - [audio_link_routes.py:240] - Processing error: Failed to download audio from tiktok
2025-01-23 14:13:14,676 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 1.76s, Memory Change: 2.03MB
2025-01-23 14:13:14,676 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 1.76s
2025-01-23 14:17:37,395 - __main__ - INFO - [app.py:217] - Received SIGINT signal
2025-01-23 14:17:37,395 - __main__ - INFO - [app.py:202] - Initiating graceful shutdown...
2025-01-23 14:17:42,398 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-23 14:17:42,399 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-23 14:17:42,399 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-23 14:17:42,399 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 14:17:42,399 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-23 14:17:42,400 - __main__ - INFO - [app.py:206] - Graceful shutdown completed
2025-01-23 14:17:42,400 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-23 14:17:42,400 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-23 14:17:42,400 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-23 14:17:42,400 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 14:17:42,400 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-23 14:17:42,400 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-23 14:17:42,400 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-23 14:17:42,401 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-23 14:17:42,401 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 14:17:42,401 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-23 14:17:54,019 - __main__ - INFO - [app.py:467] - Metrics server started on port 8000
2025-01-23 14:17:54,019 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-23 14:18:06,872 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-23 14:18:11,719 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-23 14:18:11,719 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-23 14:18:16,586 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-23 14:18:16,588 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 14:18:16,588 - __main__ - INFO - [app.py:491] - ==================================================
2025-01-23 14:18:16,588 - __main__ - INFO - [app.py:492] - Starting LinguaSync Backend
2025-01-23 14:18:16,588 - __main__ - INFO - [app.py:493] - Starting Flask app on port 5001 using cpu
2025-01-23 14:18:16,588 - __main__ - INFO - [app.py:494] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-01-23 14:18:16,588 - __main__ - INFO - [app.py:495] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-23 14:18:16,588 - __main__ - INFO - [app.py:496] - Maximum audio length: 300 seconds
2025-01-23 14:18:16,588 - __main__ - INFO - [app.py:497] - Sample rate: 16000 Hz
2025-01-23 14:18:16,588 - __main__ - INFO - [app.py:501] - System memory: 36.0GB total, 16.6GB available
2025-01-23 14:18:16,588 - __main__ - INFO - [app.py:502] - CPU cores: 11
2025-01-23 14:18:16,588 - __main__ - INFO - [app.py:510] - Configuration:
2025-01-23 14:18:16,588 - __main__ - INFO - [app.py:511] - - Debug mode: False
2025-01-23 14:18:16,588 - __main__ - INFO - [app.py:512] - - CORS enabled: True
2025-01-23 14:18:16,588 - __main__ - INFO - [app.py:513] - - Rate limiting: 10 requests per minute
2025-01-23 14:18:16,588 - __main__ - INFO - [app.py:514] - - Metrics enabled: True (port 8000)
2025-01-23 14:18:16,588 - __main__ - INFO - [app.py:516] - ==================================================
2025-01-23 14:20:14,541 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-01-23 14:20:14,542 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-23 14:20:14,547 - services.audio_link_routes - INFO - [audio_link_routes.py:206] - Processing URL: https://www.tiktok.com/@loganpaul/video/7138576512512478510?is_from_webapp=1&sender_device=pc&web_id=7412617488065742368
2025-01-23 14:20:14,549 - services.audio_link_routes - INFO - [audio_link_routes.py:226] - Processing TikTok URL
2025-01-23 14:20:14,551 - services.audio_link_routes - INFO - [audio_link_routes.py:133] - Using options for tiktok: {'format': 'bestaudio/best', 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpodzjymng/output.wav', 'quiet': False, 'no_warnings': True, 'extract_audio': True, 'extractor_args': {'tiktok': {'api_hostname': 'api22-normal-c-alisg.tiktokv.com', 'app_name': 'trill', 'app_version': '34.1.2', 'manifest_app_version': '2023401020', 'app_info': '1234567890123456789/trill///1180', 'device_id': '0852363973132853448'}}}
2025-01-23 14:20:16,029 - services.audio_link_routes - INFO - [audio_link_routes.py:148] - Successfully downloaded tiktok content
2025-01-23 14:20:16,031 - services.audio_link_routes - ERROR - [audio_link_routes.py:172] - tiktok processing error: Failed to download audio from tiktok
2025-01-23 14:20:16,031 - services.audio_link_routes - ERROR - [audio_link_routes.py:240] - Processing error: Failed to download audio from tiktok
2025-01-23 14:20:16,031 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 1.48s, Memory Change: 1.95MB
2025-01-23 14:20:16,031 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 1.48s
2025-01-23 14:20:43,649 - services.audio_link_routes - INFO - [audio_link_routes.py:206] - Processing URL: https://www.tiktok.com/@loganpaul/video/7138576512512478510?is_from_webapp=1&sender_device=pc&web_id=7412617488065742368
2025-01-23 14:20:43,650 - services.audio_link_routes - INFO - [audio_link_routes.py:226] - Processing TikTok URL
2025-01-23 14:20:43,650 - services.audio_link_routes - INFO - [audio_link_routes.py:133] - Using options for tiktok: {'format': 'bestaudio/best', 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpx0q1hc9p/output.wav', 'quiet': False, 'no_warnings': True, 'extract_audio': True, 'extractor_args': {'tiktok': {'api_hostname': 'api22-normal-c-alisg.tiktokv.com', 'app_name': 'trill', 'app_version': '34.1.2', 'manifest_app_version': '2023401020', 'app_info': '1234567890123456789/trill///1180', 'device_id': '9237854521759457447'}}}
2025-01-23 14:20:44,942 - services.audio_link_routes - INFO - [audio_link_routes.py:148] - Successfully downloaded tiktok content
2025-01-23 14:20:44,944 - services.audio_link_routes - ERROR - [audio_link_routes.py:172] - tiktok processing error: Failed to download audio from tiktok
2025-01-23 14:20:44,944 - services.audio_link_routes - ERROR - [audio_link_routes.py:240] - Processing error: Failed to download audio from tiktok
2025-01-23 14:20:44,944 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 1.30s, Memory Change: 0.00MB
2025-01-23 14:20:44,945 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 1.30s
2025-01-23 14:50:47,546 - __main__ - INFO - [app.py:217] - Received SIGINT signal
2025-01-23 14:50:47,548 - __main__ - INFO - [app.py:202] - Initiating graceful shutdown...
2025-01-23 14:50:52,551 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-23 14:50:52,552 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-23 14:50:52,553 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-23 14:50:52,554 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 14:50:52,555 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-23 14:50:52,555 - __main__ - INFO - [app.py:206] - Graceful shutdown completed
2025-01-23 14:50:52,556 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-23 14:50:52,557 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-23 14:50:52,557 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-23 14:50:52,558 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 14:50:52,559 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-23 14:50:52,559 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-23 14:50:52,559 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-23 14:50:52,560 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-23 14:50:52,560 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 14:50:52,561 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-23 14:51:03,874 - __main__ - INFO - [app.py:467] - Metrics server started on port 8000
2025-01-23 14:51:03,874 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-23 14:51:17,418 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-23 14:51:24,029 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-23 14:51:24,030 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-23 14:51:28,090 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-23 14:51:28,092 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 14:51:28,092 - __main__ - INFO - [app.py:491] - ==================================================
2025-01-23 14:51:28,092 - __main__ - INFO - [app.py:492] - Starting LinguaSync Backend
2025-01-23 14:51:28,092 - __main__ - INFO - [app.py:493] - Starting Flask app on port 5001 using cpu
2025-01-23 14:51:28,092 - __main__ - INFO - [app.py:494] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-01-23 14:51:28,092 - __main__ - INFO - [app.py:495] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-23 14:51:28,092 - __main__ - INFO - [app.py:496] - Maximum audio length: 300 seconds
2025-01-23 14:51:28,092 - __main__ - INFO - [app.py:497] - Sample rate: 16000 Hz
2025-01-23 14:51:28,092 - __main__ - INFO - [app.py:501] - System memory: 36.0GB total, 14.8GB available
2025-01-23 14:51:28,092 - __main__ - INFO - [app.py:502] - CPU cores: 11
2025-01-23 14:51:28,092 - __main__ - INFO - [app.py:510] - Configuration:
2025-01-23 14:51:28,092 - __main__ - INFO - [app.py:511] - - Debug mode: False
2025-01-23 14:51:28,092 - __main__ - INFO - [app.py:512] - - CORS enabled: True
2025-01-23 14:51:28,092 - __main__ - INFO - [app.py:513] - - Rate limiting: 10 requests per minute
2025-01-23 14:51:28,092 - __main__ - INFO - [app.py:514] - - Metrics enabled: True (port 8000)
2025-01-23 14:51:28,093 - __main__ - INFO - [app.py:516] - ==================================================
2025-01-23 14:52:06,992 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-01-23 14:52:06,992 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-23 14:52:06,995 - services.audio_link_routes - INFO - [audio_link_routes.py:216] - Processing URL: https://www.tiktok.com/@loganpaul/video/7138576512512478510?is_from_webapp=1&sender_device=pc&web_id=7412617488065742368
2025-01-23 14:52:06,996 - services.audio_link_routes - INFO - [audio_link_routes.py:236] - Processing TikTok URL
2025-01-23 14:52:06,996 - services.audio_link_routes - INFO - [audio_link_routes.py:120] - Using options for tiktok: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpfymbvozv/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8, 'extractor_args': {'tiktok': {'api_hostname': 'api22-normal-c-alisg.tiktokv.com', 'app_name': 'trill', 'app_version': '34.1.2', 'manifest_app_version': '2023401020', 'app_info': '1234567890123456789/trill///1180', 'device_id': '4069187456410993372'}}}
2025-01-23 14:52:09,314 - services.audio_link_routes - INFO - [audio_link_routes.py:133] - Successfully downloaded tiktok content
2025-01-23 14:52:09,316 - services.audio_link_routes - INFO - [audio_link_routes.py:152] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpfymbvozv/output.wav
2025-01-23 14:52:09,362 - services.audio_link_routes - INFO - [audio_link_routes.py:164] - Successfully converted audio to WAV
2025-01-23 14:52:09,363 - services.audio_link_routes - INFO - [audio_link_routes.py:242] - Successfully processed audio
2025-01-23 14:52:09,363 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 2.37s, Memory Change: 3.89MB
2025-01-23 14:52:09,363 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 2.37s
2025-01-23 14:52:22,712 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-23 14:52:22,713 - services.translation_routes - INFO - [translation_routes.py:29] - Starting translation request d1f51838
2025-01-23 14:52:22,713 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-23 14:52:22,713 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-23 14:52:22,714 - services.translation_routes - INFO - [translation_routes.py:86] - Request d1f51838: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpjj3bzirg.wav
2025-01-23 14:52:22,716 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 73.49 seconds
2025-01-23 14:52:22,716 - services.translation_routes - INFO - [translation_routes.py:99] - Request d1f51838: Beginning audio processing with diagnostics
2025-01-23 14:52:22,716 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpjj3bzirg.wav
2025-01-23 14:52:22,716 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 16000, Channels: 1
2025-01-23 14:52:22,720 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([1, 1175881]), Frequency: 16000Hz
2025-01-23 14:52:22,786 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-23 14:52:22,792 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for deu
2025-01-23 14:52:22,891 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-23 14:52:23,026 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 14:52:23,027 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 14:52:23,057 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 14:52:23,057 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 14:52:23,085 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 14:52:23,086 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 14:52:23,115 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 14:52:23,115 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 14:52:25,749 - services.diagnostics.language_analysis.german - ERROR - [german.py:113] - German consonant analysis failed: 'GermanAnalyzer' object has no attribute '_analyze_plosives'
2025-01-23 14:52:25,949 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for deu
2025-01-23 14:52:25,950 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-23 14:52:26,163 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 14:52:26,163 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 14:52:26,186 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 14:52:26,186 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 14:52:26,210 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 14:52:26,210 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 14:52:26,232 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 14:52:26,232 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 14:52:28,594 - services.diagnostics.language_analysis.german - ERROR - [german.py:113] - German consonant analysis failed: 'GermanAnalyzer' object has no attribute '_analyze_plosives'
2025-01-23 14:52:28,782 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for deu
2025-01-23 14:52:28,783 - services.translation_routes - INFO - [translation_routes.py:110] - 
==================================================
2025-01-23 14:52:28,783 - services.translation_routes - INFO - [translation_routes.py:111] - Input Audio Quality Report
2025-01-23 14:52:28,783 - services.translation_routes - INFO - [translation_routes.py:112] - ==================================================
2025-01-23 14:52:28,783 - services.translation_routes - INFO - [translation_routes.py:113] - Request ID: d1f51838
2025-01-23 14:52:28,783 - services.translation_routes - INFO - [translation_routes.py:114] - Target Language: deu
2025-01-23 14:52:28,783 - services.translation_routes - INFO - [translation_routes.py:115] - --------------------------------------------------
2025-01-23 14:52:28,783 - services.translation_routes - INFO - [translation_routes.py:116] - Audio Quality Analysis Report
==============================

Target Language: deu

Waveform Analysis:
--------------------
- Peak Amplitude: 0.888
- Avg Amplitude: 0.030
- Rms Level: 0.067
- Crest Factor: 13.298
- Zero Crossings: 606111.000
- Silence Percentage: 36.962
- Clipping Points: 0.000
- Dynamic Range: 7604833.184

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 0.000
  - Temporal Variation: 0.110
  - Temporal Flatness: 0.048

- Volume Metrics:
  - Volume Stability: -0.167
  - Volume Range: 38327881.694
  - Volume Variations: 0.051

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.010046553817161
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Vowel Analysis:
  - Formant Structure: {'accuracy': 1.5508040189743042, 'stability': 2.3914520740509033}
  - Length Distinction: {'ratio': 9.741427473173506, 'consistency': 36.41680849123612}
  - Quality: {'clarity': 1.5508040189743042, 'stability': -0.5420724153518677, 'formant_definition': 31.59930992126465}

Consonant Features:

Word Stress:
  - Stress Contrast: 0.480
  - Rhythm Regularity: 0.522
  - Overall Stress Quality: 0.501

Glottal Stops:
  - Presence: 24.320
  - Clarity: 0.287

Final Devoicing:
  - Devoicing Strength: 0.000
  - Consistency: -0.427

Schwa Realization:
  - Presence: 1.172
  - Stability: -0.777
  - Quality: 0.197
2025-01-23 14:52:28,783 - services.translation_routes - INFO - [translation_routes.py:117] - ==================================================

2025-01-23 14:52:28,783 - services.translation_routes - INFO - [translation_routes.py:128] - Request d1f51838: Audio processed successfully
2025-01-23 14:52:28,845 - services.translation_routes - INFO - [translation_routes.py:147] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-23 14:53:16,543 - services.translation_routes - INFO - [translation_routes.py:185] - Source text: This photo doesn't make sense. You've seen it in sci-fi movies. There's a plane that takes you up in the air and then dies, so it feels like the passengers are floating.
2025-01-23 14:53:46,066 - services.translation_routes - INFO - [translation_routes.py:204] - Target text: Das ganze Flugzeug war völlig still, wir konnten es nicht glauben.
2025-01-23 14:54:52,995 - services.translation_routes - INFO - [translation_routes.py:227] - Processing tuple output from model
2025-01-23 14:54:53,008 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 14:54:53,008 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 14:54:53,011 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 14:54:53,012 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 14:54:53,017 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 14:54:53,017 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 14:54:53,021 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 14:54:53,021 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 14:54:53,166 - services.diagnostics.language_analysis.german - ERROR - [german.py:113] - German consonant analysis failed: 'GermanAnalyzer' object has no attribute '_analyze_plosives'
2025-01-23 14:54:53,181 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for deu
2025-01-23 14:54:53,181 - services.translation_routes - INFO - [translation_routes.py:251] - 
==================================================
2025-01-23 14:54:53,181 - services.translation_routes - INFO - [translation_routes.py:252] - Translated Audio Quality Report
2025-01-23 14:54:53,181 - services.translation_routes - INFO - [translation_routes.py:253] - ==================================================
2025-01-23 14:54:53,181 - services.translation_routes - INFO - [translation_routes.py:254] - Request ID: d1f51838
2025-01-23 14:54:53,181 - services.translation_routes - INFO - [translation_routes.py:255] - Target Language: deu
2025-01-23 14:54:53,181 - services.translation_routes - INFO - [translation_routes.py:256] - --------------------------------------------------
2025-01-23 14:54:53,181 - services.translation_routes - INFO - [translation_routes.py:257] - Audio Quality Analysis Report
==============================

Target Language: deu

Waveform Analysis:
--------------------
- Peak Amplitude: 0.726
- Avg Amplitude: 0.088
- Rms Level: 0.131
- Crest Factor: 5.545
- Zero Crossings: 10486.000
- Silence Percentage: 9.956
- Clipping Points: 0.000
- Dynamic Range: 230.907

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.307
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.031
  - Temporal Flatness: 0.018

- Volume Metrics:
  - Volume Stability: 0.370
  - Volume Range: 1471.842
  - Volume Variations: 0.070

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0472486079411576
- Background Noise: 3.2179616857657183
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
No issues detected

Language-Specific Analysis:
--------------------

Vowel Analysis:
  - Formant Structure: {'accuracy': 1.0153974294662476, 'stability': 4.896450042724609}
  - Length Distinction: {'ratio': 15.185585532833668, 'consistency': 66.69757549440963}
  - Quality: {'clarity': 1.0153974294662476, 'stability': -3.8222007751464844, 'formant_definition': 218.13729858398438}

Consonant Features:

Word Stress:
  - Stress Contrast: 1.000
  - Rhythm Regularity: 0.493
  - Overall Stress Quality: 0.746

Glottal Stops:
  - Presence: 11.203
  - Clarity: 0.354

Final Devoicing:
  - Devoicing Strength: 0.000
  - Consistency: -4.255

Schwa Realization:
  - Presence: 1.035
  - Stability: -4.551
  - Quality: -1.758
2025-01-23 14:54:53,181 - services.translation_routes - INFO - [translation_routes.py:258] - ==================================================

2025-01-23 14:54:53,181 - services.translation_routes - INFO - [translation_routes.py:264] - Request d1f51838: Audio output processed successfully
2025-01-23 14:54:53,184 - services.translation_routes - INFO - [translation_routes.py:317] - Request d1f51838: Response prepared successfully
2025-01-23 14:54:53,184 - services.translation_routes - INFO - [translation_routes.py:328] - Request d1f51838 completed in 150.47s
2025-01-23 14:54:53,186 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 150.47s, Memory Change: 129.62MB
2025-01-23 14:54:53,186 - __main__ - INFO - [app.py:278] - Request to /translate took 156.21s
<<<<<<< HEAD
2025-01-24 16:25:27,604 - __main__ - INFO - [app.py:467] - Metrics server started on port 8000
2025-01-24 16:25:27,604 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-24 16:25:40,485 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-24 16:25:58,804 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-24 16:25:58,806 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-24 16:26:03,736 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-24 16:26:03,739 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 1 files, freed 1.60MB
2025-01-24 16:26:03,739 - __main__ - INFO - [app.py:491] - ==================================================
2025-01-24 16:26:03,739 - __main__ - INFO - [app.py:492] - Starting LinguaSync Backend
2025-01-24 16:26:03,739 - __main__ - INFO - [app.py:493] - Starting Flask app on port 5001 using cpu
2025-01-24 16:26:03,739 - __main__ - INFO - [app.py:494] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-01-24 16:26:03,739 - __main__ - INFO - [app.py:495] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-24 16:26:03,739 - __main__ - INFO - [app.py:496] - Maximum audio length: 300 seconds
2025-01-24 16:26:03,739 - __main__ - INFO - [app.py:497] - Sample rate: 16000 Hz
2025-01-24 16:26:03,739 - __main__ - INFO - [app.py:501] - System memory: 36.0GB total, 15.4GB available
2025-01-24 16:26:03,739 - __main__ - INFO - [app.py:502] - CPU cores: 11
2025-01-24 16:26:03,739 - __main__ - INFO - [app.py:510] - Configuration:
2025-01-24 16:26:03,739 - __main__ - INFO - [app.py:511] - - Debug mode: False
2025-01-24 16:26:03,739 - __main__ - INFO - [app.py:512] - - CORS enabled: True
2025-01-24 16:26:03,739 - __main__ - INFO - [app.py:513] - - Rate limiting: 10 requests per minute
2025-01-24 16:26:03,739 - __main__ - INFO - [app.py:514] - - Metrics enabled: True (port 8000)
2025-01-24 16:26:03,739 - __main__ - INFO - [app.py:516] - ==================================================
2025-01-24 16:27:11,068 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.30MB
2025-01-24 16:27:11,070 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-24 16:27:11,072 - services.audio_link_routes - INFO - [audio_link_routes.py:216] - Processing URL: https://www.tiktok.com/@fightjoe/video/7127311328095522053?is_from_webapp=1&sender_device=pc&web_id=7412617488065742368
2025-01-24 16:27:11,073 - services.audio_link_routes - INFO - [audio_link_routes.py:236] - Processing TikTok URL
2025-01-24 16:27:11,073 - services.audio_link_routes - INFO - [audio_link_routes.py:120] - Using options for tiktok: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp2k2sx1ej/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8, 'extractor_args': {'tiktok': {'api_hostname': 'api22-normal-c-alisg.tiktokv.com', 'app_name': 'trill', 'app_version': '34.1.2', 'manifest_app_version': '2023401020', 'app_info': '1234567890123456789/trill///1180', 'device_id': '1131095341711814670'}}}
2025-01-24 16:27:12,833 - services.audio_link_routes - INFO - [audio_link_routes.py:133] - Successfully downloaded tiktok content
2025-01-24 16:27:12,835 - services.audio_link_routes - INFO - [audio_link_routes.py:152] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp2k2sx1ej/output.wav
2025-01-24 16:27:12,839 - services.audio_link_routes - INFO - [audio_link_routes.py:164] - Successfully converted audio to WAV
2025-01-24 16:27:12,840 - services.audio_link_routes - INFO - [audio_link_routes.py:242] - Successfully processed audio
2025-01-24 16:27:12,840 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 1.77s, Memory Change: 36.70MB
2025-01-24 16:27:12,840 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 1.77s
2025-01-24 16:27:21,042 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-24 16:27:21,043 - services.translation_routes - INFO - [translation_routes.py:30] - Starting translation request f578f15c
2025-01-24 16:27:21,043 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-24 16:27:21,043 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-24 16:27:21,044 - services.translation_routes - INFO - [translation_routes.py:87] - Request f578f15c: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpyjsn8evf.wav
2025-01-24 16:27:21,046 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 6.57 seconds
2025-01-24 16:27:21,046 - services.translation_routes - INFO - [translation_routes.py:100] - Request f578f15c: Beginning audio processing with diagnostics
2025-01-24 16:27:21,046 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpyjsn8evf.wav
2025-01-24 16:27:21,046 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 16000, Channels: 1
2025-01-24 16:27:21,048 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([1, 105163]), Frequency: 16000Hz
2025-01-24 16:27:21,067 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-24 16:27:21,071 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-24 16:27:21,080 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-24 16:27:21,096 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 16:27:21,099 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 16:27:21,103 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 16:27:21,103 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 16:27:21,106 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 16:27:21,107 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 16:27:21,110 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 16:27:21,110 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 16:27:21,259 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-24 16:27:21,259 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-24 16:27:21,277 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 16:27:21,277 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 16:27:21,280 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 16:27:21,280 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 16:27:21,285 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 16:27:21,285 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 16:27:21,289 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 16:27:21,289 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 16:27:21,440 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-24 16:27:21,441 - services.translation_routes - INFO - [translation_routes.py:111] - 
==================================================
2025-01-24 16:27:21,441 - services.translation_routes - INFO - [translation_routes.py:112] - Input Audio Quality Report
2025-01-24 16:27:21,441 - services.translation_routes - INFO - [translation_routes.py:113] - ==================================================
2025-01-24 16:27:21,441 - services.translation_routes - INFO - [translation_routes.py:114] - Request ID: f578f15c
2025-01-24 16:27:21,441 - services.translation_routes - INFO - [translation_routes.py:115] - Target Language: fra
2025-01-24 16:27:21,441 - services.translation_routes - INFO - [translation_routes.py:116] - --------------------------------------------------
2025-01-24 16:27:21,441 - services.translation_routes - INFO - [translation_routes.py:117] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.021
- Rms Level: 0.071
- Crest Factor: 13.339
- Zero Crossings: 37090.000
- Silence Percentage: 67.795
- Clipping Points: 0.000
- Dynamic Range: 4800816.700

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.098
  - Temporal Flatness: 0.028

- Volume Metrics:
  - Volume Stability: -0.884
  - Volume Range: 30950176.716
  - Volume Variations: 0.063

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0106790928303826
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.9157419204711914, 'stability': 3.098970890045166, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.0, 'distinction': 0.9852283596992493}
  - Description: Strong nasal resonance. Unstable nasal resonance. Clear distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.661
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.011
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-24 16:27:21,441 - services.translation_routes - INFO - [translation_routes.py:118] - ==================================================

2025-01-24 16:27:21,441 - services.translation_routes - INFO - [translation_routes.py:129] - Request f578f15c: Audio processed successfully
2025-01-24 16:27:21,470 - services.translation_routes - INFO - [translation_routes.py:148] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-24 16:27:28,649 - services.translation_routes - INFO - [translation_routes.py:186] - Source text: If you werent what do you think youd be? I definitely wouldnt be diabetic.
2025-01-24 16:27:33,783 - services.translation_routes - INFO - [translation_routes.py:205] - Target text: Si tu ne voulais pas être diabétique, que penses-tu que tu pourrais être?
2025-01-24 16:27:42,734 - services.translation_routes - INFO - [translation_routes.py:228] - Processing tuple output from model
2025-01-24 16:27:42,741 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 16:27:42,741 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 16:27:42,744 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 16:27:42,745 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 16:27:42,747 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 16:27:42,747 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 16:27:42,750 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 16:27:42,751 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 16:27:42,817 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-24 16:27:42,817 - services.translation_routes - INFO - [translation_routes.py:252] - 
==================================================
2025-01-24 16:27:42,817 - services.translation_routes - INFO - [translation_routes.py:253] - Translated Audio Quality Report
2025-01-24 16:27:42,817 - services.translation_routes - INFO - [translation_routes.py:254] - ==================================================
2025-01-24 16:27:42,817 - services.translation_routes - INFO - [translation_routes.py:255] - Request ID: f578f15c
2025-01-24 16:27:42,817 - services.translation_routes - INFO - [translation_routes.py:256] - Target Language: fra
2025-01-24 16:27:42,817 - services.translation_routes - INFO - [translation_routes.py:257] - --------------------------------------------------
2025-01-24 16:27:42,817 - services.translation_routes - INFO - [translation_routes.py:258] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.492
- Avg Amplitude: 0.045
- Rms Level: 0.077
- Crest Factor: 6.357
- Zero Crossings: 6385.000
- Silence Percentage: 18.488
- Clipping Points: 0.000
- Dynamic Range: 251.735

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.205
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.018
  - Temporal Flatness: 0.009

- Volume Metrics:
  - Volume Stability: 0.124
  - Volume Range: 356.679
  - Volume Variations: 0.051

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.024338377576676
- Background Noise: 3.542714205767776
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.5344456434249878, 'stability': 2.6021029949188232, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.13599510490894318, 'consistency': 0.0, 'distinction': 1.0}
  - Description: Moderate nasal resonance. Unstable nasal resonance. Clear distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.491
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 1.000

Vowel Quality:
  - Quality Score: 0.004
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-24 16:27:42,817 - services.translation_routes - INFO - [translation_routes.py:259] - ==================================================

2025-01-24 16:27:42,817 - services.translation_routes - INFO - [translation_routes.py:265] - Request f578f15c: Audio output processed successfully
2025-01-24 16:27:42,819 - services.translation_routes - INFO - [translation_routes.py:318] - Request f578f15c: Response prepared successfully
2025-01-24 16:27:42,819 - services.translation_routes - INFO - [translation_routes.py:329] - Request f578f15c completed in 21.78s
2025-01-24 16:27:42,819 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 21.78s, Memory Change: 359.69MB
2025-01-24 16:27:42,819 - __main__ - INFO - [app.py:278] - Request to /translate took 27.51s
2025-01-24 16:29:33,949 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-01-24 16:29:33,950 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-24 16:29:33,953 - services.audio_link_routes - INFO - [audio_link_routes.py:216] - Processing URL: https://www.tiktok.com/@loganpaul/video/7138576512512478510
2025-01-24 16:29:33,953 - services.audio_link_routes - INFO - [audio_link_routes.py:236] - Processing TikTok URL
2025-01-24 16:29:33,953 - services.audio_link_routes - INFO - [audio_link_routes.py:120] - Using options for tiktok: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp7upg7abb/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8, 'extractor_args': {'tiktok': {'api_hostname': 'api22-normal-c-alisg.tiktokv.com', 'app_name': 'trill', 'app_version': '34.1.2', 'manifest_app_version': '2023401020', 'app_info': '1234567890123456789/trill///1180', 'device_id': '4213515298623618839'}}}
2025-01-24 16:29:35,215 - services.audio_link_routes - INFO - [audio_link_routes.py:133] - Successfully downloaded tiktok content
2025-01-24 16:29:35,217 - services.audio_link_routes - INFO - [audio_link_routes.py:152] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp7upg7abb/output.wav
2025-01-24 16:29:35,257 - services.audio_link_routes - INFO - [audio_link_routes.py:164] - Successfully converted audio to WAV
2025-01-24 16:29:35,258 - services.audio_link_routes - INFO - [audio_link_routes.py:242] - Successfully processed audio
2025-01-24 16:29:35,259 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 1.31s, Memory Change: 45.72MB
2025-01-24 16:29:35,259 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 1.31s
2025-01-24 16:29:42,526 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-24 16:29:42,528 - services.translation_routes - INFO - [translation_routes.py:30] - Starting translation request 47d2dd23
2025-01-24 16:29:42,529 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-24 16:29:42,529 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-24 16:29:42,530 - services.translation_routes - INFO - [translation_routes.py:87] - Request 47d2dd23: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmptc61ba9x.wav
2025-01-24 16:29:42,531 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 73.49 seconds
2025-01-24 16:29:42,531 - services.translation_routes - INFO - [translation_routes.py:100] - Request 47d2dd23: Beginning audio processing with diagnostics
2025-01-24 16:29:42,531 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmptc61ba9x.wav
2025-01-24 16:29:42,531 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 16000, Channels: 1
2025-01-24 16:29:42,534 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([1, 1175881]), Frequency: 16000Hz
2025-01-24 16:29:42,595 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-24 16:29:42,600 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-24 16:29:42,694 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-24 16:29:42,816 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 16:29:42,817 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 16:29:42,842 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 16:29:42,842 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 16:29:42,868 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 16:29:42,868 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 16:29:42,892 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 16:29:42,892 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 16:29:45,430 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-24 16:29:45,431 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-24 16:29:45,648 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 16:29:45,649 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 16:29:45,673 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 16:29:45,673 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 16:29:45,699 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 16:29:45,699 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 16:29:45,722 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 16:29:45,723 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 16:29:48,101 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-24 16:29:48,101 - services.translation_routes - INFO - [translation_routes.py:111] - 
==================================================
2025-01-24 16:29:48,101 - services.translation_routes - INFO - [translation_routes.py:112] - Input Audio Quality Report
2025-01-24 16:29:48,101 - services.translation_routes - INFO - [translation_routes.py:113] - ==================================================
2025-01-24 16:29:48,101 - services.translation_routes - INFO - [translation_routes.py:114] - Request ID: 47d2dd23
2025-01-24 16:29:48,101 - services.translation_routes - INFO - [translation_routes.py:115] - Target Language: fra
2025-01-24 16:29:48,102 - services.translation_routes - INFO - [translation_routes.py:116] - --------------------------------------------------
2025-01-24 16:29:48,102 - services.translation_routes - INFO - [translation_routes.py:117] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.030
- Rms Level: 0.066
- Crest Factor: 14.362
- Zero Crossings: 607056.000
- Silence Percentage: 36.919
- Clipping Points: 0.000
- Dynamic Range: 7477676.676

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 0.000
  - Temporal Variation: 0.110
  - Temporal Flatness: 0.047

- Volume Metrics:
  - Volume Stability: -0.172
  - Volume Range: 38459184.766
  - Volume Variations: 0.050

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.009210845533956
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 1.3861757516860962, 'stability': 2.4274330139160156, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.3255118131637573, 'distinction': 0.10339464992284775}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.561
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.491
  - Rhythm Quality: 0.517
  - Intonation Quality: 0.464

Vowel Quality:
  - Quality Score: 0.009
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-24 16:29:48,102 - services.translation_routes - INFO - [translation_routes.py:118] - ==================================================

2025-01-24 16:29:48,102 - services.translation_routes - INFO - [translation_routes.py:129] - Request 47d2dd23: Audio processed successfully
2025-01-24 16:29:48,167 - services.translation_routes - INFO - [translation_routes.py:148] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-24 16:30:27,846 - services.translation_routes - INFO - [translation_routes.py:186] - Source text: This photo doesn't make sense. There's a plane that takes you up in the air and it feels like the passengers are floating. My goal was to throw them all into the air when we were at the peak of my work.
2025-01-24 16:30:59,313 - services.translation_routes - INFO - [translation_routes.py:205] - Target text: C'est une photo qui a été capturée sur papier et qui n'a pas de sens.
2025-01-24 16:32:07,343 - services.translation_routes - INFO - [translation_routes.py:228] - Processing tuple output from model
2025-01-24 16:32:07,358 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 16:32:07,359 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 16:32:07,365 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 16:32:07,365 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 16:32:07,370 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 16:32:07,370 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 16:32:07,376 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 16:32:07,376 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 16:32:07,550 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-24 16:32:07,551 - services.translation_routes - INFO - [translation_routes.py:252] - 
==================================================
2025-01-24 16:32:07,551 - services.translation_routes - INFO - [translation_routes.py:253] - Translated Audio Quality Report
2025-01-24 16:32:07,551 - services.translation_routes - INFO - [translation_routes.py:254] - ==================================================
2025-01-24 16:32:07,551 - services.translation_routes - INFO - [translation_routes.py:255] - Request ID: 47d2dd23
2025-01-24 16:32:07,551 - services.translation_routes - INFO - [translation_routes.py:256] - Target Language: fra
2025-01-24 16:32:07,551 - services.translation_routes - INFO - [translation_routes.py:257] - --------------------------------------------------
2025-01-24 16:32:07,551 - services.translation_routes - INFO - [translation_routes.py:258] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.602
- Avg Amplitude: 0.058
- Rms Level: 0.093
- Crest Factor: 6.441
- Zero Crossings: 14236.000
- Silence Percentage: 15.156
- Clipping Points: 0.000
- Dynamic Range: 395.224

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.195
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.025
  - Temporal Flatness: 0.014

- Volume Metrics:
  - Volume Stability: 0.252
  - Volume Range: 2755.422
  - Volume Variations: 0.056

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0290159448943035
- Background Noise: 3.5765276863266564
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.8286157250404358, 'stability': 3.3117475509643555, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.0, 'distinction': 0.14891208708286285}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.548
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.004
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-24 16:32:07,551 - services.translation_routes - INFO - [translation_routes.py:259] - ==================================================

2025-01-24 16:32:07,551 - services.translation_routes - INFO - [translation_routes.py:265] - Request 47d2dd23: Audio output processed successfully
2025-01-24 16:32:07,555 - services.translation_routes - INFO - [translation_routes.py:318] - Request 47d2dd23: Response prepared successfully
2025-01-24 16:32:07,555 - services.translation_routes - INFO - [translation_routes.py:329] - Request 47d2dd23 completed in 145.03s
2025-01-24 16:32:07,558 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 145.03s, Memory Change: 803.19MB
2025-01-24 16:32:07,558 - __main__ - INFO - [app.py:278] - Request to /translate took 150.35s
2025-01-24 17:09:14,049 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.56MB
2025-01-24 17:09:14,051 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-24 17:09:14,054 - services.audio_link_routes - INFO - [audio_link_routes.py:216] - Processing URL: https://www.tiktok.com/@fightjoe/video/7127311328095522053
2025-01-24 17:09:14,054 - services.audio_link_routes - INFO - [audio_link_routes.py:236] - Processing TikTok URL
2025-01-24 17:09:14,055 - services.audio_link_routes - INFO - [audio_link_routes.py:120] - Using options for tiktok: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp_n7gil3v/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8, 'extractor_args': {'tiktok': {'api_hostname': 'api22-normal-c-alisg.tiktokv.com', 'app_name': 'trill', 'app_version': '34.1.2', 'manifest_app_version': '2023401020', 'app_info': '1234567890123456789/trill///1180', 'device_id': '0260691590365623354'}}}
2025-01-24 17:09:15,436 - services.audio_link_routes - INFO - [audio_link_routes.py:133] - Successfully downloaded tiktok content
2025-01-24 17:09:15,437 - services.audio_link_routes - INFO - [audio_link_routes.py:152] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp_n7gil3v/output.wav
2025-01-24 17:09:15,442 - services.audio_link_routes - INFO - [audio_link_routes.py:164] - Successfully converted audio to WAV
2025-01-24 17:09:15,442 - services.audio_link_routes - INFO - [audio_link_routes.py:242] - Successfully processed audio
2025-01-24 17:09:15,443 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 1.39s, Memory Change: 47.31MB
2025-01-24 17:09:15,443 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 1.39s
2025-01-24 17:09:41,168 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-24 17:09:41,170 - services.translation_routes - INFO - [translation_routes.py:30] - Starting translation request ecb754e4
2025-01-24 17:09:41,170 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-24 17:09:41,170 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-24 17:09:41,171 - services.translation_routes - INFO - [translation_routes.py:87] - Request ecb754e4: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpofw94om9.wav
2025-01-24 17:09:41,171 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 6.57 seconds
2025-01-24 17:09:41,171 - services.translation_routes - INFO - [translation_routes.py:100] - Request ecb754e4: Beginning audio processing with diagnostics
2025-01-24 17:09:41,171 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpofw94om9.wav
2025-01-24 17:09:41,171 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 16000, Channels: 1
2025-01-24 17:09:41,172 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([1, 105163]), Frequency: 16000Hz
2025-01-24 17:09:41,189 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-24 17:09:41,193 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-24 17:09:41,203 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-24 17:09:41,215 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 17:09:41,216 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 17:09:41,220 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 17:09:41,220 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 17:09:41,226 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 17:09:41,227 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 17:09:41,230 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 17:09:41,230 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 17:09:41,384 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-24 17:09:41,384 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-24 17:09:41,403 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 17:09:41,403 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 17:09:41,406 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 17:09:41,406 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 17:09:41,411 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 17:09:41,411 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 17:09:41,416 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 17:09:41,416 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 17:09:41,566 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-24 17:09:41,567 - services.translation_routes - INFO - [translation_routes.py:111] - 
==================================================
2025-01-24 17:09:41,567 - services.translation_routes - INFO - [translation_routes.py:112] - Input Audio Quality Report
2025-01-24 17:09:41,567 - services.translation_routes - INFO - [translation_routes.py:113] - ==================================================
2025-01-24 17:09:41,567 - services.translation_routes - INFO - [translation_routes.py:114] - Request ID: ecb754e4
2025-01-24 17:09:41,567 - services.translation_routes - INFO - [translation_routes.py:115] - Target Language: fra
2025-01-24 17:09:41,567 - services.translation_routes - INFO - [translation_routes.py:116] - --------------------------------------------------
2025-01-24 17:09:41,567 - services.translation_routes - INFO - [translation_routes.py:117] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.021
- Rms Level: 0.071
- Crest Factor: 13.339
- Zero Crossings: 37090.000
- Silence Percentage: 67.795
- Clipping Points: 0.000
- Dynamic Range: 4800816.700

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.098
  - Temporal Flatness: 0.028

- Volume Metrics:
  - Volume Stability: -0.884
  - Volume Range: 30950176.716
  - Volume Variations: 0.063

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0106790928303826
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.9157419204711914, 'stability': 3.098970890045166, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.0, 'distinction': 0.9852283596992493}
  - Description: Strong nasal resonance. Unstable nasal resonance. Clear distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.661
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.011
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-24 17:09:41,567 - services.translation_routes - INFO - [translation_routes.py:118] - ==================================================

2025-01-24 17:09:41,567 - services.translation_routes - INFO - [translation_routes.py:129] - Request ecb754e4: Audio processed successfully
2025-01-24 17:09:41,573 - services.translation_routes - INFO - [translation_routes.py:148] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-24 17:09:48,968 - services.translation_routes - INFO - [translation_routes.py:186] - Source text: If you werent what do you think youd be? I definitely wouldnt be diabetic.
2025-01-24 17:09:54,204 - services.translation_routes - INFO - [translation_routes.py:205] - Target text: Si tu ne voulais pas être diabétique, que penses-tu que tu pourrais être?
2025-01-24 17:10:02,245 - services.translation_routes - INFO - [translation_routes.py:228] - Processing tuple output from model
2025-01-24 17:10:02,251 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 17:10:02,252 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 17:10:02,255 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 17:10:02,255 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 17:10:02,260 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 17:10:02,260 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 17:10:02,263 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 17:10:02,263 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 17:10:02,324 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-24 17:10:02,324 - services.translation_routes - INFO - [translation_routes.py:252] - 
==================================================
2025-01-24 17:10:02,324 - services.translation_routes - INFO - [translation_routes.py:253] - Translated Audio Quality Report
2025-01-24 17:10:02,324 - services.translation_routes - INFO - [translation_routes.py:254] - ==================================================
2025-01-24 17:10:02,324 - services.translation_routes - INFO - [translation_routes.py:255] - Request ID: ecb754e4
2025-01-24 17:10:02,324 - services.translation_routes - INFO - [translation_routes.py:256] - Target Language: fra
2025-01-24 17:10:02,324 - services.translation_routes - INFO - [translation_routes.py:257] - --------------------------------------------------
2025-01-24 17:10:02,324 - services.translation_routes - INFO - [translation_routes.py:258] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.467
- Avg Amplitude: 0.041
- Rms Level: 0.075
- Crest Factor: 6.199
- Zero Crossings: 4442.000
- Silence Percentage: 30.137
- Clipping Points: 0.000
- Dynamic Range: 959.247

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.225
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.016
  - Temporal Flatness: 0.008

- Volume Metrics:
  - Volume Stability: 0.046
  - Volume Range: 1569.416
  - Volume Variations: 0.052

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.024315002179121
- Background Noise: 3.4795847855527247
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.6481978893280029, 'stability': 2.8703465461730957, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.0, 'distinction': 1.0}
  - Description: Moderate nasal resonance. Unstable nasal resonance. Clear distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.612
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 1.000

Vowel Quality:
  - Quality Score: 0.003
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-24 17:10:02,325 - services.translation_routes - INFO - [translation_routes.py:259] - ==================================================

2025-01-24 17:10:02,325 - services.translation_routes - INFO - [translation_routes.py:265] - Request ecb754e4: Audio output processed successfully
2025-01-24 17:10:02,326 - services.translation_routes - INFO - [translation_routes.py:318] - Request ecb754e4: Response prepared successfully
2025-01-24 17:10:02,326 - services.translation_routes - INFO - [translation_routes.py:329] - Request ecb754e4 completed in 21.16s
2025-01-24 17:10:02,326 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 21.16s, Memory Change: 363.17MB
2025-01-24 17:10:02,326 - __main__ - INFO - [app.py:278] - Request to /translate took 27.21s
2025-01-24 18:22:10,864 - __main__ - INFO - [app.py:217] - Received SIGINT signal
2025-01-24 18:22:10,865 - __main__ - INFO - [app.py:202] - Initiating graceful shutdown...
2025-01-24 18:22:15,868 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-24 18:22:15,870 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-24 18:22:15,870 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-24 18:22:15,873 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-24 18:22:15,874 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-24 18:22:15,874 - __main__ - INFO - [app.py:206] - Graceful shutdown completed
2025-01-24 18:22:15,877 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-24 18:22:15,878 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-24 18:22:15,878 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-24 18:22:15,878 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-24 18:22:15,879 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-24 18:22:15,879 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-24 18:22:15,879 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-24 18:22:15,879 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-24 18:22:15,880 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-24 18:22:15,880 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-24 18:22:26,437 - __main__ - INFO - [app.py:467] - Metrics server started on port 8000
2025-01-24 18:22:26,437 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-24 18:22:39,828 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-24 18:22:48,966 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-24 18:22:48,967 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-24 18:22:54,443 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-24 18:22:54,444 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-24 18:22:54,444 - __main__ - INFO - [app.py:491] - ==================================================
2025-01-24 18:22:54,444 - __main__ - INFO - [app.py:492] - Starting LinguaSync Backend
2025-01-24 18:22:54,445 - __main__ - INFO - [app.py:493] - Starting Flask app on port 5001 using cpu
2025-01-24 18:22:54,445 - __main__ - INFO - [app.py:494] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-01-24 18:22:54,445 - __main__ - INFO - [app.py:495] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-24 18:22:54,445 - __main__ - INFO - [app.py:496] - Maximum audio length: 300 seconds
2025-01-24 18:22:54,445 - __main__ - INFO - [app.py:497] - Sample rate: 16000 Hz
2025-01-24 18:22:54,445 - __main__ - INFO - [app.py:501] - System memory: 36.0GB total, 12.7GB available
2025-01-24 18:22:54,445 - __main__ - INFO - [app.py:502] - CPU cores: 11
2025-01-24 18:22:54,445 - __main__ - INFO - [app.py:510] - Configuration:
2025-01-24 18:22:54,445 - __main__ - INFO - [app.py:511] - - Debug mode: False
2025-01-24 18:22:54,445 - __main__ - INFO - [app.py:512] - - CORS enabled: True
2025-01-24 18:22:54,445 - __main__ - INFO - [app.py:513] - - Rate limiting: 10 requests per minute
2025-01-24 18:22:54,445 - __main__ - INFO - [app.py:514] - - Metrics enabled: True (port 8000)
2025-01-24 18:22:54,445 - __main__ - INFO - [app.py:516] - ==================================================
2025-01-24 18:23:53,113 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-01-24 18:23:53,114 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-24 18:23:53,117 - services.audio_link_routes - INFO - [audio_link_routes.py:216] - Processing URL: https://www.tiktok.com/@loganpaul/video/7138576512512478510
2025-01-24 18:23:53,117 - services.audio_link_routes - INFO - [audio_link_routes.py:236] - Processing TikTok URL
2025-01-24 18:23:53,118 - services.audio_link_routes - INFO - [audio_link_routes.py:120] - Using options for tiktok: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmprje2d2rh/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8, 'extractor_args': {'tiktok': {'api_hostname': 'api22-normal-c-alisg.tiktokv.com', 'app_name': 'trill', 'app_version': '34.1.2', 'manifest_app_version': '2023401020', 'app_info': '1234567890123456789/trill///1180', 'device_id': '0664279079914359223'}}}
2025-01-24 18:23:54,666 - services.audio_link_routes - INFO - [audio_link_routes.py:133] - Successfully downloaded tiktok content
2025-01-24 18:23:54,667 - services.audio_link_routes - INFO - [audio_link_routes.py:152] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmprje2d2rh/output.wav
2025-01-24 18:23:54,706 - services.audio_link_routes - INFO - [audio_link_routes.py:164] - Successfully converted audio to WAV
2025-01-24 18:23:54,707 - services.audio_link_routes - INFO - [audio_link_routes.py:242] - Successfully processed audio
2025-01-24 18:23:54,708 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 1.59s, Memory Change: 46.23MB
2025-01-24 18:23:54,708 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 1.59s
2025-01-24 18:24:04,351 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-24 18:24:04,354 - services.translation_routes - INFO - [translation_routes.py:30] - Starting translation request 7e884658
2025-01-24 18:24:04,354 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-24 18:24:04,354 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-24 18:24:04,356 - services.translation_routes - INFO - [translation_routes.py:87] - Request 7e884658: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmplvjhpyhk.wav
2025-01-24 18:24:04,356 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 73.49 seconds
2025-01-24 18:24:04,356 - services.translation_routes - INFO - [translation_routes.py:100] - Request 7e884658: Beginning audio processing with diagnostics
2025-01-24 18:24:04,356 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmplvjhpyhk.wav
2025-01-24 18:24:04,356 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 16000, Channels: 1
2025-01-24 18:24:04,359 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([1, 1175881]), Frequency: 16000Hz
2025-01-24 18:24:04,424 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-24 18:24:04,429 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-24 18:24:04,528 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-24 18:24:04,650 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 18:24:04,651 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 18:24:04,678 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 18:24:04,678 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 18:24:04,714 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 18:24:04,730 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 18:24:04,771 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 18:24:04,788 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 18:24:07,346 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-24 18:24:07,346 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-24 18:24:07,562 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 18:24:07,563 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 18:24:07,585 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 18:24:07,586 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 18:24:07,609 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 18:24:07,610 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 18:24:07,633 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 18:24:07,633 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 18:24:10,032 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-24 18:24:10,032 - services.translation_routes - INFO - [translation_routes.py:111] - 
==================================================
2025-01-24 18:24:10,032 - services.translation_routes - INFO - [translation_routes.py:112] - Input Audio Quality Report
2025-01-24 18:24:10,032 - services.translation_routes - INFO - [translation_routes.py:113] - ==================================================
2025-01-24 18:24:10,032 - services.translation_routes - INFO - [translation_routes.py:114] - Request ID: 7e884658
2025-01-24 18:24:10,032 - services.translation_routes - INFO - [translation_routes.py:115] - Target Language: fra
2025-01-24 18:24:10,032 - services.translation_routes - INFO - [translation_routes.py:116] - --------------------------------------------------
2025-01-24 18:24:10,032 - services.translation_routes - INFO - [translation_routes.py:117] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.030
- Rms Level: 0.066
- Crest Factor: 14.362
- Zero Crossings: 607056.000
- Silence Percentage: 36.919
- Clipping Points: 0.000
- Dynamic Range: 7477676.676

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 0.000
  - Temporal Variation: 0.110
  - Temporal Flatness: 0.047

- Volume Metrics:
  - Volume Stability: -0.172
  - Volume Range: 38459184.766
  - Volume Variations: 0.050

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.009210845533956
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 1.3861757516860962, 'stability': 2.4274330139160156, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.3255118131637573, 'distinction': 0.10339464992284775}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.561
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.491
  - Rhythm Quality: 0.517
  - Intonation Quality: 0.464

Vowel Quality:
  - Quality Score: 0.009
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-24 18:24:10,032 - services.translation_routes - INFO - [translation_routes.py:118] - ==================================================

2025-01-24 18:24:10,033 - services.translation_routes - INFO - [translation_routes.py:129] - Request 7e884658: Audio processed successfully
2025-01-24 18:24:10,105 - services.translation_routes - INFO - [translation_routes.py:148] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-24 18:24:51,032 - services.translation_routes - INFO - [translation_routes.py:186] - Source text: This photo doesn't make sense. There's a plane that takes you up in the air and it feels like the passengers are floating. My goal was to throw them all into the air when we were at the peak of my work.
2025-01-24 18:25:22,221 - services.translation_routes - INFO - [translation_routes.py:205] - Target text: C'est une photo qui a été capturée sur papier et qui n'a pas de sens.
2025-01-24 18:26:27,235 - services.translation_routes - INFO - [translation_routes.py:228] - Processing tuple output from model
2025-01-24 18:26:27,255 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 18:26:27,257 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 18:26:27,260 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 18:26:27,260 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 18:26:27,264 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 18:26:27,264 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 18:26:27,266 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 18:26:27,267 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 18:26:27,356 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-24 18:26:27,358 - services.translation_routes - INFO - [translation_routes.py:252] - 
==================================================
2025-01-24 18:26:27,358 - services.translation_routes - INFO - [translation_routes.py:253] - Translated Audio Quality Report
2025-01-24 18:26:27,358 - services.translation_routes - INFO - [translation_routes.py:254] - ==================================================
2025-01-24 18:26:27,358 - services.translation_routes - INFO - [translation_routes.py:255] - Request ID: 7e884658
2025-01-24 18:26:27,358 - services.translation_routes - INFO - [translation_routes.py:256] - Target Language: fra
2025-01-24 18:26:27,358 - services.translation_routes - INFO - [translation_routes.py:257] - --------------------------------------------------
2025-01-24 18:26:27,358 - services.translation_routes - INFO - [translation_routes.py:258] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.607
- Avg Amplitude: 0.055
- Rms Level: 0.098
- Crest Factor: 6.226
- Zero Crossings: 9064.000
- Silence Percentage: 15.930
- Clipping Points: 0.000
- Dynamic Range: 327.861

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.222
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.025
  - Temporal Flatness: 0.014

- Volume Metrics:
  - Volume Stability: 0.102
  - Volume Range: 699.768
  - Volume Variations: 0.065

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0313317572357783
- Background Noise: 3.4903850625341364
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.7709305882453918, 'stability': 3.101200580596924, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.1791353076696396, 'consistency': 0.0, 'distinction': 1.0}
  - Description: Strong nasal resonance. Unstable nasal resonance. Clear distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.556
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.003
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-24 18:26:27,358 - services.translation_routes - INFO - [translation_routes.py:259] - ==================================================

2025-01-24 18:26:27,358 - services.translation_routes - INFO - [translation_routes.py:265] - Request 7e884658: Audio output processed successfully
2025-01-24 18:26:27,364 - services.translation_routes - INFO - [translation_routes.py:318] - Request 7e884658: Response prepared successfully
2025-01-24 18:26:27,364 - services.translation_routes - INFO - [translation_routes.py:329] - Request 7e884658 completed in 143.01s
2025-01-24 18:26:27,367 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 143.01s, Memory Change: 1569.86MB
2025-01-24 18:26:27,368 - __main__ - INFO - [app.py:278] - Request to /translate took 148.57s
2025-01-24 18:36:04,489 - __main__ - INFO - [app.py:217] - Received SIGINT signal
2025-01-24 18:36:04,491 - __main__ - INFO - [app.py:202] - Initiating graceful shutdown...
2025-01-24 18:36:06,050 - __main__ - INFO - [app.py:217] - Received SIGINT signal
2025-01-24 18:36:06,051 - __main__ - INFO - [app.py:202] - Initiating graceful shutdown...
2025-01-24 18:36:07,362 - __main__ - INFO - [app.py:217] - Received SIGINT signal
2025-01-24 18:36:07,363 - __main__ - INFO - [app.py:202] - Initiating graceful shutdown...
2025-01-24 18:36:12,368 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-24 18:36:12,369 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-24 18:36:12,369 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-24 18:36:12,370 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-24 18:36:12,371 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-24 18:36:12,371 - __main__ - INFO - [app.py:206] - Graceful shutdown completed
2025-01-24 18:36:12,372 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-24 18:36:12,373 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-24 18:36:12,373 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-24 18:36:12,373 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-24 18:36:12,374 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-24 18:36:12,374 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-24 18:36:12,374 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-24 18:36:12,374 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-24 18:36:12,375 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-24 18:36:12,375 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-24 18:36:23,515 - __main__ - INFO - [app.py:467] - Metrics server started on port 8000
2025-01-24 18:36:23,515 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-24 18:36:37,035 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-24 18:36:43,181 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-24 18:36:43,182 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-24 18:36:48,415 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-24 18:36:48,417 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-24 18:36:48,417 - __main__ - INFO - [app.py:491] - ==================================================
2025-01-24 18:36:48,417 - __main__ - INFO - [app.py:492] - Starting LinguaSync Backend
2025-01-24 18:36:48,417 - __main__ - INFO - [app.py:493] - Starting Flask app on port 5001 using cpu
2025-01-24 18:36:48,417 - __main__ - INFO - [app.py:494] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-01-24 18:36:48,417 - __main__ - INFO - [app.py:495] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-24 18:36:48,417 - __main__ - INFO - [app.py:496] - Maximum audio length: 300 seconds
2025-01-24 18:36:48,417 - __main__ - INFO - [app.py:497] - Sample rate: 16000 Hz
2025-01-24 18:36:48,417 - __main__ - INFO - [app.py:501] - System memory: 36.0GB total, 21.3GB available
2025-01-24 18:36:48,417 - __main__ - INFO - [app.py:502] - CPU cores: 11
2025-01-24 18:36:48,417 - __main__ - INFO - [app.py:510] - Configuration:
2025-01-24 18:36:48,417 - __main__ - INFO - [app.py:511] - - Debug mode: False
2025-01-24 18:36:48,417 - __main__ - INFO - [app.py:512] - - CORS enabled: True
2025-01-24 18:36:48,417 - __main__ - INFO - [app.py:513] - - Rate limiting: 10 requests per minute
2025-01-24 18:36:48,417 - __main__ - INFO - [app.py:514] - - Metrics enabled: True (port 8000)
2025-01-24 18:36:48,417 - __main__ - INFO - [app.py:516] - ==================================================
2025-01-24 18:38:32,241 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-01-24 18:38:32,242 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-24 18:38:32,245 - services.audio_link_routes - INFO - [audio_link_routes.py:216] - Processing URL: https://www.tiktok.com/@loganpaul/video/7138576512512478510
2025-01-24 18:38:32,245 - services.audio_link_routes - INFO - [audio_link_routes.py:236] - Processing TikTok URL
2025-01-24 18:38:32,246 - services.audio_link_routes - INFO - [audio_link_routes.py:120] - Using options for tiktok: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpv41rt3d4/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8, 'extractor_args': {'tiktok': {'api_hostname': 'api22-normal-c-alisg.tiktokv.com', 'app_name': 'trill', 'app_version': '34.1.2', 'manifest_app_version': '2023401020', 'app_info': '1234567890123456789/trill///1180', 'device_id': '2917462851494830744'}}}
2025-01-24 18:38:34,097 - services.audio_link_routes - INFO - [audio_link_routes.py:133] - Successfully downloaded tiktok content
2025-01-24 18:38:34,098 - services.audio_link_routes - INFO - [audio_link_routes.py:152] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpv41rt3d4/output.wav
2025-01-24 18:38:34,139 - services.audio_link_routes - INFO - [audio_link_routes.py:164] - Successfully converted audio to WAV
2025-01-24 18:38:34,140 - services.audio_link_routes - INFO - [audio_link_routes.py:242] - Successfully processed audio
2025-01-24 18:38:34,140 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 1.90s, Memory Change: 4.56MB
2025-01-24 18:38:34,140 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 1.90s
2025-01-24 18:38:42,012 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-24 18:38:42,013 - services.translation_routes - INFO - [translation_routes.py:30] - Starting translation request faa3b5e7
2025-01-24 18:38:42,013 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-24 18:38:42,014 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-24 18:38:42,016 - services.translation_routes - INFO - [translation_routes.py:87] - Request faa3b5e7: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpcpcorgcu.wav
2025-01-24 18:38:42,016 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 73.49 seconds
2025-01-24 18:38:42,016 - services.translation_routes - INFO - [translation_routes.py:100] - Request faa3b5e7: Beginning audio processing with diagnostics
2025-01-24 18:38:42,016 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpcpcorgcu.wav
2025-01-24 18:38:42,016 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 16000, Channels: 1
2025-01-24 18:38:42,020 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([1, 1175881]), Frequency: 16000Hz
2025-01-24 18:38:42,079 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-24 18:38:42,084 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-24 18:38:42,173 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-24 18:38:42,295 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 18:38:42,295 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 18:38:42,318 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 18:38:42,318 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 18:38:42,341 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 18:38:42,341 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 18:38:42,363 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 18:38:42,364 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 18:38:44,807 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-24 18:38:44,807 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-24 18:38:45,019 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 18:38:45,019 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 18:38:45,043 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 18:38:45,043 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 18:38:45,066 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 18:38:45,066 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 18:38:45,088 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 18:38:45,088 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 18:38:47,396 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-24 18:38:47,397 - services.translation_routes - INFO - [translation_routes.py:111] - 
==================================================
2025-01-24 18:38:47,397 - services.translation_routes - INFO - [translation_routes.py:112] - Input Audio Quality Report
2025-01-24 18:38:47,397 - services.translation_routes - INFO - [translation_routes.py:113] - ==================================================
2025-01-24 18:38:47,397 - services.translation_routes - INFO - [translation_routes.py:114] - Request ID: faa3b5e7
2025-01-24 18:38:47,397 - services.translation_routes - INFO - [translation_routes.py:115] - Target Language: fra
2025-01-24 18:38:47,397 - services.translation_routes - INFO - [translation_routes.py:116] - --------------------------------------------------
2025-01-24 18:38:47,397 - services.translation_routes - INFO - [translation_routes.py:117] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.030
- Rms Level: 0.066
- Crest Factor: 14.362
- Zero Crossings: 607056.000
- Silence Percentage: 36.919
- Clipping Points: 0.000
- Dynamic Range: 7477676.676

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 0.000
  - Temporal Variation: 0.110
  - Temporal Flatness: 0.047

- Volume Metrics:
  - Volume Stability: -0.172
  - Volume Range: 38459184.766
  - Volume Variations: 0.050

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.009210845533956
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 1.3861757516860962, 'stability': 2.4274330139160156, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.3255118131637573, 'distinction': 0.10339464992284775}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.561
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.491
  - Rhythm Quality: 0.517
  - Intonation Quality: 0.464

Vowel Quality:
  - Quality Score: 0.009
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-24 18:38:47,397 - services.translation_routes - INFO - [translation_routes.py:118] - ==================================================

2025-01-24 18:38:47,397 - services.translation_routes - INFO - [translation_routes.py:129] - Request faa3b5e7: Audio processed successfully
2025-01-24 18:38:47,459 - services.translation_routes - INFO - [translation_routes.py:148] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-24 18:39:21,287 - services.translation_routes - INFO - [translation_routes.py:186] - Source text: This photo doesn't make sense. There's a plane that takes you up in the air and it feels like the passengers are floating. My goal was to throw them all into the air when we were at the peak of my work.
2025-01-24 18:39:50,760 - services.translation_routes - INFO - [translation_routes.py:205] - Target text: C'est une photo qui a été capturée sur papier et qui n'a pas de sens.
2025-01-24 18:40:49,357 - services.translation_routes - INFO - [translation_routes.py:228] - Processing tuple output from model
2025-01-24 18:40:49,362 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 18:40:49,362 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 18:40:49,365 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 18:40:49,366 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 18:40:49,370 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 18:40:49,370 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 18:40:49,372 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:736] - Spectral slope calculation failed: SVD did not converge in Linear Least Squares
2025-01-24 18:40:49,373 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 18:40:49,373 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 18:40:49,422 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-24 18:40:49,422 - services.translation_routes - INFO - [translation_routes.py:252] - 
==================================================
2025-01-24 18:40:49,422 - services.translation_routes - INFO - [translation_routes.py:253] - Translated Audio Quality Report
2025-01-24 18:40:49,422 - services.translation_routes - INFO - [translation_routes.py:254] - ==================================================
2025-01-24 18:40:49,422 - services.translation_routes - INFO - [translation_routes.py:255] - Request ID: faa3b5e7
2025-01-24 18:40:49,422 - services.translation_routes - INFO - [translation_routes.py:256] - Target Language: fra
2025-01-24 18:40:49,422 - services.translation_routes - INFO - [translation_routes.py:257] - --------------------------------------------------
2025-01-24 18:40:49,422 - services.translation_routes - INFO - [translation_routes.py:258] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.678
- Avg Amplitude: 0.055
- Rms Level: 0.094
- Crest Factor: 7.186
- Zero Crossings: 3667.000
- Silence Percentage: 17.671
- Clipping Points: 0.000
- Dynamic Range: 416.397

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.102
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.020
  - Temporal Flatness: 0.010

- Volume Metrics:
  - Volume Stability: 0.219
  - Volume Range: 542.840
  - Volume Variations: 0.059

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.026251392605451
- Background Noise: 3.8744976266960154
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.2521045506000519, 'stability': 1.7716753482818604, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.9567262530326843, 'consistency': 0.0, 'distinction': 1.0}
  - Description: Weak nasal resonance. Unstable nasal resonance. Clear distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.535
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 1.000

Vowel Quality:
  - Quality Score: 0.004
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-24 18:40:49,422 - services.translation_routes - INFO - [translation_routes.py:259] - ==================================================

2025-01-24 18:40:49,422 - services.translation_routes - INFO - [translation_routes.py:265] - Request faa3b5e7: Audio output processed successfully
2025-01-24 18:40:49,423 - services.translation_routes - INFO - [translation_routes.py:318] - Request faa3b5e7: Response prepared successfully
2025-01-24 18:40:49,424 - services.translation_routes - INFO - [translation_routes.py:329] - Request faa3b5e7 completed in 127.41s
2025-01-24 18:40:49,424 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 127.41s, Memory Change: 1766.53MB
2025-01-24 18:40:49,424 - __main__ - INFO - [app.py:278] - Request to /translate took 132.79s
2025-01-24 18:53:58,273 - __main__ - INFO - [app.py:217] - Received SIGINT signal
2025-01-24 18:53:58,274 - __main__ - INFO - [app.py:202] - Initiating graceful shutdown...
2025-01-24 18:54:03,278 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-24 18:54:03,279 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-24 18:54:03,279 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-24 18:54:03,281 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-24 18:54:03,281 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-24 18:54:03,282 - __main__ - INFO - [app.py:206] - Graceful shutdown completed
2025-01-24 18:54:03,282 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-24 18:54:03,283 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-24 18:54:03,283 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-24 18:54:03,284 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-24 18:54:03,284 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-24 18:54:03,285 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-24 18:54:03,285 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-24 18:54:03,285 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-24 18:54:03,286 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-24 18:54:03,286 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-24 18:54:15,833 - __main__ - INFO - [app.py:467] - Metrics server started on port 8000
2025-01-24 18:54:15,833 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-24 18:54:30,068 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-24 18:54:37,763 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-24 18:54:37,764 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-24 18:54:43,502 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-24 18:54:43,504 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-24 18:54:43,504 - __main__ - INFO - [app.py:491] - ==================================================
2025-01-24 18:54:43,504 - __main__ - INFO - [app.py:492] - Starting LinguaSync Backend
2025-01-24 18:54:43,504 - __main__ - INFO - [app.py:493] - Starting Flask app on port 5001 using cpu
2025-01-24 18:54:43,504 - __main__ - INFO - [app.py:494] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-01-24 18:54:43,504 - __main__ - INFO - [app.py:495] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-24 18:54:43,504 - __main__ - INFO - [app.py:496] - Maximum audio length: 300 seconds
2025-01-24 18:54:43,504 - __main__ - INFO - [app.py:497] - Sample rate: 16000 Hz
2025-01-24 18:54:43,504 - __main__ - INFO - [app.py:501] - System memory: 36.0GB total, 16.3GB available
2025-01-24 18:54:43,504 - __main__ - INFO - [app.py:502] - CPU cores: 11
2025-01-24 18:54:43,504 - __main__ - INFO - [app.py:510] - Configuration:
2025-01-24 18:54:43,504 - __main__ - INFO - [app.py:511] - - Debug mode: False
2025-01-24 18:54:43,504 - __main__ - INFO - [app.py:512] - - CORS enabled: True
2025-01-24 18:54:43,504 - __main__ - INFO - [app.py:513] - - Rate limiting: 10 requests per minute
2025-01-24 18:54:43,504 - __main__ - INFO - [app.py:514] - - Metrics enabled: True (port 8000)
2025-01-24 18:54:43,504 - __main__ - INFO - [app.py:516] - ==================================================
2025-01-24 18:55:19,285 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-01-24 18:55:19,285 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-24 18:55:19,288 - services.audio_link_routes - INFO - [audio_link_routes.py:216] - Processing URL: https://www.tiktok.com/@loganpaul/video/7138576512512478510
2025-01-24 18:55:19,288 - services.audio_link_routes - INFO - [audio_link_routes.py:236] - Processing TikTok URL
2025-01-24 18:55:19,288 - services.audio_link_routes - INFO - [audio_link_routes.py:120] - Using options for tiktok: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp8znoscb7/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8, 'extractor_args': {'tiktok': {'api_hostname': 'api22-normal-c-alisg.tiktokv.com', 'app_name': 'trill', 'app_version': '34.1.2', 'manifest_app_version': '2023401020', 'app_info': '1234567890123456789/trill///1180', 'device_id': '6674859420308313546'}}}
2025-01-24 18:55:20,712 - services.audio_link_routes - INFO - [audio_link_routes.py:133] - Successfully downloaded tiktok content
2025-01-24 18:55:20,713 - services.audio_link_routes - INFO - [audio_link_routes.py:152] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp8znoscb7/output.wav
2025-01-24 18:55:20,754 - services.audio_link_routes - INFO - [audio_link_routes.py:164] - Successfully converted audio to WAV
2025-01-24 18:55:20,755 - services.audio_link_routes - INFO - [audio_link_routes.py:242] - Successfully processed audio
2025-01-24 18:55:20,755 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 1.47s, Memory Change: 4.39MB
2025-01-24 18:55:20,755 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 1.47s
2025-01-24 18:55:31,635 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-24 18:55:31,638 - services.translation_routes - INFO - [translation_routes.py:30] - Starting translation request 45a87cbb
2025-01-24 18:55:31,638 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-24 18:55:31,639 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-24 18:55:31,640 - services.translation_routes - INFO - [translation_routes.py:87] - Request 45a87cbb: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpcpbmko0m.wav
2025-01-24 18:55:31,640 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 73.49 seconds
2025-01-24 18:55:31,641 - services.translation_routes - INFO - [translation_routes.py:100] - Request 45a87cbb: Beginning audio processing with diagnostics
2025-01-24 18:55:31,641 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpcpbmko0m.wav
2025-01-24 18:55:31,641 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 16000, Channels: 1
2025-01-24 18:55:31,644 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([1, 1175881]), Frequency: 16000Hz
2025-01-24 18:55:31,703 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-24 18:55:31,708 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-24 18:55:31,798 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-24 18:55:31,917 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 18:55:31,918 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 18:55:31,940 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 18:55:31,940 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 18:55:31,963 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 18:55:31,963 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 18:55:31,985 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 18:55:31,985 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 18:55:34,453 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-24 18:55:34,453 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-24 18:55:34,682 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 18:55:34,682 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 18:55:34,707 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 18:55:34,707 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 18:55:34,732 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 18:55:34,732 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 18:55:34,754 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 18:55:34,754 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 18:55:37,103 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-24 18:55:37,104 - services.translation_routes - INFO - [translation_routes.py:111] - 
==================================================
2025-01-24 18:55:37,104 - services.translation_routes - INFO - [translation_routes.py:112] - Input Audio Quality Report
2025-01-24 18:55:37,104 - services.translation_routes - INFO - [translation_routes.py:113] - ==================================================
2025-01-24 18:55:37,104 - services.translation_routes - INFO - [translation_routes.py:114] - Request ID: 45a87cbb
2025-01-24 18:55:37,104 - services.translation_routes - INFO - [translation_routes.py:115] - Target Language: fra
2025-01-24 18:55:37,104 - services.translation_routes - INFO - [translation_routes.py:116] - --------------------------------------------------
2025-01-24 18:55:37,104 - services.translation_routes - INFO - [translation_routes.py:117] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.030
- Rms Level: 0.066
- Crest Factor: 14.362
- Zero Crossings: 607056.000
- Silence Percentage: 36.919
- Clipping Points: 0.000
- Dynamic Range: 7477676.676

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 0.000
  - Temporal Variation: 0.110
  - Temporal Flatness: 0.047

- Volume Metrics:
  - Volume Stability: -0.172
  - Volume Range: 38459184.766
  - Volume Variations: 0.050

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.009210845533956
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 1.3861757516860962, 'stability': 2.4274330139160156, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.3255118131637573, 'distinction': 0.10339464992284775}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.561
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.491
  - Rhythm Quality: 0.517
  - Intonation Quality: 0.464

Vowel Quality:
  - Quality Score: 0.009
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-24 18:55:37,104 - services.translation_routes - INFO - [translation_routes.py:118] - ==================================================

2025-01-24 18:55:37,104 - services.translation_routes - INFO - [translation_routes.py:129] - Request 45a87cbb: Audio processed successfully
2025-01-24 18:55:37,164 - services.translation_routes - INFO - [translation_routes.py:148] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-24 18:56:12,521 - services.translation_routes - INFO - [translation_routes.py:186] - Source text: This photo doesn't make sense. There's a plane that takes you up in the air and it feels like the passengers are floating. My goal was to throw them all into the air when we were at the peak of my work.
2025-01-24 18:56:42,166 - services.translation_routes - INFO - [translation_routes.py:205] - Target text: C'est une photo qui a été capturée sur papier et qui n'a pas de sens.
2025-01-24 18:57:49,788 - services.translation_routes - INFO - [translation_routes.py:228] - Processing tuple output from model
2025-01-24 18:57:49,804 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 18:57:49,804 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 18:57:49,808 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 18:57:49,808 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 18:57:49,814 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 18:57:49,814 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 18:57:49,820 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 18:57:49,820 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 18:57:49,996 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-24 18:57:49,996 - services.translation_routes - INFO - [translation_routes.py:252] - 
==================================================
2025-01-24 18:57:49,996 - services.translation_routes - INFO - [translation_routes.py:253] - Translated Audio Quality Report
2025-01-24 18:57:49,996 - services.translation_routes - INFO - [translation_routes.py:254] - ==================================================
2025-01-24 18:57:49,996 - services.translation_routes - INFO - [translation_routes.py:255] - Request ID: 45a87cbb
2025-01-24 18:57:49,996 - services.translation_routes - INFO - [translation_routes.py:256] - Target Language: fra
2025-01-24 18:57:49,996 - services.translation_routes - INFO - [translation_routes.py:257] - --------------------------------------------------
2025-01-24 18:57:49,996 - services.translation_routes - INFO - [translation_routes.py:258] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.749
- Avg Amplitude: 0.058
- Rms Level: 0.095
- Crest Factor: 7.889
- Zero Crossings: 15850.000
- Silence Percentage: 12.289
- Clipping Points: 0.000
- Dynamic Range: 215.222

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.014
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.026
  - Temporal Flatness: 0.014

- Volume Metrics:
  - Volume Stability: 0.255
  - Volume Range: 498.169
  - Volume Variations: 0.057

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0240741743072403
- Background Noise: 4.155759699685058
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.8336576819419861, 'stability': 3.4722740650177, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.16550102829933167, 'consistency': 0.0, 'distinction': 1.0}
  - Description: Strong nasal resonance. Unstable nasal resonance. Clear distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.517
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.003
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-24 18:57:49,996 - services.translation_routes - INFO - [translation_routes.py:259] - ==================================================

2025-01-24 18:57:49,996 - services.translation_routes - INFO - [translation_routes.py:265] - Request 45a87cbb: Audio output processed successfully
2025-01-24 18:57:50,000 - services.translation_routes - INFO - [translation_routes.py:318] - Request 45a87cbb: Response prepared successfully
2025-01-24 18:57:50,000 - services.translation_routes - INFO - [translation_routes.py:329] - Request 45a87cbb completed in 138.36s
2025-01-24 18:57:50,001 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 138.36s, Memory Change: 780.80MB
2025-01-24 18:57:50,001 - __main__ - INFO - [app.py:278] - Request to /translate took 145.98s
2025-01-24 18:58:48,653 - __main__ - INFO - [app.py:217] - Received SIGINT signal
2025-01-24 18:58:48,653 - __main__ - INFO - [app.py:202] - Initiating graceful shutdown...
2025-01-24 18:58:53,658 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-24 18:58:53,659 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-24 18:58:53,659 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-24 18:58:53,660 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-24 18:58:53,660 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-24 18:58:53,660 - __main__ - INFO - [app.py:206] - Graceful shutdown completed
2025-01-24 18:58:53,662 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-24 18:58:53,662 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-24 18:58:53,662 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-24 18:58:53,662 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-24 18:58:53,662 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-24 18:58:53,663 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-24 18:58:53,663 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-24 18:58:53,663 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-24 18:58:53,663 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-24 18:58:53,663 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-24 18:59:01,157 - __main__ - INFO - [app.py:467] - Metrics server started on port 8000
2025-01-24 18:59:01,157 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-24 18:59:14,919 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-24 18:59:23,302 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-24 18:59:23,304 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-24 18:59:30,622 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-24 18:59:30,624 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-24 18:59:30,624 - __main__ - INFO - [app.py:491] - ==================================================
2025-01-24 18:59:30,624 - __main__ - INFO - [app.py:492] - Starting LinguaSync Backend
2025-01-24 18:59:30,624 - __main__ - INFO - [app.py:493] - Starting Flask app on port 5001 using cpu
2025-01-24 18:59:30,624 - __main__ - INFO - [app.py:494] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-01-24 18:59:30,624 - __main__ - INFO - [app.py:495] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-24 18:59:30,624 - __main__ - INFO - [app.py:496] - Maximum audio length: 300 seconds
2025-01-24 18:59:30,624 - __main__ - INFO - [app.py:497] - Sample rate: 16000 Hz
2025-01-24 18:59:30,624 - __main__ - INFO - [app.py:501] - System memory: 36.0GB total, 18.1GB available
2025-01-24 18:59:30,624 - __main__ - INFO - [app.py:502] - CPU cores: 11
2025-01-24 18:59:30,624 - __main__ - INFO - [app.py:510] - Configuration:
2025-01-24 18:59:30,624 - __main__ - INFO - [app.py:511] - - Debug mode: False
2025-01-24 18:59:30,624 - __main__ - INFO - [app.py:512] - - CORS enabled: True
2025-01-24 18:59:30,625 - __main__ - INFO - [app.py:513] - - Rate limiting: 10 requests per minute
2025-01-24 18:59:30,625 - __main__ - INFO - [app.py:514] - - Metrics enabled: True (port 8000)
2025-01-24 18:59:30,625 - __main__ - INFO - [app.py:516] - ==================================================
2025-01-24 19:01:07,090 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-01-24 19:01:07,090 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-24 19:01:07,093 - services.audio_link_routes - INFO - [audio_link_routes.py:216] - Processing URL: https://www.tiktok.com/@loganpaul/video/7138576512512478510
2025-01-24 19:01:07,093 - services.audio_link_routes - INFO - [audio_link_routes.py:236] - Processing TikTok URL
2025-01-24 19:01:07,094 - services.audio_link_routes - INFO - [audio_link_routes.py:120] - Using options for tiktok: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp_0gvy5r_/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8, 'extractor_args': {'tiktok': {'api_hostname': 'api22-normal-c-alisg.tiktokv.com', 'app_name': 'trill', 'app_version': '34.1.2', 'manifest_app_version': '2023401020', 'app_info': '1234567890123456789/trill///1180', 'device_id': '2363202893612409323'}}}
2025-01-24 19:01:08,810 - services.audio_link_routes - INFO - [audio_link_routes.py:133] - Successfully downloaded tiktok content
2025-01-24 19:01:08,812 - services.audio_link_routes - INFO - [audio_link_routes.py:152] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp_0gvy5r_/output.wav
2025-01-24 19:01:08,852 - services.audio_link_routes - INFO - [audio_link_routes.py:164] - Successfully converted audio to WAV
2025-01-24 19:01:08,853 - services.audio_link_routes - INFO - [audio_link_routes.py:242] - Successfully processed audio
2025-01-24 19:01:08,853 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 1.76s, Memory Change: 3.95MB
2025-01-24 19:01:08,853 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 1.76s
2025-01-24 19:01:15,976 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-24 19:01:15,977 - services.translation_routes - INFO - [translation_routes.py:30] - Starting translation request 1aa2e83e
2025-01-24 19:01:15,977 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-24 19:01:15,978 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-24 19:01:15,979 - services.translation_routes - INFO - [translation_routes.py:87] - Request 1aa2e83e: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpmd1rwswm.wav
2025-01-24 19:01:15,979 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 73.49 seconds
2025-01-24 19:01:15,979 - services.translation_routes - INFO - [translation_routes.py:100] - Request 1aa2e83e: Beginning audio processing with diagnostics
2025-01-24 19:01:15,979 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpmd1rwswm.wav
2025-01-24 19:01:15,980 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 16000, Channels: 1
2025-01-24 19:01:15,983 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([1, 1175881]), Frequency: 16000Hz
2025-01-24 19:01:16,043 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-24 19:01:16,050 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-24 19:01:16,141 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-24 19:01:16,264 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 19:01:16,265 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 19:01:16,289 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 19:01:16,289 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 19:01:16,315 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 19:01:16,315 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 19:01:16,338 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 19:01:16,339 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 19:01:18,856 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-24 19:01:18,857 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-24 19:01:19,070 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 19:01:19,070 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 19:01:19,092 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 19:01:19,093 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 19:01:19,117 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 19:01:19,118 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 19:01:19,141 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 19:01:19,141 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 19:01:21,468 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-24 19:01:21,469 - services.translation_routes - INFO - [translation_routes.py:111] - 
==================================================
2025-01-24 19:01:21,469 - services.translation_routes - INFO - [translation_routes.py:112] - Input Audio Quality Report
2025-01-24 19:01:21,469 - services.translation_routes - INFO - [translation_routes.py:113] - ==================================================
2025-01-24 19:01:21,469 - services.translation_routes - INFO - [translation_routes.py:114] - Request ID: 1aa2e83e
2025-01-24 19:01:21,469 - services.translation_routes - INFO - [translation_routes.py:115] - Target Language: fra
2025-01-24 19:01:21,469 - services.translation_routes - INFO - [translation_routes.py:116] - --------------------------------------------------
2025-01-24 19:01:21,469 - services.translation_routes - INFO - [translation_routes.py:117] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.030
- Rms Level: 0.066
- Crest Factor: 14.362
- Zero Crossings: 607056.000
- Silence Percentage: 36.919
- Clipping Points: 0.000
- Dynamic Range: 7477676.676

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 0.000
  - Temporal Variation: 0.110
  - Temporal Flatness: 0.047

- Volume Metrics:
  - Volume Stability: -0.172
  - Volume Range: 38459184.766
  - Volume Variations: 0.050

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.009210845533956
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 1.3861757516860962, 'stability': 2.4274330139160156, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.3255118131637573, 'distinction': 0.10339464992284775}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.561
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.491
  - Rhythm Quality: 0.517
  - Intonation Quality: 0.464

Vowel Quality:
  - Quality Score: 0.009
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-24 19:01:21,469 - services.translation_routes - INFO - [translation_routes.py:118] - ==================================================

2025-01-24 19:01:21,469 - services.translation_routes - INFO - [translation_routes.py:129] - Request 1aa2e83e: Audio processed successfully
2025-01-24 19:01:21,547 - services.translation_routes - INFO - [translation_routes.py:148] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-24 19:01:56,967 - services.translation_routes - INFO - [translation_routes.py:186] - Source text: This photo doesn't make sense. There's a plane that takes you up in the air and it feels like the passengers are floating. My goal was to throw them all into the air when we were at the peak of my work.
2025-01-24 19:02:27,554 - services.translation_routes - INFO - [translation_routes.py:205] - Target text: C'est une photo qui a été capturée sur papier et qui n'a pas de sens.
2025-01-24 19:03:27,570 - services.translation_routes - INFO - [translation_routes.py:228] - Processing tuple output from model
2025-01-24 19:03:27,580 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 19:03:27,580 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 19:03:27,585 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 19:03:27,585 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 19:03:27,589 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 19:03:27,589 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 19:03:27,592 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 19:03:27,593 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 19:03:27,680 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-24 19:03:27,680 - services.translation_routes - INFO - [translation_routes.py:252] - 
==================================================
2025-01-24 19:03:27,680 - services.translation_routes - INFO - [translation_routes.py:253] - Translated Audio Quality Report
2025-01-24 19:03:27,680 - services.translation_routes - INFO - [translation_routes.py:254] - ==================================================
2025-01-24 19:03:27,680 - services.translation_routes - INFO - [translation_routes.py:255] - Request ID: 1aa2e83e
2025-01-24 19:03:27,681 - services.translation_routes - INFO - [translation_routes.py:256] - Target Language: fra
2025-01-24 19:03:27,681 - services.translation_routes - INFO - [translation_routes.py:257] - --------------------------------------------------
2025-01-24 19:03:27,681 - services.translation_routes - INFO - [translation_routes.py:258] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.477
- Avg Amplitude: 0.051
- Rms Level: 0.089
- Crest Factor: 5.333
- Zero Crossings: 8058.000
- Silence Percentage: 18.159
- Clipping Points: 0.000
- Dynamic Range: 351.774

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.333
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.024
  - Temporal Flatness: 0.013

- Volume Metrics:
  - Volume Stability: 0.177
  - Volume Range: 506.438
  - Volume Variations: 0.057

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.033550154875952
- Background Noise: 3.1330237914527217
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.7586288452148438, 'stability': 2.720207691192627, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.13811153173446655, 'consistency': 0.0, 'distinction': 1.0}
  - Description: Strong nasal resonance. Unstable nasal resonance. Clear distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.523
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.004
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-24 19:03:27,681 - services.translation_routes - INFO - [translation_routes.py:259] - ==================================================

2025-01-24 19:03:27,681 - services.translation_routes - INFO - [translation_routes.py:265] - Request 1aa2e83e: Audio output processed successfully
2025-01-24 19:03:27,683 - services.translation_routes - INFO - [translation_routes.py:318] - Request 1aa2e83e: Response prepared successfully
2025-01-24 19:03:27,684 - services.translation_routes - INFO - [translation_routes.py:329] - Request 1aa2e83e completed in 131.71s
2025-01-24 19:03:27,685 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 131.71s, Memory Change: 960.22MB
2025-01-24 19:03:27,686 - __main__ - INFO - [app.py:278] - Request to /translate took 137.43s
2025-01-24 19:10:54,807 - __main__ - INFO - [app.py:217] - Received SIGINT signal
2025-01-24 19:10:54,807 - __main__ - INFO - [app.py:202] - Initiating graceful shutdown...
2025-01-24 19:10:59,813 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-24 19:10:59,814 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-24 19:10:59,815 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-24 19:10:59,817 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-24 19:10:59,818 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-24 19:10:59,818 - __main__ - INFO - [app.py:206] - Graceful shutdown completed
2025-01-24 19:10:59,819 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-24 19:10:59,819 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-24 19:10:59,820 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-24 19:10:59,820 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-24 19:10:59,821 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-24 19:10:59,821 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-24 19:10:59,821 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-24 19:10:59,822 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-24 19:10:59,822 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-24 19:10:59,823 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-24 19:12:52,998 - __main__ - INFO - [app.py:467] - Metrics server started on port 8000
2025-01-24 19:12:52,998 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-24 19:13:06,047 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-24 19:13:11,873 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-24 19:13:11,874 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-24 19:13:18,728 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-24 19:13:18,730 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-24 19:13:18,730 - __main__ - INFO - [app.py:491] - ==================================================
2025-01-24 19:13:18,730 - __main__ - INFO - [app.py:492] - Starting LinguaSync Backend
2025-01-24 19:13:18,730 - __main__ - INFO - [app.py:493] - Starting Flask app on port 5001 using cpu
2025-01-24 19:13:18,730 - __main__ - INFO - [app.py:494] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-01-24 19:13:18,730 - __main__ - INFO - [app.py:495] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-24 19:13:18,730 - __main__ - INFO - [app.py:496] - Maximum audio length: 300 seconds
2025-01-24 19:13:18,730 - __main__ - INFO - [app.py:497] - Sample rate: 16000 Hz
2025-01-24 19:13:18,730 - __main__ - INFO - [app.py:501] - System memory: 36.0GB total, 18.3GB available
2025-01-24 19:13:18,730 - __main__ - INFO - [app.py:502] - CPU cores: 11
2025-01-24 19:13:18,730 - __main__ - INFO - [app.py:510] - Configuration:
2025-01-24 19:13:18,730 - __main__ - INFO - [app.py:511] - - Debug mode: False
2025-01-24 19:13:18,731 - __main__ - INFO - [app.py:512] - - CORS enabled: True
2025-01-24 19:13:18,731 - __main__ - INFO - [app.py:513] - - Rate limiting: 10 requests per minute
2025-01-24 19:13:18,731 - __main__ - INFO - [app.py:514] - - Metrics enabled: True (port 8000)
2025-01-24 19:13:18,731 - __main__ - INFO - [app.py:516] - ==================================================
2025-01-24 19:14:18,599 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-01-24 19:14:18,599 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-24 19:14:18,602 - services.audio_link_routes - INFO - [audio_link_routes.py:216] - Processing URL: https://www.tiktok.com/@loganpaul/video/7138576512512478510
2025-01-24 19:14:18,602 - services.audio_link_routes - INFO - [audio_link_routes.py:236] - Processing TikTok URL
2025-01-24 19:14:18,603 - services.audio_link_routes - INFO - [audio_link_routes.py:120] - Using options for tiktok: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmptkipj4xk/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8, 'extractor_args': {'tiktok': {'api_hostname': 'api22-normal-c-alisg.tiktokv.com', 'app_name': 'trill', 'app_version': '34.1.2', 'manifest_app_version': '2023401020', 'app_info': '1234567890123456789/trill///1180', 'device_id': '1702005541492241952'}}}
2025-01-24 19:14:20,041 - services.audio_link_routes - INFO - [audio_link_routes.py:133] - Successfully downloaded tiktok content
2025-01-24 19:14:20,043 - services.audio_link_routes - INFO - [audio_link_routes.py:152] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmptkipj4xk/output.wav
2025-01-24 19:14:20,082 - services.audio_link_routes - INFO - [audio_link_routes.py:164] - Successfully converted audio to WAV
2025-01-24 19:14:20,083 - services.audio_link_routes - INFO - [audio_link_routes.py:242] - Successfully processed audio
2025-01-24 19:14:20,083 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 1.48s, Memory Change: 6.69MB
2025-01-24 19:14:20,084 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 1.48s
2025-01-24 19:14:25,732 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-24 19:14:25,733 - services.translation_routes - INFO - [translation_routes.py:30] - Starting translation request afaa65ae
2025-01-24 19:14:25,733 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-24 19:14:25,734 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-24 19:14:25,735 - services.translation_routes - INFO - [translation_routes.py:87] - Request afaa65ae: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp2_4u7h97.wav
2025-01-24 19:14:25,735 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 73.49 seconds
2025-01-24 19:14:25,735 - services.translation_routes - INFO - [translation_routes.py:100] - Request afaa65ae: Beginning audio processing with diagnostics
2025-01-24 19:14:25,735 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp2_4u7h97.wav
2025-01-24 19:14:25,736 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 16000, Channels: 1
2025-01-24 19:14:25,739 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([1, 1175881]), Frequency: 16000Hz
2025-01-24 19:14:25,798 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-24 19:14:25,803 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-24 19:14:25,912 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-24 19:14:26,032 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 19:14:26,032 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 19:14:26,058 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 19:14:26,059 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 19:14:26,090 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 19:14:26,090 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 19:14:26,121 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 19:14:26,121 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 19:14:28,647 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-24 19:14:28,647 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-24 19:14:28,860 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 19:14:28,861 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 19:14:28,883 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 19:14:28,884 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 19:14:28,907 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 19:14:28,907 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 19:14:28,929 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 19:14:28,929 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 19:14:31,275 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-24 19:14:31,276 - services.translation_routes - INFO - [translation_routes.py:111] - 
==================================================
2025-01-24 19:14:31,276 - services.translation_routes - INFO - [translation_routes.py:112] - Input Audio Quality Report
2025-01-24 19:14:31,276 - services.translation_routes - INFO - [translation_routes.py:113] - ==================================================
2025-01-24 19:14:31,276 - services.translation_routes - INFO - [translation_routes.py:114] - Request ID: afaa65ae
2025-01-24 19:14:31,276 - services.translation_routes - INFO - [translation_routes.py:115] - Target Language: fra
2025-01-24 19:14:31,276 - services.translation_routes - INFO - [translation_routes.py:116] - --------------------------------------------------
2025-01-24 19:14:31,276 - services.translation_routes - INFO - [translation_routes.py:117] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.030
- Rms Level: 0.066
- Crest Factor: 14.362
- Zero Crossings: 607056.000
- Silence Percentage: 36.919
- Clipping Points: 0.000
- Dynamic Range: 7477676.676

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 0.000
  - Temporal Variation: 0.110
  - Temporal Flatness: 0.047

- Volume Metrics:
  - Volume Stability: -0.172
  - Volume Range: 38459184.766
  - Volume Variations: 0.050

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.009210845533956
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 1.3861757516860962, 'stability': 2.4274330139160156, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.3255118131637573, 'distinction': 0.10339464992284775}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.561
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.491
  - Rhythm Quality: 0.517
  - Intonation Quality: 0.464

Vowel Quality:
  - Quality Score: 0.009
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-24 19:14:31,276 - services.translation_routes - INFO - [translation_routes.py:118] - ==================================================

2025-01-24 19:14:31,276 - services.translation_routes - INFO - [translation_routes.py:129] - Request afaa65ae: Audio processed successfully
2025-01-24 19:14:31,338 - services.translation_routes - INFO - [translation_routes.py:148] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-24 19:15:06,674 - services.translation_routes - INFO - [translation_routes.py:186] - Source text: This photo doesn't make sense. There's a plane that takes you up in the air and it feels like the passengers are floating. My goal was to throw them all into the air when we were at the peak of my work.
2025-01-24 19:15:36,318 - services.translation_routes - INFO - [translation_routes.py:205] - Target text: C'est une photo qui a été capturée sur papier et qui n'a pas de sens.
2025-01-24 19:16:37,033 - services.translation_routes - INFO - [translation_routes.py:228] - Processing tuple output from model
2025-01-24 19:16:37,043 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 19:16:37,043 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 19:16:37,047 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 19:16:37,047 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 19:16:37,050 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 19:16:37,050 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 19:16:37,053 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 19:16:37,053 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 19:16:37,142 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-24 19:16:37,143 - services.translation_routes - INFO - [translation_routes.py:252] - 
==================================================
2025-01-24 19:16:37,143 - services.translation_routes - INFO - [translation_routes.py:253] - Translated Audio Quality Report
2025-01-24 19:16:37,143 - services.translation_routes - INFO - [translation_routes.py:254] - ==================================================
2025-01-24 19:16:37,143 - services.translation_routes - INFO - [translation_routes.py:255] - Request ID: afaa65ae
2025-01-24 19:16:37,143 - services.translation_routes - INFO - [translation_routes.py:256] - Target Language: fra
2025-01-24 19:16:37,143 - services.translation_routes - INFO - [translation_routes.py:257] - --------------------------------------------------
2025-01-24 19:16:37,143 - services.translation_routes - INFO - [translation_routes.py:258] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.704
- Avg Amplitude: 0.068
- Rms Level: 0.114
- Crest Factor: 6.171
- Zero Crossings: 7552.000
- Silence Percentage: 12.811
- Clipping Points: 0.000
- Dynamic Range: 285.618

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.229
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.028
  - Temporal Flatness: 0.016

- Volume Metrics:
  - Volume Stability: 0.223
  - Volume Range: 293.021
  - Volume Variations: 0.070

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.036958586763985
- Background Noise: 3.4684579805747715
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
No issues detected

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.8491339683532715, 'stability': 3.783689498901367, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.0, 'distinction': 1.0}
  - Description: Strong nasal resonance. Unstable nasal resonance. Clear distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.488
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.004
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-24 19:16:37,143 - services.translation_routes - INFO - [translation_routes.py:259] - ==================================================

2025-01-24 19:16:37,143 - services.translation_routes - INFO - [translation_routes.py:265] - Request afaa65ae: Audio output processed successfully
2025-01-24 19:16:37,145 - services.translation_routes - INFO - [translation_routes.py:318] - Request afaa65ae: Response prepared successfully
2025-01-24 19:16:37,146 - services.translation_routes - INFO - [translation_routes.py:329] - Request afaa65ae completed in 131.41s
2025-01-24 19:16:37,148 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 131.41s, Memory Change: 980.61MB
2025-01-24 19:16:37,148 - __main__ - INFO - [app.py:278] - Request to /translate took 135.84s
2025-01-24 19:22:36,477 - __main__ - INFO - [app.py:217] - Received SIGINT signal
2025-01-24 19:22:36,477 - __main__ - INFO - [app.py:202] - Initiating graceful shutdown...
2025-01-24 19:22:41,480 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-24 19:22:41,481 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-24 19:22:41,481 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-24 19:22:41,482 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-24 19:22:41,483 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-24 19:22:41,483 - __main__ - INFO - [app.py:206] - Graceful shutdown completed
2025-01-24 19:22:41,484 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-24 19:22:41,484 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-24 19:22:41,484 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-24 19:22:41,485 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-24 19:22:41,485 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-24 19:22:41,485 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-24 19:22:41,486 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-24 19:22:41,486 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-24 19:22:41,486 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-24 19:22:41,487 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-24 19:22:58,696 - __main__ - INFO - [app.py:467] - Metrics server started on port 8000
2025-01-24 19:22:58,696 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-24 19:23:12,042 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-24 19:23:17,905 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-24 19:23:17,906 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-24 19:23:25,036 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-24 19:23:25,039 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-24 19:23:25,039 - __main__ - INFO - [app.py:491] - ==================================================
2025-01-24 19:23:25,039 - __main__ - INFO - [app.py:492] - Starting LinguaSync Backend
2025-01-24 19:23:25,039 - __main__ - INFO - [app.py:493] - Starting Flask app on port 5001 using cpu
2025-01-24 19:23:25,039 - __main__ - INFO - [app.py:494] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-01-24 19:23:25,039 - __main__ - INFO - [app.py:495] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-24 19:23:25,039 - __main__ - INFO - [app.py:496] - Maximum audio length: 300 seconds
2025-01-24 19:23:25,039 - __main__ - INFO - [app.py:497] - Sample rate: 16000 Hz
2025-01-24 19:23:25,039 - __main__ - INFO - [app.py:501] - System memory: 36.0GB total, 17.5GB available
2025-01-24 19:23:25,039 - __main__ - INFO - [app.py:502] - CPU cores: 11
2025-01-24 19:23:25,039 - __main__ - INFO - [app.py:510] - Configuration:
2025-01-24 19:23:25,039 - __main__ - INFO - [app.py:511] - - Debug mode: False
2025-01-24 19:23:25,039 - __main__ - INFO - [app.py:512] - - CORS enabled: True
2025-01-24 19:23:25,039 - __main__ - INFO - [app.py:513] - - Rate limiting: 10 requests per minute
2025-01-24 19:23:25,039 - __main__ - INFO - [app.py:514] - - Metrics enabled: True (port 8000)
2025-01-24 19:23:25,039 - __main__ - INFO - [app.py:516] - ==================================================
2025-01-24 19:24:22,025 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-01-24 19:24:22,025 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-24 19:24:22,027 - services.audio_link_routes - INFO - [audio_link_routes.py:216] - Processing URL: https://www.tiktok.com/@loganpaul/video/7138576512512478510
2025-01-24 19:24:22,028 - services.audio_link_routes - INFO - [audio_link_routes.py:236] - Processing TikTok URL
2025-01-24 19:24:22,028 - services.audio_link_routes - INFO - [audio_link_routes.py:120] - Using options for tiktok: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpeh246xc8/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8, 'extractor_args': {'tiktok': {'api_hostname': 'api22-normal-c-alisg.tiktokv.com', 'app_name': 'trill', 'app_version': '34.1.2', 'manifest_app_version': '2023401020', 'app_info': '1234567890123456789/trill///1180', 'device_id': '0121995608605469169'}}}
2025-01-24 19:24:23,486 - services.audio_link_routes - INFO - [audio_link_routes.py:133] - Successfully downloaded tiktok content
2025-01-24 19:24:23,487 - services.audio_link_routes - INFO - [audio_link_routes.py:152] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpeh246xc8/output.wav
2025-01-24 19:24:23,529 - services.audio_link_routes - INFO - [audio_link_routes.py:164] - Successfully converted audio to WAV
2025-01-24 19:24:23,529 - services.audio_link_routes - INFO - [audio_link_routes.py:242] - Successfully processed audio
2025-01-24 19:24:23,530 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 1.50s, Memory Change: 3.30MB
2025-01-24 19:24:23,530 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 1.50s
2025-01-24 19:24:33,712 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-24 19:24:33,714 - services.translation_routes - INFO - [translation_routes.py:30] - Starting translation request 31f57ecf
2025-01-24 19:24:33,714 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-24 19:24:33,715 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-24 19:24:33,716 - services.translation_routes - INFO - [translation_routes.py:87] - Request 31f57ecf: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp5cqt9ng6.wav
2025-01-24 19:24:33,716 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 73.49 seconds
2025-01-24 19:24:33,717 - services.translation_routes - INFO - [translation_routes.py:100] - Request 31f57ecf: Beginning audio processing with diagnostics
2025-01-24 19:24:33,717 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp5cqt9ng6.wav
2025-01-24 19:24:33,717 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 16000, Channels: 1
2025-01-24 19:24:33,720 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([1, 1175881]), Frequency: 16000Hz
2025-01-24 19:24:33,781 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-24 19:24:33,788 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-24 19:24:33,890 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-24 19:24:34,015 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 19:24:34,015 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 19:24:34,041 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 19:24:34,041 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 19:24:34,064 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 19:24:34,064 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 19:24:34,089 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 19:24:34,089 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 19:24:36,582 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-24 19:24:36,582 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-24 19:24:36,801 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 19:24:36,801 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 19:24:36,827 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 19:24:36,827 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 19:24:36,853 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 19:24:36,853 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 19:24:36,878 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 19:24:36,878 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 19:24:39,217 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-24 19:24:39,217 - services.translation_routes - INFO - [translation_routes.py:111] - 
==================================================
2025-01-24 19:24:39,217 - services.translation_routes - INFO - [translation_routes.py:112] - Input Audio Quality Report
2025-01-24 19:24:39,218 - services.translation_routes - INFO - [translation_routes.py:113] - ==================================================
2025-01-24 19:24:39,218 - services.translation_routes - INFO - [translation_routes.py:114] - Request ID: 31f57ecf
2025-01-24 19:24:39,218 - services.translation_routes - INFO - [translation_routes.py:115] - Target Language: fra
2025-01-24 19:24:39,218 - services.translation_routes - INFO - [translation_routes.py:116] - --------------------------------------------------
2025-01-24 19:24:39,218 - services.translation_routes - INFO - [translation_routes.py:117] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.030
- Rms Level: 0.066
- Crest Factor: 14.362
- Zero Crossings: 607056.000
- Silence Percentage: 36.919
- Clipping Points: 0.000
- Dynamic Range: 7477676.676

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 0.000
  - Temporal Variation: 0.110
  - Temporal Flatness: 0.047

- Volume Metrics:
  - Volume Stability: -0.172
  - Volume Range: 38459184.766
  - Volume Variations: 0.050

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.009210845533956
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 1.3861757516860962, 'stability': 2.4274330139160156, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.3255118131637573, 'distinction': 0.10339464992284775}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.561
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.491
  - Rhythm Quality: 0.517
  - Intonation Quality: 0.464

Vowel Quality:
  - Quality Score: 0.009
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-24 19:24:39,218 - services.translation_routes - INFO - [translation_routes.py:118] - ==================================================

2025-01-24 19:24:39,218 - services.translation_routes - INFO - [translation_routes.py:129] - Request 31f57ecf: Audio processed successfully
2025-01-24 19:24:39,283 - services.translation_routes - INFO - [translation_routes.py:148] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-24 19:25:16,772 - services.translation_routes - INFO - [translation_routes.py:186] - Source text: This photo doesn't make sense. There's a plane that takes you up in the air and it feels like the passengers are floating. My goal was to throw them all into the air when we were at the peak of my work.
2025-01-24 19:25:47,636 - services.translation_routes - INFO - [translation_routes.py:205] - Target text: C'est une photo qui a été capturée sur papier et qui n'a pas de sens.
2025-01-24 19:26:51,122 - services.translation_routes - INFO - [translation_routes.py:228] - Processing tuple output from model
2025-01-24 19:26:51,132 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 19:26:51,132 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 19:26:51,135 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 19:26:51,136 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 19:26:51,141 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 19:26:51,141 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 19:26:51,144 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 19:26:51,144 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 19:26:51,233 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-24 19:26:51,233 - services.translation_routes - INFO - [translation_routes.py:252] - 
==================================================
2025-01-24 19:26:51,233 - services.translation_routes - INFO - [translation_routes.py:253] - Translated Audio Quality Report
2025-01-24 19:26:51,233 - services.translation_routes - INFO - [translation_routes.py:254] - ==================================================
2025-01-24 19:26:51,233 - services.translation_routes - INFO - [translation_routes.py:255] - Request ID: 31f57ecf
2025-01-24 19:26:51,233 - services.translation_routes - INFO - [translation_routes.py:256] - Target Language: fra
2025-01-24 19:26:51,233 - services.translation_routes - INFO - [translation_routes.py:257] - --------------------------------------------------
2025-01-24 19:26:51,233 - services.translation_routes - INFO - [translation_routes.py:258] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.763
- Avg Amplitude: 0.062
- Rms Level: 0.105
- Crest Factor: 7.234
- Zero Crossings: 7503.000
- Silence Percentage: 15.057
- Clipping Points: 0.000
- Dynamic Range: 325.254

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.096
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.025
  - Temporal Flatness: 0.014

- Volume Metrics:
  - Volume Stability: 0.235
  - Volume Range: 200.344
  - Volume Variations: 0.064

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0291499119798555
- Background Noise: 3.8936261791658775
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
No issues detected

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.8612720370292664, 'stability': 3.526942014694214, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.0, 'distinction': 1.0}
  - Description: Strong nasal resonance. Unstable nasal resonance. Clear distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.494
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.004
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-24 19:26:51,233 - services.translation_routes - INFO - [translation_routes.py:259] - ==================================================

2025-01-24 19:26:51,233 - services.translation_routes - INFO - [translation_routes.py:265] - Request 31f57ecf: Audio output processed successfully
2025-01-24 19:26:51,235 - services.translation_routes - INFO - [translation_routes.py:318] - Request 31f57ecf: Response prepared successfully
2025-01-24 19:26:51,236 - services.translation_routes - INFO - [translation_routes.py:329] - Request 31f57ecf completed in 137.52s
2025-01-24 19:26:51,239 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 137.52s, Memory Change: 1115.39MB
2025-01-24 19:26:51,239 - __main__ - INFO - [app.py:278] - Request to /translate took 145.47s
2025-01-24 19:42:45,101 - __main__ - INFO - [app.py:217] - Received SIGINT signal
2025-01-24 19:42:45,102 - __main__ - INFO - [app.py:202] - Initiating graceful shutdown...
2025-01-24 19:42:50,108 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-24 19:42:50,109 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-24 19:42:50,109 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-24 19:42:50,111 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-24 19:42:50,112 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-24 19:42:50,112 - __main__ - INFO - [app.py:206] - Graceful shutdown completed
2025-01-24 19:42:50,113 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-24 19:42:50,113 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-24 19:42:50,114 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-24 19:42:50,114 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-24 19:42:50,115 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-24 19:42:50,115 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-24 19:42:50,116 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-24 19:42:50,116 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-24 19:42:50,117 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-24 19:42:50,117 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-24 19:43:03,200 - __main__ - INFO - [app.py:467] - Metrics server started on port 8000
2025-01-24 19:43:03,200 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-24 19:43:15,765 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-24 19:43:21,471 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-24 19:43:21,472 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-24 19:43:26,410 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-24 19:43:26,411 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-24 19:43:26,411 - __main__ - INFO - [app.py:491] - ==================================================
2025-01-24 19:43:26,411 - __main__ - INFO - [app.py:492] - Starting LinguaSync Backend
2025-01-24 19:43:26,411 - __main__ - INFO - [app.py:493] - Starting Flask app on port 5001 using cpu
2025-01-24 19:43:26,411 - __main__ - INFO - [app.py:494] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-01-24 19:43:26,411 - __main__ - INFO - [app.py:495] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-24 19:43:26,412 - __main__ - INFO - [app.py:496] - Maximum audio length: 300 seconds
2025-01-24 19:43:26,412 - __main__ - INFO - [app.py:497] - Sample rate: 16000 Hz
2025-01-24 19:43:26,412 - __main__ - INFO - [app.py:501] - System memory: 36.0GB total, 17.2GB available
2025-01-24 19:43:26,412 - __main__ - INFO - [app.py:502] - CPU cores: 11
2025-01-24 19:43:26,412 - __main__ - INFO - [app.py:510] - Configuration:
2025-01-24 19:43:26,412 - __main__ - INFO - [app.py:511] - - Debug mode: False
2025-01-24 19:43:26,412 - __main__ - INFO - [app.py:512] - - CORS enabled: True
2025-01-24 19:43:26,412 - __main__ - INFO - [app.py:513] - - Rate limiting: 10 requests per minute
2025-01-24 19:43:26,412 - __main__ - INFO - [app.py:514] - - Metrics enabled: True (port 8000)
2025-01-24 19:43:26,412 - __main__ - INFO - [app.py:516] - ==================================================
2025-01-24 19:47:00,511 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-01-24 19:47:00,511 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-24 19:47:00,514 - services.audio_link_routes - INFO - [audio_link_routes.py:216] - Processing URL: https://www.tiktok.com/@loganpaul/video/7138576512512478510
2025-01-24 19:47:00,515 - services.audio_link_routes - INFO - [audio_link_routes.py:236] - Processing TikTok URL
2025-01-24 19:47:00,515 - services.audio_link_routes - INFO - [audio_link_routes.py:120] - Using options for tiktok: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpaaaj2lzy/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8, 'extractor_args': {'tiktok': {'api_hostname': 'api22-normal-c-alisg.tiktokv.com', 'app_name': 'trill', 'app_version': '34.1.2', 'manifest_app_version': '2023401020', 'app_info': '1234567890123456789/trill///1180', 'device_id': '8526383449251905901'}}}
2025-01-24 19:47:02,023 - services.audio_link_routes - INFO - [audio_link_routes.py:133] - Successfully downloaded tiktok content
2025-01-24 19:47:02,024 - services.audio_link_routes - INFO - [audio_link_routes.py:152] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpaaaj2lzy/output.wav
2025-01-24 19:47:02,069 - services.audio_link_routes - INFO - [audio_link_routes.py:164] - Successfully converted audio to WAV
2025-01-24 19:47:02,070 - services.audio_link_routes - INFO - [audio_link_routes.py:242] - Successfully processed audio
2025-01-24 19:47:02,070 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 1.56s, Memory Change: 5.59MB
2025-01-24 19:47:02,071 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 1.56s
2025-01-24 19:47:12,456 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-24 19:47:12,458 - services.translation_routes - INFO - [translation_routes.py:30] - Starting translation request a5fc8901
2025-01-24 19:47:12,459 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-24 19:47:12,459 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-24 19:47:12,460 - services.translation_routes - INFO - [translation_routes.py:87] - Request a5fc8901: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp6mtr2kev.wav
2025-01-24 19:47:12,461 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 73.49 seconds
2025-01-24 19:47:12,461 - services.translation_routes - INFO - [translation_routes.py:100] - Request a5fc8901: Beginning audio processing with diagnostics
2025-01-24 19:47:12,461 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp6mtr2kev.wav
2025-01-24 19:47:12,461 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 16000, Channels: 1
2025-01-24 19:47:12,465 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([1, 1175881]), Frequency: 16000Hz
2025-01-24 19:47:12,526 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-24 19:47:12,531 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-24 19:47:12,624 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-24 19:47:12,762 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 19:47:12,763 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 19:47:12,790 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 19:47:12,790 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 19:47:12,817 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 19:47:12,817 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 19:47:12,845 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 19:47:12,845 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 19:47:15,311 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-24 19:47:15,311 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-24 19:47:15,540 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 19:47:15,541 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 19:47:15,569 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 19:47:15,570 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 19:47:15,596 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 19:47:15,597 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 19:47:15,619 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 19:47:15,620 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 19:47:17,983 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-24 19:47:17,983 - services.translation_routes - INFO - [translation_routes.py:111] - 
==================================================
2025-01-24 19:47:17,983 - services.translation_routes - INFO - [translation_routes.py:112] - Input Audio Quality Report
2025-01-24 19:47:17,983 - services.translation_routes - INFO - [translation_routes.py:113] - ==================================================
2025-01-24 19:47:17,983 - services.translation_routes - INFO - [translation_routes.py:114] - Request ID: a5fc8901
2025-01-24 19:47:17,983 - services.translation_routes - INFO - [translation_routes.py:115] - Target Language: fra
2025-01-24 19:47:17,983 - services.translation_routes - INFO - [translation_routes.py:116] - --------------------------------------------------
2025-01-24 19:47:17,983 - services.translation_routes - INFO - [translation_routes.py:117] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.030
- Rms Level: 0.066
- Crest Factor: 14.362
- Zero Crossings: 607056.000
- Silence Percentage: 36.919
- Clipping Points: 0.000
- Dynamic Range: 7477676.676

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 0.000
  - Temporal Variation: 0.110
  - Temporal Flatness: 0.047

- Volume Metrics:
  - Volume Stability: -0.172
  - Volume Range: 38459184.766
  - Volume Variations: 0.050

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.009210845533956
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 1.3861757516860962, 'stability': 2.4274330139160156, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.3255118131637573, 'distinction': 0.10339464992284775}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.561
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.491
  - Rhythm Quality: 0.517
  - Intonation Quality: 0.464

Vowel Quality:
  - Quality Score: 0.009
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-24 19:47:17,983 - services.translation_routes - INFO - [translation_routes.py:118] - ==================================================

2025-01-24 19:47:17,983 - services.translation_routes - INFO - [translation_routes.py:129] - Request a5fc8901: Audio processed successfully
2025-01-24 19:47:18,057 - services.translation_routes - INFO - [translation_routes.py:148] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-24 19:47:55,482 - services.translation_routes - INFO - [translation_routes.py:186] - Source text: This photo doesn't make sense. There's a plane that takes you up in the air and it feels like the passengers are floating. My goal was to throw them all into the air when we were at the peak of my work.
2025-01-24 19:48:25,070 - services.translation_routes - INFO - [translation_routes.py:205] - Target text: C'est une photo qui a été capturée sur papier et qui n'a pas de sens.
2025-01-24 19:49:29,230 - services.translation_routes - INFO - [translation_routes.py:228] - Processing tuple output from model
2025-01-24 19:49:29,243 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 19:49:29,244 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 19:49:29,249 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 19:49:29,249 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 19:49:29,253 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 19:49:29,253 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 19:49:29,258 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 19:49:29,258 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 19:49:29,355 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-24 19:49:29,355 - services.translation_routes - INFO - [translation_routes.py:252] - 
==================================================
2025-01-24 19:49:29,355 - services.translation_routes - INFO - [translation_routes.py:253] - Translated Audio Quality Report
2025-01-24 19:49:29,355 - services.translation_routes - INFO - [translation_routes.py:254] - ==================================================
2025-01-24 19:49:29,355 - services.translation_routes - INFO - [translation_routes.py:255] - Request ID: a5fc8901
2025-01-24 19:49:29,355 - services.translation_routes - INFO - [translation_routes.py:256] - Target Language: fra
2025-01-24 19:49:29,355 - services.translation_routes - INFO - [translation_routes.py:257] - --------------------------------------------------
2025-01-24 19:49:29,355 - services.translation_routes - INFO - [translation_routes.py:258] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.503
- Avg Amplitude: 0.053
- Rms Level: 0.096
- Crest Factor: 5.253
- Zero Crossings: 8263.000
- Silence Percentage: 19.181
- Clipping Points: 0.000
- Dynamic Range: 429.116

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.343
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.025
  - Temporal Flatness: 0.014

- Volume Metrics:
  - Volume Stability: 0.164
  - Volume Range: 475.172
  - Volume Variations: 0.062

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.036436901461861
- Background Noise: 3.101123625959056
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.7899031043052673, 'stability': 3.114588737487793, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.1331464946269989, 'consistency': 0.0, 'distinction': 1.0}
  - Description: Strong nasal resonance. Unstable nasal resonance. Clear distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.492
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.003
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-24 19:49:29,355 - services.translation_routes - INFO - [translation_routes.py:259] - ==================================================

2025-01-24 19:49:29,355 - services.translation_routes - INFO - [translation_routes.py:265] - Request a5fc8901: Audio output processed successfully
2025-01-24 19:49:29,357 - services.translation_routes - INFO - [translation_routes.py:318] - Request a5fc8901: Response prepared successfully
2025-01-24 19:49:29,358 - services.translation_routes - INFO - [translation_routes.py:329] - Request a5fc8901 completed in 136.90s
2025-01-24 19:49:29,359 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 136.90s, Memory Change: 676.97MB
2025-01-24 19:49:29,359 - __main__ - INFO - [app.py:278] - Request to /translate took 144.94s
2025-01-24 19:57:01,122 - __main__ - INFO - [app.py:217] - Received SIGINT signal
2025-01-24 19:57:01,123 - __main__ - INFO - [app.py:202] - Initiating graceful shutdown...
2025-01-24 19:57:06,127 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-24 19:57:06,127 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-24 19:57:06,128 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-24 19:57:06,130 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-24 19:57:06,131 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-24 19:57:06,131 - __main__ - INFO - [app.py:206] - Graceful shutdown completed
2025-01-24 19:57:06,133 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-24 19:57:06,133 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-24 19:57:06,134 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-24 19:57:06,135 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-24 19:57:06,135 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-24 19:57:06,135 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-24 19:57:06,136 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-24 19:57:06,136 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-24 19:57:06,137 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-24 19:57:06,137 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-24 19:57:18,810 - __main__ - INFO - [app.py:467] - Metrics server started on port 8000
2025-01-24 19:57:18,810 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-24 19:57:31,841 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-24 19:57:37,783 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-24 19:57:37,784 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-24 19:57:45,131 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-24 19:57:45,133 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-24 19:57:45,133 - __main__ - INFO - [app.py:491] - ==================================================
2025-01-24 19:57:45,133 - __main__ - INFO - [app.py:492] - Starting LinguaSync Backend
2025-01-24 19:57:45,134 - __main__ - INFO - [app.py:493] - Starting Flask app on port 5001 using cpu
2025-01-24 19:57:45,134 - __main__ - INFO - [app.py:494] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-01-24 19:57:45,134 - __main__ - INFO - [app.py:495] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-24 19:57:45,134 - __main__ - INFO - [app.py:496] - Maximum audio length: 300 seconds
2025-01-24 19:57:45,134 - __main__ - INFO - [app.py:497] - Sample rate: 16000 Hz
2025-01-24 19:57:45,134 - __main__ - INFO - [app.py:501] - System memory: 36.0GB total, 16.6GB available
2025-01-24 19:57:45,134 - __main__ - INFO - [app.py:502] - CPU cores: 11
2025-01-24 19:57:45,134 - __main__ - INFO - [app.py:510] - Configuration:
2025-01-24 19:57:45,134 - __main__ - INFO - [app.py:511] - - Debug mode: False
2025-01-24 19:57:45,134 - __main__ - INFO - [app.py:512] - - CORS enabled: True
2025-01-24 19:57:45,134 - __main__ - INFO - [app.py:513] - - Rate limiting: 10 requests per minute
2025-01-24 19:57:45,134 - __main__ - INFO - [app.py:514] - - Metrics enabled: True (port 8000)
2025-01-24 19:57:45,134 - __main__ - INFO - [app.py:516] - ==================================================
2025-01-24 19:58:04,430 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-01-24 19:58:04,431 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-24 19:58:04,435 - services.audio_link_routes - INFO - [audio_link_routes.py:216] - Processing URL: https://www.tiktok.com/@loganpaul/video/7138576512512478510
2025-01-24 19:58:04,437 - services.audio_link_routes - INFO - [audio_link_routes.py:236] - Processing TikTok URL
2025-01-24 19:58:04,439 - services.audio_link_routes - INFO - [audio_link_routes.py:120] - Using options for tiktok: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpxiicf1ba/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8, 'extractor_args': {'tiktok': {'api_hostname': 'api22-normal-c-alisg.tiktokv.com', 'app_name': 'trill', 'app_version': '34.1.2', 'manifest_app_version': '2023401020', 'app_info': '1234567890123456789/trill///1180', 'device_id': '6350147311151512883'}}}
2025-01-24 19:58:06,216 - services.audio_link_routes - INFO - [audio_link_routes.py:133] - Successfully downloaded tiktok content
2025-01-24 19:58:06,218 - services.audio_link_routes - INFO - [audio_link_routes.py:152] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpxiicf1ba/output.wav
2025-01-24 19:58:06,259 - services.audio_link_routes - INFO - [audio_link_routes.py:164] - Successfully converted audio to WAV
2025-01-24 19:58:06,259 - services.audio_link_routes - INFO - [audio_link_routes.py:242] - Successfully processed audio
2025-01-24 19:58:06,260 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 1.82s, Memory Change: 3.45MB
2025-01-24 19:58:06,260 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 1.83s
2025-01-24 19:58:13,745 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-24 19:58:13,748 - services.translation_routes - INFO - [translation_routes.py:30] - Starting translation request 7394bc22
2025-01-24 19:58:13,748 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-24 19:58:13,748 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-24 19:58:13,750 - services.translation_routes - INFO - [translation_routes.py:87] - Request 7394bc22: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp5drcx4rs.wav
2025-01-24 19:58:13,750 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 73.49 seconds
2025-01-24 19:58:13,750 - services.translation_routes - INFO - [translation_routes.py:100] - Request 7394bc22: Beginning audio processing with diagnostics
2025-01-24 19:58:13,750 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp5drcx4rs.wav
2025-01-24 19:58:13,750 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 16000, Channels: 1
2025-01-24 19:58:13,754 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([1, 1175881]), Frequency: 16000Hz
2025-01-24 19:58:13,842 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-24 19:58:13,848 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-24 19:58:13,955 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-24 19:58:14,101 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 19:58:14,102 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 19:58:14,128 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 19:58:14,129 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 19:58:14,154 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 19:58:14,154 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 19:58:14,180 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 19:58:14,180 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 19:58:16,710 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-24 19:58:16,711 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-24 19:58:16,961 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 19:58:16,962 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 19:58:16,993 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 19:58:16,993 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 19:58:17,021 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 19:58:17,021 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 19:58:17,047 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 19:58:17,048 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 19:58:19,456 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-24 19:58:19,457 - services.translation_routes - INFO - [translation_routes.py:111] - 
==================================================
2025-01-24 19:58:19,457 - services.translation_routes - INFO - [translation_routes.py:112] - Input Audio Quality Report
2025-01-24 19:58:19,457 - services.translation_routes - INFO - [translation_routes.py:113] - ==================================================
2025-01-24 19:58:19,457 - services.translation_routes - INFO - [translation_routes.py:114] - Request ID: 7394bc22
2025-01-24 19:58:19,457 - services.translation_routes - INFO - [translation_routes.py:115] - Target Language: fra
2025-01-24 19:58:19,457 - services.translation_routes - INFO - [translation_routes.py:116] - --------------------------------------------------
2025-01-24 19:58:19,457 - services.translation_routes - INFO - [translation_routes.py:117] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.030
- Rms Level: 0.066
- Crest Factor: 14.362
- Zero Crossings: 607056.000
- Silence Percentage: 36.919
- Clipping Points: 0.000
- Dynamic Range: 7477676.676

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 0.000
  - Temporal Variation: 0.110
  - Temporal Flatness: 0.047

- Volume Metrics:
  - Volume Stability: -0.172
  - Volume Range: 38459184.766
  - Volume Variations: 0.050

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.009210845533956
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 1.3861757516860962, 'stability': 2.4274330139160156, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.3255118131637573, 'distinction': 0.10339464992284775}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.561
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.491
  - Rhythm Quality: 0.517
  - Intonation Quality: 0.464

Vowel Quality:
  - Quality Score: 0.009
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-24 19:58:19,457 - services.translation_routes - INFO - [translation_routes.py:118] - ==================================================

2025-01-24 19:58:19,458 - services.translation_routes - INFO - [translation_routes.py:129] - Request 7394bc22: Audio processed successfully
2025-01-24 19:58:19,526 - services.translation_routes - INFO - [translation_routes.py:148] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-24 19:58:56,518 - services.translation_routes - INFO - [translation_routes.py:186] - Source text: This photo doesn't make sense. There's a plane that takes you up in the air and it feels like the passengers are floating. My goal was to throw them all into the air when we were at the peak of my work.
2025-01-24 19:59:28,246 - services.translation_routes - INFO - [translation_routes.py:205] - Target text: C'est une photo qui a été capturée sur papier et qui n'a pas de sens.
2025-01-24 20:00:34,731 - services.translation_routes - INFO - [translation_routes.py:228] - Processing tuple output from model
2025-01-24 20:00:34,743 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 20:00:34,743 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 20:00:34,748 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 20:00:34,748 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 20:00:34,753 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 20:00:34,753 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 20:00:34,758 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 20:00:34,758 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 20:00:34,890 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-24 20:00:34,890 - services.translation_routes - INFO - [translation_routes.py:252] - 
==================================================
2025-01-24 20:00:34,890 - services.translation_routes - INFO - [translation_routes.py:253] - Translated Audio Quality Report
2025-01-24 20:00:34,890 - services.translation_routes - INFO - [translation_routes.py:254] - ==================================================
2025-01-24 20:00:34,890 - services.translation_routes - INFO - [translation_routes.py:255] - Request ID: 7394bc22
2025-01-24 20:00:34,890 - services.translation_routes - INFO - [translation_routes.py:256] - Target Language: fra
2025-01-24 20:00:34,890 - services.translation_routes - INFO - [translation_routes.py:257] - --------------------------------------------------
2025-01-24 20:00:34,890 - services.translation_routes - INFO - [translation_routes.py:258] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.668
- Avg Amplitude: 0.050
- Rms Level: 0.088
- Crest Factor: 7.556
- Zero Crossings: 13185.000
- Silence Percentage: 16.676
- Clipping Points: 0.000
- Dynamic Range: 355.731

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.056
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.022
  - Temporal Flatness: 0.012

- Volume Metrics:
  - Volume Stability: 0.144
  - Volume Range: 1981.217
  - Volume Variations: 0.058

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0233909580457747
- Background Noise: 4.022214415494429
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.7330699563026428, 'stability': 2.9251651763916016, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.0, 'distinction': 1.0}
  - Description: Strong nasal resonance. Unstable nasal resonance. Clear distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.501
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.003
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-24 20:00:34,890 - services.translation_routes - INFO - [translation_routes.py:259] - ==================================================

2025-01-24 20:00:34,891 - services.translation_routes - INFO - [translation_routes.py:265] - Request 7394bc22: Audio output processed successfully
2025-01-24 20:00:34,894 - services.translation_routes - INFO - [translation_routes.py:318] - Request 7394bc22: Response prepared successfully
2025-01-24 20:00:34,894 - services.translation_routes - INFO - [translation_routes.py:329] - Request 7394bc22 completed in 141.15s
2025-01-24 20:00:34,896 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 141.15s, Memory Change: 790.20MB
2025-01-24 20:00:34,896 - __main__ - INFO - [app.py:278] - Request to /translate took 147.17s
2025-01-24 20:30:50,956 - __main__ - INFO - [app.py:217] - Received SIGINT signal
2025-01-24 20:30:50,958 - __main__ - INFO - [app.py:202] - Initiating graceful shutdown...
2025-01-24 20:30:55,958 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-24 20:30:55,959 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-24 20:30:55,959 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-24 20:30:55,960 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-24 20:30:55,961 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-24 20:30:55,961 - __main__ - INFO - [app.py:206] - Graceful shutdown completed
2025-01-24 20:30:55,962 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-24 20:30:55,963 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-24 20:30:55,963 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-24 20:30:55,964 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-24 20:30:55,964 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-24 20:30:55,965 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-24 20:30:55,965 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-24 20:30:55,966 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-24 20:30:55,966 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-24 20:30:55,967 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-24 20:31:05,796 - __main__ - INFO - [app.py:467] - Metrics server started on port 8000
2025-01-24 20:31:05,796 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-24 20:31:18,972 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-24 20:31:25,025 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-24 20:31:25,026 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-24 20:31:30,151 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-24 20:31:30,153 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-24 20:31:30,153 - __main__ - INFO - [app.py:491] - ==================================================
2025-01-24 20:31:30,153 - __main__ - INFO - [app.py:492] - Starting LinguaSync Backend
2025-01-24 20:31:30,153 - __main__ - INFO - [app.py:493] - Starting Flask app on port 5001 using cpu
2025-01-24 20:31:30,153 - __main__ - INFO - [app.py:494] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-01-24 20:31:30,153 - __main__ - INFO - [app.py:495] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-24 20:31:30,153 - __main__ - INFO - [app.py:496] - Maximum audio length: 300 seconds
2025-01-24 20:31:30,153 - __main__ - INFO - [app.py:497] - Sample rate: 16000 Hz
2025-01-24 20:31:30,153 - __main__ - INFO - [app.py:501] - System memory: 36.0GB total, 15.5GB available
2025-01-24 20:31:30,153 - __main__ - INFO - [app.py:502] - CPU cores: 11
2025-01-24 20:31:30,153 - __main__ - INFO - [app.py:510] - Configuration:
2025-01-24 20:31:30,153 - __main__ - INFO - [app.py:511] - - Debug mode: False
2025-01-24 20:31:30,153 - __main__ - INFO - [app.py:512] - - CORS enabled: True
2025-01-24 20:31:30,153 - __main__ - INFO - [app.py:513] - - Rate limiting: 10 requests per minute
2025-01-24 20:31:30,153 - __main__ - INFO - [app.py:514] - - Metrics enabled: True (port 8000)
2025-01-24 20:31:30,153 - __main__ - INFO - [app.py:516] - ==================================================
2025-01-24 20:32:54,850 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-01-24 20:32:54,852 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-24 20:32:54,855 - services.audio_link_routes - INFO - [audio_link_routes.py:216] - Processing URL: https://www.tiktok.com/@loganpaul/video/7138576512512478510
2025-01-24 20:32:54,856 - services.audio_link_routes - INFO - [audio_link_routes.py:236] - Processing TikTok URL
2025-01-24 20:32:54,856 - services.audio_link_routes - INFO - [audio_link_routes.py:120] - Using options for tiktok: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp_1ddhm6w/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8, 'extractor_args': {'tiktok': {'api_hostname': 'api22-normal-c-alisg.tiktokv.com', 'app_name': 'trill', 'app_version': '34.1.2', 'manifest_app_version': '2023401020', 'app_info': '1234567890123456789/trill///1180', 'device_id': '2915194358925895301'}}}
2025-01-24 20:32:56,437 - services.audio_link_routes - INFO - [audio_link_routes.py:133] - Successfully downloaded tiktok content
2025-01-24 20:32:56,438 - services.audio_link_routes - INFO - [audio_link_routes.py:152] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp_1ddhm6w/output.wav
2025-01-24 20:32:56,483 - services.audio_link_routes - INFO - [audio_link_routes.py:164] - Successfully converted audio to WAV
2025-01-24 20:32:56,484 - services.audio_link_routes - INFO - [audio_link_routes.py:242] - Successfully processed audio
2025-01-24 20:32:56,484 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 1.63s, Memory Change: 3.14MB
2025-01-24 20:32:56,485 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 1.63s
2025-01-24 20:33:04,379 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-24 20:33:04,380 - services.translation_routes - INFO - [translation_routes.py:30] - Starting translation request 89ed0e7e
2025-01-24 20:33:04,380 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-24 20:33:04,380 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-24 20:33:04,382 - services.translation_routes - INFO - [translation_routes.py:87] - Request 89ed0e7e: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpppj65snn.wav
2025-01-24 20:33:04,382 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 73.49 seconds
2025-01-24 20:33:04,382 - services.translation_routes - INFO - [translation_routes.py:100] - Request 89ed0e7e: Beginning audio processing with diagnostics
2025-01-24 20:33:04,382 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpppj65snn.wav
2025-01-24 20:33:04,382 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 16000, Channels: 1
2025-01-24 20:33:04,386 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([1, 1175881]), Frequency: 16000Hz
2025-01-24 20:33:04,448 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-24 20:33:04,453 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-24 20:33:04,544 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-24 20:33:04,671 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 20:33:04,672 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 20:33:04,697 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 20:33:04,698 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 20:33:04,723 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 20:33:04,724 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 20:33:04,748 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 20:33:04,748 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 20:33:07,452 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-24 20:33:07,453 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-24 20:33:07,687 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 20:33:07,688 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 20:33:07,714 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 20:33:07,715 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 20:33:07,744 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 20:33:07,744 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 20:33:07,771 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 20:33:07,771 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 20:33:10,205 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-24 20:33:10,206 - services.translation_routes - INFO - [translation_routes.py:111] - 
==================================================
2025-01-24 20:33:10,206 - services.translation_routes - INFO - [translation_routes.py:112] - Input Audio Quality Report
2025-01-24 20:33:10,206 - services.translation_routes - INFO - [translation_routes.py:113] - ==================================================
2025-01-24 20:33:10,206 - services.translation_routes - INFO - [translation_routes.py:114] - Request ID: 89ed0e7e
2025-01-24 20:33:10,206 - services.translation_routes - INFO - [translation_routes.py:115] - Target Language: fra
2025-01-24 20:33:10,206 - services.translation_routes - INFO - [translation_routes.py:116] - --------------------------------------------------
2025-01-24 20:33:10,206 - services.translation_routes - INFO - [translation_routes.py:117] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.030
- Rms Level: 0.066
- Crest Factor: 14.362
- Zero Crossings: 607056.000
- Silence Percentage: 36.919
- Clipping Points: 0.000
- Dynamic Range: 7477676.676

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 0.000
  - Temporal Variation: 0.110
  - Temporal Flatness: 0.047

- Volume Metrics:
  - Volume Stability: -0.172
  - Volume Range: 38459184.766
  - Volume Variations: 0.050

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.009210845533956
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 1.3861757516860962, 'stability': 2.4274330139160156, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.3255118131637573, 'distinction': 0.10339464992284775}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.561
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.491
  - Rhythm Quality: 0.517
  - Intonation Quality: 0.464

Vowel Quality:
  - Quality Score: 0.009
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-24 20:33:10,206 - services.translation_routes - INFO - [translation_routes.py:118] - ==================================================

2025-01-24 20:33:10,206 - services.translation_routes - INFO - [translation_routes.py:129] - Request 89ed0e7e: Audio processed successfully
2025-01-24 20:33:10,269 - services.translation_routes - INFO - [translation_routes.py:148] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-24 20:33:42,666 - services.translation_routes - INFO - [translation_routes.py:186] - Source text: This photo doesn't make sense.
2025-01-24 20:34:11,940 - services.translation_routes - INFO - [translation_routes.py:205] - Target text: C'est une photo qui a été capturée sur papier.
2025-01-24 20:35:13,696 - services.translation_routes - INFO - [translation_routes.py:228] - Processing tuple output from model
2025-01-24 20:35:13,703 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 20:35:13,704 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 20:35:13,707 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 20:35:13,707 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 20:35:13,709 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 20:35:13,709 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 20:35:13,711 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 20:35:13,711 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 20:35:13,777 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-24 20:35:13,777 - services.translation_routes - INFO - [translation_routes.py:252] - 
==================================================
2025-01-24 20:35:13,777 - services.translation_routes - INFO - [translation_routes.py:253] - Translated Audio Quality Report
2025-01-24 20:35:13,777 - services.translation_routes - INFO - [translation_routes.py:254] - ==================================================
2025-01-24 20:35:13,777 - services.translation_routes - INFO - [translation_routes.py:255] - Request ID: 89ed0e7e
2025-01-24 20:35:13,777 - services.translation_routes - INFO - [translation_routes.py:256] - Target Language: fra
2025-01-24 20:35:13,777 - services.translation_routes - INFO - [translation_routes.py:257] - --------------------------------------------------
2025-01-24 20:35:13,777 - services.translation_routes - INFO - [translation_routes.py:258] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.537
- Avg Amplitude: 0.059
- Rms Level: 0.096
- Crest Factor: 5.583
- Zero Crossings: 3706.000
- Silence Percentage: 16.826
- Clipping Points: 0.000
- Dynamic Range: 347.368

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.302
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.025
  - Temporal Flatness: 0.014

- Volume Metrics:
  - Volume Stability: 0.234
  - Volume Range: 470.034
  - Volume Variations: 0.059

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0344305769566695
- Background Noise: 3.2330651353497424
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.8385453224182129, 'stability': 3.14556622505188, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.501876175403595, 'consistency': 0.0, 'distinction': 1.0}
  - Description: Strong nasal resonance. Unstable nasal resonance. Clear distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.509
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 1.000

Vowel Quality:
  - Quality Score: 0.002
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-24 20:35:13,777 - services.translation_routes - INFO - [translation_routes.py:259] - ==================================================

2025-01-24 20:35:13,778 - services.translation_routes - INFO - [translation_routes.py:265] - Request 89ed0e7e: Audio output processed successfully
2025-01-24 20:35:13,780 - services.translation_routes - INFO - [translation_routes.py:318] - Request 89ed0e7e: Response prepared successfully
2025-01-24 20:35:13,780 - services.translation_routes - INFO - [translation_routes.py:329] - Request 89ed0e7e completed in 129.40s
2025-01-24 20:35:13,782 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 129.40s, Memory Change: 281.48MB
2025-01-24 20:35:13,782 - __main__ - INFO - [app.py:278] - Request to /translate took 135.05s
2025-01-24 20:45:47,168 - __main__ - INFO - [app.py:217] - Received SIGINT signal
2025-01-24 20:45:47,169 - __main__ - INFO - [app.py:202] - Initiating graceful shutdown...
2025-01-24 20:45:52,174 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-24 20:45:52,175 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-24 20:45:52,176 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-24 20:45:52,177 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-24 20:45:52,178 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-24 20:45:52,178 - __main__ - INFO - [app.py:206] - Graceful shutdown completed
2025-01-24 20:45:52,181 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-24 20:45:52,182 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-24 20:45:52,182 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-24 20:45:52,183 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-24 20:45:52,183 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-24 20:45:52,183 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-24 20:45:52,183 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-24 20:45:52,184 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-24 20:45:52,184 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-24 20:45:52,185 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-24 20:46:04,352 - __main__ - INFO - [app.py:467] - Metrics server started on port 8000
2025-01-24 20:46:04,353 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-24 20:46:17,171 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-24 20:46:23,167 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-24 20:46:23,168 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-24 20:46:28,198 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-24 20:46:28,200 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-24 20:46:28,200 - __main__ - INFO - [app.py:491] - ==================================================
2025-01-24 20:46:28,200 - __main__ - INFO - [app.py:492] - Starting LinguaSync Backend
2025-01-24 20:46:28,200 - __main__ - INFO - [app.py:493] - Starting Flask app on port 5001 using cpu
2025-01-24 20:46:28,200 - __main__ - INFO - [app.py:494] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-01-24 20:46:28,200 - __main__ - INFO - [app.py:495] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-24 20:46:28,200 - __main__ - INFO - [app.py:496] - Maximum audio length: 300 seconds
2025-01-24 20:46:28,200 - __main__ - INFO - [app.py:497] - Sample rate: 16000 Hz
2025-01-24 20:46:28,200 - __main__ - INFO - [app.py:501] - System memory: 36.0GB total, 15.5GB available
2025-01-24 20:46:28,200 - __main__ - INFO - [app.py:502] - CPU cores: 11
2025-01-24 20:46:28,200 - __main__ - INFO - [app.py:510] - Configuration:
2025-01-24 20:46:28,200 - __main__ - INFO - [app.py:511] - - Debug mode: False
2025-01-24 20:46:28,200 - __main__ - INFO - [app.py:512] - - CORS enabled: True
2025-01-24 20:46:28,200 - __main__ - INFO - [app.py:513] - - Rate limiting: 10 requests per minute
2025-01-24 20:46:28,200 - __main__ - INFO - [app.py:514] - - Metrics enabled: True (port 8000)
2025-01-24 20:46:28,200 - __main__ - INFO - [app.py:516] - ==================================================
2025-01-24 20:46:43,812 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-01-24 20:46:43,812 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-24 20:46:43,814 - services.audio_link_routes - INFO - [audio_link_routes.py:216] - Processing URL: https://www.tiktok.com/@loganpaul/video/7138576512512478510
2025-01-24 20:46:43,815 - services.audio_link_routes - INFO - [audio_link_routes.py:236] - Processing TikTok URL
2025-01-24 20:46:43,815 - services.audio_link_routes - INFO - [audio_link_routes.py:120] - Using options for tiktok: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp70pfi9cs/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8, 'extractor_args': {'tiktok': {'api_hostname': 'api22-normal-c-alisg.tiktokv.com', 'app_name': 'trill', 'app_version': '34.1.2', 'manifest_app_version': '2023401020', 'app_info': '1234567890123456789/trill///1180', 'device_id': '7071071550497506314'}}}
2025-01-24 20:46:45,292 - services.audio_link_routes - INFO - [audio_link_routes.py:133] - Successfully downloaded tiktok content
2025-01-24 20:46:45,293 - services.audio_link_routes - INFO - [audio_link_routes.py:152] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp70pfi9cs/output.wav
2025-01-24 20:46:45,333 - services.audio_link_routes - INFO - [audio_link_routes.py:164] - Successfully converted audio to WAV
2025-01-24 20:46:45,334 - services.audio_link_routes - INFO - [audio_link_routes.py:242] - Successfully processed audio
2025-01-24 20:46:45,334 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 1.52s, Memory Change: 4.62MB
2025-01-24 20:46:45,335 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 1.52s
2025-01-24 20:46:52,104 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-24 20:46:52,105 - services.translation_routes - INFO - [translation_routes.py:30] - Starting translation request 11b6370d
2025-01-24 20:46:52,105 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-24 20:46:52,105 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-24 20:46:52,107 - services.translation_routes - INFO - [translation_routes.py:87] - Request 11b6370d: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpqtkssqph.wav
2025-01-24 20:46:52,108 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 73.49 seconds
2025-01-24 20:46:52,108 - services.translation_routes - INFO - [translation_routes.py:100] - Request 11b6370d: Beginning audio processing with diagnostics
2025-01-24 20:46:52,108 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpqtkssqph.wav
2025-01-24 20:46:52,108 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 16000, Channels: 1
2025-01-24 20:46:52,111 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([1, 1175881]), Frequency: 16000Hz
2025-01-24 20:46:52,172 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-24 20:46:52,177 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-24 20:46:52,271 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-24 20:46:52,394 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 20:46:52,395 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 20:46:52,420 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 20:46:52,420 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 20:46:52,444 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 20:46:52,444 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 20:46:52,493 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 20:46:52,493 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 20:46:55,035 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-24 20:46:55,035 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-24 20:46:55,255 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 20:46:55,256 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 20:46:55,281 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 20:46:55,282 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 20:46:55,306 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 20:46:55,306 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 20:46:55,329 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 20:46:55,330 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 20:46:57,700 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-24 20:46:57,700 - services.translation_routes - INFO - [translation_routes.py:111] - 
==================================================
2025-01-24 20:46:57,700 - services.translation_routes - INFO - [translation_routes.py:112] - Input Audio Quality Report
2025-01-24 20:46:57,700 - services.translation_routes - INFO - [translation_routes.py:113] - ==================================================
2025-01-24 20:46:57,700 - services.translation_routes - INFO - [translation_routes.py:114] - Request ID: 11b6370d
2025-01-24 20:46:57,700 - services.translation_routes - INFO - [translation_routes.py:115] - Target Language: fra
2025-01-24 20:46:57,700 - services.translation_routes - INFO - [translation_routes.py:116] - --------------------------------------------------
2025-01-24 20:46:57,700 - services.translation_routes - INFO - [translation_routes.py:117] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.030
- Rms Level: 0.066
- Crest Factor: 14.362
- Zero Crossings: 607056.000
- Silence Percentage: 36.919
- Clipping Points: 0.000
- Dynamic Range: 7477676.676

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 0.000
  - Temporal Variation: 0.110
  - Temporal Flatness: 0.047

- Volume Metrics:
  - Volume Stability: -0.172
  - Volume Range: 38459184.766
  - Volume Variations: 0.050

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.009210845533956
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 1.3861757516860962, 'stability': 2.4274330139160156, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.3255118131637573, 'distinction': 0.10339464992284775}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.561
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.491
  - Rhythm Quality: 0.517
  - Intonation Quality: 0.464

Vowel Quality:
  - Quality Score: 0.009
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-24 20:46:57,700 - services.translation_routes - INFO - [translation_routes.py:118] - ==================================================

2025-01-24 20:46:57,701 - services.translation_routes - INFO - [translation_routes.py:129] - Request 11b6370d: Audio processed successfully
2025-01-24 20:46:57,765 - services.translation_routes - INFO - [translation_routes.py:148] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-24 20:47:45,898 - services.translation_routes - INFO - [translation_routes.py:186] - Source text: This photo doesn't make sense. There's a plane that takes you up in the air and it feels like the passengers are floating. My goal was to throw them all into the air when we were at the peak of my work. And while the whole plane was completely silent, we couldn't believe it. It's one of those things where I can describe it as much as I want, but until you experience it, there's nothing like it.
2025-01-24 20:48:19,181 - services.translation_routes - INFO - [translation_routes.py:205] - Target text: C'est une photo qui a été capturée sur papier et qui n'a pas de sens, mais c'est possible.
2025-01-24 20:49:27,473 - services.translation_routes - INFO - [translation_routes.py:228] - Processing tuple output from model
2025-01-24 20:49:27,486 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 20:49:27,487 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 20:49:27,490 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 20:49:27,490 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 20:49:27,496 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 20:49:27,496 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 20:49:27,499 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 20:49:27,500 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 20:49:27,699 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-24 20:49:27,699 - services.translation_routes - INFO - [translation_routes.py:252] - 
==================================================
2025-01-24 20:49:27,699 - services.translation_routes - INFO - [translation_routes.py:253] - Translated Audio Quality Report
2025-01-24 20:49:27,699 - services.translation_routes - INFO - [translation_routes.py:254] - ==================================================
2025-01-24 20:49:27,699 - services.translation_routes - INFO - [translation_routes.py:255] - Request ID: 11b6370d
2025-01-24 20:49:27,699 - services.translation_routes - INFO - [translation_routes.py:256] - Target Language: fra
2025-01-24 20:49:27,699 - services.translation_routes - INFO - [translation_routes.py:257] - --------------------------------------------------
2025-01-24 20:49:27,699 - services.translation_routes - INFO - [translation_routes.py:258] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.615
- Avg Amplitude: 0.060
- Rms Level: 0.098
- Crest Factor: 6.271
- Zero Crossings: 14452.000
- Silence Percentage: 17.950
- Clipping Points: 0.000
- Dynamic Range: 495.730

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.216
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.027
  - Temporal Flatness: 0.015

- Volume Metrics:
  - Volume Stability: 0.250
  - Volume Range: 1841.020
  - Volume Variations: 0.059

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0312833827812335
- Background Noise: 3.5085673951994747
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.8930525183677673, 'stability': 3.7582056522369385, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.358645498752594, 'consistency': 0.0, 'distinction': 0.3054701089859009}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.511
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.003
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-24 20:49:27,699 - services.translation_routes - INFO - [translation_routes.py:259] - ==================================================

2025-01-24 20:49:27,699 - services.translation_routes - INFO - [translation_routes.py:265] - Request 11b6370d: Audio output processed successfully
2025-01-24 20:49:27,703 - services.translation_routes - INFO - [translation_routes.py:318] - Request 11b6370d: Response prepared successfully
2025-01-24 20:49:27,704 - services.translation_routes - INFO - [translation_routes.py:329] - Request 11b6370d completed in 155.60s
2025-01-24 20:49:27,706 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 155.60s, Memory Change: 689.70MB
2025-01-24 20:49:27,707 - __main__ - INFO - [app.py:278] - Request to /translate took 160.96s
2025-01-24 21:06:01,018 - __main__ - INFO - [app.py:217] - Received SIGINT signal
2025-01-24 21:06:01,021 - __main__ - INFO - [app.py:202] - Initiating graceful shutdown...
2025-01-24 21:06:06,023 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-24 21:06:06,025 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-24 21:06:06,025 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-24 21:06:06,027 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-24 21:06:06,028 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-24 21:06:06,029 - __main__ - INFO - [app.py:206] - Graceful shutdown completed
2025-01-24 21:06:06,031 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-24 21:06:06,032 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-24 21:06:06,032 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-24 21:06:06,033 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-24 21:06:06,033 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-24 21:06:06,034 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-24 21:06:06,034 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-24 21:06:06,034 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-24 21:06:06,035 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-24 21:06:06,036 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-24 21:06:13,362 - __main__ - INFO - [app.py:467] - Metrics server started on port 8000
2025-01-24 21:06:13,362 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-24 21:06:27,147 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-24 21:06:32,555 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-24 21:06:32,557 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-24 21:06:37,653 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-24 21:06:37,654 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-24 21:06:37,654 - __main__ - INFO - [app.py:491] - ==================================================
2025-01-24 21:06:37,654 - __main__ - INFO - [app.py:492] - Starting LinguaSync Backend
2025-01-24 21:06:37,654 - __main__ - INFO - [app.py:493] - Starting Flask app on port 5001 using cpu
2025-01-24 21:06:37,654 - __main__ - INFO - [app.py:494] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-01-24 21:06:37,654 - __main__ - INFO - [app.py:495] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-24 21:06:37,654 - __main__ - INFO - [app.py:496] - Maximum audio length: 300 seconds
2025-01-24 21:06:37,654 - __main__ - INFO - [app.py:497] - Sample rate: 16000 Hz
2025-01-24 21:06:37,654 - __main__ - INFO - [app.py:501] - System memory: 36.0GB total, 15.0GB available
2025-01-24 21:06:37,654 - __main__ - INFO - [app.py:502] - CPU cores: 11
2025-01-24 21:06:37,654 - __main__ - INFO - [app.py:510] - Configuration:
2025-01-24 21:06:37,654 - __main__ - INFO - [app.py:511] - - Debug mode: False
2025-01-24 21:06:37,654 - __main__ - INFO - [app.py:512] - - CORS enabled: True
2025-01-24 21:06:37,654 - __main__ - INFO - [app.py:513] - - Rate limiting: 10 requests per minute
2025-01-24 21:06:37,654 - __main__ - INFO - [app.py:514] - - Metrics enabled: True (port 8000)
2025-01-24 21:06:37,654 - __main__ - INFO - [app.py:516] - ==================================================
2025-01-24 21:06:45,451 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-01-24 21:06:45,451 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-24 21:06:45,454 - services.audio_link_routes - INFO - [audio_link_routes.py:216] - Processing URL: https://www.tiktok.com/@loganpaul/video/7138576512512478510
2025-01-24 21:06:45,454 - services.audio_link_routes - INFO - [audio_link_routes.py:236] - Processing TikTok URL
2025-01-24 21:06:45,455 - services.audio_link_routes - INFO - [audio_link_routes.py:120] - Using options for tiktok: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpu_6dymhg/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8, 'extractor_args': {'tiktok': {'api_hostname': 'api22-normal-c-alisg.tiktokv.com', 'app_name': 'trill', 'app_version': '34.1.2', 'manifest_app_version': '2023401020', 'app_info': '1234567890123456789/trill///1180', 'device_id': '7422624762171495355'}}}
2025-01-24 21:06:46,901 - services.audio_link_routes - INFO - [audio_link_routes.py:133] - Successfully downloaded tiktok content
2025-01-24 21:06:46,903 - services.audio_link_routes - INFO - [audio_link_routes.py:152] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpu_6dymhg/output.wav
2025-01-24 21:06:46,943 - services.audio_link_routes - INFO - [audio_link_routes.py:164] - Successfully converted audio to WAV
2025-01-24 21:06:46,943 - services.audio_link_routes - INFO - [audio_link_routes.py:242] - Successfully processed audio
2025-01-24 21:06:46,944 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 1.49s, Memory Change: 4.83MB
2025-01-24 21:06:46,944 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 1.49s
2025-01-24 21:06:55,784 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-24 21:06:55,785 - services.translation_routes - INFO - [translation_routes.py:30] - Starting translation request f4aa8122
2025-01-24 21:06:55,785 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-24 21:06:55,785 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-24 21:06:55,787 - services.translation_routes - INFO - [translation_routes.py:87] - Request f4aa8122: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp3tsib85u.wav
2025-01-24 21:06:55,787 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 73.49 seconds
2025-01-24 21:06:55,787 - services.translation_routes - INFO - [translation_routes.py:100] - Request f4aa8122: Beginning audio processing with diagnostics
2025-01-24 21:06:55,787 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp3tsib85u.wav
2025-01-24 21:06:55,787 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 16000, Channels: 1
2025-01-24 21:06:55,791 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([1, 1175881]), Frequency: 16000Hz
2025-01-24 21:06:55,858 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-24 21:06:55,865 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-24 21:06:55,970 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-24 21:06:56,253 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 21:06:56,254 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 21:06:56,308 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 21:06:56,308 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 21:06:56,333 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 21:06:56,334 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 21:06:56,358 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 21:06:56,359 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 21:06:58,959 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-24 21:06:58,959 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-24 21:06:59,185 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 21:06:59,185 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 21:06:59,211 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 21:06:59,211 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 21:06:59,236 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 21:06:59,237 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 21:06:59,260 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 21:06:59,260 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 21:07:01,616 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-24 21:07:01,617 - services.translation_routes - INFO - [translation_routes.py:111] - 
==================================================
2025-01-24 21:07:01,617 - services.translation_routes - INFO - [translation_routes.py:112] - Input Audio Quality Report
2025-01-24 21:07:01,617 - services.translation_routes - INFO - [translation_routes.py:113] - ==================================================
2025-01-24 21:07:01,617 - services.translation_routes - INFO - [translation_routes.py:114] - Request ID: f4aa8122
2025-01-24 21:07:01,617 - services.translation_routes - INFO - [translation_routes.py:115] - Target Language: fra
2025-01-24 21:07:01,617 - services.translation_routes - INFO - [translation_routes.py:116] - --------------------------------------------------
2025-01-24 21:07:01,617 - services.translation_routes - INFO - [translation_routes.py:117] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.030
- Rms Level: 0.066
- Crest Factor: 14.362
- Zero Crossings: 607056.000
- Silence Percentage: 36.919
- Clipping Points: 0.000
- Dynamic Range: 7477676.676

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 0.000
  - Temporal Variation: 0.110
  - Temporal Flatness: 0.047

- Volume Metrics:
  - Volume Stability: -0.172
  - Volume Range: 38459184.766
  - Volume Variations: 0.050

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.009210845533956
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 1.3861757516860962, 'stability': 2.4274330139160156, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.3255118131637573, 'distinction': 0.10339464992284775}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.561
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.491
  - Rhythm Quality: 0.517
  - Intonation Quality: 0.464

Vowel Quality:
  - Quality Score: 0.009
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-24 21:07:01,617 - services.translation_routes - INFO - [translation_routes.py:118] - ==================================================

2025-01-24 21:07:01,617 - services.translation_routes - INFO - [translation_routes.py:129] - Request f4aa8122: Audio processed successfully
2025-01-24 21:07:01,682 - services.translation_routes - INFO - [translation_routes.py:148] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-24 21:07:48,046 - services.translation_routes - INFO - [translation_routes.py:186] - Source text: This photo doesn't make sense. There's a plane that takes you up in the air and it feels like the passengers are floating. My goal was to throw them all into the air when we were at the peak of my work. And while the whole plane was completely silent, we couldn't believe it. It's one of those things where I can describe it as much as I want, but until you experience it, there's nothing like it.
2025-01-24 21:08:20,431 - services.translation_routes - INFO - [translation_routes.py:205] - Target text: C'est une photo qui a été capturée sur papier et qui n'a pas de sens, mais c'est possible.
2025-01-24 21:09:26,468 - services.translation_routes - INFO - [translation_routes.py:228] - Processing tuple output from model
2025-01-24 21:09:26,481 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 21:09:26,481 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 21:09:26,486 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 21:09:26,486 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 21:09:26,490 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 21:09:26,490 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 21:09:26,496 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-24 21:09:26,496 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-24 21:09:26,678 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-24 21:09:26,678 - services.translation_routes - INFO - [translation_routes.py:252] - 
==================================================
2025-01-24 21:09:26,678 - services.translation_routes - INFO - [translation_routes.py:253] - Translated Audio Quality Report
2025-01-24 21:09:26,678 - services.translation_routes - INFO - [translation_routes.py:254] - ==================================================
2025-01-24 21:09:26,678 - services.translation_routes - INFO - [translation_routes.py:255] - Request ID: f4aa8122
2025-01-24 21:09:26,678 - services.translation_routes - INFO - [translation_routes.py:256] - Target Language: fra
2025-01-24 21:09:26,678 - services.translation_routes - INFO - [translation_routes.py:257] - --------------------------------------------------
2025-01-24 21:09:26,678 - services.translation_routes - INFO - [translation_routes.py:258] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.539
- Avg Amplitude: 0.059
- Rms Level: 0.095
- Crest Factor: 5.697
- Zero Crossings: 16907.000
- Silence Percentage: 12.030
- Clipping Points: 0.000
- Dynamic Range: 220.279

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.288
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.027
  - Temporal Flatness: 0.015

- Volume Metrics:
  - Volume Stability: 0.295
  - Volume Range: 155.507
  - Volume Variations: 0.055

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0332279680404777
- Background Noise: 3.2789767317460194
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.8524388074874878, 'stability': 3.46586275100708, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.0, 'distinction': 0.35291239619255066}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.500
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.003
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-24 21:09:26,678 - services.translation_routes - INFO - [translation_routes.py:259] - ==================================================

2025-01-24 21:09:26,678 - services.translation_routes - INFO - [translation_routes.py:265] - Request f4aa8122: Audio output processed successfully
2025-01-24 21:09:26,681 - services.translation_routes - INFO - [translation_routes.py:318] - Request f4aa8122: Response prepared successfully
2025-01-24 21:09:26,682 - services.translation_routes - INFO - [translation_routes.py:329] - Request f4aa8122 completed in 150.90s
2025-01-24 21:09:26,684 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 150.90s, Memory Change: 227.12MB
2025-01-24 21:09:26,684 - __main__ - INFO - [app.py:278] - Request to /translate took 156.75s
2025-01-25 15:31:02,643 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.53MB
2025-01-25 15:31:02,648 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.01s
2025-01-25 15:31:02,654 - services.audio_link_routes - INFO - [audio_link_routes.py:216] - Processing URL: https://youtube.com/shorts/DybbzHdNogk?si=QleZXrjy-t7KCnH-
2025-01-25 15:31:02,657 - services.audio_link_routes - INFO - [audio_link_routes.py:233] - Processing YouTube URL
2025-01-25 15:31:02,659 - services.audio_link_routes - INFO - [audio_link_routes.py:120] - Using options for youtube: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpa1j6pu1h/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8}
2025-01-25 15:31:06,411 - services.audio_link_routes - INFO - [audio_link_routes.py:133] - Successfully downloaded youtube content
2025-01-25 15:31:06,413 - services.audio_link_routes - INFO - [audio_link_routes.py:152] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpa1j6pu1h/output.wav
2025-01-25 15:31:06,427 - services.audio_link_routes - INFO - [audio_link_routes.py:164] - Successfully converted audio to WAV
2025-01-25 15:31:06,428 - services.audio_link_routes - INFO - [audio_link_routes.py:242] - Successfully processed audio
2025-01-25 15:31:06,429 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 3.78s, Memory Change: 199.08MB
2025-01-25 15:31:06,429 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 3.78s
2025-01-25 15:31:09,884 - services.model_manager - INFO - [model_manager.py:188] - Model inactive for too long, reloading...
2025-01-25 15:31:09,885 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-25 15:31:24,435 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-25 15:31:43,535 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-25 15:31:43,538 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-25 15:31:50,141 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-25 15:31:50,144 - services.translation_routes - INFO - [translation_routes.py:30] - Starting translation request 737956bd
2025-01-25 15:31:50,145 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-25 15:31:50,145 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-25 15:31:50,147 - services.translation_routes - INFO - [translation_routes.py:87] - Request 737956bd: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpfyzy7hh1.wav
2025-01-25 15:31:50,151 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 19.25 seconds
2025-01-25 15:31:50,151 - services.translation_routes - INFO - [translation_routes.py:100] - Request 737956bd: Beginning audio processing with diagnostics
2025-01-25 15:31:50,151 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpfyzy7hh1.wav
2025-01-25 15:31:50,151 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 16000, Channels: 1
2025-01-25 15:31:50,157 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([1, 307990]), Frequency: 16000Hz
2025-01-25 15:31:50,188 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-25 15:31:50,194 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-25 15:31:50,219 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-25 15:31:50,271 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 15:31:50,275 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 15:31:50,285 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 15:31:50,285 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 15:31:50,295 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 15:31:50,296 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 15:31:50,305 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 15:31:50,306 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 15:31:51,150 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-25 15:31:51,150 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-25 15:31:51,211 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 15:31:51,211 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 15:31:51,220 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 15:31:51,220 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 15:31:51,227 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 15:31:51,227 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 15:31:51,235 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 15:31:51,235 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 15:31:51,812 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-25 15:31:51,812 - services.translation_routes - INFO - [translation_routes.py:111] - 
==================================================
2025-01-25 15:31:51,812 - services.translation_routes - INFO - [translation_routes.py:112] - Input Audio Quality Report
2025-01-25 15:31:51,812 - services.translation_routes - INFO - [translation_routes.py:113] - ==================================================
2025-01-25 15:31:51,812 - services.translation_routes - INFO - [translation_routes.py:114] - Request ID: 737956bd
2025-01-25 15:31:51,812 - services.translation_routes - INFO - [translation_routes.py:115] - Target Language: fra
2025-01-25 15:31:51,812 - services.translation_routes - INFO - [translation_routes.py:116] - --------------------------------------------------
2025-01-25 15:31:51,812 - services.translation_routes - INFO - [translation_routes.py:117] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.042
- Rms Level: 0.098
- Crest Factor: 9.721
- Zero Crossings: 161470.000
- Silence Percentage: 47.007
- Clipping Points: 0.000
- Dynamic Range: 11894631.545

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 0.000
  - Temporal Variation: 0.175
  - Temporal Flatness: 0.070

- Volume Metrics:
  - Volume Stability: -0.011
  - Volume Range: 25688430.667
  - Volume Variations: 0.070

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.020105763966966
- Background Noise: 4.88844768831307
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 1.3607534170150757, 'stability': 2.5722947120666504, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.07924658805131912, 'consistency': 0.1415557861328125, 'distinction': 0.12459858506917953}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.563
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.175
  - Rhythm Quality: 0.214
  - Intonation Quality: 0.137

Vowel Quality:
  - Quality Score: 0.018
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-25 15:31:51,812 - services.translation_routes - INFO - [translation_routes.py:118] - ==================================================

2025-01-25 15:31:51,813 - services.translation_routes - INFO - [translation_routes.py:129] - Request 737956bd: Audio processed successfully
2025-01-25 15:31:51,850 - services.translation_routes - INFO - [translation_routes.py:148] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-25 15:32:15,640 - services.translation_routes - INFO - [translation_routes.py:186] - Source text: Mike Tyson, he had to punch Zack in the face. He kept doing it wrong for the camera. In fact, he was pulling it back too far. So I remember coming over here with Zack and showing him how to throw a punch. And without missing a beat, he goes, "This is great. I'm getting boxing lessons from the captain of the Jewish debating team".
2025-01-25 15:32:41,861 - services.translation_routes - INFO - [translation_routes.py:205] - Target text: Mike Tyson a dû donner un coup de poing au visage de Zack, il a continué à faire du mal pour la caméra, en fait il était en train de le tirer trop loin. Je me souviens de venir ici avec Zack et je lui montre comment jeter un punch. Et sans manquer une perle, il dit : "C'est génial, je reçois des leçons de boxe du capitaine de l'équipe de débat juif."
2025-01-25 15:33:02,179 - services.translation_routes - INFO - [translation_routes.py:228] - Processing tuple output from model
2025-01-25 15:33:02,200 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 15:33:02,201 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 15:33:02,205 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 15:33:02,205 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 15:33:02,212 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 15:33:02,213 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 15:33:02,220 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 15:33:02,220 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 15:33:02,418 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-25 15:33:02,419 - services.translation_routes - INFO - [translation_routes.py:252] - 
==================================================
2025-01-25 15:33:02,419 - services.translation_routes - INFO - [translation_routes.py:253] - Translated Audio Quality Report
2025-01-25 15:33:02,419 - services.translation_routes - INFO - [translation_routes.py:254] - ==================================================
2025-01-25 15:33:02,419 - services.translation_routes - INFO - [translation_routes.py:255] - Request ID: 737956bd
2025-01-25 15:33:02,419 - services.translation_routes - INFO - [translation_routes.py:256] - Target Language: fra
2025-01-25 15:33:02,419 - services.translation_routes - INFO - [translation_routes.py:257] - --------------------------------------------------
2025-01-25 15:33:02,419 - services.translation_routes - INFO - [translation_routes.py:258] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.722
- Avg Amplitude: 0.068
- Rms Level: 0.104
- Crest Factor: 6.919
- Zero Crossings: 12638.000
- Silence Percentage: 10.320
- Clipping Points: 0.000
- Dynamic Range: 187.124

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.135
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.027
  - Temporal Flatness: 0.015

- Volume Metrics:
  - Volume Stability: 0.341
  - Volume Range: 431.012
  - Volume Variations: 0.058

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0301511131312324
- Background Noise: 3.767598023578425
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
No issues detected

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.9748983979225159, 'stability': 3.6346378326416016, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.0, 'distinction': 0.08624616265296936}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.543
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.004
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-25 15:33:02,419 - services.translation_routes - INFO - [translation_routes.py:259] - ==================================================

2025-01-25 15:33:02,419 - services.translation_routes - INFO - [translation_routes.py:265] - Request 737956bd: Audio output processed successfully
2025-01-25 15:33:02,424 - services.translation_routes - INFO - [translation_routes.py:318] - Request 737956bd: Response prepared successfully
2025-01-25 15:33:02,424 - services.translation_routes - INFO - [translation_routes.py:329] - Request 737956bd completed in 72.28s
2025-01-25 15:33:02,426 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 72.28s, Memory Change: 8561.23MB
2025-01-25 15:33:02,426 - __main__ - INFO - [app.py:278] - Request to /translate took 112.54s
2025-01-25 16:31:21,533 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.56MB
2025-01-25 16:31:21,536 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.01s
2025-01-25 16:31:21,541 - services.audio_link_routes - INFO - [audio_link_routes.py:216] - Processing URL: https://www.tiktok.com/@loganpaul/video/7138576512512478510
2025-01-25 16:31:21,542 - services.audio_link_routes - INFO - [audio_link_routes.py:236] - Processing TikTok URL
2025-01-25 16:31:21,543 - services.audio_link_routes - INFO - [audio_link_routes.py:120] - Using options for tiktok: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpwsrl1_pw/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8, 'extractor_args': {'tiktok': {'api_hostname': 'api22-normal-c-alisg.tiktokv.com', 'app_name': 'trill', 'app_version': '34.1.2', 'manifest_app_version': '2023401020', 'app_info': '1234567890123456789/trill///1180', 'device_id': '3984149233173979330'}}}
2025-01-25 16:31:23,016 - services.audio_link_routes - INFO - [audio_link_routes.py:133] - Successfully downloaded tiktok content
2025-01-25 16:31:23,019 - services.audio_link_routes - INFO - [audio_link_routes.py:152] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpwsrl1_pw/output.wav
2025-01-25 16:31:23,060 - services.audio_link_routes - INFO - [audio_link_routes.py:164] - Successfully converted audio to WAV
2025-01-25 16:31:23,061 - services.audio_link_routes - INFO - [audio_link_routes.py:242] - Successfully processed audio
2025-01-25 16:31:23,062 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 1.52s, Memory Change: 91.95MB
2025-01-25 16:31:23,062 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 1.52s
2025-01-25 16:31:46,729 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-25 16:31:46,734 - services.translation_routes - INFO - [translation_routes.py:30] - Starting translation request 4dd06700
2025-01-25 16:31:46,734 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-25 16:31:46,734 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-25 16:31:46,737 - services.translation_routes - INFO - [translation_routes.py:87] - Request 4dd06700: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpkdnc3w1l.wav
2025-01-25 16:31:46,738 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 73.49 seconds
2025-01-25 16:31:46,738 - services.translation_routes - INFO - [translation_routes.py:100] - Request 4dd06700: Beginning audio processing with diagnostics
2025-01-25 16:31:46,738 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpkdnc3w1l.wav
2025-01-25 16:31:46,738 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 16000, Channels: 1
2025-01-25 16:31:46,742 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([1, 1175881]), Frequency: 16000Hz
2025-01-25 16:31:46,816 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-25 16:31:46,830 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-25 16:31:46,922 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-25 16:31:47,050 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 16:31:47,051 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 16:31:47,073 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 16:31:47,073 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 16:31:47,095 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 16:31:47,095 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 16:31:47,118 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 16:31:47,119 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 16:31:49,641 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-25 16:31:49,641 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-25 16:31:49,862 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 16:31:49,863 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 16:31:49,885 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 16:31:49,885 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 16:31:49,908 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 16:31:49,908 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 16:31:49,932 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 16:31:49,932 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 16:31:52,348 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-25 16:31:52,348 - services.translation_routes - INFO - [translation_routes.py:111] - 
==================================================
2025-01-25 16:31:52,349 - services.translation_routes - INFO - [translation_routes.py:112] - Input Audio Quality Report
2025-01-25 16:31:52,349 - services.translation_routes - INFO - [translation_routes.py:113] - ==================================================
2025-01-25 16:31:52,349 - services.translation_routes - INFO - [translation_routes.py:114] - Request ID: 4dd06700
2025-01-25 16:31:52,349 - services.translation_routes - INFO - [translation_routes.py:115] - Target Language: fra
2025-01-25 16:31:52,349 - services.translation_routes - INFO - [translation_routes.py:116] - --------------------------------------------------
2025-01-25 16:31:52,349 - services.translation_routes - INFO - [translation_routes.py:117] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.030
- Rms Level: 0.066
- Crest Factor: 14.362
- Zero Crossings: 607056.000
- Silence Percentage: 36.919
- Clipping Points: 0.000
- Dynamic Range: 7477676.676

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 0.000
  - Temporal Variation: 0.110
  - Temporal Flatness: 0.047

- Volume Metrics:
  - Volume Stability: -0.172
  - Volume Range: 38459184.766
  - Volume Variations: 0.050

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.009210845533956
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 1.3861757516860962, 'stability': 2.4274330139160156, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.3255118131637573, 'distinction': 0.10339464992284775}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.561
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.491
  - Rhythm Quality: 0.517
  - Intonation Quality: 0.464

Vowel Quality:
  - Quality Score: 0.009
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-25 16:31:52,349 - services.translation_routes - INFO - [translation_routes.py:118] - ==================================================

2025-01-25 16:31:52,349 - services.translation_routes - INFO - [translation_routes.py:129] - Request 4dd06700: Audio processed successfully
2025-01-25 16:31:52,427 - services.translation_routes - INFO - [translation_routes.py:148] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-25 16:32:56,146 - services.translation_routes - INFO - [translation_routes.py:186] - Source text: This photo doesn't make sense. There's a plane that takes you up in the air and it feels like the passengers are floating. My goal was to throw them all into the air when we were at the peak of my work. And while the whole plane was completely silent, we couldn't believe it. It's one of those things where I can describe it as much as I want, but until you experience it, there's nothing like it.
2025-01-25 16:33:45,278 - services.translation_routes - INFO - [translation_routes.py:205] - Target text: C'est une photo qui a été capturée sur papier et qui n'a pas de sens, mais c'est possible.
2025-01-25 16:35:21,635 - services.translation_routes - INFO - [translation_routes.py:228] - Processing tuple output from model
2025-01-25 16:35:21,647 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 16:35:21,648 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 16:35:21,651 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 16:35:21,651 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 16:35:21,653 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 16:35:21,654 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 16:35:21,657 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 16:35:21,658 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 16:35:21,761 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-25 16:35:21,761 - services.translation_routes - INFO - [translation_routes.py:252] - 
==================================================
2025-01-25 16:35:21,761 - services.translation_routes - INFO - [translation_routes.py:253] - Translated Audio Quality Report
2025-01-25 16:35:21,761 - services.translation_routes - INFO - [translation_routes.py:254] - ==================================================
2025-01-25 16:35:21,761 - services.translation_routes - INFO - [translation_routes.py:255] - Request ID: 4dd06700
2025-01-25 16:35:21,761 - services.translation_routes - INFO - [translation_routes.py:256] - Target Language: fra
2025-01-25 16:35:21,761 - services.translation_routes - INFO - [translation_routes.py:257] - --------------------------------------------------
2025-01-25 16:35:21,761 - services.translation_routes - INFO - [translation_routes.py:258] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.795
- Avg Amplitude: 0.052
- Rms Level: 0.096
- Crest Factor: 8.268
- Zero Crossings: 11086.000
- Silence Percentage: 16.884
- Clipping Points: 0.000
- Dynamic Range: 323.109

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.027
  - Temporal Flatness: 0.014

- Volume Metrics:
  - Volume Stability: 0.078
  - Volume Range: 537.967
  - Volume Variations: 0.066

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0232680979972124
- Background Noise: 4.30731554751968
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.8084978461265564, 'stability': 3.2139432430267334, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.1915850043296814, 'consistency': 0.0, 'distinction': 1.0}
  - Description: Strong nasal resonance. Unstable nasal resonance. Clear distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.493
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.004
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-25 16:35:21,761 - services.translation_routes - INFO - [translation_routes.py:259] - ==================================================

2025-01-25 16:35:21,761 - services.translation_routes - INFO - [translation_routes.py:265] - Request 4dd06700: Audio output processed successfully
2025-01-25 16:35:21,767 - services.translation_routes - INFO - [translation_routes.py:318] - Request 4dd06700: Response prepared successfully
2025-01-25 16:35:21,768 - services.translation_routes - INFO - [translation_routes.py:329] - Request 4dd06700 completed in 215.03s
2025-01-25 16:35:21,769 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 215.04s, Memory Change: -4637.28MB
2025-01-25 16:35:21,770 - __main__ - INFO - [app.py:278] - Request to /translate took 236.82s
2025-01-25 17:23:40,650 - __main__ - INFO - [app.py:217] - Received SIGINT signal
2025-01-25 17:23:40,656 - __main__ - INFO - [app.py:202] - Initiating graceful shutdown...
2025-01-25 17:23:45,659 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-25 17:23:45,661 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-25 17:23:45,661 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-25 17:23:45,666 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-25 17:23:45,668 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-25 17:23:45,669 - __main__ - INFO - [app.py:206] - Graceful shutdown completed
2025-01-25 17:23:45,677 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-25 17:23:45,678 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-25 17:23:45,678 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-25 17:23:45,679 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-25 17:23:45,679 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-25 17:23:45,680 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-25 17:23:45,680 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-25 17:23:45,680 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-25 17:23:45,681 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-25 17:23:45,681 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-25 17:24:05,288 - __main__ - INFO - [app.py:467] - Metrics server started on port 8000
2025-01-25 17:24:05,288 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-25 17:24:19,174 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-25 17:24:37,352 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-25 17:24:37,355 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-25 17:24:43,019 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-25 17:24:43,020 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-25 17:24:43,020 - __main__ - INFO - [app.py:491] - ==================================================
2025-01-25 17:24:43,020 - __main__ - INFO - [app.py:492] - Starting LinguaSync Backend
2025-01-25 17:24:43,020 - __main__ - INFO - [app.py:493] - Starting Flask app on port 5001 using cpu
2025-01-25 17:24:43,020 - __main__ - INFO - [app.py:494] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-01-25 17:24:43,020 - __main__ - INFO - [app.py:495] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-25 17:24:43,020 - __main__ - INFO - [app.py:496] - Maximum audio length: 300 seconds
2025-01-25 17:24:43,020 - __main__ - INFO - [app.py:497] - Sample rate: 16000 Hz
2025-01-25 17:24:43,020 - __main__ - INFO - [app.py:501] - System memory: 36.0GB total, 10.2GB available
2025-01-25 17:24:43,021 - __main__ - INFO - [app.py:502] - CPU cores: 11
2025-01-25 17:24:43,021 - __main__ - INFO - [app.py:510] - Configuration:
2025-01-25 17:24:43,021 - __main__ - INFO - [app.py:511] - - Debug mode: False
2025-01-25 17:24:43,021 - __main__ - INFO - [app.py:512] - - CORS enabled: True
2025-01-25 17:24:43,021 - __main__ - INFO - [app.py:513] - - Rate limiting: 10 requests per minute
2025-01-25 17:24:43,021 - __main__ - INFO - [app.py:514] - - Metrics enabled: True (port 8000)
2025-01-25 17:24:43,021 - __main__ - INFO - [app.py:516] - ==================================================
2025-01-25 17:26:34,255 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.53MB
2025-01-25 17:26:34,256 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-25 17:26:34,259 - services.audio_link_routes - INFO - [audio_link_routes.py:216] - Processing URL: https://youtube.com/shorts/DybbzHdNogk?si=wlt7r5-LJt2oKvuG
2025-01-25 17:26:34,260 - services.audio_link_routes - INFO - [audio_link_routes.py:233] - Processing YouTube URL
2025-01-25 17:26:34,261 - services.audio_link_routes - INFO - [audio_link_routes.py:120] - Using options for youtube: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpi8xrk64y/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8}
2025-01-25 17:26:37,387 - services.audio_link_routes - INFO - [audio_link_routes.py:133] - Successfully downloaded youtube content
2025-01-25 17:26:37,389 - services.audio_link_routes - INFO - [audio_link_routes.py:152] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpi8xrk64y/output.wav
2025-01-25 17:26:37,400 - services.audio_link_routes - INFO - [audio_link_routes.py:164] - Successfully converted audio to WAV
2025-01-25 17:26:37,401 - services.audio_link_routes - INFO - [audio_link_routes.py:242] - Successfully processed audio
2025-01-25 17:26:37,401 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 3.14s, Memory Change: 91.72MB
2025-01-25 17:26:37,401 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 3.14s
2025-01-25 17:26:49,168 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-25 17:26:49,170 - services.translation_routes - INFO - [translation_routes.py:30] - Starting translation request d2f670c7
2025-01-25 17:26:49,170 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-25 17:26:49,170 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-25 17:26:49,172 - services.translation_routes - INFO - [translation_routes.py:87] - Request d2f670c7: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmppjj1_w9p.wav
2025-01-25 17:26:49,172 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 19.25 seconds
2025-01-25 17:26:49,172 - services.translation_routes - INFO - [translation_routes.py:100] - Request d2f670c7: Beginning audio processing with diagnostics
2025-01-25 17:26:49,172 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmppjj1_w9p.wav
2025-01-25 17:26:49,172 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 16000, Channels: 1
2025-01-25 17:26:49,174 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([1, 307990]), Frequency: 16000Hz
2025-01-25 17:26:49,194 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-25 17:26:49,196 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-25 17:26:49,219 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-25 17:26:49,254 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 17:26:49,254 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 17:26:49,263 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 17:26:49,263 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 17:26:49,270 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 17:26:49,270 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 17:26:49,278 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 17:26:49,278 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 17:26:49,891 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-25 17:26:49,892 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-25 17:26:49,947 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 17:26:49,947 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 17:26:49,955 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 17:26:49,955 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 17:26:49,964 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 17:26:49,964 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 17:26:49,971 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 17:26:49,972 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 17:26:50,538 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-25 17:26:50,538 - services.translation_routes - INFO - [translation_routes.py:111] - 
==================================================
2025-01-25 17:26:50,538 - services.translation_routes - INFO - [translation_routes.py:112] - Input Audio Quality Report
2025-01-25 17:26:50,538 - services.translation_routes - INFO - [translation_routes.py:113] - ==================================================
2025-01-25 17:26:50,538 - services.translation_routes - INFO - [translation_routes.py:114] - Request ID: d2f670c7
2025-01-25 17:26:50,538 - services.translation_routes - INFO - [translation_routes.py:115] - Target Language: fra
2025-01-25 17:26:50,538 - services.translation_routes - INFO - [translation_routes.py:116] - --------------------------------------------------
2025-01-25 17:26:50,538 - services.translation_routes - INFO - [translation_routes.py:117] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.042
- Rms Level: 0.098
- Crest Factor: 9.721
- Zero Crossings: 161470.000
- Silence Percentage: 47.007
- Clipping Points: 0.000
- Dynamic Range: 11894631.545

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 0.000
  - Temporal Variation: 0.175
  - Temporal Flatness: 0.070

- Volume Metrics:
  - Volume Stability: -0.011
  - Volume Range: 25688430.667
  - Volume Variations: 0.070

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.020105763966966
- Background Noise: 4.88844768831307
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 1.3607534170150757, 'stability': 2.5722947120666504, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.07924658805131912, 'consistency': 0.1415557861328125, 'distinction': 0.12459858506917953}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.563
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.175
  - Rhythm Quality: 0.214
  - Intonation Quality: 0.137

Vowel Quality:
  - Quality Score: 0.018
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-25 17:26:50,538 - services.translation_routes - INFO - [translation_routes.py:118] - ==================================================

2025-01-25 17:26:50,538 - services.translation_routes - INFO - [translation_routes.py:129] - Request d2f670c7: Audio processed successfully
2025-01-25 17:26:50,559 - services.translation_routes - INFO - [translation_routes.py:148] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-25 17:27:13,830 - services.translation_routes - INFO - [translation_routes.py:186] - Source text: Mike Tyson, he had to punch Zack in the face. He kept doing it wrong for the camera. In fact, he was pulling it back too far. So I remember coming over here with Zack and showing him how to throw a punch. And without missing a beat, he goes, "This is great. I'm getting boxing lessons from the captain of the Jewish debating team".
2025-01-25 17:27:40,669 - services.translation_routes - INFO - [translation_routes.py:205] - Target text: Mike Tyson, il a dû donner un coup de poing au visage de Zack. Il a continué à faire du mal pour la caméra. En fait, il était en train de le tirer trop loin. Je me souviens de lui montrer comment jeter un punch. Et sans manquer une perle, il dit : "C'est génial, je reçois des leçons de boxe du capitaine de l'équipe de débat juif."
2025-01-25 17:27:53,824 - services.translation_routes - INFO - [translation_routes.py:228] - Processing tuple output from model
2025-01-25 17:27:53,840 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 17:27:53,841 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 17:27:53,846 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 17:27:53,846 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 17:27:53,853 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 17:27:53,853 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 17:27:53,857 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 17:27:53,857 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 17:27:53,997 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-25 17:27:53,997 - services.translation_routes - INFO - [translation_routes.py:252] - 
==================================================
2025-01-25 17:27:53,997 - services.translation_routes - INFO - [translation_routes.py:253] - Translated Audio Quality Report
2025-01-25 17:27:53,997 - services.translation_routes - INFO - [translation_routes.py:254] - ==================================================
2025-01-25 17:27:53,997 - services.translation_routes - INFO - [translation_routes.py:255] - Request ID: d2f670c7
2025-01-25 17:27:53,997 - services.translation_routes - INFO - [translation_routes.py:256] - Target Language: fra
2025-01-25 17:27:53,997 - services.translation_routes - INFO - [translation_routes.py:257] - --------------------------------------------------
2025-01-25 17:27:53,997 - services.translation_routes - INFO - [translation_routes.py:258] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.775
- Avg Amplitude: 0.064
- Rms Level: 0.102
- Crest Factor: 7.577
- Zero Crossings: 8655.000
- Silence Percentage: 17.093
- Clipping Points: 0.000
- Dynamic Range: 566.668

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.053
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.027
  - Temporal Flatness: 0.014

- Volume Metrics:
  - Volume Stability: 0.246
  - Volume Range: 2500.200
  - Volume Variations: 0.062

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0269895766400214
- Background Noise: 4.030733887169091
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
No issues detected

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.8454324007034302, 'stability': 3.4227914810180664, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.07640337944030762, 'consistency': 0.0, 'distinction': 1.0}
  - Description: Strong nasal resonance. Unstable nasal resonance. Clear distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.571
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.004
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-25 17:27:53,997 - services.translation_routes - INFO - [translation_routes.py:259] - ==================================================

2025-01-25 17:27:53,997 - services.translation_routes - INFO - [translation_routes.py:265] - Request d2f670c7: Audio output processed successfully
2025-01-25 17:27:54,001 - services.translation_routes - INFO - [translation_routes.py:318] - Request d2f670c7: Response prepared successfully
2025-01-25 17:27:54,001 - services.translation_routes - INFO - [translation_routes.py:329] - Request d2f670c7 completed in 64.83s
2025-01-25 17:27:54,002 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 64.83s, Memory Change: 1095.00MB
2025-01-25 17:27:54,002 - __main__ - INFO - [app.py:278] - Request to /translate took 74.92s
2025-01-25 17:38:37,530 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-25 17:38:37,534 - services.translation_routes - INFO - [translation_routes.py:30] - Starting translation request 2b940027
2025-01-25 17:38:37,534 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-25 17:38:37,534 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-25 17:38:37,540 - services.translation_routes - INFO - [translation_routes.py:87] - Request 2b940027: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmprpnatddr.wav
2025-01-25 17:38:37,541 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 165.42 seconds
2025-01-25 17:38:37,541 - services.translation_routes - INFO - [translation_routes.py:100] - Request 2b940027: Beginning audio processing with diagnostics
2025-01-25 17:38:37,541 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmprpnatddr.wav
2025-01-25 17:38:37,541 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 16000, Channels: 1
2025-01-25 17:38:37,548 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([1, 2646720]), Frequency: 16000Hz
2025-01-25 17:38:37,668 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-25 17:38:37,689 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-25 17:38:37,905 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-25 17:38:38,094 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 17:38:38,095 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 17:38:38,156 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 17:38:38,157 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 17:38:38,219 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 17:38:38,220 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 17:38:38,279 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 17:38:38,280 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 17:38:40,496 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-25 17:38:40,496 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-25 17:38:40,893 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 17:38:40,893 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 17:38:40,956 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 17:38:40,957 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 17:38:41,019 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 17:38:41,020 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 17:38:41,079 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 17:38:41,079 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 17:38:42,728 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-25 17:38:42,728 - services.translation_routes - INFO - [translation_routes.py:111] - 
==================================================
2025-01-25 17:38:42,728 - services.translation_routes - INFO - [translation_routes.py:112] - Input Audio Quality Report
2025-01-25 17:38:42,728 - services.translation_routes - INFO - [translation_routes.py:113] - ==================================================
2025-01-25 17:38:42,729 - services.translation_routes - INFO - [translation_routes.py:114] - Request ID: 2b940027
2025-01-25 17:38:42,729 - services.translation_routes - INFO - [translation_routes.py:115] - Target Language: fra
2025-01-25 17:38:42,729 - services.translation_routes - INFO - [translation_routes.py:116] - --------------------------------------------------
2025-01-25 17:38:42,729 - services.translation_routes - INFO - [translation_routes.py:117] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.913
- Avg Amplitude: 0.007
- Rms Level: 0.033
- Crest Factor: 27.869
- Zero Crossings: 317438.000
- Silence Percentage: 84.114
- Clipping Points: 0.000
- Dynamic Range: 1152884.755

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.054
  - Temporal Flatness: 0.010

- Volume Metrics:
  - Volume Stability: -2.171
  - Volume Range: 35363852.978
  - Volume Variations: 0.031

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.002350807100693
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.6922903656959534, 'stability': 1.9572125673294067, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.388075590133667, 'distinction': 0.17072927951812744}
  - Description: Moderate nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.662
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.453
  - Rhythm Quality: 0.501
  - Intonation Quality: 0.405

Vowel Quality:
  - Quality Score: 0.004
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-25 17:38:42,729 - services.translation_routes - INFO - [translation_routes.py:118] - ==================================================

2025-01-25 17:38:42,730 - services.translation_routes - INFO - [translation_routes.py:129] - Request 2b940027: Audio processed successfully
2025-01-25 17:38:42,882 - services.translation_routes - INFO - [translation_routes.py:148] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-25 17:46:20,013 - services.translation_routes - INFO - [translation_routes.py:186] - Source text: Okay, so I want to try something different. I'm going to talk for a while and see how well this model both hears what I say and is also able to translate it as target text and also is able to provide enough audio output. So really I guess that's three different things. Number one listening number two because you're doing the source text and the target text in the transcript and number four is the audio output so let's see what this looks like and sounds like.
2025-01-25 17:52:26,145 - services.translation_routes - INFO - [translation_routes.py:205] - Target text: Ok donc je veux essayer quelque chose de différent. Je vais parler un peu et je veux voir si ce modèle est capable de traduire ce que je dis et aussi de fournir une sortie audio suffisante. Donc vraiment je suppose que c'est trois choses différentes. N°1 écouter n°2 parce que vous faites le texte source et le texte cible dans le transcript et n°4 est la sortie audio donc je pense que je suis prêt à parler. Voyons ce que ça ressemble et sonne comme
2025-01-25 18:03:25,666 - services.translation_routes - INFO - [translation_routes.py:228] - Processing tuple output from model
2025-01-25 18:03:25,740 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 18:03:25,746 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 18:03:25,752 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 18:03:25,752 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 18:03:25,759 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 18:03:25,759 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 18:03:25,765 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 18:03:25,766 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 18:03:26,091 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-25 18:03:26,096 - services.translation_routes - INFO - [translation_routes.py:252] - 
==================================================
2025-01-25 18:03:26,096 - services.translation_routes - INFO - [translation_routes.py:253] - Translated Audio Quality Report
2025-01-25 18:03:26,096 - services.translation_routes - INFO - [translation_routes.py:254] - ==================================================
2025-01-25 18:03:26,096 - services.translation_routes - INFO - [translation_routes.py:255] - Request ID: 2b940027
2025-01-25 18:03:26,096 - services.translation_routes - INFO - [translation_routes.py:256] - Target Language: fra
2025-01-25 18:03:26,096 - services.translation_routes - INFO - [translation_routes.py:257] - --------------------------------------------------
2025-01-25 18:03:26,096 - services.translation_routes - INFO - [translation_routes.py:258] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.563
- Avg Amplitude: 0.059
- Rms Level: 0.092
- Crest Factor: 6.124
- Zero Crossings: 24701.000
- Silence Percentage: 10.225
- Clipping Points: 0.000
- Dynamic Range: 163.120

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.234
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.026
  - Temporal Flatness: 0.015

- Volume Metrics:
  - Volume Stability: 0.334
  - Volume Range: 2399.206
  - Volume Variations: 0.051

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0300074631869496
- Background Noise: 3.4496449079307627
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.9701749086380005, 'stability': 3.7277004718780518, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.0, 'distinction': 0.14883045852184296}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.537
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.004
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-25 18:03:26,096 - services.translation_routes - INFO - [translation_routes.py:259] - ==================================================

2025-01-25 18:03:26,096 - services.translation_routes - INFO - [translation_routes.py:265] - Request 2b940027: Audio output processed successfully
2025-01-25 18:03:26,147 - services.translation_routes - INFO - [translation_routes.py:318] - Request 2b940027: Response prepared successfully
2025-01-25 18:03:26,152 - services.translation_routes - INFO - [translation_routes.py:329] - Request 2b940027 completed in 1488.62s
2025-01-25 18:03:26,174 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 1488.62s, Memory Change: -6394.84MB
2025-01-25 18:03:26,178 - __main__ - INFO - [app.py:278] - Request to /translate took 1496.52s
2025-01-25 18:39:27,276 - __main__ - INFO - [app.py:217] - Received SIGINT signal
2025-01-25 18:39:27,279 - __main__ - INFO - [app.py:202] - Initiating graceful shutdown...
2025-01-25 18:39:32,284 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-25 18:39:32,287 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-25 18:39:32,288 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-25 18:39:32,292 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-25 18:39:32,296 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-25 18:39:32,296 - __main__ - INFO - [app.py:206] - Graceful shutdown completed
2025-01-25 18:39:32,319 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-25 18:39:32,320 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-25 18:39:32,320 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-25 18:39:32,320 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-25 18:39:32,320 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-25 18:39:32,322 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-25 18:39:32,322 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-25 18:39:32,322 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-25 18:39:32,322 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-25 18:39:32,322 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-25 18:41:47,856 - __main__ - INFO - [app.py:467] - Metrics server started on port 8000
2025-01-25 18:41:47,856 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-25 18:42:01,188 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-25 18:42:11,195 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-25 18:42:11,197 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-25 18:42:15,253 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-25 18:42:15,255 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-25 18:42:15,255 - __main__ - INFO - [app.py:491] - ==================================================
2025-01-25 18:42:15,255 - __main__ - INFO - [app.py:492] - Starting LinguaSync Backend
2025-01-25 18:42:15,255 - __main__ - INFO - [app.py:493] - Starting Flask app on port 5001 using cpu
2025-01-25 18:42:15,255 - __main__ - INFO - [app.py:494] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-01-25 18:42:15,255 - __main__ - INFO - [app.py:495] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-25 18:42:15,255 - __main__ - INFO - [app.py:496] - Maximum audio length: 300 seconds
2025-01-25 18:42:15,255 - __main__ - INFO - [app.py:497] - Sample rate: 16000 Hz
2025-01-25 18:42:15,255 - __main__ - INFO - [app.py:501] - System memory: 36.0GB total, 15.0GB available
2025-01-25 18:42:15,256 - __main__ - INFO - [app.py:502] - CPU cores: 11
2025-01-25 18:42:15,256 - __main__ - INFO - [app.py:510] - Configuration:
2025-01-25 18:42:15,256 - __main__ - INFO - [app.py:511] - - Debug mode: False
2025-01-25 18:42:15,256 - __main__ - INFO - [app.py:512] - - CORS enabled: True
2025-01-25 18:42:15,256 - __main__ - INFO - [app.py:513] - - Rate limiting: 10 requests per minute
2025-01-25 18:42:15,256 - __main__ - INFO - [app.py:514] - - Metrics enabled: True (port 8000)
2025-01-25 18:42:15,256 - __main__ - INFO - [app.py:516] - ==================================================
2025-01-25 18:43:26,635 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.17MB
2025-01-25 18:43:26,637 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-25 18:43:26,639 - services.audio_link_routes - INFO - [audio_link_routes.py:216] - Processing URL: https://youtube.com/shorts/DybbzHdNogk?si=0RC99WtraM4YITzG
2025-01-25 18:43:26,640 - services.audio_link_routes - INFO - [audio_link_routes.py:233] - Processing YouTube URL
2025-01-25 18:43:26,641 - services.audio_link_routes - INFO - [audio_link_routes.py:120] - Using options for youtube: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpj0am2ckk/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8}
2025-01-25 18:43:29,479 - services.audio_link_routes - INFO - [audio_link_routes.py:133] - Successfully downloaded youtube content
2025-01-25 18:43:29,480 - services.audio_link_routes - INFO - [audio_link_routes.py:152] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpj0am2ckk/output.wav
2025-01-25 18:43:29,490 - services.audio_link_routes - INFO - [audio_link_routes.py:164] - Successfully converted audio to WAV
2025-01-25 18:43:29,491 - services.audio_link_routes - INFO - [audio_link_routes.py:242] - Successfully processed audio
2025-01-25 18:43:29,492 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 2.85s, Memory Change: -132.53MB
2025-01-25 18:43:29,492 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 2.85s
2025-01-25 18:43:56,203 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-25 18:43:56,206 - services.translation_routes - INFO - [translation_routes.py:30] - Starting translation request 449ea04c
2025-01-25 18:43:56,206 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-25 18:43:56,206 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-25 18:43:56,206 - services.translation_routes - INFO - [translation_routes.py:87] - Request 449ea04c: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmphj2fqvur.wav
2025-01-25 18:43:56,208 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 19.25 seconds
2025-01-25 18:43:56,208 - services.translation_routes - INFO - [translation_routes.py:100] - Request 449ea04c: Beginning audio processing with diagnostics
2025-01-25 18:43:56,208 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmphj2fqvur.wav
2025-01-25 18:43:56,208 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 16000, Channels: 1
2025-01-25 18:43:56,210 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([1, 307990]), Frequency: 16000Hz
2025-01-25 18:43:56,230 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-25 18:43:56,233 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-25 18:43:56,255 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-25 18:43:56,288 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 18:43:56,289 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 18:43:56,296 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 18:43:56,296 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 18:43:56,303 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 18:43:56,303 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 18:43:56,310 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 18:43:56,311 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 18:43:56,924 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-25 18:43:56,924 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-25 18:43:56,980 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 18:43:56,980 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 18:43:56,987 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 18:43:56,987 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 18:43:56,994 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 18:43:56,994 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 18:43:57,002 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 18:43:57,002 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 18:43:57,566 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-25 18:43:57,566 - services.translation_routes - INFO - [translation_routes.py:111] - 
==================================================
2025-01-25 18:43:57,566 - services.translation_routes - INFO - [translation_routes.py:112] - Input Audio Quality Report
2025-01-25 18:43:57,566 - services.translation_routes - INFO - [translation_routes.py:113] - ==================================================
2025-01-25 18:43:57,566 - services.translation_routes - INFO - [translation_routes.py:114] - Request ID: 449ea04c
2025-01-25 18:43:57,566 - services.translation_routes - INFO - [translation_routes.py:115] - Target Language: fra
2025-01-25 18:43:57,566 - services.translation_routes - INFO - [translation_routes.py:116] - --------------------------------------------------
2025-01-25 18:43:57,566 - services.translation_routes - INFO - [translation_routes.py:117] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.042
- Rms Level: 0.098
- Crest Factor: 9.721
- Zero Crossings: 161470.000
- Silence Percentage: 47.007
- Clipping Points: 0.000
- Dynamic Range: 11894631.545

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 0.000
  - Temporal Variation: 0.175
  - Temporal Flatness: 0.070

- Volume Metrics:
  - Volume Stability: -0.011
  - Volume Range: 25688430.667
  - Volume Variations: 0.070

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.020105763966966
- Background Noise: 4.88844768831307
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 1.3607534170150757, 'stability': 2.5722947120666504, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.07924658805131912, 'consistency': 0.1415557861328125, 'distinction': 0.12459858506917953}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.563
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.175
  - Rhythm Quality: 0.214
  - Intonation Quality: 0.137

Vowel Quality:
  - Quality Score: 0.018
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-25 18:43:57,567 - services.translation_routes - INFO - [translation_routes.py:118] - ==================================================

2025-01-25 18:43:57,567 - services.translation_routes - INFO - [translation_routes.py:129] - Request 449ea04c: Audio processed successfully
2025-01-25 18:43:57,592 - services.translation_routes - INFO - [translation_routes.py:148] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-25 18:44:17,827 - services.translation_routes - INFO - [translation_routes.py:186] - Source text: Mike Tyson, he had to punch Zack in the face. He kept doing it wrong for the camera. In fact, he was pulling it back too far. So I remember coming over here with Zack and showing him how to throw a punch. And without missing a beat, he goes, "This is great. I'm getting boxing lessons from the captain of the Jewish debating team".
2025-01-25 18:44:39,590 - services.translation_routes - INFO - [translation_routes.py:205] - Target text: Mike Tyson, il a dû donner un coup de poing au visage de Zack. Il a continué à faire du mal pour la caméra. En fait, il était en train de le tirer trop loin. Je me souviens de lui montrer comment jeter un punch. Et sans manquer une perle, il dit : "C'est génial, je reçois des leçons de boxe du capitaine de l'équipe de débat juif."
2025-01-25 18:45:02,741 - services.translation_routes - INFO - [translation_routes.py:228] - Processing tuple output from model
2025-01-25 18:45:02,766 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 18:45:02,767 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 18:45:02,771 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 18:45:02,771 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 18:45:02,780 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 18:45:02,780 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 18:45:02,787 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 18:45:02,788 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 18:45:03,168 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-25 18:45:03,168 - services.translation_routes - INFO - [translation_routes.py:252] - 
==================================================
2025-01-25 18:45:03,168 - services.translation_routes - INFO - [translation_routes.py:253] - Translated Audio Quality Report
2025-01-25 18:45:03,168 - services.translation_routes - INFO - [translation_routes.py:254] - ==================================================
2025-01-25 18:45:03,168 - services.translation_routes - INFO - [translation_routes.py:255] - Request ID: 449ea04c
2025-01-25 18:45:03,168 - services.translation_routes - INFO - [translation_routes.py:256] - Target Language: fra
2025-01-25 18:45:03,168 - services.translation_routes - INFO - [translation_routes.py:257] - --------------------------------------------------
2025-01-25 18:45:03,168 - services.translation_routes - INFO - [translation_routes.py:258] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.599
- Avg Amplitude: 0.060
- Rms Level: 0.094
- Crest Factor: 6.370
- Zero Crossings: 26302.000
- Silence Percentage: 14.527
- Clipping Points: 0.000
- Dynamic Range: 278.223

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.204
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.022
  - Temporal Flatness: 0.012

- Volume Metrics:
  - Volume Stability: 0.291
  - Volume Range: 715.759
  - Volume Variations: 0.054

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0295313561581243
- Background Noise: 3.548038351242286
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.7867186069488525, 'stability': 3.350534677505493, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.11215360462665558, 'consistency': 0.0, 'distinction': 0.016775162890553474}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.526
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.004
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-25 18:45:03,168 - services.translation_routes - INFO - [translation_routes.py:259] - ==================================================

2025-01-25 18:45:03,168 - services.translation_routes - INFO - [translation_routes.py:265] - Request 449ea04c: Audio output processed successfully
2025-01-25 18:45:03,174 - services.translation_routes - INFO - [translation_routes.py:318] - Request 449ea04c: Response prepared successfully
2025-01-25 18:45:03,175 - services.translation_routes - INFO - [translation_routes.py:329] - Request 449ea04c completed in 66.97s
2025-01-25 18:45:03,176 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 66.97s, Memory Change: 1770.23MB
2025-01-25 18:45:03,176 - __main__ - INFO - [app.py:278] - Request to /translate took 72.55s
2025-01-25 18:52:09,007 - __main__ - INFO - [app.py:217] - Received SIGINT signal
2025-01-25 18:52:09,009 - __main__ - INFO - [app.py:202] - Initiating graceful shutdown...
2025-01-25 18:52:14,014 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-25 18:52:14,015 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-25 18:52:14,015 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-25 18:52:14,016 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-25 18:52:14,017 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-25 18:52:14,018 - __main__ - INFO - [app.py:206] - Graceful shutdown completed
2025-01-25 18:52:14,019 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-25 18:52:14,019 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-25 18:52:14,019 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-25 18:52:14,020 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-25 18:52:14,020 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-25 18:52:14,021 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-25 18:52:14,021 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-25 18:52:14,021 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-25 18:52:14,022 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-25 18:52:14,023 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-25 18:52:34,171 - __main__ - INFO - [app.py:467] - Metrics server started on port 8000
2025-01-25 18:52:34,171 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-25 18:52:47,734 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-25 18:52:54,568 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-25 18:52:54,570 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-25 18:52:59,420 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-25 18:52:59,422 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-25 18:52:59,422 - __main__ - INFO - [app.py:491] - ==================================================
2025-01-25 18:52:59,422 - __main__ - INFO - [app.py:492] - Starting LinguaSync Backend
2025-01-25 18:52:59,422 - __main__ - INFO - [app.py:493] - Starting Flask app on port 5001 using cpu
2025-01-25 18:52:59,422 - __main__ - INFO - [app.py:494] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-01-25 18:52:59,422 - __main__ - INFO - [app.py:495] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-25 18:52:59,422 - __main__ - INFO - [app.py:496] - Maximum audio length: 300 seconds
2025-01-25 18:52:59,422 - __main__ - INFO - [app.py:497] - Sample rate: 16000 Hz
2025-01-25 18:52:59,422 - __main__ - INFO - [app.py:501] - System memory: 36.0GB total, 13.4GB available
2025-01-25 18:52:59,422 - __main__ - INFO - [app.py:502] - CPU cores: 11
2025-01-25 18:52:59,423 - __main__ - INFO - [app.py:510] - Configuration:
2025-01-25 18:52:59,423 - __main__ - INFO - [app.py:511] - - Debug mode: False
2025-01-25 18:52:59,423 - __main__ - INFO - [app.py:512] - - CORS enabled: True
2025-01-25 18:52:59,423 - __main__ - INFO - [app.py:513] - - Rate limiting: 10 requests per minute
2025-01-25 18:52:59,423 - __main__ - INFO - [app.py:514] - - Metrics enabled: True (port 8000)
2025-01-25 18:52:59,423 - __main__ - INFO - [app.py:516] - ==================================================
2025-01-25 18:56:28,794 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.17MB
2025-01-25 18:56:28,795 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-25 18:56:28,798 - services.audio_link_routes - INFO - [audio_link_routes.py:216] - Processing URL: https://www.tiktok.com/@loganpaul/video/7138576512512478510
2025-01-25 18:56:28,799 - services.audio_link_routes - INFO - [audio_link_routes.py:236] - Processing TikTok URL
2025-01-25 18:56:28,799 - services.audio_link_routes - INFO - [audio_link_routes.py:120] - Using options for tiktok: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpjppqw3y_/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8, 'extractor_args': {'tiktok': {'api_hostname': 'api22-normal-c-alisg.tiktokv.com', 'app_name': 'trill', 'app_version': '34.1.2', 'manifest_app_version': '2023401020', 'app_info': '1234567890123456789/trill///1180', 'device_id': '4107083058643094269'}}}
2025-01-25 18:56:30,316 - services.audio_link_routes - INFO - [audio_link_routes.py:133] - Successfully downloaded tiktok content
2025-01-25 18:56:30,317 - services.audio_link_routes - INFO - [audio_link_routes.py:152] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpjppqw3y_/output.wav
2025-01-25 18:56:30,358 - services.audio_link_routes - INFO - [audio_link_routes.py:164] - Successfully converted audio to WAV
2025-01-25 18:56:30,359 - services.audio_link_routes - INFO - [audio_link_routes.py:242] - Successfully processed audio
2025-01-25 18:56:30,359 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 1.56s, Memory Change: 29.20MB
2025-01-25 18:56:30,359 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 1.56s
2025-01-25 18:56:37,393 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-25 18:56:37,395 - services.translation_routes - INFO - [translation_routes.py:30] - Starting translation request 023181b4
2025-01-25 18:56:37,395 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-25 18:56:37,395 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-25 18:56:37,397 - services.translation_routes - INFO - [translation_routes.py:87] - Request 023181b4: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpbcbya1ef.wav
2025-01-25 18:56:37,397 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 73.49 seconds
2025-01-25 18:56:37,397 - services.translation_routes - INFO - [translation_routes.py:100] - Request 023181b4: Beginning audio processing with diagnostics
2025-01-25 18:56:37,398 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpbcbya1ef.wav
2025-01-25 18:56:37,398 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 16000, Channels: 1
2025-01-25 18:56:37,401 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([1, 1175881]), Frequency: 16000Hz
2025-01-25 18:56:37,467 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-25 18:56:37,472 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-25 18:56:37,572 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-25 18:56:37,695 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 18:56:37,696 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 18:56:37,718 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 18:56:37,718 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 18:56:37,740 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 18:56:37,741 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 18:56:37,763 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 18:56:37,763 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 18:56:40,242 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-25 18:56:40,242 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-25 18:56:40,458 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 18:56:40,458 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 18:56:40,482 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 18:56:40,482 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 18:56:40,505 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 18:56:40,505 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 18:56:40,528 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 18:56:40,528 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 18:56:42,898 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-25 18:56:42,899 - services.translation_routes - INFO - [translation_routes.py:111] - 
==================================================
2025-01-25 18:56:42,899 - services.translation_routes - INFO - [translation_routes.py:112] - Input Audio Quality Report
2025-01-25 18:56:42,899 - services.translation_routes - INFO - [translation_routes.py:113] - ==================================================
2025-01-25 18:56:42,899 - services.translation_routes - INFO - [translation_routes.py:114] - Request ID: 023181b4
2025-01-25 18:56:42,899 - services.translation_routes - INFO - [translation_routes.py:115] - Target Language: fra
2025-01-25 18:56:42,899 - services.translation_routes - INFO - [translation_routes.py:116] - --------------------------------------------------
2025-01-25 18:56:42,899 - services.translation_routes - INFO - [translation_routes.py:117] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.030
- Rms Level: 0.066
- Crest Factor: 14.362
- Zero Crossings: 607056.000
- Silence Percentage: 36.919
- Clipping Points: 0.000
- Dynamic Range: 7477676.676

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 0.000
  - Temporal Variation: 0.110
  - Temporal Flatness: 0.047

- Volume Metrics:
  - Volume Stability: -0.172
  - Volume Range: 38459184.766
  - Volume Variations: 0.050

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.009210845533956
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 1.3861757516860962, 'stability': 2.4274330139160156, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.3255118131637573, 'distinction': 0.10339464992284775}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.561
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.491
  - Rhythm Quality: 0.517
  - Intonation Quality: 0.464

Vowel Quality:
  - Quality Score: 0.009
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-25 18:56:42,899 - services.translation_routes - INFO - [translation_routes.py:118] - ==================================================

2025-01-25 18:56:42,899 - services.translation_routes - INFO - [translation_routes.py:129] - Request 023181b4: Audio processed successfully
2025-01-25 18:56:42,961 - services.translation_routes - INFO - [translation_routes.py:148] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-25 18:57:39,639 - services.translation_routes - INFO - [translation_routes.py:186] - Source text: This photo doesn't make sense. You've seen it in sci-fi movies. There's a plane that takes you up in the air and then dies, so it feels like the passengers are floating. My goal was to throw them all into the air when we were at the peak of my work. And while the whole plane was completely silent, we couldn't believe it. It's one of those things where I can describe it as much as I want. But until you experience it, there's nothing like it.
2025-01-25 18:58:15,932 - services.translation_routes - INFO - [translation_routes.py:205] - Target text: C'est une photo qui, sur papier, n'a pas de sens, mais c'est ce qu'il y a dans le film.
2025-01-25 18:59:26,525 - services.translation_routes - INFO - [translation_routes.py:228] - Processing tuple output from model
2025-01-25 18:59:26,540 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 18:59:26,541 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 18:59:26,545 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 18:59:26,545 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 18:59:26,553 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 18:59:26,553 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 18:59:26,557 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 18:59:26,557 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 18:59:26,742 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-25 18:59:26,742 - services.translation_routes - INFO - [translation_routes.py:252] - 
==================================================
2025-01-25 18:59:26,742 - services.translation_routes - INFO - [translation_routes.py:253] - Translated Audio Quality Report
2025-01-25 18:59:26,742 - services.translation_routes - INFO - [translation_routes.py:254] - ==================================================
2025-01-25 18:59:26,742 - services.translation_routes - INFO - [translation_routes.py:255] - Request ID: 023181b4
2025-01-25 18:59:26,742 - services.translation_routes - INFO - [translation_routes.py:256] - Target Language: fra
2025-01-25 18:59:26,742 - services.translation_routes - INFO - [translation_routes.py:257] - --------------------------------------------------
2025-01-25 18:59:26,742 - services.translation_routes - INFO - [translation_routes.py:258] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.590
- Avg Amplitude: 0.059
- Rms Level: 0.095
- Crest Factor: 6.196
- Zero Crossings: 16620.000
- Silence Percentage: 11.537
- Clipping Points: 0.000
- Dynamic Range: 195.742

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.225
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.026
  - Temporal Flatness: 0.014

- Volume Metrics:
  - Volume Stability: 0.248
  - Volume Range: 197.891
  - Volume Variations: 0.057

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.030760290006336
- Background Noise: 3.4784882589710717
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.8672695755958557, 'stability': 3.5552687644958496, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.0, 'distinction': 0.4456018805503845}
  - Description: Strong nasal resonance. Unstable nasal resonance. Moderate distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.509
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.002
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-25 18:59:26,743 - services.translation_routes - INFO - [translation_routes.py:259] - ==================================================

2025-01-25 18:59:26,743 - services.translation_routes - INFO - [translation_routes.py:265] - Request 023181b4: Audio output processed successfully
2025-01-25 18:59:26,747 - services.translation_routes - INFO - [translation_routes.py:318] - Request 023181b4: Response prepared successfully
2025-01-25 18:59:26,747 - services.translation_routes - INFO - [translation_routes.py:329] - Request 023181b4 completed in 169.35s
2025-01-25 18:59:26,749 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 169.35s, Memory Change: -562.98MB
2025-01-25 18:59:26,749 - __main__ - INFO - [app.py:278] - Request to /translate took 174.63s
2025-01-25 19:45:23,309 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-25 19:45:23,315 - services.translation_routes - INFO - [translation_routes.py:30] - Starting translation request 8cca0e2e
2025-01-25 19:45:23,315 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-25 19:45:23,315 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-25 19:45:23,318 - services.translation_routes - INFO - [translation_routes.py:87] - Request 8cca0e2e: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpovgdnkek.wav
2025-01-25 19:45:23,321 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 18.36 seconds
2025-01-25 19:45:23,321 - services.translation_routes - INFO - [translation_routes.py:100] - Request 8cca0e2e: Beginning audio processing with diagnostics
2025-01-25 19:45:23,321 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpovgdnkek.wav
2025-01-25 19:45:23,321 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 44100, Channels: 2
2025-01-25 19:45:23,329 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([2, 809508]), Frequency: 44100Hz
2025-01-25 19:45:23,329 - services.audio_processor - INFO - [audio_processor.py:219] - Resampling from 44100Hz to 16000Hz
2025-01-25 19:45:23,362 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-25 19:45:23,364 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-25 19:45:23,389 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-25 19:45:23,418 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 19:45:23,419 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 19:45:23,426 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 19:45:23,426 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 19:45:23,434 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 19:45:23,434 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 19:45:23,440 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 19:45:23,441 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 19:45:23,938 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-25 19:45:23,938 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-25 19:45:23,988 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 19:45:23,989 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 19:45:23,995 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 19:45:23,996 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 19:45:24,001 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 19:45:24,002 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 19:45:24,009 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 19:45:24,009 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 19:45:24,479 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-25 19:45:24,480 - services.translation_routes - INFO - [translation_routes.py:111] - 
==================================================
2025-01-25 19:45:24,480 - services.translation_routes - INFO - [translation_routes.py:112] - Input Audio Quality Report
2025-01-25 19:45:24,480 - services.translation_routes - INFO - [translation_routes.py:113] - ==================================================
2025-01-25 19:45:24,480 - services.translation_routes - INFO - [translation_routes.py:114] - Request ID: 8cca0e2e
2025-01-25 19:45:24,480 - services.translation_routes - INFO - [translation_routes.py:115] - Target Language: fra
2025-01-25 19:45:24,480 - services.translation_routes - INFO - [translation_routes.py:116] - --------------------------------------------------
2025-01-25 19:45:24,480 - services.translation_routes - INFO - [translation_routes.py:117] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.800
- Avg Amplitude: 0.013
- Rms Level: 0.039
- Crest Factor: 20.262
- Zero Crossings: 127716.000
- Silence Percentage: 62.168
- Clipping Points: 0.000
- Dynamic Range: 3022612.631

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.070
  - Temporal Flatness: 0.020

- Volume Metrics:
  - Volume Stability: -0.728
  - Volume Range: 29148039.222
  - Volume Variations: 0.034

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0038988385225505
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.6381455659866333, 'stability': 1.6408194303512573, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.23516440391540527, 'consistency': 0.2896541953086853, 'distinction': 0.11255760490894318}
  - Description: Moderate nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.670
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.340
  - Rhythm Quality: 0.358
  - Intonation Quality: 0.322

Vowel Quality:
  - Quality Score: 0.005
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-25 19:45:24,480 - services.translation_routes - INFO - [translation_routes.py:118] - ==================================================

2025-01-25 19:45:24,480 - services.translation_routes - INFO - [translation_routes.py:129] - Request 8cca0e2e: Audio processed successfully
2025-01-25 19:45:24,496 - services.translation_routes - INFO - [translation_routes.py:148] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-25 19:45:40,278 - services.translation_routes - INFO - [translation_routes.py:186] - Source text: the stale smell of old beer lingers it takes heat to bring out the odour a cold dip restores health and zest a salt pickle tastes fine with ham tacos al pastor are my favourite a zestful food is the hot cross bun
2025-01-25 19:45:57,481 - services.translation_routes - INFO - [translation_routes.py:205] - Target text: l'odeur de la vieille bière lingoure il faut de la chaleur pour faire ressortir l'odore un dip froid restaure la santé et le zeste un pickle salé goûte bien avec le jambon tacos al pasteur sont mon favori une nourriture zestueuse est le hot cross bun
2025-01-25 19:46:20,999 - services.translation_routes - INFO - [translation_routes.py:228] - Processing tuple output from model
2025-01-25 19:46:21,024 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 19:46:21,025 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 19:46:21,034 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 19:46:21,034 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 19:46:21,042 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 19:46:21,042 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 19:46:21,046 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 19:46:21,047 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 19:46:21,411 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-25 19:46:21,411 - services.translation_routes - INFO - [translation_routes.py:252] - 
==================================================
2025-01-25 19:46:21,411 - services.translation_routes - INFO - [translation_routes.py:253] - Translated Audio Quality Report
2025-01-25 19:46:21,411 - services.translation_routes - INFO - [translation_routes.py:254] - ==================================================
2025-01-25 19:46:21,411 - services.translation_routes - INFO - [translation_routes.py:255] - Request ID: 8cca0e2e
2025-01-25 19:46:21,411 - services.translation_routes - INFO - [translation_routes.py:256] - Target Language: fra
2025-01-25 19:46:21,411 - services.translation_routes - INFO - [translation_routes.py:257] - --------------------------------------------------
2025-01-25 19:46:21,411 - services.translation_routes - INFO - [translation_routes.py:258] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.646
- Avg Amplitude: 0.065
- Rms Level: 0.100
- Crest Factor: 6.490
- Zero Crossings: 29167.000
- Silence Percentage: 8.996
- Clipping Points: 0.000
- Dynamic Range: 143.440

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.189
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.028
  - Temporal Flatness: 0.016

- Volume Metrics:
  - Volume Stability: 0.361
  - Volume Range: 737.393
  - Volume Variations: 0.054

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.030686759396554
- Background Noise: 3.5959303947406243
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 1.07464599609375, 'stability': 3.6503922939300537, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0012442099396139383, 'consistency': 0.0, 'distinction': 0.06971873342990875}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.556
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.003
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-25 19:46:21,411 - services.translation_routes - INFO - [translation_routes.py:259] - ==================================================

2025-01-25 19:46:21,412 - services.translation_routes - INFO - [translation_routes.py:265] - Request 8cca0e2e: Audio output processed successfully
2025-01-25 19:46:21,416 - services.translation_routes - INFO - [translation_routes.py:318] - Request 8cca0e2e: Response prepared successfully
2025-01-25 19:46:21,417 - services.translation_routes - INFO - [translation_routes.py:329] - Request 8cca0e2e completed in 58.10s
2025-01-25 19:46:21,421 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 58.11s, Memory Change: 1229.11MB
2025-01-25 19:46:21,421 - __main__ - INFO - [app.py:278] - Request to /translate took 66.59s
2025-01-26 18:17:33,141 - __main__ - INFO - [app.py:467] - Metrics server started on port 8000
2025-01-26 18:17:33,141 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-26 18:17:47,124 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-26 18:18:05,136 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-26 18:18:05,138 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-26 18:18:10,659 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-26 18:18:10,660 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-26 18:18:10,660 - __main__ - INFO - [app.py:491] - ==================================================
2025-01-26 18:18:10,660 - __main__ - INFO - [app.py:492] - Starting LinguaSync Backend
2025-01-26 18:18:10,661 - __main__ - INFO - [app.py:493] - Starting Flask app on port 5001 using cpu
2025-01-26 18:18:10,661 - __main__ - INFO - [app.py:494] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-01-26 18:18:10,661 - __main__ - INFO - [app.py:495] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-26 18:18:10,661 - __main__ - INFO - [app.py:496] - Maximum audio length: 300 seconds
2025-01-26 18:18:10,661 - __main__ - INFO - [app.py:497] - Sample rate: 16000 Hz
2025-01-26 18:18:10,661 - __main__ - INFO - [app.py:501] - System memory: 36.0GB total, 15.3GB available
2025-01-26 18:18:10,661 - __main__ - INFO - [app.py:502] - CPU cores: 11
2025-01-26 18:18:10,661 - __main__ - INFO - [app.py:510] - Configuration:
2025-01-26 18:18:10,661 - __main__ - INFO - [app.py:511] - - Debug mode: False
2025-01-26 18:18:10,661 - __main__ - INFO - [app.py:512] - - CORS enabled: True
2025-01-26 18:18:10,661 - __main__ - INFO - [app.py:513] - - Rate limiting: 10 requests per minute
2025-01-26 18:18:10,661 - __main__ - INFO - [app.py:514] - - Metrics enabled: True (port 8000)
2025-01-26 18:18:10,661 - __main__ - INFO - [app.py:516] - ==================================================
2025-01-29 17:00:30,333 - __main__ - INFO - [app.py:467] - Metrics server started on port 8000
2025-01-29 17:00:30,334 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-29 17:00:43,504 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-29 17:01:00,570 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-29 17:01:00,571 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-29 17:01:05,307 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-29 17:01:05,309 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-29 17:01:05,309 - __main__ - INFO - [app.py:491] - ==================================================
2025-01-29 17:01:05,309 - __main__ - INFO - [app.py:492] - Starting LinguaSync Backend
2025-01-29 17:01:05,309 - __main__ - INFO - [app.py:493] - Starting Flask app on port 5001 using cpu
2025-01-29 17:01:05,309 - __main__ - INFO - [app.py:494] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-01-29 17:01:05,309 - __main__ - INFO - [app.py:495] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-29 17:01:05,309 - __main__ - INFO - [app.py:496] - Maximum audio length: 300 seconds
2025-01-29 17:01:05,309 - __main__ - INFO - [app.py:497] - Sample rate: 16000 Hz
2025-01-29 17:01:05,309 - __main__ - INFO - [app.py:501] - System memory: 36.0GB total, 12.8GB available
2025-01-29 17:01:05,310 - __main__ - INFO - [app.py:502] - CPU cores: 11
2025-01-29 17:01:05,310 - __main__ - INFO - [app.py:510] - Configuration:
2025-01-29 17:01:05,310 - __main__ - INFO - [app.py:511] - - Debug mode: False
2025-01-29 17:01:05,310 - __main__ - INFO - [app.py:512] - - CORS enabled: True
2025-01-29 17:01:05,310 - __main__ - INFO - [app.py:513] - - Rate limiting: 10 requests per minute
2025-01-29 17:01:05,310 - __main__ - INFO - [app.py:514] - - Metrics enabled: True (port 8000)
2025-01-29 17:01:05,310 - __main__ - INFO - [app.py:516] - ==================================================
2025-01-29 17:01:22,004 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.02MB
2025-01-29 17:01:22,005 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-29 17:01:22,007 - services.audio_link_routes - INFO - [audio_link_routes.py:216] - Processing URL: https://youtu.be/xDYy5qafTXY?si=1pDRfyxeISAf7JR2
2025-01-29 17:01:22,008 - services.audio_link_routes - INFO - [audio_link_routes.py:233] - Processing YouTube URL
2025-01-29 17:01:22,008 - services.audio_link_routes - INFO - [audio_link_routes.py:120] - Using options for youtube: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpt2hspj5d/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8}
2025-01-29 17:01:25,990 - services.audio_link_routes - INFO - [audio_link_routes.py:133] - Successfully downloaded youtube content
2025-01-29 17:01:25,992 - services.audio_link_routes - INFO - [audio_link_routes.py:152] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpt2hspj5d/output.wav
2025-01-29 17:01:26,032 - services.audio_link_routes - INFO - [audio_link_routes.py:164] - Successfully converted audio to WAV
2025-01-29 17:01:26,033 - services.audio_link_routes - INFO - [audio_link_routes.py:242] - Successfully processed audio
2025-01-29 17:01:26,034 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 4.03s, Memory Change: 46.86MB
2025-01-29 17:01:26,034 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 4.03s
2025-01-29 17:01:38,357 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-29 17:01:38,359 - services.translation_routes - INFO - [translation_routes.py:41] - Starting translation request 6a1232e8
2025-01-29 17:01:38,359 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-29 17:01:38,359 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-29 17:01:38,360 - services.translation_routes - INFO - [translation_routes.py:105] - Request 6a1232e8: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpkge9om8l.wav
2025-01-29 17:01:38,363 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 69.18 seconds
2025-01-29 17:01:38,363 - services.translation_routes - INFO - [translation_routes.py:118] - Request 6a1232e8: Beginning audio processing with diagnostics
2025-01-29 17:01:38,363 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpkge9om8l.wav
2025-01-29 17:01:38,363 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 16000, Channels: 1
2025-01-29 17:01:38,368 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([1, 1106919]), Frequency: 16000Hz
2025-01-29 17:01:38,439 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-29 17:01:38,448 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-29 17:01:38,542 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-29 17:01:38,663 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:01:38,666 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:01:38,689 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:01:38,690 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:01:38,713 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:01:38,713 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:01:38,735 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:01:38,736 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:01:41,370 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-29 17:01:41,370 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-29 17:01:41,570 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:01:41,570 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:01:41,595 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:01:41,595 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:01:41,618 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:01:41,619 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:01:41,641 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:01:41,641 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:01:44,404 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-29 17:01:44,404 - services.translation_routes - INFO - [translation_routes.py:130] - 
==================================================
2025-01-29 17:01:44,404 - services.translation_routes - INFO - [translation_routes.py:131] - Input Audio Quality Report
2025-01-29 17:01:44,404 - services.translation_routes - INFO - [translation_routes.py:132] - ==================================================
2025-01-29 17:01:44,404 - services.translation_routes - INFO - [translation_routes.py:133] - Request ID: 6a1232e8
2025-01-29 17:01:44,404 - services.translation_routes - INFO - [translation_routes.py:134] - Target Language: fra
2025-01-29 17:01:44,404 - services.translation_routes - INFO - [translation_routes.py:135] - --------------------------------------------------
2025-01-29 17:01:44,404 - services.translation_routes - INFO - [translation_routes.py:136] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.047
- Rms Level: 0.083
- Crest Factor: 11.431
- Zero Crossings: 544258.000
- Silence Percentage: 26.518
- Clipping Points: 0.000
- Dynamic Range: 11733475.464

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 0.000
  - Temporal Variation: 0.129
  - Temporal Flatness: 0.070

- Volume Metrics:
  - Volume Stability: 0.133
  - Volume Range: 34134310.484
  - Volume Variations: 0.054

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0145404384009926
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.6778058409690857, 'stability': 0.9730591177940369, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.4255729913711548, 'consistency': 0.39680999517440796, 'distinction': 0.26997312903404236}
  - Description: Moderate nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.407
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.473
  - Rhythm Quality: 0.536
  - Intonation Quality: 0.409

Vowel Quality:
  - Quality Score: 0.010
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-29 17:01:44,404 - services.translation_routes - INFO - [translation_routes.py:137] - ==================================================

2025-01-29 17:01:44,405 - services.translation_routes - INFO - [translation_routes.py:164] - Request 6a1232e8: Audio processed successfully
2025-01-29 17:01:44,529 - services.translation_routes - INFO - [translation_routes.py:187] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-29 17:02:24,758 - services.translation_routes - INFO - [translation_routes.py:233] - Source text: When the night shadows fall then the door will open out of the window paints light will twinkle yellow fear no all the black heed no horrible willow fear neither root nor bow tom goes on before you hey now mary doll will be waiting for you
2025-01-29 17:03:09,716 - services.translation_routes - INFO - [translation_routes.py:255] - Target text: hop along my little friends up with you windows toms going on ahead candles for the kingdom down the west since the sun soon you will be broken when the night shadows fall then the door will open out of the window paint light will twinkle yellow fear no all the black heed no horry willow fear neither root nor bow tom goes on before you hein now mary do will be waiting for you
2025-01-29 17:04:20,160 - services.translation_routes - INFO - [translation_routes.py:277] - Processing model output type: <class 'tuple'>
2025-01-29 17:04:20,161 - services.translation_routes - INFO - [translation_routes.py:282] - Processing tuple output from model
2025-01-29 17:04:20,191 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:04:20,191 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:04:20,196 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:04:20,197 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:04:20,204 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:04:20,204 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:04:20,211 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:04:20,211 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:04:20,646 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-29 17:04:20,646 - services.translation_routes - INFO - [translation_routes.py:323] - 
==================================================
2025-01-29 17:04:20,646 - services.translation_routes - INFO - [translation_routes.py:324] - Translated Audio Quality Report
2025-01-29 17:04:20,646 - services.translation_routes - INFO - [translation_routes.py:325] - ==================================================
2025-01-29 17:04:20,646 - services.translation_routes - INFO - [translation_routes.py:326] - Request ID: 6a1232e8
2025-01-29 17:04:20,646 - services.translation_routes - INFO - [translation_routes.py:327] - Target Language: fra
2025-01-29 17:04:20,646 - services.translation_routes - INFO - [translation_routes.py:328] - --------------------------------------------------
2025-01-29 17:04:20,646 - services.translation_routes - INFO - [translation_routes.py:329] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.811
- Avg Amplitude: 0.071
- Rms Level: 0.102
- Crest Factor: 7.945
- Zero Crossings: 32096.000
- Silence Percentage: 5.429
- Clipping Points: 0.000
- Dynamic Range: 67.245

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.007
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.027
  - Temporal Flatness: 0.015

- Volume Metrics:
  - Volume Stability: 0.455
  - Volume Range: 298.202
  - Volume Variations: 0.049

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0256960341052324
- Background Noise: 4.1779892823888245
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
No issues detected

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.8530664443969727, 'stability': 3.571580410003662, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.090754434466362, 'consistency': 0.0, 'distinction': 0.09213312715291977}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.546
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.004
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-29 17:04:20,646 - services.translation_routes - INFO - [translation_routes.py:330] - ==================================================

2025-01-29 17:04:20,646 - services.translation_routes - WARNING - [translation_routes.py:341] - Low speech clarity in output audio
2025-01-29 17:04:20,646 - services.translation_routes - INFO - [translation_routes.py:343] - Request 6a1232e8: Audio output processed successfully
2025-01-29 17:04:20,654 - services.translation_routes - INFO - [translation_routes.py:413] - Request 6a1232e8: Response prepared successfully
2025-01-29 17:04:20,717 - services.translation_routes - INFO - [translation_routes.py:438] - Request 6a1232e8 completed in 162.36s
2025-01-29 17:04:20,717 - services.translation_routes - ERROR - [translation_routes.py:449] - Error during cleanup: type object 'ResourceMonitor' has no attribute 'get_process_memory'
2025-01-29 17:04:20,719 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 162.36s, Memory Change: 669.23MB
2025-01-29 17:04:20,720 - __main__ - INFO - [app.py:278] - Request to /translate took 170.16s
2025-01-29 17:05:19,168 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-29 17:05:19,172 - services.translation_routes - INFO - [translation_routes.py:41] - Starting translation request 1c6220c9
2025-01-29 17:05:19,173 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-29 17:05:19,173 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-29 17:05:19,174 - services.translation_routes - INFO - [translation_routes.py:105] - Request 1c6220c9: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmplsah94mt.wav
2025-01-29 17:05:19,175 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 69.18 seconds
2025-01-29 17:05:19,175 - services.translation_routes - INFO - [translation_routes.py:118] - Request 1c6220c9: Beginning audio processing with diagnostics
2025-01-29 17:05:19,175 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmplsah94mt.wav
2025-01-29 17:05:19,175 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 16000, Channels: 1
2025-01-29 17:05:19,179 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([1, 1106919]), Frequency: 16000Hz
2025-01-29 17:05:19,239 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-29 17:05:19,246 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for spa
2025-01-29 17:05:19,246 - services.audio_processor - WARNING - [audio_processor.py:289] - No specific parameters for spa, using defaults
2025-01-29 17:05:19,337 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-29 17:05:19,445 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:05:19,446 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:05:19,467 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:05:19,467 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:05:19,491 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:05:19,491 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:05:19,511 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:05:19,512 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:05:22,240 - services.diagnostics.language_analysis.spanish - ERROR - [spanish.py:161] - Spanish timing analysis failed: 'SpanishAnalyzer' object has no attribute '_find_syllable_boundaries'
2025-01-29 17:05:22,397 - services.diagnostics.language_analysis.spanish - ERROR - [spanish.py:218] - Spanish vowel analysis failed: 'SpanishAnalyzer' object has no attribute '_analyze_vowel_formants'
2025-01-29 17:05:22,404 - services.diagnostics.language_analysis.spanish - ERROR - [spanish.py:249] - Spanish stress analysis failed: 'SpanishAnalyzer' object has no attribute '_find_stress_peaks'
2025-01-29 17:05:22,404 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for spa
2025-01-29 17:05:22,404 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-29 17:05:22,410 - services.audio_processor - WARNING - [audio_processor.py:289] - No specific parameters for spa, using defaults
2025-01-29 17:05:22,600 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:05:22,601 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:05:22,624 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:05:22,624 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:05:22,652 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:05:22,652 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:05:22,680 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:05:22,681 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:05:25,478 - services.diagnostics.language_analysis.spanish - ERROR - [spanish.py:161] - Spanish timing analysis failed: 'SpanishAnalyzer' object has no attribute '_find_syllable_boundaries'
2025-01-29 17:05:25,635 - services.diagnostics.language_analysis.spanish - ERROR - [spanish.py:218] - Spanish vowel analysis failed: 'SpanishAnalyzer' object has no attribute '_analyze_vowel_formants'
2025-01-29 17:05:25,645 - services.diagnostics.language_analysis.spanish - ERROR - [spanish.py:249] - Spanish stress analysis failed: 'SpanishAnalyzer' object has no attribute '_find_stress_peaks'
2025-01-29 17:05:25,646 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for spa
2025-01-29 17:05:25,646 - services.translation_routes - INFO - [translation_routes.py:130] - 
==================================================
2025-01-29 17:05:25,646 - services.translation_routes - INFO - [translation_routes.py:131] - Input Audio Quality Report
2025-01-29 17:05:25,647 - services.translation_routes - INFO - [translation_routes.py:132] - ==================================================
2025-01-29 17:05:25,647 - services.translation_routes - INFO - [translation_routes.py:133] - Request ID: 1c6220c9
2025-01-29 17:05:25,647 - services.translation_routes - INFO - [translation_routes.py:134] - Target Language: spa
2025-01-29 17:05:25,647 - services.translation_routes - INFO - [translation_routes.py:135] - --------------------------------------------------
2025-01-29 17:05:25,647 - services.translation_routes - INFO - [translation_routes.py:136] - Audio Quality Analysis Report
==============================

Target Language: spa

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.047
- Rms Level: 0.083
- Crest Factor: 11.431
- Zero Crossings: 544258.000
- Silence Percentage: 26.518
- Clipping Points: 0.000
- Dynamic Range: 11733475.464

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 0.000
  - Temporal Variation: 0.129
  - Temporal Flatness: 0.070

- Volume Metrics:
  - Volume Stability: 0.133
  - Volume Range: 34134310.484
  - Volume Variations: 0.054

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0145404384009926
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Phoneme Analysis:
  - Trilled R: {'features': {'modulation_rate': 3474.865788189361, 'strength': 2.179466724395752}, 'strength': 1.0, 'regularity': 0.0, 'duration': -271.0357704457514, 'overall_quality': 0.5}
  - Interdental Theta: {'energy': 1.6295353174209595, 'consistency': -0.7976514101028442, 'spectral_shape': {'centroid': 0.39418837428092957, 'spread': 0.2142299860715866, 'quality': 0.739979200065136}, 'quality': 0.5239543691277504}
  - Stop Consonants: {'voiceless_stops': {'strength': 1.0, 'precision': 0.9041951449762362, 'quality': 0.9520975724881181}, 'voiced_stops': {'voicing': 0.3723117709159851, 'precision': 0.4930680909184735, 'quality': 0.4326899309172293}, 'overall_quality': 0.6923937517026737}

Syllable Timing:

Intonation Patterns:
  - Contour Patterns: {'mean_pitch': 205.68371261804114, 'pitch_variability': 0.3483661276838237, 'rise_fall_ratio': 1.0755813953279927, 'quality': 0.6516338723331133}
  - Melodic Features: {'range': 1.0, 'movement': 0.8126844675044396, 'quality': 0.9063422337522198}
  - Overall Quality: 0.779

Vowel Clarity:

Stress Patterns:
2025-01-29 17:05:25,647 - services.translation_routes - INFO - [translation_routes.py:137] - ==================================================

2025-01-29 17:05:25,648 - services.translation_routes - INFO - [translation_routes.py:164] - Request 1c6220c9: Audio processed successfully
2025-01-29 17:05:25,759 - services.translation_routes - INFO - [translation_routes.py:187] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-29 17:06:07,271 - services.translation_routes - INFO - [translation_routes.py:233] - Source text: When the night shadows fall then the door will open out of the window paints light will twinkle yellow fear no all the black heed no horrible willow fear neither root nor bow tom goes on before you hey now mary doll will be waiting for you
2025-01-29 17:06:45,256 - services.translation_routes - INFO - [translation_routes.py:255] - Target text: la puerta se abrirá fuera de la ventana pinta la luz brillará amarillo miedo no a todo el negro heed no horri willow miedo ni raíz ni baúl tom va en antes de ti hey ahora mary dor will be waiting for you
2025-01-29 17:07:55,532 - services.translation_routes - INFO - [translation_routes.py:277] - Processing model output type: <class 'tuple'>
2025-01-29 17:07:55,532 - services.translation_routes - INFO - [translation_routes.py:282] - Processing tuple output from model
2025-01-29 17:07:55,582 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:07:55,583 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:07:55,594 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:07:55,594 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:07:55,600 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:07:55,600 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:07:55,609 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:07:55,610 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:07:56,090 - services.diagnostics.language_analysis.spanish - ERROR - [spanish.py:161] - Spanish timing analysis failed: 'SpanishAnalyzer' object has no attribute '_find_syllable_boundaries'
2025-01-29 17:07:56,131 - services.diagnostics.language_analysis.spanish - ERROR - [spanish.py:218] - Spanish vowel analysis failed: 'SpanishAnalyzer' object has no attribute '_analyze_vowel_formants'
2025-01-29 17:07:56,134 - services.diagnostics.language_analysis.spanish - ERROR - [spanish.py:249] - Spanish stress analysis failed: 'SpanishAnalyzer' object has no attribute '_find_stress_peaks'
2025-01-29 17:07:56,134 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for spa
2025-01-29 17:07:56,134 - services.translation_routes - INFO - [translation_routes.py:323] - 
==================================================
2025-01-29 17:07:56,134 - services.translation_routes - INFO - [translation_routes.py:324] - Translated Audio Quality Report
2025-01-29 17:07:56,134 - services.translation_routes - INFO - [translation_routes.py:325] - ==================================================
2025-01-29 17:07:56,134 - services.translation_routes - INFO - [translation_routes.py:326] - Request ID: 1c6220c9
2025-01-29 17:07:56,134 - services.translation_routes - INFO - [translation_routes.py:327] - Target Language: spa
2025-01-29 17:07:56,135 - services.translation_routes - INFO - [translation_routes.py:328] - --------------------------------------------------
2025-01-29 17:07:56,135 - services.translation_routes - INFO - [translation_routes.py:329] - Audio Quality Analysis Report
==============================

Target Language: spa

Waveform Analysis:
--------------------
- Peak Amplitude: 0.738
- Avg Amplitude: 0.074
- Rms Level: 0.107
- Crest Factor: 6.879
- Zero Crossings: 31540.000
- Silence Percentage: 5.251
- Clipping Points: 0.000
- Dynamic Range: 73.006

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.140
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.028
  - Temporal Flatness: 0.016

- Volume Metrics:
  - Volume Stability: 0.425
  - Volume Range: 369.704
  - Volume Variations: 0.054

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0311992706111957
- Background Noise: 3.7516735424203462
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
No issues detected

Language-Specific Analysis:
--------------------

Phoneme Analysis:
  - Trilled R: {'features': {'modulation_rate': 3451.4397266959495, 'strength': 1.003147840499878}, 'strength': 1.0, 'regularity': 0.0, 'duration': -123.8956791717468, 'overall_quality': 0.5}
  - Interdental Theta: {'energy': 0.9372486472129822, 'consistency': -3.2025113105773926, 'spectral_shape': {'centroid': 0.46186205744743347, 'spread': 0.26496440172195435, 'quality': 0.748448833823204}, 'quality': -0.5056046098470688}
  - Stop Consonants: {'voiceless_stops': {'strength': 1.0, 'precision': 0.17893771673730507, 'quality': 0.5894688583686525}, 'voiced_stops': {'voicing': 0.25499585270881653, 'precision': 0.4029687453088858, 'quality': 0.3289822990088512}, 'overall_quality': 0.4592255786887518}

Syllable Timing:

Intonation Patterns:
  - Contour Patterns: {'mean_pitch': 216.76161748916232, 'pitch_variability': 0.17256854405889083, 'rise_fall_ratio': 0.6185567010096715, 'quality': 0.8274314559490704}
  - Melodic Features: {'range': 1.0, 'movement': 0.3111689375220407, 'quality': 0.6555844687610204}
  - Overall Quality: 0.742

Vowel Clarity:

Stress Patterns:
2025-01-29 17:07:56,135 - services.translation_routes - INFO - [translation_routes.py:330] - ==================================================

2025-01-29 17:07:56,135 - services.translation_routes - WARNING - [translation_routes.py:341] - Low speech clarity in output audio
2025-01-29 17:07:56,135 - services.translation_routes - INFO - [translation_routes.py:343] - Request 1c6220c9: Audio output processed successfully
2025-01-29 17:07:56,144 - services.translation_routes - INFO - [translation_routes.py:413] - Request 1c6220c9: Response prepared successfully
2025-01-29 17:07:56,209 - services.translation_routes - INFO - [translation_routes.py:438] - Request 1c6220c9 completed in 157.04s
2025-01-29 17:07:56,209 - services.translation_routes - ERROR - [translation_routes.py:449] - Error during cleanup: type object 'ResourceMonitor' has no attribute 'get_process_memory'
2025-01-29 17:07:56,210 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 157.04s, Memory Change: -307.33MB
2025-01-29 17:07:56,210 - __main__ - INFO - [app.py:278] - Request to /translate took 163.77s
2025-01-29 17:24:24,189 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-01-29 17:24:24,190 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-29 17:24:24,193 - services.audio_link_routes - INFO - [audio_link_routes.py:216] - Processing URL: https://www.tiktok.com/@fightjoe/video/7127311328095522053
2025-01-29 17:24:24,193 - services.audio_link_routes - INFO - [audio_link_routes.py:236] - Processing TikTok URL
2025-01-29 17:24:24,194 - services.audio_link_routes - INFO - [audio_link_routes.py:120] - Using options for tiktok: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpat8t1xzo/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8, 'extractor_args': {'tiktok': {'api_hostname': 'api22-normal-c-alisg.tiktokv.com', 'app_name': 'trill', 'app_version': '34.1.2', 'manifest_app_version': '2023401020', 'app_info': '1234567890123456789/trill///1180', 'device_id': '2848411811468905775'}}}
2025-01-29 17:24:25,870 - services.audio_link_routes - INFO - [audio_link_routes.py:133] - Successfully downloaded tiktok content
2025-01-29 17:24:25,872 - services.audio_link_routes - INFO - [audio_link_routes.py:152] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpat8t1xzo/output.wav
2025-01-29 17:24:25,877 - services.audio_link_routes - INFO - [audio_link_routes.py:164] - Successfully converted audio to WAV
2025-01-29 17:24:25,878 - services.audio_link_routes - INFO - [audio_link_routes.py:242] - Successfully processed audio
2025-01-29 17:24:25,878 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 1.69s, Memory Change: 19.02MB
2025-01-29 17:24:25,878 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 1.69s
2025-01-29 17:24:35,580 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-29 17:24:35,583 - services.translation_routes - INFO - [translation_routes.py:41] - Starting translation request 87abf5e9
2025-01-29 17:24:35,583 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-29 17:24:35,583 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-29 17:24:35,584 - services.translation_routes - INFO - [translation_routes.py:105] - Request 87abf5e9: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpzymii65b.wav
2025-01-29 17:24:35,584 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 6.57 seconds
2025-01-29 17:24:35,585 - services.translation_routes - INFO - [translation_routes.py:118] - Request 87abf5e9: Beginning audio processing with diagnostics
2025-01-29 17:24:35,585 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpzymii65b.wav
2025-01-29 17:24:35,585 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 16000, Channels: 1
2025-01-29 17:24:35,586 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([1, 105163]), Frequency: 16000Hz
2025-01-29 17:24:35,598 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-29 17:24:35,601 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for spa
2025-01-29 17:24:35,601 - services.audio_processor - WARNING - [audio_processor.py:289] - No specific parameters for spa, using defaults
2025-01-29 17:24:35,609 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-29 17:24:35,620 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:24:35,620 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:24:35,624 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:24:35,624 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:24:35,628 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:24:35,628 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:24:35,632 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:24:35,632 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:24:35,791 - services.diagnostics.language_analysis.spanish - ERROR - [spanish.py:161] - Spanish timing analysis failed: 'SpanishAnalyzer' object has no attribute '_find_syllable_boundaries'
2025-01-29 17:24:35,806 - services.diagnostics.language_analysis.spanish - ERROR - [spanish.py:218] - Spanish vowel analysis failed: 'SpanishAnalyzer' object has no attribute '_analyze_vowel_formants'
2025-01-29 17:24:35,807 - services.diagnostics.language_analysis.spanish - ERROR - [spanish.py:249] - Spanish stress analysis failed: 'SpanishAnalyzer' object has no attribute '_find_stress_peaks'
2025-01-29 17:24:35,807 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for spa
2025-01-29 17:24:35,807 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-29 17:24:35,808 - services.audio_processor - WARNING - [audio_processor.py:289] - No specific parameters for spa, using defaults
2025-01-29 17:24:35,826 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:24:35,827 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:24:35,829 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:24:35,829 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:24:35,832 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:24:35,832 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:24:35,836 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:24:35,836 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:24:35,999 - services.diagnostics.language_analysis.spanish - ERROR - [spanish.py:161] - Spanish timing analysis failed: 'SpanishAnalyzer' object has no attribute '_find_syllable_boundaries'
2025-01-29 17:24:36,014 - services.diagnostics.language_analysis.spanish - ERROR - [spanish.py:218] - Spanish vowel analysis failed: 'SpanishAnalyzer' object has no attribute '_analyze_vowel_formants'
2025-01-29 17:24:36,015 - services.diagnostics.language_analysis.spanish - ERROR - [spanish.py:249] - Spanish stress analysis failed: 'SpanishAnalyzer' object has no attribute '_find_stress_peaks'
2025-01-29 17:24:36,015 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for spa
2025-01-29 17:24:36,015 - services.translation_routes - INFO - [translation_routes.py:130] - 
==================================================
2025-01-29 17:24:36,015 - services.translation_routes - INFO - [translation_routes.py:131] - Input Audio Quality Report
2025-01-29 17:24:36,015 - services.translation_routes - INFO - [translation_routes.py:132] - ==================================================
2025-01-29 17:24:36,015 - services.translation_routes - INFO - [translation_routes.py:133] - Request ID: 87abf5e9
2025-01-29 17:24:36,015 - services.translation_routes - INFO - [translation_routes.py:134] - Target Language: spa
2025-01-29 17:24:36,015 - services.translation_routes - INFO - [translation_routes.py:135] - --------------------------------------------------
2025-01-29 17:24:36,015 - services.translation_routes - INFO - [translation_routes.py:136] - Audio Quality Analysis Report
==============================

Target Language: spa

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.021
- Rms Level: 0.071
- Crest Factor: 13.339
- Zero Crossings: 37090.000
- Silence Percentage: 67.795
- Clipping Points: 0.000
- Dynamic Range: 4800816.700

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.098
  - Temporal Flatness: 0.028

- Volume Metrics:
  - Volume Stability: -0.884
  - Volume Range: 30950176.716
  - Volume Variations: 0.063

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0106790928303826
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Phoneme Analysis:
  - Trilled R: {'features': {'modulation_rate': 3888.7262079062957, 'strength': 0.27673375606536865}, 'strength': 0.27673375606536865, 'regularity': 0.0, 'duration': -38.57896193600551, 'overall_quality': 0.13836687803268433}
  - Interdental Theta: {'energy': 1.187762975692749, 'consistency': -2.089454174041748, 'spectral_shape': {'centroid': 0.7130780816078186, 'spread': 0.13163381814956665, 'quality': 0.9276440441608429}, 'quality': 0.008650948603947958}
  - Stop Consonants: {'voiceless_stops': {'strength': 1.0, 'precision': 0.6657999935961989, 'quality': 0.8328999967980995}, 'voiced_stops': {'voicing': 0.11019591242074966, 'precision': 0.7167365638763759, 'quality': 0.41346623814856276}, 'overall_quality': 0.6231831174733311}

Syllable Timing:

Intonation Patterns:
  - Contour Patterns: {'mean_pitch': 125.75927983166838, 'pitch_variability': 0.5649175372293127, 'rise_fall_ratio': 0.8499999997875, 'quality': 0.4350824628156078}
  - Melodic Features: {'range': 1.0, 'movement': 1.0, 'quality': 1.0}
  - Overall Quality: 0.718

Vowel Clarity:

Stress Patterns:
2025-01-29 17:24:36,016 - services.translation_routes - INFO - [translation_routes.py:137] - ==================================================

2025-01-29 17:24:36,016 - services.translation_routes - INFO - [translation_routes.py:164] - Request 87abf5e9: Audio processed successfully
2025-01-29 17:24:36,074 - services.translation_routes - INFO - [translation_routes.py:187] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-29 17:24:42,735 - services.translation_routes - INFO - [translation_routes.py:233] - Source text: If you weren't what do you think you would be? I definitely wouldn't be diabetic.
2025-01-29 17:24:48,100 - services.translation_routes - INFO - [translation_routes.py:255] - Target text: Si no lo hicieras, ¿qué crees que harías?
2025-01-29 17:24:54,455 - services.translation_routes - INFO - [translation_routes.py:277] - Processing model output type: <class 'tuple'>
2025-01-29 17:24:54,455 - services.translation_routes - INFO - [translation_routes.py:282] - Processing tuple output from model
2025-01-29 17:24:54,463 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:24:54,464 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:24:54,468 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:24:54,468 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:24:54,472 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:24:54,472 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:24:54,475 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:24:54,475 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:24:54,547 - services.diagnostics.language_analysis.spanish - ERROR - [spanish.py:161] - Spanish timing analysis failed: 'SpanishAnalyzer' object has no attribute '_find_syllable_boundaries'
2025-01-29 17:24:54,553 - services.diagnostics.language_analysis.spanish - ERROR - [spanish.py:218] - Spanish vowel analysis failed: 'SpanishAnalyzer' object has no attribute '_analyze_vowel_formants'
2025-01-29 17:24:54,554 - services.diagnostics.language_analysis.spanish - ERROR - [spanish.py:249] - Spanish stress analysis failed: 'SpanishAnalyzer' object has no attribute '_find_stress_peaks'
2025-01-29 17:24:54,554 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for spa
2025-01-29 17:24:54,554 - services.translation_routes - INFO - [translation_routes.py:323] - 
==================================================
2025-01-29 17:24:54,554 - services.translation_routes - INFO - [translation_routes.py:324] - Translated Audio Quality Report
2025-01-29 17:24:54,555 - services.translation_routes - INFO - [translation_routes.py:325] - ==================================================
2025-01-29 17:24:54,555 - services.translation_routes - INFO - [translation_routes.py:326] - Request ID: 87abf5e9
2025-01-29 17:24:54,555 - services.translation_routes - INFO - [translation_routes.py:327] - Target Language: spa
2025-01-29 17:24:54,555 - services.translation_routes - INFO - [translation_routes.py:328] - --------------------------------------------------
2025-01-29 17:24:54,555 - services.translation_routes - INFO - [translation_routes.py:329] - Audio Quality Analysis Report
==============================

Target Language: spa

Waveform Analysis:
--------------------
- Peak Amplitude: 0.622
- Avg Amplitude: 0.070
- Rms Level: 0.122
- Crest Factor: 5.115
- Zero Crossings: 5164.000
- Silence Percentage: 16.312
- Clipping Points: 0.000
- Dynamic Range: 394.337

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.361
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.034
  - Temporal Flatness: 0.018

- Volume Metrics:
  - Volume Stability: 0.128
  - Volume Range: 381.855
  - Volume Variations: 0.080

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.047578158554429
- Background Noise: 3.0460929412145368
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
No issues detected

Language-Specific Analysis:
--------------------

Phoneme Analysis:
  - Trilled R: {'features': {'modulation_rate': 3295.26598340654, 'strength': 1.229113221168518}, 'strength': 1.0, 'regularity': 0.0, 'duration': -144.82377310209412, 'overall_quality': 0.5}
  - Interdental Theta: {'energy': 1.0553842782974243, 'consistency': -2.24236798286438, 'spectral_shape': {'centroid': 0.4065695106983185, 'spread': 0.19193464517593384, 'quality': 0.7573174387216568}, 'quality': -0.14322208861509958}
  - Stop Consonants: {'voiceless_stops': {'strength': 1.0, 'precision': 0.3576378414104151, 'quality': 0.6788189207052076}, 'voiced_stops': {'voicing': 0.3050684630870819, 'precision': 0.41449680658816357, 'quality': 0.35978263483762274}, 'overall_quality': 0.5193007777714151}

Syllable Timing:

Intonation Patterns:
  - Contour Patterns: {'mean_pitch': 230.04439160437946, 'pitch_variability': 0.18562841660937263, 'rise_fall_ratio': 0.7307692304881657, 'quality': 0.8143715833986966}
  - Melodic Features: {'range': 0.7755332716514759, 'movement': 0.3027763911574187, 'quality': 0.5391548314044473}
  - Overall Quality: 0.677

Vowel Clarity:

Stress Patterns:
2025-01-29 17:24:54,555 - services.translation_routes - INFO - [translation_routes.py:330] - ==================================================

2025-01-29 17:24:54,555 - services.translation_routes - WARNING - [translation_routes.py:341] - Low speech clarity in output audio
2025-01-29 17:24:54,555 - services.translation_routes - INFO - [translation_routes.py:343] - Request 87abf5e9: Audio output processed successfully
2025-01-29 17:24:54,556 - services.translation_routes - INFO - [translation_routes.py:413] - Request 87abf5e9: Response prepared successfully
2025-01-29 17:24:54,609 - services.translation_routes - INFO - [translation_routes.py:438] - Request 87abf5e9 completed in 19.03s
2025-01-29 17:24:54,609 - services.translation_routes - ERROR - [translation_routes.py:449] - Error during cleanup: type object 'ResourceMonitor' has no attribute 'get_process_memory'
2025-01-29 17:24:54,610 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 19.03s, Memory Change: 431.19MB
2025-01-29 17:24:54,610 - __main__ - INFO - [app.py:278] - Request to /translate took 27.08s
=======
>>>>>>> parent of a02b9e660 (changes to translation_routes.py -- largely good but need to figure out a tiktok solution)
2025-02-01 20:55:37,071 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-02-01 20:55:37,073 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-02-01 21:11:13,422 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-02-01 21:11:13,422 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-02-01 21:11:28,719 - __main__ - INFO - [app.py:467] - Metrics server started on port 8000
2025-02-01 21:11:28,719 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-02-01 21:11:42,160 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-02-01 21:11:48,096 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-02-01 21:11:48,098 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-02-01 21:11:53,423 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-02-01 21:11:53,425 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-02-01 21:11:53,425 - __main__ - INFO - [app.py:491] - ==================================================
2025-02-01 21:11:53,426 - __main__ - INFO - [app.py:492] - Starting LinguaSync Backend
2025-02-01 21:11:53,426 - __main__ - INFO - [app.py:493] - Starting Flask app on port 5001 using cpu
2025-02-01 21:11:53,426 - __main__ - INFO - [app.py:494] - Python version: 3.12.6 (v3.12.6:a4a2d2b0d85, Sep  6 2024, 16:08:03) [Clang 13.0.0 (clang-1300.0.29.30)]
2025-02-01 21:11:53,426 - __main__ - INFO - [app.py:495] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-02-01 21:11:53,426 - __main__ - INFO - [app.py:496] - Maximum audio length: 300 seconds
2025-02-01 21:11:53,426 - __main__ - INFO - [app.py:497] - Sample rate: 16000 Hz
2025-02-01 21:11:53,426 - __main__ - INFO - [app.py:501] - System memory: 36.0GB total, 14.6GB available
2025-02-01 21:11:53,426 - __main__ - INFO - [app.py:502] - CPU cores: 11
2025-02-01 21:11:53,426 - __main__ - INFO - [app.py:510] - Configuration:
2025-02-01 21:11:53,426 - __main__ - INFO - [app.py:511] - - Debug mode: False
2025-02-01 21:11:53,426 - __main__ - INFO - [app.py:512] - - CORS enabled: True
2025-02-01 21:11:53,426 - __main__ - INFO - [app.py:513] - - Rate limiting: 10 requests per minute
2025-02-01 21:11:53,426 - __main__ - INFO - [app.py:514] - - Metrics enabled: True (port 8000)
2025-02-01 21:11:53,426 - __main__ - INFO - [app.py:516] - ==================================================
2025-02-01 21:13:00,690 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-02-01 21:13:00,692 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-02-01 21:13:00,694 - services.audio_link_routes - INFO - [audio_link_routes.py:216] - Processing URL: https://youtube.com/shorts/RFUAVaeEd4I?si=yFjRy7KLenvCP8vl
2025-02-01 21:13:00,695 - services.audio_link_routes - INFO - [audio_link_routes.py:233] - Processing YouTube URL
2025-02-01 21:13:00,695 - services.audio_link_routes - INFO - [audio_link_routes.py:120] - Using options for youtube: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp9uzbenif/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8}
2025-02-01 21:13:04,420 - services.audio_link_routes - INFO - [audio_link_routes.py:133] - Successfully downloaded youtube content
2025-02-01 21:13:04,422 - services.audio_link_routes - INFO - [audio_link_routes.py:152] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp9uzbenif/output.wav
2025-02-01 21:13:04,453 - services.audio_link_routes - INFO - [audio_link_routes.py:164] - Successfully converted audio to WAV
2025-02-01 21:13:04,454 - services.audio_link_routes - INFO - [audio_link_routes.py:242] - Successfully processed audio
2025-02-01 21:13:04,454 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 3.76s, Memory Change: 7.97MB
2025-02-01 21:13:04,454 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 3.76s
2025-02-01 21:13:13,437 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-02-01 21:13:13,441 - services.translation_routes - INFO - [translation_routes.py:33] - Starting translation request b4639f2e
2025-02-01 21:13:13,441 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-02-01 21:13:13,441 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-02-01 21:13:13,443 - services.translation_routes - INFO - [translation_routes.py:94] - Request b4639f2e: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp6xpz8zau.wav
2025-02-01 21:13:13,443 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 52.48 seconds
2025-02-01 21:13:13,443 - services.translation_routes - INFO - [translation_routes.py:109] - Request b4639f2e: Beginning audio processing with diagnostics
2025-02-01 21:13:13,444 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp6xpz8zau.wav
2025-02-01 21:13:13,444 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 16000, Channels: 1
2025-02-01 21:13:13,446 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([1, 839634]), Frequency: 16000Hz
2025-02-01 21:13:13,487 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-02-01 21:13:13,491 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-02-01 21:13:13,575 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-02-01 21:13:13,628 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-02-01 21:13:13,628 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-01 21:13:13,650 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-02-01 21:13:13,650 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-01 21:13:13,670 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-02-01 21:13:13,670 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-01 21:13:13,691 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-02-01 21:13:13,691 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-01 21:13:15,724 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-01 21:13:15,725 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-02-01 21:13:15,932 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-02-01 21:13:15,932 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-01 21:13:15,971 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-02-01 21:13:15,971 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-01 21:13:15,998 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-02-01 21:13:15,998 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-01 21:13:16,022 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-02-01 21:13:16,022 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-01 21:13:18,044 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-01 21:13:18,044 - services.translation_routes - INFO - [translation_routes.py:120] - 
==================================================
2025-02-01 21:13:18,045 - services.translation_routes - INFO - [translation_routes.py:121] - Input Audio Quality Report
2025-02-01 21:13:18,045 - services.translation_routes - INFO - [translation_routes.py:122] - ==================================================
2025-02-01 21:13:18,045 - services.translation_routes - INFO - [translation_routes.py:123] - Request ID: b4639f2e
2025-02-01 21:13:18,045 - services.translation_routes - INFO - [translation_routes.py:124] - Target Language: fra
2025-02-01 21:13:18,045 - services.translation_routes - INFO - [translation_routes.py:125] - --------------------------------------------------
2025-02-01 21:13:18,045 - services.translation_routes - INFO - [translation_routes.py:126] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.030
- Rms Level: 0.064
- Crest Factor: 14.779
- Zero Crossings: 476218.000
- Silence Percentage: 35.977
- Clipping Points: 0.000
- Dynamic Range: 7561910.000

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 0.000
  - Temporal Variation: 0.116
  - Temporal Flatness: 0.051

- Volume Metrics:
  - Volume Stability: -0.142
  - Volume Range: 30371514.000
  - Volume Variations: 0.048

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0086986911026172
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.6489304900169373, 'stability': 1.1569033861160278, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.4794709086418152, 'distinction': 0.1245083436369896}
  - Description: Moderate nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.514
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.469
  - Rhythm Quality: 0.446
  - Intonation Quality: 0.493

Vowel Quality:
  - Quality Score: 0.008
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-02-01 21:13:18,045 - services.translation_routes - INFO - [translation_routes.py:127] - ==================================================

2025-02-01 21:13:18,045 - services.translation_routes - INFO - [translation_routes.py:138] - Request b4639f2e: Audio processed successfully
2025-02-01 21:13:18,105 - services.translation_routes - INFO - [translation_routes.py:157] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-02-01 21:13:25,191 - services.audio_link_routes - INFO - [audio_link_routes.py:216] - Processing URL: https://www.tiktok.com/@fightjoe/video/7127311328095522053
2025-02-01 21:13:25,193 - services.audio_link_routes - INFO - [audio_link_routes.py:236] - Processing TikTok URL
2025-02-01 21:13:25,194 - services.audio_link_routes - INFO - [audio_link_routes.py:120] - Using options for tiktok: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpf87s20g0/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8, 'extractor_args': {'tiktok': {'api_hostname': 'api22-normal-c-alisg.tiktokv.com', 'app_name': 'trill', 'app_version': '34.1.2', 'manifest_app_version': '2023401020', 'app_info': '1234567890123456789/trill///1180', 'device_id': '5547443099003223525'}}}
2025-02-01 21:13:26,530 - services.audio_link_routes - INFO - [audio_link_routes.py:133] - Successfully downloaded tiktok content
2025-02-01 21:13:26,533 - services.audio_link_routes - INFO - [audio_link_routes.py:152] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpf87s20g0/output.wav
2025-02-01 21:13:26,540 - services.audio_link_routes - INFO - [audio_link_routes.py:164] - Successfully converted audio to WAV
2025-02-01 21:13:26,540 - services.audio_link_routes - INFO - [audio_link_routes.py:242] - Successfully processed audio
2025-02-01 21:13:26,541 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 1.35s, Memory Change: 44.34MB
2025-02-01 21:13:26,541 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 1.35s
2025-02-01 21:13:40,845 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-02-01 21:13:40,848 - services.translation_routes - INFO - [translation_routes.py:33] - Starting translation request 5abe4205
2025-02-01 21:13:40,849 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-02-01 21:13:40,849 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-02-01 21:13:40,850 - services.translation_routes - INFO - [translation_routes.py:94] - Request 5abe4205: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpwzcmer09.wav
2025-02-01 21:13:40,850 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 6.57 seconds
2025-02-01 21:13:40,850 - services.translation_routes - INFO - [translation_routes.py:109] - Request 5abe4205: Beginning audio processing with diagnostics
2025-02-01 21:13:40,850 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpwzcmer09.wav
2025-02-01 21:13:40,851 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 16000, Channels: 1
2025-02-01 21:13:40,853 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([1, 105163]), Frequency: 16000Hz
2025-02-01 21:13:40,863 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-02-01 21:13:40,864 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-02-01 21:13:40,878 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-02-01 21:13:40,890 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-02-01 21:13:40,890 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-01 21:13:40,899 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-02-01 21:13:40,899 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-01 21:13:40,907 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-02-01 21:13:40,908 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-01 21:13:40,915 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-02-01 21:13:40,916 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-01 21:13:41,078 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-01 21:13:41,078 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-02-01 21:13:41,103 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-02-01 21:13:41,103 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-01 21:13:41,109 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-02-01 21:13:41,110 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-01 21:13:41,116 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-02-01 21:13:41,116 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-01 21:13:41,123 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-02-01 21:13:41,123 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-01 21:13:41,279 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-01 21:13:41,279 - services.translation_routes - INFO - [translation_routes.py:120] - 
==================================================
2025-02-01 21:13:41,279 - services.translation_routes - INFO - [translation_routes.py:121] - Input Audio Quality Report
2025-02-01 21:13:41,279 - services.translation_routes - INFO - [translation_routes.py:122] - ==================================================
2025-02-01 21:13:41,279 - services.translation_routes - INFO - [translation_routes.py:123] - Request ID: 5abe4205
2025-02-01 21:13:41,279 - services.translation_routes - INFO - [translation_routes.py:124] - Target Language: fra
2025-02-01 21:13:41,279 - services.translation_routes - INFO - [translation_routes.py:125] - --------------------------------------------------
2025-02-01 21:13:41,279 - services.translation_routes - INFO - [translation_routes.py:126] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.021
- Rms Level: 0.071
- Crest Factor: 13.339
- Zero Crossings: 37090.000
- Silence Percentage: 67.795
- Clipping Points: 0.000
- Dynamic Range: 4800807.500

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.098
  - Temporal Flatness: 0.028

- Volume Metrics:
  - Volume Stability: -0.884
  - Volume Range: 30950176.000
  - Volume Variations: 0.063

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0106790927933305
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.9157419204711914, 'stability': 3.098970890045166, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.0, 'distinction': 0.9852283596992493}
  - Description: Strong nasal resonance. Unstable nasal resonance. Clear distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.661
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.011
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-02-01 21:13:41,279 - services.translation_routes - INFO - [translation_routes.py:127] - ==================================================

2025-02-01 21:13:41,279 - services.translation_routes - INFO - [translation_routes.py:138] - Request 5abe4205: Audio processed successfully
2025-02-01 21:13:41,287 - services.translation_routes - INFO - [translation_routes.py:157] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-02-01 21:13:51,524 - services.translation_routes - INFO - [translation_routes.py:196] - Source text: If you weren't what do you think youd be? I definitely wouldn't be diabetic.
2025-02-01 21:14:03,714 - services.translation_routes - INFO - [translation_routes.py:216] - Target text: Si tu ne voulais pas faire ça, qu'est-ce que tu penses que tu ferais? Ah d'ailleurs je n'ai pas eu de diabète.
2025-02-01 21:14:18,275 - services.translation_routes - INFO - [translation_routes.py:240] - Processing tuple output from model
2025-02-01 21:14:18,284 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-02-01 21:14:18,285 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-01 21:14:18,288 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-02-01 21:14:18,288 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-01 21:14:18,294 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-02-01 21:14:18,294 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-01 21:14:18,299 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-02-01 21:14:18,299 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-01 21:14:18,429 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-01 21:14:18,429 - services.translation_routes - INFO - [translation_routes.py:268] - 
==================================================
2025-02-01 21:14:18,429 - services.translation_routes - INFO - [translation_routes.py:269] - Translated Audio Quality Report
2025-02-01 21:14:18,429 - services.translation_routes - INFO - [translation_routes.py:270] - ==================================================
2025-02-01 21:14:18,429 - services.translation_routes - INFO - [translation_routes.py:271] - Request ID: 5abe4205
2025-02-01 21:14:18,429 - services.translation_routes - INFO - [translation_routes.py:272] - Target Language: fra
2025-02-01 21:14:18,429 - services.translation_routes - INFO - [translation_routes.py:273] - --------------------------------------------------
2025-02-01 21:14:18,429 - services.translation_routes - INFO - [translation_routes.py:274] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.480
- Avg Amplitude: 0.046
- Rms Level: 0.083
- Crest Factor: 5.765
- Zero Crossings: 9667.000
- Silence Percentage: 25.981
- Clipping Points: 0.000
- Dynamic Range: 740.144

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.279
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.022
  - Temporal Flatness: 0.011

- Volume Metrics:
  - Volume Stability: 0.012
  - Volume Range: 856.898
  - Volume Variations: 0.059

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.028907583281988
- Background Noise: 3.306085185131112
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.7207626700401306, 'stability': 3.212397813796997, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.0, 'distinction': 1.0}
  - Description: Strong nasal resonance. Unstable nasal resonance. Clear distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.525
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.002
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-02-01 21:14:18,429 - services.translation_routes - INFO - [translation_routes.py:275] - ==================================================

2025-02-01 21:14:18,429 - services.translation_routes - INFO - [translation_routes.py:281] - Request 5abe4205: Audio output processed successfully
2025-02-01 21:14:18,431 - services.translation_routes - INFO - [translation_routes.py:336] - Request 5abe4205: Response prepared successfully
2025-02-01 21:14:18,431 - services.translation_routes - INFO - [translation_routes.py:349] - Request 5abe4205 completed in 37.58s
2025-02-01 21:14:18,432 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 37.58s, Memory Change: 854.42MB
2025-02-01 21:14:18,432 - __main__ - INFO - [app.py:278] - Request to /translate took 50.43s
2025-02-01 21:14:20,166 - services.translation_routes - INFO - [translation_routes.py:196] - Source text: The main thing is to make sure you're balanced on both feet. Hands up, elbows in. A lot of people box with elbows like this. No elbow in because it's for the body shot. And it really comes out like this just straight out and as it comes out it turns straight back to the chin. It's coming out. Make sure your shoulder hits your chin so it protects you. Turn it slightly. So you hit it with all four knuckles right here and it comes back and this right hand has to stay there.
2025-02-01 21:14:57,010 - services.translation_routes - INFO - [translation_routes.py:216] - Target text: c'est à dire qu'il reste là et il revient aussi vite que possible. C'est un peu comme ça qu'on se retrouve en train d'écouter ce qui se passe dans la vie d'un homme, quand il est en train de s'accrocher à lui-même pour l'empêcher d'arriver au bout d'une course. Il vient de se battre avec toutes ses quatre ongles et sa main droite doit rester là. Boum!
2025-02-01 21:15:26,696 - services.translation_routes - INFO - [translation_routes.py:240] - Processing tuple output from model
2025-02-01 21:15:26,701 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-02-01 21:15:26,701 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-01 21:15:26,706 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-02-01 21:15:26,706 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-01 21:15:26,711 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-02-01 21:15:26,711 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-01 21:15:26,713 - services.diagnostics.spectral_analysis - WARNING - [spectral_analysis.py:361] - ascii_graph not installed. Install with: pip install ascii_graph
2025-02-01 21:15:26,714 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-01 21:15:26,762 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-01 21:15:26,762 - services.translation_routes - INFO - [translation_routes.py:268] - 
==================================================
2025-02-01 21:15:26,762 - services.translation_routes - INFO - [translation_routes.py:269] - Translated Audio Quality Report
2025-02-01 21:15:26,762 - services.translation_routes - INFO - [translation_routes.py:270] - ==================================================
2025-02-01 21:15:26,762 - services.translation_routes - INFO - [translation_routes.py:271] - Request ID: b4639f2e
2025-02-01 21:15:26,762 - services.translation_routes - INFO - [translation_routes.py:272] - Target Language: fra
2025-02-01 21:15:26,762 - services.translation_routes - INFO - [translation_routes.py:273] - --------------------------------------------------
2025-02-01 21:15:26,762 - services.translation_routes - INFO - [translation_routes.py:274] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.483
- Avg Amplitude: 0.036
- Rms Level: 0.073
- Crest Factor: 6.627
- Zero Crossings: 3145.000
- Silence Percentage: 40.242
- Clipping Points: 0.000
- Dynamic Range: 1526.718

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.172
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.018
  - Temporal Flatness: 0.008

- Volume Metrics:
  - Volume Stability: -0.152
  - Volume Range: 1790.410
  - Volume Variations: 0.055

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.021995651594564
- Background Noise: 3.6508124041065875
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.0016006408259272575, 'stability': 0.008443607948720455, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.9900356531143188, 'consistency': 0.0, 'distinction': 1.0}
  - Description: Weak nasal resonance. Stable nasal resonance. Clear distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.571
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 1.000

Vowel Quality:
  - Quality Score: 0.003
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-02-01 21:15:26,762 - services.translation_routes - INFO - [translation_routes.py:275] - ==================================================

2025-02-01 21:15:26,762 - services.translation_routes - INFO - [translation_routes.py:281] - Request b4639f2e: Audio output processed successfully
2025-02-01 21:15:26,764 - services.translation_routes - INFO - [translation_routes.py:336] - Request b4639f2e: Response prepared successfully
2025-02-01 21:15:26,764 - services.translation_routes - INFO - [translation_routes.py:349] - Request b4639f2e completed in 133.32s
2025-02-01 21:15:26,766 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 133.32s, Memory Change: 2572.97MB
2025-02-01 21:15:26,766 - __main__ - INFO - [app.py:278] - Request to /translate took 141.09s
2025-02-11 11:48:34,424 - __main__ - INFO - [app.py:467] - Metrics server started on port 8000
2025-02-11 11:48:34,426 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-02-11 11:48:48,181 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-02-11 11:49:05,420 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-02-11 11:49:05,422 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-02-11 11:49:10,677 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-02-11 11:49:10,678 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-02-11 11:49:10,678 - __main__ - INFO - [app.py:491] - ==================================================
2025-02-11 11:49:10,678 - __main__ - INFO - [app.py:492] - Starting LinguaSync Backend
2025-02-11 11:49:10,678 - __main__ - INFO - [app.py:493] - Starting Flask app on port 5001 using cpu
2025-02-11 11:49:10,678 - __main__ - INFO - [app.py:494] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-02-11 11:49:10,678 - __main__ - INFO - [app.py:495] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-02-11 11:49:10,678 - __main__ - INFO - [app.py:496] - Maximum audio length: 300 seconds
2025-02-11 11:49:10,678 - __main__ - INFO - [app.py:497] - Sample rate: 16000 Hz
2025-02-11 11:49:10,678 - __main__ - INFO - [app.py:501] - System memory: 36.0GB total, 9.4GB available
2025-02-11 11:49:10,678 - __main__ - INFO - [app.py:502] - CPU cores: 11
2025-02-11 11:49:10,679 - __main__ - INFO - [app.py:510] - Configuration:
2025-02-11 11:49:10,679 - __main__ - INFO - [app.py:511] - - Debug mode: False
2025-02-11 11:49:10,679 - __main__ - INFO - [app.py:512] - - CORS enabled: True
2025-02-11 11:49:10,679 - __main__ - INFO - [app.py:513] - - Rate limiting: 10 requests per minute
2025-02-11 11:49:10,679 - __main__ - INFO - [app.py:514] - - Metrics enabled: True (port 8000)
2025-02-11 11:49:10,679 - __main__ - INFO - [app.py:516] - ==================================================
2025-02-11 11:49:44,095 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.47MB
2025-02-11 11:49:44,095 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-02-11 11:49:44,099 - services.audio_link_routes - INFO - [audio_link_routes.py:216] - Processing URL: https://youtube.com/shorts/RFUAVaeEd4I?si=_xT9r_GD68YNaaQ1
2025-02-11 11:49:44,101 - services.audio_link_routes - INFO - [audio_link_routes.py:233] - Processing YouTube URL
2025-02-11 11:49:44,101 - services.audio_link_routes - INFO - [audio_link_routes.py:120] - Using options for youtube: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmplnkwu5vk/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8}
2025-02-11 11:49:51,855 - services.audio_link_routes - INFO - [audio_link_routes.py:133] - Successfully downloaded youtube content
2025-02-11 11:49:51,857 - services.audio_link_routes - INFO - [audio_link_routes.py:152] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmplnkwu5vk/output.wav
2025-02-11 11:49:51,886 - services.audio_link_routes - INFO - [audio_link_routes.py:164] - Successfully converted audio to WAV
2025-02-11 11:49:51,886 - services.audio_link_routes - INFO - [audio_link_routes.py:242] - Successfully processed audio
2025-02-11 11:49:51,887 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 7.79s, Memory Change: -29.41MB
2025-02-11 11:49:51,887 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 7.79s
2025-02-11 11:50:00,209 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-02-11 11:50:00,211 - services.error_handler - ERROR - [error_handler.py:36] - Error 12d16992: name 'time' is not defined
Traceback (most recent call last):
  File "/Users/robmills/audio-translation/Backend/app.py", line 380, in translate_audio_endpoint
    return handle_translation(
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/robmills/audio-translation/Backend/services/translation_routes.py", line 29, in handle_translation
    request_id = hashlib.md5(str(time.time()).encode()).hexdigest()[:8]
                                 ^^^^
NameError: name 'time' is not defined. Did you mean: 'timex'? Or did you forget to import 'time'
2025-02-11 11:50:00,213 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 0.00s, Memory Change: 0.39MB
2025-02-11 11:50:00,213 - __main__ - INFO - [app.py:278] - Request to /translate took 5.71s
2025-02-11 11:53:09,520 - __main__ - INFO - [app.py:217] - Received SIGINT signal
2025-02-11 11:53:09,524 - __main__ - INFO - [app.py:202] - Initiating graceful shutdown...
2025-02-11 11:53:14,530 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-02-11 11:53:14,531 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-02-11 11:53:14,532 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-02-11 11:53:14,534 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-02-11 11:53:14,536 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-02-11 11:53:14,536 - __main__ - INFO - [app.py:206] - Graceful shutdown completed
2025-02-11 11:53:14,538 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-02-11 11:53:14,539 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-02-11 11:53:14,539 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-02-11 11:53:14,540 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-02-11 11:53:14,540 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-02-11 11:53:14,541 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-02-11 11:53:14,541 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-02-11 11:53:14,541 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-02-11 11:53:14,542 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-02-11 11:53:14,542 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-02-11 11:53:21,838 - __main__ - INFO - [app.py:467] - Metrics server started on port 8000
2025-02-11 11:53:21,838 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-02-11 11:53:35,865 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-02-11 11:53:43,289 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-02-11 11:53:43,291 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-02-11 11:53:48,240 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-02-11 11:53:48,241 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-02-11 11:53:48,242 - __main__ - INFO - [app.py:491] - ==================================================
2025-02-11 11:53:48,242 - __main__ - INFO - [app.py:492] - Starting LinguaSync Backend
2025-02-11 11:53:48,242 - __main__ - INFO - [app.py:493] - Starting Flask app on port 5001 using cpu
2025-02-11 11:53:48,242 - __main__ - INFO - [app.py:494] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-02-11 11:53:48,242 - __main__ - INFO - [app.py:495] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-02-11 11:53:48,242 - __main__ - INFO - [app.py:496] - Maximum audio length: 300 seconds
2025-02-11 11:53:48,242 - __main__ - INFO - [app.py:497] - Sample rate: 16000 Hz
2025-02-11 11:53:48,242 - __main__ - INFO - [app.py:501] - System memory: 36.0GB total, 9.9GB available
2025-02-11 11:53:48,242 - __main__ - INFO - [app.py:502] - CPU cores: 11
2025-02-11 11:53:48,242 - __main__ - INFO - [app.py:510] - Configuration:
2025-02-11 11:53:48,242 - __main__ - INFO - [app.py:511] - - Debug mode: False
2025-02-11 11:53:48,242 - __main__ - INFO - [app.py:512] - - CORS enabled: True
2025-02-11 11:53:48,242 - __main__ - INFO - [app.py:513] - - Rate limiting: 10 requests per minute
2025-02-11 11:53:48,242 - __main__ - INFO - [app.py:514] - - Metrics enabled: True (port 8000)
2025-02-11 11:53:48,242 - __main__ - INFO - [app.py:516] - ==================================================
2025-02-11 11:54:12,475 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.19MB
2025-02-11 11:54:12,477 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-02-11 11:54:12,481 - services.audio_link_routes - INFO - [audio_link_routes.py:216] - Processing URL: https://youtube.com/shorts/RFUAVaeEd4I?si=_xT9r_GD68YNaaQ1
2025-02-11 11:54:12,481 - services.audio_link_routes - INFO - [audio_link_routes.py:233] - Processing YouTube URL
2025-02-11 11:54:12,482 - services.audio_link_routes - INFO - [audio_link_routes.py:120] - Using options for youtube: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmppfv0fsev/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8}
2025-02-11 11:54:18,495 - services.audio_link_routes - INFO - [audio_link_routes.py:133] - Successfully downloaded youtube content
2025-02-11 11:54:18,497 - services.audio_link_routes - INFO - [audio_link_routes.py:152] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmppfv0fsev/output.wav
2025-02-11 11:54:18,527 - services.audio_link_routes - INFO - [audio_link_routes.py:164] - Successfully converted audio to WAV
2025-02-11 11:54:18,527 - services.audio_link_routes - INFO - [audio_link_routes.py:242] - Successfully processed audio
2025-02-11 11:54:18,528 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 6.05s, Memory Change: 65.53MB
2025-02-11 11:54:18,528 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 6.05s
2025-02-11 11:54:26,331 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-02-11 11:54:26,333 - services.translation_routes - INFO - [translation_routes.py:36] - Starting translation request e56a6f9d
2025-02-11 11:54:26,333 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-02-11 11:54:26,333 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-02-11 11:54:26,335 - services.translation_routes - INFO - [translation_routes.py:97] - Request e56a6f9d: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp17zc5j54.wav
2025-02-11 11:54:26,337 - services.audio_processor - INFO - [audio_processor.py:136] - Audio duration: 52.48 seconds
2025-02-11 11:54:26,337 - services.translation_routes - INFO - [translation_routes.py:112] - Request e56a6f9d: Beginning audio processing with diagnostics
2025-02-11 11:54:26,337 - services.audio_processor - INFO - [audio_processor.py:269] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp17zc5j54.wav
2025-02-11 11:54:26,337 - services.audio_processor - INFO - [audio_processor.py:271] - Audio info - Sample rate: 16000, Channels: 1
2025-02-11 11:54:26,341 - services.audio_processor - INFO - [audio_processor.py:280] - Original audio shape: torch.Size([1, 839634]), Frequency: 16000Hz
2025-02-11 11:54:26,403 - services.audio_processor - INFO - [audio_processor.py:438] - Base audio processing successful, proceeding with enhancement
2025-02-11 11:54:26,425 - services.audio_processor - INFO - [audio_processor.py:446] - Background music analysis: {'has_background_music': True, 'music_confidence': 0.3547474247335353, 'feature_scores': {'spectral_flatness': 0.1747071146868413, 'rhythm_regularity': 0.029706601466992662, 'bass_presence': 0.07999731566149255, 'temporal_stability': 0.0703363929182088}}
2025-02-11 11:54:26,425 - services.audio_processor - INFO - [audio_processor.py:449] - Applying speech-optimized spectral enhancement for fra
2025-02-11 11:54:26,501 - services.audio_processor - INFO - [audio_processor.py:459] - Analyzing audio quality...
2025-02-11 11:54:26,595 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-11 11:54:26,598 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-11 11:54:26,614 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-11 11:54:26,615 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-11 11:54:26,632 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-11 11:54:26,632 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-11 11:54:26,649 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-11 11:54:26,649 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-11 11:54:28,539 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-11 11:54:28,539 - services.translation_routes - INFO - [translation_routes.py:123] - 
==================================================
2025-02-11 11:54:28,539 - services.translation_routes - INFO - [translation_routes.py:124] - Input Audio Quality Report
2025-02-11 11:54:28,539 - services.translation_routes - INFO - [translation_routes.py:125] - ==================================================
2025-02-11 11:54:28,539 - services.translation_routes - INFO - [translation_routes.py:126] - Request ID: e56a6f9d
2025-02-11 11:54:28,540 - services.translation_routes - INFO - [translation_routes.py:127] - Target Language: fra
2025-02-11 11:54:28,540 - services.translation_routes - INFO - [translation_routes.py:128] - --------------------------------------------------
2025-02-11 11:54:28,540 - services.translation_routes - INFO - [translation_routes.py:129] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.038
- Rms Level: 0.066
- Crest Factor: 14.422
- Zero Crossings: 335957.000
- Silence Percentage: 25.137
- Clipping Points: 0.000
- Dynamic Range: 9099014.583

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 0.000
  - Temporal Variation: 0.101
  - Temporal Flatness: 0.048

- Volume Metrics:
  - Volume Stability: 0.222
  - Volume Range: 25740829.110
  - Volume Variations: 0.040

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.009134430002693
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 1.0607566833496094, 'stability': 1.490928292274475, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.6918656826019287, 'distinction': 0.06730042397975922}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.510
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.775
  - Rhythm Quality: 0.812
  - Intonation Quality: 0.738

Vowel Quality:
  - Quality Score: 0.013
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-02-11 11:54:28,540 - services.translation_routes - INFO - [translation_routes.py:130] - ==================================================

2025-02-11 11:54:28,540 - services.audio_processor - INFO - [audio_processor.py:269] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp17zc5j54.wav
2025-02-11 11:54:28,540 - services.audio_processor - INFO - [audio_processor.py:271] - Audio info - Sample rate: 16000, Channels: 1
2025-02-11 11:54:28,542 - services.audio_processor - INFO - [audio_processor.py:280] - Original audio shape: torch.Size([1, 839634]), Frequency: 16000Hz
2025-02-11 11:54:28,583 - services.audio_processor - INFO - [audio_processor.py:438] - Base audio processing successful, proceeding with enhancement
2025-02-11 11:54:28,595 - services.audio_processor - INFO - [audio_processor.py:446] - Background music analysis: {'has_background_music': True, 'music_confidence': 0.3547474247335353, 'feature_scores': {'spectral_flatness': 0.1747071146868413, 'rhythm_regularity': 0.029706601466992662, 'bass_presence': 0.07999731566149255, 'temporal_stability': 0.0703363929182088}}
2025-02-11 11:54:28,595 - services.audio_processor - INFO - [audio_processor.py:449] - Applying speech-optimized spectral enhancement for fra
2025-02-11 11:54:28,661 - services.audio_processor - INFO - [audio_processor.py:459] - Analyzing audio quality...
2025-02-11 11:54:28,746 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-11 11:54:28,747 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-11 11:54:28,763 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-11 11:54:28,764 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-11 11:54:28,780 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-11 11:54:28,781 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-11 11:54:28,798 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-11 11:54:28,798 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-11 11:54:30,755 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-11 11:54:30,756 - services.translation_routes - INFO - [translation_routes.py:153] - Request e56a6f9d: Background music analysis: {'has_background_music': True, 'music_confidence': 0.3547474247335353, 'feature_scores': {'spectral_flatness': 0.1747071146868413, 'rhythm_regularity': 0.029706601466992662, 'bass_presence': 0.07999731566149255, 'temporal_stability': 0.0703363929182088}}
2025-02-11 11:54:30,756 - services.translation_strategy - INFO - [translation_strategy.py:19] - 
=== AUDIO ANALYSIS ===
2025-02-11 11:54:30,756 - services.translation_strategy - INFO - [translation_strategy.py:29] - 
Audio Quality:
2025-02-11 11:54:30,756 - services.translation_strategy - INFO - [translation_strategy.py:30] - - Audio Clarity: N/A
2025-02-11 11:54:30,756 - services.translation_strategy - INFO - [translation_strategy.py:31] - - Background Noise: N/A
2025-02-11 11:54:30,756 - services.translation_strategy - INFO - [translation_strategy.py:32] - - Voice Consistency: N/A
2025-02-11 11:54:30,757 - services.translation_strategy - INFO - [translation_strategy.py:36] - 
Waveform Characteristics:
2025-02-11 11:54:30,757 - services.translation_strategy - INFO - [translation_strategy.py:37] - - Peak Amplitude: 0.949999988079071
2025-02-11 11:54:30,757 - services.translation_strategy - INFO - [translation_strategy.py:38] - - RMS Level: 0.06587004661560059
2025-02-11 11:54:30,757 - services.translation_strategy - INFO - [translation_strategy.py:39] - - Silence Percentage: 25.136641315949987
2025-02-11 11:54:30,757 - services.translation_strategy - INFO - [translation_strategy.py:61] - 
Just listening to audio characteristics for now...
2025-02-11 11:54:30,757 - services.translation_routes - INFO - [translation_routes.py:165] - Request e56a6f9d: Audio characteristics heard: {'heard_characteristics': {'music': {'detected': False, 'confidence': 0.0}, 'audio_quality': {'clarity': 'N/A', 'background_noise': 'N/A', 'voice_consistency': 'N/A'}, 'waveform': {'peak_amplitude': 0.949999988079071, 'rms_level': 0.06587004661560059, 'silence_percentage': 25.136641315949987}}}
2025-02-11 11:54:30,757 - services.translation_routes - INFO - [translation_routes.py:167] - Request e56a6f9d: Audio processed successfully
2025-02-11 11:54:30,808 - services.translation_routes - INFO - [translation_routes.py:184] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-02-11 11:55:13,765 - services.translation_routes - INFO - [translation_routes.py:223] - Source text: The main thing is to make sure you're balanced on both feet, hands up, elbows in, a lot of people box with their elbows like this, no elbow in, and it really comes out like this as it comes out, it turns straight back to your chin when it's coming out, make sure your shoulder hits your chin, so it protects you, and turn it as it came out, turn it slightly, so you hit it with all four knuckles right here, and this right hand has to stay there.
2025-02-11 11:55:39,121 - services.translation_routes - INFO - [translation_routes.py:243] - Target text: [Musique épique, chanteuse et comédienne qui a fait de l'humour dans le monde entier en faisant du bruit d'un coup de poing sur son visage et ses doigts.]
2025-02-11 11:56:13,995 - services.translation_routes - INFO - [translation_routes.py:267] - Processing tuple output from model
2025-02-11 11:56:14,002 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-11 11:56:14,003 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-11 11:56:14,008 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-11 11:56:14,008 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-11 11:56:14,012 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-11 11:56:14,012 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-11 11:56:14,016 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-11 11:56:14,016 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-11 11:56:14,064 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-11 11:56:14,064 - services.translation_routes - INFO - [translation_routes.py:294] - 
==================================================
2025-02-11 11:56:14,064 - services.translation_routes - INFO - [translation_routes.py:295] - Translated Audio Quality Report
2025-02-11 11:56:14,064 - services.translation_routes - INFO - [translation_routes.py:296] - ==================================================
2025-02-11 11:56:14,064 - services.translation_routes - INFO - [translation_routes.py:297] - Request ID: e56a6f9d
2025-02-11 11:56:14,065 - services.translation_routes - INFO - [translation_routes.py:298] - Target Language: fra
2025-02-11 11:56:14,065 - services.translation_routes - INFO - [translation_routes.py:299] - --------------------------------------------------
2025-02-11 11:56:14,065 - services.translation_routes - INFO - [translation_routes.py:300] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.438
- Avg Amplitude: 0.044
- Rms Level: 0.079
- Crest Factor: 5.578
- Zero Crossings: 2414.000
- Silence Percentage: 29.251
- Clipping Points: 0.000
- Dynamic Range: 1484.372

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.303
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.020
  - Temporal Flatness: 0.010

- Volume Metrics:
  - Volume Stability: 0.122
  - Volume Range: 1383.611
  - Volume Variations: 0.052

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0281588254463037
- Background Noise: 3.231222444738952
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.0012349440949037671, 'stability': 0.004900122992694378, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.9908181428909302, 'consistency': 0.0, 'distinction': 1.0}
  - Description: Weak nasal resonance. Stable nasal resonance. Clear distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.537
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 1.000

Vowel Quality:
  - Quality Score: 0.003
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-02-11 11:56:14,065 - services.translation_routes - INFO - [translation_routes.py:301] - ==================================================

2025-02-11 11:56:14,065 - services.translation_routes - INFO - [translation_routes.py:307] - Request e56a6f9d: Audio output processed successfully
2025-02-11 11:56:14,067 - services.translation_routes - INFO - [translation_routes.py:362] - Request e56a6f9d: Response prepared successfully
2025-02-11 11:56:14,067 - services.translation_routes - INFO - [translation_routes.py:375] - Request e56a6f9d completed in 107.73s
2025-02-11 11:56:14,069 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 107.74s, Memory Change: 1598.58MB
2025-02-11 11:56:14,069 - __main__ - INFO - [app.py:278] - Request to /translate took 113.63s
2025-02-11 23:39:03,924 - __main__ - INFO - [app.py:217] - Received SIGINT signal
2025-02-11 23:39:03,945 - __main__ - INFO - [app.py:202] - Initiating graceful shutdown...
2025-02-11 23:39:08,951 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-02-11 23:39:08,977 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-02-11 23:39:08,979 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-02-11 23:39:09,006 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-02-11 23:39:09,016 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-02-11 23:39:09,016 - __main__ - INFO - [app.py:206] - Graceful shutdown completed
2025-02-11 23:39:09,033 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-02-11 23:39:09,035 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-02-11 23:39:09,035 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-02-11 23:39:09,036 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-02-11 23:39:09,040 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-02-11 23:39:09,043 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-02-11 23:39:09,043 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-02-11 23:39:09,043 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-02-11 23:39:09,050 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-02-11 23:39:09,050 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-02-11 23:39:34,091 - __main__ - INFO - [app.py:467] - Metrics server started on port 8000
2025-02-11 23:39:34,092 - services.model_manager - INFO - [model_manager.py:107] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-02-11 23:39:48,197 - services.model_manager - INFO - [model_manager.py:171] - Models loaded on CPU
2025-02-11 23:39:48,198 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-11 23:39:48,202 - services.model_manager - INFO - [model_manager.py:61] - Testing clean_speech
2025-02-11 23:40:08,001 - services.model_manager - INFO - [model_manager.py:95] - Successfully verified clean_speech
2025-02-11 23:40:08,001 - services.model_manager - INFO - [model_manager.py:61] - Testing speech_with_music
2025-02-11 23:40:12,324 - services.model_manager - INFO - [model_manager.py:95] - Successfully verified speech_with_music
2025-02-11 23:40:12,325 - services.model_manager - INFO - [model_manager.py:97] - Model verification successful
2025-02-11 23:40:12,326 - services.model_manager - INFO - [model_manager.py:177] - Model initialization successful
2025-02-11 23:40:12,326 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-11 23:40:12,326 - services.model_manager - INFO - [model_manager.py:61] - Testing clean_speech
2025-02-11 23:40:20,174 - services.model_manager - INFO - [model_manager.py:95] - Successfully verified clean_speech
2025-02-11 23:40:20,174 - services.model_manager - INFO - [model_manager.py:61] - Testing speech_with_music
2025-02-11 23:40:25,548 - services.model_manager - INFO - [model_manager.py:95] - Successfully verified speech_with_music
2025-02-11 23:40:25,548 - services.model_manager - INFO - [model_manager.py:97] - Model verification successful
2025-02-11 23:40:25,550 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-02-11 23:40:25,550 - __main__ - INFO - [app.py:491] - ==================================================
2025-02-11 23:40:25,550 - __main__ - INFO - [app.py:492] - Starting LinguaSync Backend
2025-02-11 23:40:25,550 - __main__ - INFO - [app.py:493] - Starting Flask app on port 5001 using cpu
2025-02-11 23:40:25,550 - __main__ - INFO - [app.py:494] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-02-11 23:40:25,550 - __main__ - INFO - [app.py:495] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-02-11 23:40:25,550 - __main__ - INFO - [app.py:496] - Maximum audio length: 300 seconds
2025-02-11 23:40:25,550 - __main__ - INFO - [app.py:497] - Sample rate: 16000 Hz
2025-02-11 23:40:25,550 - __main__ - INFO - [app.py:501] - System memory: 36.0GB total, 6.2GB available
2025-02-11 23:40:25,550 - __main__ - INFO - [app.py:502] - CPU cores: 11
2025-02-11 23:40:25,550 - __main__ - INFO - [app.py:510] - Configuration:
2025-02-11 23:40:25,550 - __main__ - INFO - [app.py:511] - - Debug mode: False
2025-02-11 23:40:25,550 - __main__ - INFO - [app.py:512] - - CORS enabled: True
2025-02-11 23:40:25,550 - __main__ - INFO - [app.py:513] - - Rate limiting: 10 requests per minute
2025-02-11 23:40:25,550 - __main__ - INFO - [app.py:514] - - Metrics enabled: True (port 8000)
2025-02-11 23:40:25,550 - __main__ - INFO - [app.py:516] - ==================================================
2025-02-11 23:47:41,612 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.59MB
2025-02-11 23:47:41,612 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-02-11 23:47:41,617 - services.audio_link_routes - INFO - [audio_link_routes.py:216] - Processing URL: https://youtube.com/shorts/RFUAVaeEd4I?si=menotVpmK3itDl9E
2025-02-11 23:47:41,618 - services.audio_link_routes - INFO - [audio_link_routes.py:233] - Processing YouTube URL
2025-02-11 23:47:41,618 - services.audio_link_routes - INFO - [audio_link_routes.py:120] - Using options for youtube: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpuq4orlpj/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8}
2025-02-11 23:47:46,946 - services.audio_link_routes - INFO - [audio_link_routes.py:133] - Successfully downloaded youtube content
2025-02-11 23:47:46,949 - services.audio_link_routes - INFO - [audio_link_routes.py:152] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpuq4orlpj/output.wav
2025-02-11 23:47:47,006 - services.audio_link_routes - INFO - [audio_link_routes.py:164] - Successfully converted audio to WAV
2025-02-11 23:47:47,007 - services.audio_link_routes - INFO - [audio_link_routes.py:242] - Successfully processed audio
2025-02-11 23:47:47,007 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 5.39s, Memory Change: 109.34MB
2025-02-11 23:47:47,007 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 5.39s
2025-02-11 23:47:51,946 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-11 23:47:51,960 - services.model_manager - INFO - [model_manager.py:61] - Testing clean_speech
2025-02-11 23:48:14,458 - services.model_manager - INFO - [model_manager.py:95] - Successfully verified clean_speech
2025-02-11 23:48:14,459 - services.model_manager - INFO - [model_manager.py:61] - Testing speech_with_music
2025-02-11 23:48:22,188 - services.model_manager - INFO - [model_manager.py:95] - Successfully verified speech_with_music
2025-02-11 23:48:22,189 - services.model_manager - INFO - [model_manager.py:97] - Model verification successful
2025-02-11 23:48:22,191 - services.translation_routes - INFO - [translation_routes.py:36] - Starting translation request 971d6c8b
2025-02-11 23:48:22,191 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-02-11 23:48:22,191 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-02-11 23:48:22,194 - services.translation_routes - INFO - [translation_routes.py:97] - Request 971d6c8b: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp1azim4e5.wav
2025-02-11 23:48:22,197 - services.audio_processor - INFO - [audio_processor.py:136] - Audio duration: 52.48 seconds
2025-02-11 23:48:22,197 - services.translation_routes - INFO - [translation_routes.py:112] - Request 971d6c8b: Beginning audio processing with diagnostics
2025-02-11 23:48:22,197 - services.audio_processor - INFO - [audio_processor.py:269] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp1azim4e5.wav
2025-02-11 23:48:22,197 - services.audio_processor - INFO - [audio_processor.py:271] - Audio info - Sample rate: 16000, Channels: 1
2025-02-11 23:48:22,204 - services.audio_processor - INFO - [audio_processor.py:280] - Original audio shape: torch.Size([1, 839634]), Frequency: 16000Hz
2025-02-11 23:48:22,262 - services.audio_processor - INFO - [audio_processor.py:438] - Base audio processing successful, proceeding with enhancement
2025-02-11 23:48:22,287 - services.audio_processor - INFO - [audio_processor.py:446] - Background music analysis: {'has_background_music': True, 'music_confidence': 0.3547474247335353, 'feature_scores': {'spectral_flatness': 0.1747071146868413, 'rhythm_regularity': 0.029706601466992662, 'bass_presence': 0.07999731566149255, 'temporal_stability': 0.0703363929182088}}
2025-02-11 23:48:22,287 - services.audio_processor - INFO - [audio_processor.py:449] - Applying speech-optimized spectral enhancement for spa
2025-02-11 23:48:22,287 - services.audio_processor - WARNING - [audio_processor.py:354] - No specific parameters for spa, using defaults
2025-02-11 23:48:22,370 - services.audio_processor - INFO - [audio_processor.py:459] - Analyzing audio quality...
2025-02-11 23:48:22,469 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-11 23:48:22,473 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-11 23:48:22,488 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-11 23:48:22,489 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-11 23:48:22,505 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-11 23:48:22,505 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-11 23:48:22,522 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-11 23:48:22,523 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-11 23:48:24,778 - services.diagnostics.language_analysis.spanish - ERROR - [spanish.py:161] - Spanish timing analysis failed: 'SpanishAnalyzer' object has no attribute '_find_syllable_boundaries'
2025-02-11 23:48:24,897 - services.diagnostics.language_analysis.spanish - ERROR - [spanish.py:218] - Spanish vowel analysis failed: 'SpanishAnalyzer' object has no attribute '_analyze_vowel_formants'
2025-02-11 23:48:24,902 - services.diagnostics.language_analysis.spanish - ERROR - [spanish.py:249] - Spanish stress analysis failed: 'SpanishAnalyzer' object has no attribute '_find_stress_peaks'
2025-02-11 23:48:24,903 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for spa
2025-02-11 23:48:24,903 - services.translation_routes - INFO - [translation_routes.py:123] - 
==================================================
2025-02-11 23:48:24,903 - services.translation_routes - INFO - [translation_routes.py:124] - Input Audio Quality Report
2025-02-11 23:48:24,903 - services.translation_routes - INFO - [translation_routes.py:125] - ==================================================
2025-02-11 23:48:24,903 - services.translation_routes - INFO - [translation_routes.py:126] - Request ID: 971d6c8b
2025-02-11 23:48:24,903 - services.translation_routes - INFO - [translation_routes.py:127] - Target Language: spa
2025-02-11 23:48:24,903 - services.translation_routes - INFO - [translation_routes.py:128] - --------------------------------------------------
2025-02-11 23:48:24,903 - services.translation_routes - INFO - [translation_routes.py:129] - Audio Quality Analysis Report
==============================

Target Language: spa

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.038
- Rms Level: 0.066
- Crest Factor: 14.422
- Zero Crossings: 335957.000
- Silence Percentage: 25.137
- Clipping Points: 0.000
- Dynamic Range: 9099014.583

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 0.000
  - Temporal Variation: 0.101
  - Temporal Flatness: 0.048

- Volume Metrics:
  - Volume Stability: 0.222
  - Volume Range: 25740829.110
  - Volume Variations: 0.040

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.009134430002693
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Phoneme Analysis:
  - Trilled R: {'features': {'modulation_rate': 3412.396290873597, 'strength': 1.4564002752304077}, 'strength': 1.0, 'regularity': 0.0, 'duration': -177.80774116675843, 'overall_quality': 0.5}
  - Interdental Theta: {'energy': 1.7171649932861328, 'consistency': -0.39795219898223877, 'spectral_shape': {'centroid': 0.4623025953769684, 'spread': 0.28357934951782227, 'quality': 0.7393616288900375}, 'quality': 0.6861914743979772}
  - Stop Consonants: {'voiceless_stops': {'strength': 1.0, 'precision': 0.9452079426034381, 'quality': 0.972603971301719}, 'voiced_stops': {'voicing': 0.1356859654188156, 'precision': 0.3153348105134042, 'quality': 0.2255103879661099}, 'overall_quality': 0.5990571796339145}

Syllable Timing:

Intonation Patterns:
  - Contour Patterns: {'mean_pitch': 187.02680422921776, 'pitch_variability': 0.333713884112371, 'rise_fall_ratio': 0.8202764976832523, 'quality': 0.666286115905472}
  - Melodic Features: {'range': 1.0, 'movement': 0.8990564683362993, 'quality': 0.9495282341681497}
  - Overall Quality: 0.808

Vowel Clarity:

Stress Patterns:
2025-02-11 23:48:24,903 - services.translation_routes - INFO - [translation_routes.py:130] - ==================================================

2025-02-11 23:48:24,903 - services.audio_processor - INFO - [audio_processor.py:269] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp1azim4e5.wav
2025-02-11 23:48:24,904 - services.audio_processor - INFO - [audio_processor.py:271] - Audio info - Sample rate: 16000, Channels: 1
2025-02-11 23:48:24,906 - services.audio_processor - INFO - [audio_processor.py:280] - Original audio shape: torch.Size([1, 839634]), Frequency: 16000Hz
2025-02-11 23:48:24,950 - services.audio_processor - INFO - [audio_processor.py:438] - Base audio processing successful, proceeding with enhancement
2025-02-11 23:48:24,964 - services.audio_processor - INFO - [audio_processor.py:446] - Background music analysis: {'has_background_music': True, 'music_confidence': 0.3547474247335353, 'feature_scores': {'spectral_flatness': 0.1747071146868413, 'rhythm_regularity': 0.029706601466992662, 'bass_presence': 0.07999731566149255, 'temporal_stability': 0.0703363929182088}}
2025-02-11 23:48:24,964 - services.audio_processor - INFO - [audio_processor.py:449] - Applying speech-optimized spectral enhancement for spa
2025-02-11 23:48:24,964 - services.audio_processor - WARNING - [audio_processor.py:354] - No specific parameters for spa, using defaults
2025-02-11 23:48:25,042 - services.audio_processor - INFO - [audio_processor.py:459] - Analyzing audio quality...
2025-02-11 23:48:25,128 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-11 23:48:25,128 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-11 23:48:25,144 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-11 23:48:25,144 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-11 23:48:25,161 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-11 23:48:25,161 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-11 23:48:25,184 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-11 23:48:25,184 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-11 23:48:28,194 - services.diagnostics.language_analysis.spanish - ERROR - [spanish.py:161] - Spanish timing analysis failed: 'SpanishAnalyzer' object has no attribute '_find_syllable_boundaries'
2025-02-11 23:48:28,315 - services.diagnostics.language_analysis.spanish - ERROR - [spanish.py:218] - Spanish vowel analysis failed: 'SpanishAnalyzer' object has no attribute '_analyze_vowel_formants'
2025-02-11 23:48:28,321 - services.diagnostics.language_analysis.spanish - ERROR - [spanish.py:249] - Spanish stress analysis failed: 'SpanishAnalyzer' object has no attribute '_find_stress_peaks'
2025-02-11 23:48:28,321 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for spa
2025-02-11 23:48:28,323 - services.translation_routes - INFO - [translation_routes.py:153] - Request 971d6c8b: Background music analysis: {'has_background_music': True, 'music_confidence': 0.3547474247335353, 'feature_scores': {'spectral_flatness': 0.1747071146868413, 'rhythm_regularity': 0.029706601466992662, 'bass_presence': 0.07999731566149255, 'temporal_stability': 0.0703363929182088}}
2025-02-11 23:48:28,323 - services.translation_strategy - INFO - [translation_strategy.py:19] - 
=== AUDIO ANALYSIS ===
2025-02-11 23:48:28,323 - services.translation_strategy - INFO - [translation_strategy.py:29] - 
Audio Quality:
2025-02-11 23:48:28,323 - services.translation_strategy - INFO - [translation_strategy.py:30] - - Audio Clarity: N/A
2025-02-11 23:48:28,323 - services.translation_strategy - INFO - [translation_strategy.py:31] - - Background Noise: N/A
2025-02-11 23:48:28,324 - services.translation_strategy - INFO - [translation_strategy.py:32] - - Voice Consistency: N/A
2025-02-11 23:48:28,324 - services.translation_strategy - INFO - [translation_strategy.py:36] - 
Waveform Characteristics:
2025-02-11 23:48:28,324 - services.translation_strategy - INFO - [translation_strategy.py:37] - - Peak Amplitude: 0.949999988079071
2025-02-11 23:48:28,324 - services.translation_strategy - INFO - [translation_strategy.py:38] - - RMS Level: 0.06587004661560059
2025-02-11 23:48:28,324 - services.translation_strategy - INFO - [translation_strategy.py:39] - - Silence Percentage: 25.136641315949987
2025-02-11 23:48:28,324 - services.translation_strategy - INFO - [translation_strategy.py:61] - 
Just listening to audio characteristics for now...
2025-02-11 23:48:28,324 - services.translation_routes - INFO - [translation_routes.py:165] - Request 971d6c8b: Audio characteristics heard: {'heard_characteristics': {'music': {'detected': False, 'confidence': 0.0}, 'audio_quality': {'clarity': 'N/A', 'background_noise': 'N/A', 'voice_consistency': 'N/A'}, 'waveform': {'peak_amplitude': 0.949999988079071, 'rms_level': 0.06587004661560059, 'silence_percentage': 25.136641315949987}}}
2025-02-11 23:48:28,324 - services.translation_routes - INFO - [translation_routes.py:167] - Request 971d6c8b: Audio processed successfully
2025-02-11 23:48:28,396 - services.translation_routes - INFO - [translation_routes.py:184] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-02-11 23:49:20,329 - services.translation_routes - INFO - [translation_routes.py:223] - Source text: The main thing is to make sure you're balanced on both feet, hands up, elbows in, a lot of people box with their elbows like this, no elbow in, and it really comes out like this as it comes out, it turns straight back to your chin when it's coming out, make sure your shoulder hits your chin, so it protects you, and turn it as it came out, turn it slightly, so you hit it with all four knuckles right here, and this right hand has to stay there.
2025-02-11 23:50:15,236 - services.translation_routes - INFO - [translation_routes.py:243] - Target text: Alright, I've got to throw you through the jug. The main thing is make sure you're balanced on both feet. Hands up. Elbows in. Lots of people box with their elbows like this. No elbows in because of the body shot. And it really comes like this just straight out as it comes out. It turns straight back to the chin. When it's coming out, make sure your shoulder hits your chin so it protects you. Turn it as it is coming out slightly. So you hit with all four knuckles right here and it comes back and this right hand has to stay there.
2025-02-11 23:51:35,830 - services.translation_routes - INFO - [translation_routes.py:267] - Processing tuple output from model
2025-02-11 23:51:35,897 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-11 23:51:35,902 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-11 23:51:35,912 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-11 23:51:35,912 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-11 23:51:35,921 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-11 23:51:35,921 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-11 23:51:35,935 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-11 23:51:35,936 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-11 23:51:36,543 - services.diagnostics.language_analysis.spanish - ERROR - [spanish.py:161] - Spanish timing analysis failed: 'SpanishAnalyzer' object has no attribute '_find_syllable_boundaries'
2025-02-11 23:51:36,599 - services.diagnostics.language_analysis.spanish - ERROR - [spanish.py:218] - Spanish vowel analysis failed: 'SpanishAnalyzer' object has no attribute '_analyze_vowel_formants'
2025-02-11 23:51:36,602 - services.diagnostics.language_analysis.spanish - ERROR - [spanish.py:249] - Spanish stress analysis failed: 'SpanishAnalyzer' object has no attribute '_find_stress_peaks'
2025-02-11 23:51:36,602 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for spa
2025-02-11 23:51:36,604 - services.translation_routes - INFO - [translation_routes.py:294] - 
==================================================
2025-02-11 23:51:36,604 - services.translation_routes - INFO - [translation_routes.py:295] - Translated Audio Quality Report
2025-02-11 23:51:36,604 - services.translation_routes - INFO - [translation_routes.py:296] - ==================================================
2025-02-11 23:51:36,604 - services.translation_routes - INFO - [translation_routes.py:297] - Request ID: 971d6c8b
2025-02-11 23:51:36,604 - services.translation_routes - INFO - [translation_routes.py:298] - Target Language: spa
2025-02-11 23:51:36,604 - services.translation_routes - INFO - [translation_routes.py:299] - --------------------------------------------------
2025-02-11 23:51:36,604 - services.translation_routes - INFO - [translation_routes.py:300] - Audio Quality Analysis Report
==============================

Target Language: spa

Waveform Analysis:
--------------------
- Peak Amplitude: 0.731
- Avg Amplitude: 0.056
- Rms Level: 0.086
- Crest Factor: 8.464
- Zero Crossings: 45449.000
- Silence Percentage: 6.011
- Clipping Points: 0.000
- Dynamic Range: 78.170

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.026
  - Temporal Flatness: 0.014

- Volume Metrics:
  - Volume Stability: 0.320
  - Volume Range: 411.845
  - Volume Variations: 0.049

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0204094826358667
- Background Noise: 4.38568969584264
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Phoneme Analysis:
  - Trilled R: {'features': {'modulation_rate': 3334.3094192288922, 'strength': 1.0441848039627075}, 'strength': 1.0, 'regularity': 0.0, 'duration': -124.51654774729387, 'overall_quality': 0.5}
  - Interdental Theta: {'energy': 0.809749960899353, 'consistency': -2.4253995418548584, 'spectral_shape': {'centroid': 0.4255390167236328, 'spread': 0.2724176049232483, 'quality': 0.7265607118606567}, 'quality': -0.2963629563649495}
  - Stop Consonants: {'voiceless_stops': {'strength': 1.0, 'precision': 0.28120409429265214, 'quality': 0.6406020471463261}, 'voiced_stops': {'voicing': 0.18499286472797394, 'precision': 0.4232870222574364, 'quality': 0.3041399434927052}, 'overall_quality': 0.47237099531951565}

Syllable Timing:

Intonation Patterns:
  - Contour Patterns: {'mean_pitch': 207.4441690304865, 'pitch_variability': 0.21386312196612756, 'rise_fall_ratio': 0.7259887005444636, 'quality': 0.7861368780441819}
  - Melodic Features: {'range': 1.0, 'movement': 0.40750140512765026, 'quality': 0.7037507025638251}
  - Overall Quality: 0.745

Vowel Clarity:

Stress Patterns:
2025-02-11 23:51:36,604 - services.translation_routes - INFO - [translation_routes.py:301] - ==================================================

2025-02-11 23:51:36,604 - services.translation_routes - INFO - [translation_routes.py:307] - Request 971d6c8b: Audio output processed successfully
2025-02-11 23:51:36,620 - services.translation_routes - INFO - [translation_routes.py:362] - Request 971d6c8b: Response prepared successfully
2025-02-11 23:51:36,620 - services.translation_routes - INFO - [translation_routes.py:375] - Request 971d6c8b completed in 194.43s
2025-02-11 23:51:36,624 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 194.43s, Memory Change: -2871.42MB
2025-02-11 23:51:36,624 - __main__ - INFO - [app.py:278] - Request to /translate took 224.68s
2025-02-11 23:57:35,860 - __main__ - INFO - [app.py:217] - Received SIGINT signal
2025-02-11 23:57:35,861 - __main__ - INFO - [app.py:202] - Initiating graceful shutdown...
2025-02-11 23:57:37,756 - __main__ - INFO - [app.py:217] - Received SIGINT signal
2025-02-11 23:57:37,757 - __main__ - INFO - [app.py:202] - Initiating graceful shutdown...
2025-02-11 23:57:42,759 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-02-11 23:57:42,760 - services.model_manager - INFO - [model_manager.py:220] - Cleaning up model resources
2025-02-11 23:57:42,760 - services.model_manager - INFO - [model_manager.py:233] - Model cleanup completed successfully
2025-02-11 23:57:42,764 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-02-11 23:57:42,766 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-02-11 23:57:42,767 - __main__ - INFO - [app.py:206] - Graceful shutdown completed
2025-02-11 23:57:42,769 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-02-11 23:57:42,769 - services.model_manager - INFO - [model_manager.py:220] - Cleaning up model resources
2025-02-11 23:57:42,769 - services.model_manager - INFO - [model_manager.py:233] - Model cleanup completed successfully
2025-02-11 23:57:42,770 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-02-11 23:57:42,771 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-02-11 23:57:42,772 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-02-11 23:57:42,772 - services.model_manager - INFO - [model_manager.py:220] - Cleaning up model resources
2025-02-11 23:57:42,772 - services.model_manager - INFO - [model_manager.py:233] - Model cleanup completed successfully
2025-02-11 23:57:42,774 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-02-11 23:57:42,775 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-02-12 07:22:10,395 - __main__ - INFO - [app.py:467] - Metrics server started on port 8000
2025-02-12 07:22:10,395 - services.model_manager - INFO - [model_manager.py:120] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-02-12 07:22:23,809 - services.model_manager - INFO - [model_manager.py:184] - Models loaded on CPU
2025-02-12 07:22:23,810 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-12 07:22:23,813 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-12 07:22:55,481 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-12 07:22:55,482 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-12 07:23:13,201 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-12 07:23:13,201 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-12 07:23:13,205 - services.model_manager - INFO - [model_manager.py:190] - Model initialization successful
2025-02-12 07:23:13,205 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-12 07:23:13,205 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-12 07:23:28,602 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-12 07:23:28,602 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-12 07:23:47,661 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-12 07:23:47,661 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-12 07:23:47,664 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-02-12 07:23:47,664 - __main__ - INFO - [app.py:491] - ==================================================
2025-02-12 07:23:47,664 - __main__ - INFO - [app.py:492] - Starting LinguaSync Backend
2025-02-12 07:23:47,664 - __main__ - INFO - [app.py:493] - Starting Flask app on port 5001 using cpu
2025-02-12 07:23:47,664 - __main__ - INFO - [app.py:494] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-02-12 07:23:47,664 - __main__ - INFO - [app.py:495] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-02-12 07:23:47,664 - __main__ - INFO - [app.py:496] - Maximum audio length: 300 seconds
2025-02-12 07:23:47,664 - __main__ - INFO - [app.py:497] - Sample rate: 16000 Hz
2025-02-12 07:23:47,664 - __main__ - INFO - [app.py:501] - System memory: 36.0GB total, 13.7GB available
2025-02-12 07:23:47,664 - __main__ - INFO - [app.py:502] - CPU cores: 11
2025-02-12 07:23:47,664 - __main__ - INFO - [app.py:510] - Configuration:
2025-02-12 07:23:47,664 - __main__ - INFO - [app.py:511] - - Debug mode: False
2025-02-12 07:23:47,664 - __main__ - INFO - [app.py:512] - - CORS enabled: True
2025-02-12 07:23:47,664 - __main__ - INFO - [app.py:513] - - Rate limiting: 10 requests per minute
2025-02-12 07:23:47,664 - __main__ - INFO - [app.py:514] - - Metrics enabled: True (port 8000)
2025-02-12 07:23:47,664 - __main__ - INFO - [app.py:516] - ==================================================
2025-02-12 07:24:38,205 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.20MB
2025-02-12 07:24:38,207 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-02-12 07:24:38,213 - services.audio_link_routes - INFO - [audio_link_routes.py:216] - Processing URL: https://youtube.com/shorts/RFUAVaeEd4I?si=DzwEX49L4Ygty4eu
2025-02-12 07:24:38,215 - services.audio_link_routes - INFO - [audio_link_routes.py:233] - Processing YouTube URL
2025-02-12 07:24:38,216 - services.audio_link_routes - INFO - [audio_link_routes.py:120] - Using options for youtube: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpqamhkeap/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8}
2025-02-12 07:24:41,648 - services.audio_link_routes - INFO - [audio_link_routes.py:133] - Successfully downloaded youtube content
2025-02-12 07:24:41,650 - services.audio_link_routes - INFO - [audio_link_routes.py:152] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpqamhkeap/output.wav
2025-02-12 07:24:41,678 - services.audio_link_routes - INFO - [audio_link_routes.py:164] - Successfully converted audio to WAV
2025-02-12 07:24:41,679 - services.audio_link_routes - INFO - [audio_link_routes.py:242] - Successfully processed audio
2025-02-12 07:24:41,679 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 3.47s, Memory Change: 47.72MB
2025-02-12 07:24:41,679 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 3.47s
2025-02-12 07:24:46,869 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-12 07:24:46,871 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-12 07:25:04,652 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-12 07:25:04,655 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-12 07:25:20,955 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-12 07:25:20,956 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-12 07:25:20,959 - services.translation_routes - INFO - [translation_routes.py:36] - Starting translation request cf6539f1
2025-02-12 07:25:20,959 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-02-12 07:25:20,959 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-02-12 07:25:20,960 - services.translation_routes - INFO - [translation_routes.py:97] - Request cf6539f1: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpa5yisaeq.wav
2025-02-12 07:25:20,963 - services.audio_processor - INFO - [audio_processor.py:136] - Audio duration: 52.48 seconds
2025-02-12 07:25:20,963 - services.translation_routes - INFO - [translation_routes.py:112] - Request cf6539f1: Beginning audio processing with diagnostics
2025-02-12 07:25:20,963 - services.audio_processor - INFO - [audio_processor.py:269] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpa5yisaeq.wav
2025-02-12 07:25:20,963 - services.audio_processor - INFO - [audio_processor.py:271] - Audio info - Sample rate: 16000, Channels: 1
2025-02-12 07:25:20,967 - services.audio_processor - INFO - [audio_processor.py:280] - Original audio shape: torch.Size([1, 839634]), Frequency: 16000Hz
2025-02-12 07:25:21,025 - services.audio_processor - INFO - [audio_processor.py:438] - Base audio processing successful, proceeding with enhancement
2025-02-12 07:25:21,047 - services.audio_processor - INFO - [audio_processor.py:446] - Background music analysis: {'has_background_music': True, 'music_confidence': 0.3547474247335353, 'feature_scores': {'spectral_flatness': 0.1747071146868413, 'rhythm_regularity': 0.029706601466992662, 'bass_presence': 0.07999731566149255, 'temporal_stability': 0.0703363929182088}}
2025-02-12 07:25:21,047 - services.audio_processor - INFO - [audio_processor.py:449] - Applying speech-optimized spectral enhancement for spa
2025-02-12 07:25:21,047 - services.audio_processor - WARNING - [audio_processor.py:354] - No specific parameters for spa, using defaults
2025-02-12 07:25:21,115 - services.audio_processor - INFO - [audio_processor.py:459] - Analyzing audio quality...
2025-02-12 07:25:21,210 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 07:25:21,213 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 07:25:21,230 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 07:25:21,231 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 07:25:21,248 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 07:25:21,248 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 07:25:21,266 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 07:25:21,267 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 07:25:23,250 - services.diagnostics.language_analysis.spanish - ERROR - [spanish.py:161] - Spanish timing analysis failed: 'SpanishAnalyzer' object has no attribute '_find_syllable_boundaries'
2025-02-12 07:25:23,369 - services.diagnostics.language_analysis.spanish - ERROR - [spanish.py:218] - Spanish vowel analysis failed: 'SpanishAnalyzer' object has no attribute '_analyze_vowel_formants'
2025-02-12 07:25:23,375 - services.diagnostics.language_analysis.spanish - ERROR - [spanish.py:249] - Spanish stress analysis failed: 'SpanishAnalyzer' object has no attribute '_find_stress_peaks'
2025-02-12 07:25:23,375 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for spa
2025-02-12 07:25:23,376 - services.translation_routes - INFO - [translation_routes.py:123] - 
==================================================
2025-02-12 07:25:23,376 - services.translation_routes - INFO - [translation_routes.py:124] - Input Audio Quality Report
2025-02-12 07:25:23,376 - services.translation_routes - INFO - [translation_routes.py:125] - ==================================================
2025-02-12 07:25:23,376 - services.translation_routes - INFO - [translation_routes.py:126] - Request ID: cf6539f1
2025-02-12 07:25:23,376 - services.translation_routes - INFO - [translation_routes.py:127] - Target Language: spa
2025-02-12 07:25:23,376 - services.translation_routes - INFO - [translation_routes.py:128] - --------------------------------------------------
2025-02-12 07:25:23,376 - services.translation_routes - INFO - [translation_routes.py:129] - Audio Quality Analysis Report
==============================

Target Language: spa

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.038
- Rms Level: 0.066
- Crest Factor: 14.422
- Zero Crossings: 335957.000
- Silence Percentage: 25.137
- Clipping Points: 0.000
- Dynamic Range: 9099014.583

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 0.000
  - Temporal Variation: 0.101
  - Temporal Flatness: 0.048

- Volume Metrics:
  - Volume Stability: 0.222
  - Volume Range: 25740829.110
  - Volume Variations: 0.040

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.009134430002693
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Phoneme Analysis:
  - Trilled R: {'features': {'modulation_rate': 3412.396290873597, 'strength': 1.4564002752304077}, 'strength': 1.0, 'regularity': 0.0, 'duration': -177.80774116675843, 'overall_quality': 0.5}
  - Interdental Theta: {'energy': 1.7171649932861328, 'consistency': -0.39795219898223877, 'spectral_shape': {'centroid': 0.4623025953769684, 'spread': 0.28357934951782227, 'quality': 0.7393616288900375}, 'quality': 0.6861914743979772}
  - Stop Consonants: {'voiceless_stops': {'strength': 1.0, 'precision': 0.9452079426034381, 'quality': 0.972603971301719}, 'voiced_stops': {'voicing': 0.1356859654188156, 'precision': 0.3153348105134042, 'quality': 0.2255103879661099}, 'overall_quality': 0.5990571796339145}

Syllable Timing:

Intonation Patterns:
  - Contour Patterns: {'mean_pitch': 187.02680422921776, 'pitch_variability': 0.333713884112371, 'rise_fall_ratio': 0.8202764976832523, 'quality': 0.666286115905472}
  - Melodic Features: {'range': 1.0, 'movement': 0.8990564683362993, 'quality': 0.9495282341681497}
  - Overall Quality: 0.808

Vowel Clarity:

Stress Patterns:
2025-02-12 07:25:23,376 - services.translation_routes - INFO - [translation_routes.py:130] - ==================================================

2025-02-12 07:25:23,377 - services.audio_processor - INFO - [audio_processor.py:269] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpa5yisaeq.wav
2025-02-12 07:25:23,377 - services.audio_processor - INFO - [audio_processor.py:271] - Audio info - Sample rate: 16000, Channels: 1
2025-02-12 07:25:23,379 - services.audio_processor - INFO - [audio_processor.py:280] - Original audio shape: torch.Size([1, 839634]), Frequency: 16000Hz
2025-02-12 07:25:23,420 - services.audio_processor - INFO - [audio_processor.py:438] - Base audio processing successful, proceeding with enhancement
2025-02-12 07:25:23,431 - services.audio_processor - INFO - [audio_processor.py:446] - Background music analysis: {'has_background_music': True, 'music_confidence': 0.3547474247335353, 'feature_scores': {'spectral_flatness': 0.1747071146868413, 'rhythm_regularity': 0.029706601466992662, 'bass_presence': 0.07999731566149255, 'temporal_stability': 0.0703363929182088}}
2025-02-12 07:25:23,431 - services.audio_processor - INFO - [audio_processor.py:449] - Applying speech-optimized spectral enhancement for spa
2025-02-12 07:25:23,431 - services.audio_processor - WARNING - [audio_processor.py:354] - No specific parameters for spa, using defaults
2025-02-12 07:25:23,494 - services.audio_processor - INFO - [audio_processor.py:459] - Analyzing audio quality...
2025-02-12 07:25:23,583 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 07:25:23,583 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 07:25:23,600 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 07:25:23,600 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 07:25:23,618 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 07:25:23,618 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 07:25:23,636 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 07:25:23,636 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 07:25:25,603 - services.diagnostics.language_analysis.spanish - ERROR - [spanish.py:161] - Spanish timing analysis failed: 'SpanishAnalyzer' object has no attribute '_find_syllable_boundaries'
2025-02-12 07:25:25,722 - services.diagnostics.language_analysis.spanish - ERROR - [spanish.py:218] - Spanish vowel analysis failed: 'SpanishAnalyzer' object has no attribute '_analyze_vowel_formants'
2025-02-12 07:25:25,727 - services.diagnostics.language_analysis.spanish - ERROR - [spanish.py:249] - Spanish stress analysis failed: 'SpanishAnalyzer' object has no attribute '_find_stress_peaks'
2025-02-12 07:25:25,728 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for spa
2025-02-12 07:25:25,729 - services.translation_routes - INFO - [translation_routes.py:153] - Request cf6539f1: Background music analysis: {'has_background_music': True, 'music_confidence': 0.3547474247335353, 'feature_scores': {'spectral_flatness': 0.1747071146868413, 'rhythm_regularity': 0.029706601466992662, 'bass_presence': 0.07999731566149255, 'temporal_stability': 0.0703363929182088}}
2025-02-12 07:25:25,729 - services.translation_strategy - INFO - [translation_strategy.py:19] - 
=== AUDIO ANALYSIS ===
2025-02-12 07:25:25,729 - services.translation_strategy - INFO - [translation_strategy.py:29] - 
Audio Quality:
2025-02-12 07:25:25,729 - services.translation_strategy - INFO - [translation_strategy.py:30] - - Audio Clarity: N/A
2025-02-12 07:25:25,729 - services.translation_strategy - INFO - [translation_strategy.py:31] - - Background Noise: N/A
2025-02-12 07:25:25,729 - services.translation_strategy - INFO - [translation_strategy.py:32] - - Voice Consistency: N/A
2025-02-12 07:25:25,729 - services.translation_strategy - INFO - [translation_strategy.py:36] - 
Waveform Characteristics:
2025-02-12 07:25:25,729 - services.translation_strategy - INFO - [translation_strategy.py:37] - - Peak Amplitude: 0.949999988079071
2025-02-12 07:25:25,729 - services.translation_strategy - INFO - [translation_strategy.py:38] - - RMS Level: 0.06587004661560059
2025-02-12 07:25:25,729 - services.translation_strategy - INFO - [translation_strategy.py:39] - - Silence Percentage: 25.136641315949987
2025-02-12 07:25:25,729 - services.translation_strategy - INFO - [translation_strategy.py:61] - 
Just listening to audio characteristics for now...
2025-02-12 07:25:25,730 - services.translation_routes - INFO - [translation_routes.py:165] - Request cf6539f1: Audio characteristics heard: {'heard_characteristics': {'music': {'detected': False, 'confidence': 0.0}, 'audio_quality': {'clarity': 'N/A', 'background_noise': 'N/A', 'voice_consistency': 'N/A'}, 'waveform': {'peak_amplitude': 0.949999988079071, 'rms_level': 0.06587004661560059, 'silence_percentage': 25.136641315949987}}}
2025-02-12 07:25:25,730 - services.translation_routes - INFO - [translation_routes.py:167] - Request cf6539f1: Audio processed successfully
2025-02-12 07:25:25,775 - services.translation_routes - INFO - [translation_routes.py:184] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-02-12 07:26:05,127 - services.translation_routes - INFO - [translation_routes.py:223] - Source text: The main thing is to make sure you're balanced on both feet, hands up, elbows in, a lot of people box with their elbows like this, no elbow in, and it really comes out like this as it comes out, it turns straight back to your chin when it's coming out, make sure your shoulder hits your chin, so it protects you, and turn it as it came out, turn it slightly, so you hit it with all four knuckles right here, and this right hand has to stay there.
2025-02-12 07:26:48,557 - services.translation_routes - INFO - [translation_routes.py:243] - Target text: Alright, I've got to throw you through the jug. The main thing is make sure you're balanced on both feet. Hands up. Elbows in. Lots of people box with their elbows like this. No elbows in because of the body shot. And it really comes like this just straight out as it comes out. It turns straight back to the chin. When it's coming out, make sure your shoulder hits your chin so it protects you. Turn it as it is coming out slightly. So you hit with all four knuckles right here and it comes back and this right hand has to stay there.
2025-02-12 07:27:18,475 - services.translation_routes - INFO - [translation_routes.py:267] - Processing tuple output from model
2025-02-12 07:27:18,487 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 07:27:18,487 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 07:27:18,491 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 07:27:18,491 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 07:27:18,496 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 07:27:18,496 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 07:27:18,500 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 07:27:18,500 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 07:27:18,612 - services.diagnostics.language_analysis.spanish - ERROR - [spanish.py:161] - Spanish timing analysis failed: 'SpanishAnalyzer' object has no attribute '_find_syllable_boundaries'
2025-02-12 07:27:18,621 - services.diagnostics.language_analysis.spanish - ERROR - [spanish.py:218] - Spanish vowel analysis failed: 'SpanishAnalyzer' object has no attribute '_analyze_vowel_formants'
2025-02-12 07:27:18,622 - services.diagnostics.language_analysis.spanish - ERROR - [spanish.py:249] - Spanish stress analysis failed: 'SpanishAnalyzer' object has no attribute '_find_stress_peaks'
2025-02-12 07:27:18,623 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for spa
2025-02-12 07:27:18,624 - services.translation_routes - INFO - [translation_routes.py:294] - 
==================================================
2025-02-12 07:27:18,624 - services.translation_routes - INFO - [translation_routes.py:295] - Translated Audio Quality Report
2025-02-12 07:27:18,624 - services.translation_routes - INFO - [translation_routes.py:296] - ==================================================
2025-02-12 07:27:18,624 - services.translation_routes - INFO - [translation_routes.py:297] - Request ID: cf6539f1
2025-02-12 07:27:18,624 - services.translation_routes - INFO - [translation_routes.py:298] - Target Language: spa
2025-02-12 07:27:18,624 - services.translation_routes - INFO - [translation_routes.py:299] - --------------------------------------------------
2025-02-12 07:27:18,624 - services.translation_routes - INFO - [translation_routes.py:300] - Audio Quality Analysis Report
==============================

Target Language: spa

Waveform Analysis:
--------------------
- Peak Amplitude: 0.585
- Avg Amplitude: 0.066
- Rms Level: 0.104
- Crest Factor: 5.599
- Zero Crossings: 6369.000
- Silence Percentage: 16.260
- Clipping Points: 0.000
- Dynamic Range: 577.420

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.300
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.028
  - Temporal Flatness: 0.015

- Volume Metrics:
  - Volume Stability: 0.261
  - Volume Range: 2625.132
  - Volume Variations: 0.062

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.037298405408786
- Background Noise: 3.2397584086932265
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
No issues detected

Language-Specific Analysis:
--------------------

Phoneme Analysis:
  - Trilled R: {'features': {'modulation_rate': 3529.526598340654, 'strength': 1.0765678882598877}, 'strength': 1.0, 'regularity': 0.0, 'duration': -136.02050046103307, 'overall_quality': 0.5}
  - Interdental Theta: {'energy': 0.8466175198554993, 'consistency': -2.4851362705230713, 'spectral_shape': {'centroid': 0.421909898519516, 'spread': 0.21899597346782684, 'quality': 0.751456968486309}, 'quality': -0.2956872607270877}
  - Stop Consonants: {'voiceless_stops': {'strength': 1.0, 'precision': 0.24840820011626563, 'quality': 0.6242041000581329}, 'voiced_stops': {'voicing': 0.23814657330513, 'precision': 0.09488798078823135, 'quality': 0.16651727704668068}, 'overall_quality': 0.3953606885524068}

Syllable Timing:

Intonation Patterns:
  - Contour Patterns: {'mean_pitch': 216.03734240692313, 'pitch_variability': 0.22476895688630633, 'rise_fall_ratio': 0.7142857141399417, 'quality': 0.7752310431240979}
  - Melodic Features: {'range': 1.0, 'movement': 0.42496959987168986, 'quality': 0.7124847999358449}
  - Overall Quality: 0.744

Vowel Clarity:

Stress Patterns:
2025-02-12 07:27:18,624 - services.translation_routes - INFO - [translation_routes.py:301] - ==================================================

2025-02-12 07:27:18,624 - services.translation_routes - INFO - [translation_routes.py:307] - Request cf6539f1: Audio output processed successfully
2025-02-12 07:27:18,627 - services.translation_routes - INFO - [translation_routes.py:362] - Request cf6539f1: Response prepared successfully
2025-02-12 07:27:18,627 - services.translation_routes - INFO - [translation_routes.py:375] - Request cf6539f1 completed in 117.67s
2025-02-12 07:27:18,630 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 117.67s, Memory Change: 3212.05MB
2025-02-12 07:27:18,630 - __main__ - INFO - [app.py:278] - Request to /translate took 151.76s
2025-02-12 07:39:35,699 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-02-12 07:39:35,700 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-02-12 07:39:35,702 - services.audio_link_routes - INFO - [audio_link_routes.py:216] - Processing URL: https://www.tiktok.com/@fightjoe/video/7127311328095522053
2025-02-12 07:39:35,702 - services.audio_link_routes - INFO - [audio_link_routes.py:236] - Processing TikTok URL
2025-02-12 07:39:35,703 - services.audio_link_routes - INFO - [audio_link_routes.py:120] - Using options for tiktok: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpbs4ufsqu/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8, 'extractor_args': {'tiktok': {'api_hostname': 'api22-normal-c-alisg.tiktokv.com', 'app_name': 'trill', 'app_version': '34.1.2', 'manifest_app_version': '2023401020', 'app_info': '1234567890123456789/trill///1180', 'device_id': '2094528318954116761'}}}
2025-02-12 07:39:36,036 - services.audio_link_routes - ERROR - [audio_link_routes.py:175] - Download error for tiktok: [0;31mERROR:[0m [TikTok] 7127311328095522053: Unable to extract webpage video data; please report this issue on  https://github.com/yt-dlp/yt-dlp/issues?q= , filling out the appropriate issue template. Confirm you are on the latest version using  yt-dlp -U
2025-02-12 07:39:36,036 - services.audio_link_routes - ERROR - [audio_link_routes.py:182] - tiktok processing error: Unable to access this TikTok content. Please try another video or check the URL.
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.12/site-packages/yt_dlp/YoutubeDL.py", line 1637, in wrapper
    return func(self, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.12/site-packages/yt_dlp/YoutubeDL.py", line 1772, in __extract_info
    ie_result = ie.extract(url)
                ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.12/site-packages/yt_dlp/extractor/common.py", line 742, in extract
    ie_result = self._real_extract(url)
                ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.12/site-packages/yt_dlp/extractor/tiktok.py", line 894, in _real_extract
    video_data, status = self._extract_web_data_and_status(url, video_id)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.12/site-packages/yt_dlp/extractor/tiktok.py", line 250, in _extract_web_data_and_status
    raise ExtractorError('Unable to extract webpage video data')
yt_dlp.utils.ExtractorError: [TikTok] 7127311328095522053: Unable to extract webpage video data; please report this issue on  https://github.com/yt-dlp/yt-dlp/issues?q= , filling out the appropriate issue template. Confirm you are on the latest version using  yt-dlp -U

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/robmills/audio-translation/Backend/services/audio_link_routes.py", line 125, in handle_video_platform_url
    info = ydl.extract_info(url, download=False)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.12/site-packages/yt_dlp/YoutubeDL.py", line 1626, in extract_info
    return self.__extract_info(url, self.get_info_extractor(key), download, extra_info, process)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.12/site-packages/yt_dlp/YoutubeDL.py", line 1655, in wrapper
    self.report_error(str(e), e.format_traceback())
  File "/opt/anaconda3/lib/python3.12/site-packages/yt_dlp/YoutubeDL.py", line 1095, in report_error
    self.trouble(f'{self._format_err("ERROR:", self.Styles.ERROR)} {message}', *args, **kwargs)
  File "/opt/anaconda3/lib/python3.12/site-packages/yt_dlp/YoutubeDL.py", line 1034, in trouble
    raise DownloadError(message, exc_info)
yt_dlp.utils.DownloadError: [0;31mERROR:[0m [TikTok] 7127311328095522053: Unable to extract webpage video data; please report this issue on  https://github.com/yt-dlp/yt-dlp/issues?q= , filling out the appropriate issue template. Confirm you are on the latest version using  yt-dlp -U

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/robmills/audio-translation/Backend/services/audio_link_routes.py", line 177, in handle_video_platform_url
    raise Exception(f"Unable to access this TikTok content. Please try another video or check the URL.")
Exception: Unable to access this TikTok content. Please try another video or check the URL.
2025-02-12 07:39:36,038 - services.audio_link_routes - ERROR - [audio_link_routes.py:250] - Processing error: Unable to access this TikTok content. Please try another video or check the URL.
2025-02-12 07:39:36,041 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.34s, Memory Change: 4.56MB
2025-02-12 07:39:36,041 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.34s
2025-02-12 08:37:39,077 - __main__ - INFO - [app.py:467] - Metrics server started on port 8000
2025-02-12 08:37:39,077 - services.model_manager - INFO - [model_manager.py:120] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-02-12 08:37:52,245 - services.model_manager - INFO - [model_manager.py:184] - Models loaded on CPU
2025-02-12 08:37:52,245 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-12 08:37:52,245 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-12 08:38:14,361 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-12 08:38:14,362 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-12 08:38:32,346 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-12 08:38:32,346 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-12 08:38:32,349 - services.model_manager - INFO - [model_manager.py:190] - Model initialization successful
2025-02-12 08:38:32,349 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-12 08:38:32,349 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-12 08:38:51,918 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-12 08:38:51,919 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-12 08:39:06,979 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-12 08:39:06,979 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-12 08:39:06,982 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-02-12 08:39:06,982 - __main__ - INFO - [app.py:491] - ==================================================
2025-02-12 08:39:06,982 - __main__ - INFO - [app.py:492] - Starting LinguaSync Backend
2025-02-12 08:39:06,982 - __main__ - INFO - [app.py:493] - Starting Flask app on port 5001 using cpu
2025-02-12 08:39:06,982 - __main__ - INFO - [app.py:494] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-02-12 08:39:06,982 - __main__ - INFO - [app.py:495] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-02-12 08:39:06,982 - __main__ - INFO - [app.py:496] - Maximum audio length: 300 seconds
2025-02-12 08:39:06,982 - __main__ - INFO - [app.py:497] - Sample rate: 16000 Hz
2025-02-12 08:39:06,982 - __main__ - INFO - [app.py:501] - System memory: 36.0GB total, 14.5GB available
2025-02-12 08:39:06,982 - __main__ - INFO - [app.py:502] - CPU cores: 11
2025-02-12 08:39:06,982 - __main__ - INFO - [app.py:510] - Configuration:
2025-02-12 08:39:06,982 - __main__ - INFO - [app.py:511] - - Debug mode: False
2025-02-12 08:39:06,982 - __main__ - INFO - [app.py:512] - - CORS enabled: True
2025-02-12 08:39:06,982 - __main__ - INFO - [app.py:513] - - Rate limiting: 10 requests per minute
2025-02-12 08:39:06,982 - __main__ - INFO - [app.py:514] - - Metrics enabled: True (port 8000)
2025-02-12 08:39:06,982 - __main__ - INFO - [app.py:516] - ==================================================
2025-02-12 08:40:41,149 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-02-12 08:40:41,150 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-02-12 08:40:41,153 - services.audio_link_routes - INFO - [audio_link_routes.py:216] - Processing URL: https://www.tiktok.com/@fightjoe/video/7127311328095522053
2025-02-12 08:40:41,154 - services.audio_link_routes - INFO - [audio_link_routes.py:236] - Processing TikTok URL
2025-02-12 08:40:41,155 - services.audio_link_routes - INFO - [audio_link_routes.py:120] - Using options for tiktok: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpkhtwa49j/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8, 'extractor_args': {'tiktok': {'api_hostname': 'api22-normal-c-alisg.tiktokv.com', 'app_name': 'trill', 'app_version': '34.1.2', 'manifest_app_version': '2023401020', 'app_info': '1234567890123456789/trill///1180', 'device_id': '2284548983856573606'}}}
2025-02-12 08:40:42,797 - services.audio_link_routes - INFO - [audio_link_routes.py:133] - Successfully downloaded tiktok content
2025-02-12 08:40:42,798 - services.audio_link_routes - INFO - [audio_link_routes.py:152] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpkhtwa49j/output.wav
2025-02-12 08:40:42,803 - services.audio_link_routes - INFO - [audio_link_routes.py:164] - Successfully converted audio to WAV
2025-02-12 08:40:42,803 - services.audio_link_routes - INFO - [audio_link_routes.py:242] - Successfully processed audio
2025-02-12 08:40:42,804 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 1.65s, Memory Change: 9.64MB
2025-02-12 08:40:42,804 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 1.65s
2025-02-12 08:40:44,141 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-12 08:40:44,142 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-12 08:41:01,917 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-12 08:41:01,917 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-12 08:41:24,431 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-12 08:41:24,431 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-12 08:41:24,434 - services.translation_routes - INFO - [translation_routes.py:36] - Starting translation request 5c22ce97
2025-02-12 08:41:24,434 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-02-12 08:41:24,434 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-02-12 08:41:24,435 - services.translation_routes - INFO - [translation_routes.py:97] - Request 5c22ce97: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpr9ks58s6.wav
2025-02-12 08:41:24,435 - services.audio_processor - INFO - [audio_processor.py:136] - Audio duration: 6.57 seconds
2025-02-12 08:41:24,435 - services.translation_routes - INFO - [translation_routes.py:112] - Request 5c22ce97: Beginning audio processing with diagnostics
2025-02-12 08:41:24,435 - services.audio_processor - INFO - [audio_processor.py:269] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpr9ks58s6.wav
2025-02-12 08:41:24,435 - services.audio_processor - INFO - [audio_processor.py:271] - Audio info - Sample rate: 16000, Channels: 1
2025-02-12 08:41:24,436 - services.audio_processor - INFO - [audio_processor.py:280] - Original audio shape: torch.Size([1, 105163]), Frequency: 16000Hz
2025-02-12 08:41:24,442 - services.audio_processor - INFO - [audio_processor.py:438] - Base audio processing successful, proceeding with enhancement
2025-02-12 08:41:24,445 - services.audio_processor - INFO - [audio_processor.py:446] - Background music analysis: {'has_background_music': False, 'music_confidence': 0.15608341036219223, 'feature_scores': {'spectral_flatness': 0.03820588165673722, 'rhythm_regularity': 0.023762376237623763, 'bass_presence': 0.039862824445829455, 'temporal_stability': 0.054252328022001785}}
2025-02-12 08:41:24,445 - services.audio_processor - INFO - [audio_processor.py:449] - Applying speech-optimized spectral enhancement for fra
2025-02-12 08:41:24,454 - services.audio_processor - INFO - [audio_processor.py:459] - Analyzing audio quality...
2025-02-12 08:41:24,466 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 08:41:24,466 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 08:41:24,469 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 08:41:24,469 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 08:41:24,472 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 08:41:24,472 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 08:41:24,476 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 08:41:24,476 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 08:41:24,629 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-12 08:41:24,629 - services.translation_routes - INFO - [translation_routes.py:123] - 
==================================================
2025-02-12 08:41:24,629 - services.translation_routes - INFO - [translation_routes.py:124] - Input Audio Quality Report
2025-02-12 08:41:24,629 - services.translation_routes - INFO - [translation_routes.py:125] - ==================================================
2025-02-12 08:41:24,630 - services.translation_routes - INFO - [translation_routes.py:126] - Request ID: 5c22ce97
2025-02-12 08:41:24,630 - services.translation_routes - INFO - [translation_routes.py:127] - Target Language: fra
2025-02-12 08:41:24,630 - services.translation_routes - INFO - [translation_routes.py:128] - --------------------------------------------------
2025-02-12 08:41:24,630 - services.translation_routes - INFO - [translation_routes.py:129] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.026
- Rms Level: 0.076
- Crest Factor: 12.530
- Zero Crossings: 29106.000
- Silence Percentage: 62.741
- Clipping Points: 0.000
- Dynamic Range: 6753166.765

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.082
  - Temporal Flatness: 0.024

- Volume Metrics:
  - Volume Stability: -0.671
  - Volume Range: 28777495.027
  - Volume Variations: 0.065

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.012101101788277
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 1.0195544958114624, 'stability': 3.234647035598755, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.004738867282867432, 'distinction': 0.9893258810043335}
  - Description: Strong nasal resonance. Unstable nasal resonance. Clear distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.653
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.045
  - Rhythm Quality: 0.090
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.007
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-02-12 08:41:24,630 - services.translation_routes - INFO - [translation_routes.py:130] - ==================================================

2025-02-12 08:41:24,630 - services.audio_processor - INFO - [audio_processor.py:269] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpr9ks58s6.wav
2025-02-12 08:41:24,630 - services.audio_processor - INFO - [audio_processor.py:271] - Audio info - Sample rate: 16000, Channels: 1
2025-02-12 08:41:24,631 - services.audio_processor - INFO - [audio_processor.py:280] - Original audio shape: torch.Size([1, 105163]), Frequency: 16000Hz
2025-02-12 08:41:24,639 - services.audio_processor - INFO - [audio_processor.py:438] - Base audio processing successful, proceeding with enhancement
2025-02-12 08:41:24,643 - services.audio_processor - INFO - [audio_processor.py:446] - Background music analysis: {'has_background_music': False, 'music_confidence': 0.15608341036219223, 'feature_scores': {'spectral_flatness': 0.03820588165673722, 'rhythm_regularity': 0.023762376237623763, 'bass_presence': 0.039862824445829455, 'temporal_stability': 0.054252328022001785}}
2025-02-12 08:41:24,643 - services.audio_processor - INFO - [audio_processor.py:449] - Applying speech-optimized spectral enhancement for fra
2025-02-12 08:41:24,656 - services.audio_processor - INFO - [audio_processor.py:459] - Analyzing audio quality...
2025-02-12 08:41:24,668 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 08:41:24,668 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 08:41:24,675 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 08:41:24,675 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 08:41:24,681 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 08:41:24,681 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 08:41:24,686 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 08:41:24,686 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 08:41:24,845 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-12 08:41:24,845 - services.translation_routes - INFO - [translation_routes.py:153] - Request 5c22ce97: Background music analysis: {'has_background_music': False, 'music_confidence': 0.15608341036219223, 'feature_scores': {'spectral_flatness': 0.03820588165673722, 'rhythm_regularity': 0.023762376237623763, 'bass_presence': 0.039862824445829455, 'temporal_stability': 0.054252328022001785}}
2025-02-12 08:41:24,845 - services.translation_strategy - INFO - [translation_strategy.py:19] - 
=== AUDIO ANALYSIS ===
2025-02-12 08:41:24,845 - services.translation_strategy - INFO - [translation_strategy.py:29] - 
Audio Quality:
2025-02-12 08:41:24,845 - services.translation_strategy - INFO - [translation_strategy.py:30] - - Audio Clarity: N/A
2025-02-12 08:41:24,845 - services.translation_strategy - INFO - [translation_strategy.py:31] - - Background Noise: N/A
2025-02-12 08:41:24,845 - services.translation_strategy - INFO - [translation_strategy.py:32] - - Voice Consistency: N/A
2025-02-12 08:41:24,845 - services.translation_strategy - INFO - [translation_strategy.py:36] - 
Waveform Characteristics:
2025-02-12 08:41:24,845 - services.translation_strategy - INFO - [translation_strategy.py:37] - - Peak Amplitude: 0.9499999284744263
2025-02-12 08:41:24,845 - services.translation_strategy - INFO - [translation_strategy.py:38] - - RMS Level: 0.07581577450037003
2025-02-12 08:41:24,845 - services.translation_strategy - INFO - [translation_strategy.py:39] - - Silence Percentage: 62.741044207317074
2025-02-12 08:41:24,845 - services.translation_strategy - INFO - [translation_strategy.py:61] - 
Just listening to audio characteristics for now...
2025-02-12 08:41:24,845 - services.translation_routes - INFO - [translation_routes.py:165] - Request 5c22ce97: Audio characteristics heard: {'heard_characteristics': {'music': {'detected': False, 'confidence': 0.0}, 'audio_quality': {'clarity': 'N/A', 'background_noise': 'N/A', 'voice_consistency': 'N/A'}, 'waveform': {'peak_amplitude': 0.9499999284744263, 'rms_level': 0.07581577450037003, 'silence_percentage': 62.741044207317074}}}
2025-02-12 08:41:24,846 - services.translation_routes - INFO - [translation_routes.py:167] - Request 5c22ce97: Audio processed successfully
2025-02-12 08:41:24,852 - services.translation_routes - INFO - [translation_routes.py:184] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-02-12 08:41:30,100 - services.translation_routes - INFO - [translation_routes.py:223] - Source text: if you wouldn't fight what do you think it would be I would definitely be a diabetic
2025-02-12 08:41:36,556 - services.translation_routes - INFO - [translation_routes.py:243] - Target text: Si tu ne faisais pas ça, ce que tu penses que tu pourrais faire, je serais définitivement diabétique.
2025-02-12 08:41:43,887 - services.translation_routes - INFO - [translation_routes.py:267] - Processing tuple output from model
2025-02-12 08:41:43,897 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 08:41:43,897 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 08:41:43,901 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 08:41:43,901 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 08:41:43,905 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 08:41:43,905 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 08:41:43,908 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 08:41:43,908 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 08:41:44,030 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-12 08:41:44,030 - services.translation_routes - INFO - [translation_routes.py:294] - 
==================================================
2025-02-12 08:41:44,030 - services.translation_routes - INFO - [translation_routes.py:295] - Translated Audio Quality Report
2025-02-12 08:41:44,030 - services.translation_routes - INFO - [translation_routes.py:296] - ==================================================
2025-02-12 08:41:44,030 - services.translation_routes - INFO - [translation_routes.py:297] - Request ID: 5c22ce97
2025-02-12 08:41:44,030 - services.translation_routes - INFO - [translation_routes.py:298] - Target Language: fra
2025-02-12 08:41:44,030 - services.translation_routes - INFO - [translation_routes.py:299] - --------------------------------------------------
2025-02-12 08:41:44,030 - services.translation_routes - INFO - [translation_routes.py:300] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.405
- Avg Amplitude: 0.050
- Rms Level: 0.081
- Crest Factor: 4.966
- Zero Crossings: 11447.000
- Silence Percentage: 12.487
- Clipping Points: 0.000
- Dynamic Range: 199.361

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.379
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.020
  - Temporal Flatness: 0.012

- Volume Metrics:
  - Volume Stability: 0.221
  - Volume Range: 494.642
  - Volume Variations: 0.050

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.032803180759568
- Background Noise: 2.9865528843701488
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.6857079863548279, 'stability': 3.2134814262390137, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.15083637833595276, 'consistency': 0.0, 'distinction': 1.0}
  - Description: Moderate nasal resonance. Unstable nasal resonance. Clear distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.499
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.004
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-02-12 08:41:44,030 - services.translation_routes - INFO - [translation_routes.py:301] - ==================================================

2025-02-12 08:41:44,030 - services.translation_routes - INFO - [translation_routes.py:307] - Request 5c22ce97: Audio output processed successfully
2025-02-12 08:41:44,033 - services.translation_routes - INFO - [translation_routes.py:362] - Request 5c22ce97: Response prepared successfully
2025-02-12 08:41:44,033 - services.translation_routes - INFO - [translation_routes.py:375] - Request 5c22ce97 completed in 19.60s
2025-02-12 08:41:44,033 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 19.60s, Memory Change: 363.17MB
2025-02-12 08:41:44,033 - __main__ - INFO - [app.py:278] - Request to /translate took 59.89s
2025-02-12 09:21:48,705 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.52MB
2025-02-12 09:21:48,708 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-02-12 09:21:48,712 - services.audio_link_routes - INFO - [audio_link_routes.py:216] - Processing URL: https://youtube.com/shorts/RFUAVaeEd4I?si=DzwEX49L4Ygty4eu
2025-02-12 09:21:48,714 - services.audio_link_routes - INFO - [audio_link_routes.py:233] - Processing YouTube URL
2025-02-12 09:21:48,715 - services.audio_link_routes - INFO - [audio_link_routes.py:120] - Using options for youtube: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp3m97eqcw/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8}
2025-02-12 09:21:52,164 - services.audio_link_routes - INFO - [audio_link_routes.py:133] - Successfully downloaded youtube content
2025-02-12 09:21:52,166 - services.audio_link_routes - INFO - [audio_link_routes.py:152] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp3m97eqcw/output.wav
2025-02-12 09:21:52,195 - services.audio_link_routes - INFO - [audio_link_routes.py:164] - Successfully converted audio to WAV
2025-02-12 09:21:52,196 - services.audio_link_routes - INFO - [audio_link_routes.py:242] - Successfully processed audio
2025-02-12 09:21:52,196 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 3.49s, Memory Change: 250.86MB
2025-02-12 09:21:52,196 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 3.49s
2025-02-12 09:21:53,303 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-12 09:21:53,305 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-12 09:22:09,567 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-12 09:22:09,567 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-12 09:22:25,061 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-12 09:22:25,062 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-12 09:22:25,065 - services.translation_routes - INFO - [translation_routes.py:36] - Starting translation request 9f7d1bc3
2025-02-12 09:22:25,065 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-02-12 09:22:25,065 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-02-12 09:22:25,068 - services.translation_routes - INFO - [translation_routes.py:97] - Request 9f7d1bc3: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmper9wbpwn.wav
2025-02-12 09:22:25,068 - services.audio_processor - INFO - [audio_processor.py:136] - Audio duration: 52.48 seconds
2025-02-12 09:22:25,068 - services.translation_routes - INFO - [translation_routes.py:112] - Request 9f7d1bc3: Beginning audio processing with diagnostics
2025-02-12 09:22:25,068 - services.audio_processor - INFO - [audio_processor.py:269] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmper9wbpwn.wav
2025-02-12 09:22:25,068 - services.audio_processor - INFO - [audio_processor.py:271] - Audio info - Sample rate: 16000, Channels: 1
2025-02-12 09:22:25,071 - services.audio_processor - INFO - [audio_processor.py:280] - Original audio shape: torch.Size([1, 839634]), Frequency: 16000Hz
2025-02-12 09:22:25,111 - services.audio_processor - INFO - [audio_processor.py:438] - Base audio processing successful, proceeding with enhancement
2025-02-12 09:22:25,123 - services.audio_processor - INFO - [audio_processor.py:446] - Background music analysis: {'has_background_music': True, 'music_confidence': 0.3547474247335353, 'feature_scores': {'spectral_flatness': 0.1747071146868413, 'rhythm_regularity': 0.029706601466992662, 'bass_presence': 0.07999731566149255, 'temporal_stability': 0.0703363929182088}}
2025-02-12 09:22:25,123 - services.audio_processor - INFO - [audio_processor.py:449] - Applying speech-optimized spectral enhancement for fra
2025-02-12 09:22:25,186 - services.audio_processor - INFO - [audio_processor.py:459] - Analyzing audio quality...
2025-02-12 09:22:25,270 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 09:22:25,271 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 09:22:25,288 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 09:22:25,289 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 09:22:25,304 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 09:22:25,304 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 09:22:25,321 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 09:22:25,321 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 09:22:27,322 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-12 09:22:27,322 - services.translation_routes - INFO - [translation_routes.py:123] - 
==================================================
2025-02-12 09:22:27,322 - services.translation_routes - INFO - [translation_routes.py:124] - Input Audio Quality Report
2025-02-12 09:22:27,322 - services.translation_routes - INFO - [translation_routes.py:125] - ==================================================
2025-02-12 09:22:27,322 - services.translation_routes - INFO - [translation_routes.py:126] - Request ID: 9f7d1bc3
2025-02-12 09:22:27,322 - services.translation_routes - INFO - [translation_routes.py:127] - Target Language: fra
2025-02-12 09:22:27,322 - services.translation_routes - INFO - [translation_routes.py:128] - --------------------------------------------------
2025-02-12 09:22:27,322 - services.translation_routes - INFO - [translation_routes.py:129] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.038
- Rms Level: 0.066
- Crest Factor: 14.422
- Zero Crossings: 335957.000
- Silence Percentage: 25.137
- Clipping Points: 0.000
- Dynamic Range: 9099014.583

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 0.000
  - Temporal Variation: 0.101
  - Temporal Flatness: 0.048

- Volume Metrics:
  - Volume Stability: 0.222
  - Volume Range: 25740829.110
  - Volume Variations: 0.040

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.009134430002693
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 1.0607566833496094, 'stability': 1.490928292274475, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.6918656826019287, 'distinction': 0.06730042397975922}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.510
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.775
  - Rhythm Quality: 0.812
  - Intonation Quality: 0.738

Vowel Quality:
  - Quality Score: 0.013
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-02-12 09:22:27,322 - services.translation_routes - INFO - [translation_routes.py:130] - ==================================================

2025-02-12 09:22:27,322 - services.audio_processor - INFO - [audio_processor.py:269] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmper9wbpwn.wav
2025-02-12 09:22:27,323 - services.audio_processor - INFO - [audio_processor.py:271] - Audio info - Sample rate: 16000, Channels: 1
2025-02-12 09:22:27,325 - services.audio_processor - INFO - [audio_processor.py:280] - Original audio shape: torch.Size([1, 839634]), Frequency: 16000Hz
2025-02-12 09:22:27,365 - services.audio_processor - INFO - [audio_processor.py:438] - Base audio processing successful, proceeding with enhancement
2025-02-12 09:22:27,375 - services.audio_processor - INFO - [audio_processor.py:446] - Background music analysis: {'has_background_music': True, 'music_confidence': 0.3547474247335353, 'feature_scores': {'spectral_flatness': 0.1747071146868413, 'rhythm_regularity': 0.029706601466992662, 'bass_presence': 0.07999731566149255, 'temporal_stability': 0.0703363929182088}}
2025-02-12 09:22:27,375 - services.audio_processor - INFO - [audio_processor.py:449] - Applying speech-optimized spectral enhancement for fra
2025-02-12 09:22:27,440 - services.audio_processor - INFO - [audio_processor.py:459] - Analyzing audio quality...
2025-02-12 09:22:27,526 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 09:22:27,527 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 09:22:27,544 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 09:22:27,544 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 09:22:27,559 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 09:22:27,560 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 09:22:27,577 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 09:22:27,578 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 09:22:29,506 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-12 09:22:29,507 - services.translation_routes - INFO - [translation_routes.py:153] - Request 9f7d1bc3: Background music analysis: {'has_background_music': True, 'music_confidence': 0.3547474247335353, 'feature_scores': {'spectral_flatness': 0.1747071146868413, 'rhythm_regularity': 0.029706601466992662, 'bass_presence': 0.07999731566149255, 'temporal_stability': 0.0703363929182088}}
2025-02-12 09:22:29,507 - services.translation_strategy - INFO - [translation_strategy.py:19] - 
=== AUDIO ANALYSIS ===
2025-02-12 09:22:29,507 - services.translation_strategy - INFO - [translation_strategy.py:29] - 
Audio Quality:
2025-02-12 09:22:29,507 - services.translation_strategy - INFO - [translation_strategy.py:30] - - Audio Clarity: N/A
2025-02-12 09:22:29,507 - services.translation_strategy - INFO - [translation_strategy.py:31] - - Background Noise: N/A
2025-02-12 09:22:29,508 - services.translation_strategy - INFO - [translation_strategy.py:32] - - Voice Consistency: N/A
2025-02-12 09:22:29,508 - services.translation_strategy - INFO - [translation_strategy.py:36] - 
Waveform Characteristics:
2025-02-12 09:22:29,508 - services.translation_strategy - INFO - [translation_strategy.py:37] - - Peak Amplitude: 0.949999988079071
2025-02-12 09:22:29,508 - services.translation_strategy - INFO - [translation_strategy.py:38] - - RMS Level: 0.06587004661560059
2025-02-12 09:22:29,508 - services.translation_strategy - INFO - [translation_strategy.py:39] - - Silence Percentage: 25.136641315949987
2025-02-12 09:22:29,508 - services.translation_strategy - INFO - [translation_strategy.py:61] - 
Just listening to audio characteristics for now...
2025-02-12 09:22:29,508 - services.translation_routes - INFO - [translation_routes.py:165] - Request 9f7d1bc3: Audio characteristics heard: {'heard_characteristics': {'music': {'detected': False, 'confidence': 0.0}, 'audio_quality': {'clarity': 'N/A', 'background_noise': 'N/A', 'voice_consistency': 'N/A'}, 'waveform': {'peak_amplitude': 0.949999988079071, 'rms_level': 0.06587004661560059, 'silence_percentage': 25.136641315949987}}}
2025-02-12 09:22:29,508 - services.translation_routes - INFO - [translation_routes.py:167] - Request 9f7d1bc3: Audio processed successfully
2025-02-12 09:22:29,553 - services.translation_routes - INFO - [translation_routes.py:184] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-02-12 09:23:07,152 - services.translation_routes - INFO - [translation_routes.py:223] - Source text: The main thing is to make sure you're balanced on both feet, hands up, elbows in, a lot of people box with their elbows like this, no elbow in, and it really comes out like this as it comes out, it turns straight back to your chin when it's coming out, make sure your shoulder hits your chin, so it protects you, and turn it as it came out, turn it slightly, so you hit it with all four knuckles right here, and this right hand has to stay there.
2025-02-12 09:23:30,664 - services.translation_routes - INFO - [translation_routes.py:243] - Target text: [Musique épique, chanteuse et comédienne qui a fait de l'humour dans le monde entier en faisant du bruit d'un coup de poing sur son visage et ses doigts.]
2025-02-12 09:23:58,284 - services.translation_routes - INFO - [translation_routes.py:267] - Processing tuple output from model
2025-02-12 09:23:58,289 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 09:23:58,289 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 09:23:58,292 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 09:23:58,292 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 09:23:58,295 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 09:23:58,295 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 09:23:58,296 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 09:23:58,297 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 09:23:58,335 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-12 09:23:58,335 - services.translation_routes - INFO - [translation_routes.py:294] - 
==================================================
2025-02-12 09:23:58,335 - services.translation_routes - INFO - [translation_routes.py:295] - Translated Audio Quality Report
2025-02-12 09:23:58,335 - services.translation_routes - INFO - [translation_routes.py:296] - ==================================================
2025-02-12 09:23:58,335 - services.translation_routes - INFO - [translation_routes.py:297] - Request ID: 9f7d1bc3
2025-02-12 09:23:58,335 - services.translation_routes - INFO - [translation_routes.py:298] - Target Language: fra
2025-02-12 09:23:58,335 - services.translation_routes - INFO - [translation_routes.py:299] - --------------------------------------------------
2025-02-12 09:23:58,335 - services.translation_routes - INFO - [translation_routes.py:300] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.438
- Avg Amplitude: 0.051
- Rms Level: 0.089
- Crest Factor: 4.933
- Zero Crossings: 1618.000
- Silence Percentage: 33.181
- Clipping Points: 0.000
- Dynamic Range: 1848.612

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.383
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.021
  - Temporal Flatness: 0.010

- Volume Metrics:
  - Volume Stability: 0.071
  - Volume Range: 2046.369
  - Volume Variations: 0.062

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.036029811839437
- Background Noise: 2.973261087887499
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': nan, 'stability': nan, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 1.0, 'distinction': 1.0}
  - Description: Weak nasal resonance. Unstable nasal resonance. Clear distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.629
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 1.000

Vowel Quality:
  - Quality Score: 0.004
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-02-12 09:23:58,335 - services.translation_routes - INFO - [translation_routes.py:301] - ==================================================

2025-02-12 09:23:58,335 - services.translation_routes - INFO - [translation_routes.py:307] - Request 9f7d1bc3: Audio output processed successfully
2025-02-12 09:23:58,337 - services.translation_routes - INFO - [translation_routes.py:362] - Request 9f7d1bc3: Response prepared successfully
2025-02-12 09:23:58,338 - services.translation_routes - INFO - [translation_routes.py:375] - Request 9f7d1bc3 completed in 93.27s
2025-02-12 09:23:58,339 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 93.27s, Memory Change: 3025.25MB
2025-02-12 09:23:58,339 - __main__ - INFO - [app.py:278] - Request to /translate took 125.04s
2025-02-12 09:30:49,103 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.50MB
2025-02-12 09:30:49,106 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.01s
2025-02-12 09:30:49,109 - services.audio_link_routes - INFO - [audio_link_routes.py:216] - Processing URL: https://www.tiktok.com/@loganpaul/video/7138576512512478510
2025-02-12 09:30:49,111 - services.audio_link_routes - INFO - [audio_link_routes.py:236] - Processing TikTok URL
2025-02-12 09:30:49,112 - services.audio_link_routes - INFO - [audio_link_routes.py:120] - Using options for tiktok: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp7cdoutm3/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8, 'extractor_args': {'tiktok': {'api_hostname': 'api22-normal-c-alisg.tiktokv.com', 'app_name': 'trill', 'app_version': '34.1.2', 'manifest_app_version': '2023401020', 'app_info': '1234567890123456789/trill///1180', 'device_id': '2899093922328963941'}}}
2025-02-12 09:30:50,655 - services.audio_link_routes - INFO - [audio_link_routes.py:133] - Successfully downloaded tiktok content
2025-02-12 09:30:50,657 - services.audio_link_routes - INFO - [audio_link_routes.py:152] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp7cdoutm3/output.wav
2025-02-12 09:30:50,698 - services.audio_link_routes - INFO - [audio_link_routes.py:164] - Successfully converted audio to WAV
2025-02-12 09:30:50,699 - services.audio_link_routes - INFO - [audio_link_routes.py:242] - Successfully processed audio
2025-02-12 09:30:50,700 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 1.59s, Memory Change: 69.50MB
2025-02-12 09:30:50,700 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 1.59s
2025-02-12 09:30:53,491 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-12 09:30:53,493 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-12 09:31:12,682 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-12 09:31:12,683 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-12 09:31:31,934 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-12 09:31:31,935 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-12 09:31:31,939 - services.translation_routes - INFO - [translation_routes.py:36] - Starting translation request fdede233
2025-02-12 09:31:31,939 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-02-12 09:31:31,939 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-02-12 09:31:31,942 - services.translation_routes - INFO - [translation_routes.py:97] - Request fdede233: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpd4tg6brr.wav
2025-02-12 09:31:31,942 - services.audio_processor - INFO - [audio_processor.py:136] - Audio duration: 73.49 seconds
2025-02-12 09:31:31,942 - services.translation_routes - INFO - [translation_routes.py:112] - Request fdede233: Beginning audio processing with diagnostics
2025-02-12 09:31:31,942 - services.audio_processor - INFO - [audio_processor.py:269] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpd4tg6brr.wav
2025-02-12 09:31:31,942 - services.audio_processor - INFO - [audio_processor.py:271] - Audio info - Sample rate: 16000, Channels: 1
2025-02-12 09:31:31,945 - services.audio_processor - INFO - [audio_processor.py:280] - Original audio shape: torch.Size([1, 1175881]), Frequency: 16000Hz
2025-02-12 09:31:32,006 - services.audio_processor - INFO - [audio_processor.py:438] - Base audio processing successful, proceeding with enhancement
2025-02-12 09:31:32,023 - services.audio_processor - INFO - [audio_processor.py:446] - Background music analysis: {'has_background_music': True, 'music_confidence': 0.4059628791204464, 'feature_scores': {'spectral_flatness': 0.1651322301984485, 'rhythm_regularity': 0.026939843068875327, 'bass_presence': 0.144706807566402, 'temporal_stability': 0.0691839982867205}}
2025-02-12 09:31:32,023 - services.audio_processor - INFO - [audio_processor.py:449] - Applying speech-optimized spectral enhancement for fra
2025-02-12 09:31:32,116 - services.audio_processor - INFO - [audio_processor.py:459] - Analyzing audio quality...
2025-02-12 09:31:32,234 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 09:31:32,235 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 09:31:32,264 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 09:31:32,264 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 09:31:32,287 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 09:31:32,288 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 09:31:32,310 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 09:31:32,310 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 09:31:34,822 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-12 09:31:34,823 - services.translation_routes - INFO - [translation_routes.py:123] - 
==================================================
2025-02-12 09:31:34,823 - services.translation_routes - INFO - [translation_routes.py:124] - Input Audio Quality Report
2025-02-12 09:31:34,823 - services.translation_routes - INFO - [translation_routes.py:125] - ==================================================
2025-02-12 09:31:34,823 - services.translation_routes - INFO - [translation_routes.py:126] - Request ID: fdede233
2025-02-12 09:31:34,823 - services.translation_routes - INFO - [translation_routes.py:127] - Target Language: fra
2025-02-12 09:31:34,823 - services.translation_routes - INFO - [translation_routes.py:128] - --------------------------------------------------
2025-02-12 09:31:34,823 - services.translation_routes - INFO - [translation_routes.py:129] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.035
- Rms Level: 0.064
- Crest Factor: 14.883
- Zero Crossings: 397415.000
- Silence Percentage: 25.553
- Clipping Points: 0.000
- Dynamic Range: 8430051.767

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.083
  - Temporal Flatness: 0.038

- Volume Metrics:
  - Volume Stability: 0.155
  - Volume Range: 27185562.253
  - Volume Variations: 0.041

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.008577188259245
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 1.5588304996490479, 'stability': 2.4418985843658447, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.5834342241287231, 'distinction': 0.13374167680740356}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.559
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.713
  - Rhythm Quality: 0.702
  - Intonation Quality: 0.724

Vowel Quality:
  - Quality Score: 0.010
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-02-12 09:31:34,823 - services.translation_routes - INFO - [translation_routes.py:130] - ==================================================

2025-02-12 09:31:34,823 - services.audio_processor - INFO - [audio_processor.py:269] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpd4tg6brr.wav
2025-02-12 09:31:34,823 - services.audio_processor - INFO - [audio_processor.py:271] - Audio info - Sample rate: 16000, Channels: 1
2025-02-12 09:31:34,826 - services.audio_processor - INFO - [audio_processor.py:280] - Original audio shape: torch.Size([1, 1175881]), Frequency: 16000Hz
2025-02-12 09:31:34,936 - services.audio_processor - INFO - [audio_processor.py:438] - Base audio processing successful, proceeding with enhancement
2025-02-12 09:31:34,954 - services.audio_processor - INFO - [audio_processor.py:446] - Background music analysis: {'has_background_music': True, 'music_confidence': 0.4059628791204464, 'feature_scores': {'spectral_flatness': 0.1651322301984485, 'rhythm_regularity': 0.026939843068875327, 'bass_presence': 0.144706807566402, 'temporal_stability': 0.0691839982867205}}
2025-02-12 09:31:34,954 - services.audio_processor - INFO - [audio_processor.py:449] - Applying speech-optimized spectral enhancement for fra
2025-02-12 09:31:35,053 - services.audio_processor - INFO - [audio_processor.py:459] - Analyzing audio quality...
2025-02-12 09:31:35,175 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 09:31:35,176 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 09:31:35,202 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 09:31:35,202 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 09:31:35,229 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 09:31:35,229 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 09:31:35,254 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 09:31:35,255 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 09:31:37,747 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-12 09:31:37,748 - services.translation_routes - INFO - [translation_routes.py:153] - Request fdede233: Background music analysis: {'has_background_music': True, 'music_confidence': 0.4059628791204464, 'feature_scores': {'spectral_flatness': 0.1651322301984485, 'rhythm_regularity': 0.026939843068875327, 'bass_presence': 0.144706807566402, 'temporal_stability': 0.0691839982867205}}
2025-02-12 09:31:37,748 - services.translation_strategy - INFO - [translation_strategy.py:19] - 
=== AUDIO ANALYSIS ===
2025-02-12 09:31:37,748 - services.translation_strategy - INFO - [translation_strategy.py:29] - 
Audio Quality:
2025-02-12 09:31:37,748 - services.translation_strategy - INFO - [translation_strategy.py:30] - - Audio Clarity: N/A
2025-02-12 09:31:37,748 - services.translation_strategy - INFO - [translation_strategy.py:31] - - Background Noise: N/A
2025-02-12 09:31:37,748 - services.translation_strategy - INFO - [translation_strategy.py:32] - - Voice Consistency: N/A
2025-02-12 09:31:37,748 - services.translation_strategy - INFO - [translation_strategy.py:36] - 
Waveform Characteristics:
2025-02-12 09:31:37,748 - services.translation_strategy - INFO - [translation_strategy.py:37] - - Peak Amplitude: 0.949999988079071
2025-02-12 09:31:37,748 - services.translation_strategy - INFO - [translation_strategy.py:38] - - RMS Level: 0.06382925063371658
2025-02-12 09:31:37,748 - services.translation_strategy - INFO - [translation_strategy.py:39] - - Silence Percentage: 25.552556199651644
2025-02-12 09:31:37,748 - services.translation_strategy - INFO - [translation_strategy.py:61] - 
Just listening to audio characteristics for now...
2025-02-12 09:31:37,748 - services.translation_routes - INFO - [translation_routes.py:165] - Request fdede233: Audio characteristics heard: {'heard_characteristics': {'music': {'detected': False, 'confidence': 0.0}, 'audio_quality': {'clarity': 'N/A', 'background_noise': 'N/A', 'voice_consistency': 'N/A'}, 'waveform': {'peak_amplitude': 0.949999988079071, 'rms_level': 0.06382925063371658, 'silence_percentage': 25.552556199651644}}}
2025-02-12 09:31:37,748 - services.translation_routes - INFO - [translation_routes.py:167] - Request fdede233: Audio processed successfully
2025-02-12 09:31:37,811 - services.translation_routes - INFO - [translation_routes.py:184] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-02-12 09:32:24,843 - services.audio_link_routes - INFO - [audio_link_routes.py:216] - Processing URL: https://youtu.be/xDYy5qafTXY?si=bPvmOIPxuc7fvs-Z
2025-02-12 09:32:24,845 - services.audio_link_routes - INFO - [audio_link_routes.py:233] - Processing YouTube URL
2025-02-12 09:32:24,845 - services.audio_link_routes - INFO - [audio_link_routes.py:120] - Using options for youtube: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpp9bvyqmp/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8}
2025-02-12 09:32:29,622 - services.audio_link_routes - INFO - [audio_link_routes.py:133] - Successfully downloaded youtube content
2025-02-12 09:32:29,624 - services.audio_link_routes - INFO - [audio_link_routes.py:152] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpp9bvyqmp/output.wav
2025-02-12 09:32:29,667 - services.audio_link_routes - INFO - [audio_link_routes.py:164] - Successfully converted audio to WAV
2025-02-12 09:32:29,668 - services.audio_link_routes - INFO - [audio_link_routes.py:242] - Successfully processed audio
2025-02-12 09:32:29,668 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 4.83s, Memory Change: 153.94MB
2025-02-12 09:32:29,669 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 4.83s
2025-02-12 09:32:32,100 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-12 09:32:32,108 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-12 09:32:48,542 - services.translation_routes - INFO - [translation_routes.py:223] - Source text: This photo doesn't make sense. There's a plane that takes you up in the air and it feels like the passengers are floating. My goal was to throw them all into the air when we were at the peak of the pharaoh, weightless and I would be floating around in the center of my work. We couldn't believe it. It's one of those things where I can describe it as much as I want, but until you experience it, there's nothing like it. That's why I felt captured the epitome of this project. A photo that on paper makes no fucking sense and shouldn't be possible.
2025-02-12 09:33:03,201 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-12 09:33:03,201 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-12 09:33:35,764 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-12 09:33:35,765 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-12 09:33:35,781 - services.translation_routes - INFO - [translation_routes.py:36] - Starting translation request 31cc1bda
2025-02-12 09:33:35,781 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-02-12 09:33:35,782 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-02-12 09:33:35,788 - services.translation_routes - INFO - [translation_routes.py:97] - Request 31cc1bda: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpfe0ih7ch.wav
2025-02-12 09:33:35,793 - services.audio_processor - INFO - [audio_processor.py:136] - Audio duration: 69.18 seconds
2025-02-12 09:33:35,793 - services.translation_routes - INFO - [translation_routes.py:112] - Request 31cc1bda: Beginning audio processing with diagnostics
2025-02-12 09:33:35,794 - services.audio_processor - INFO - [audio_processor.py:269] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpfe0ih7ch.wav
2025-02-12 09:33:35,794 - services.audio_processor - INFO - [audio_processor.py:271] - Audio info - Sample rate: 16000, Channels: 1
2025-02-12 09:33:35,807 - services.audio_processor - INFO - [audio_processor.py:280] - Original audio shape: torch.Size([1, 1106919]), Frequency: 16000Hz
2025-02-12 09:33:35,924 - services.audio_processor - INFO - [audio_processor.py:438] - Base audio processing successful, proceeding with enhancement
2025-02-12 09:33:35,963 - services.audio_processor - INFO - [audio_processor.py:446] - Background music analysis: {'has_background_music': False, 'music_confidence': 0.20938998197072828, 'feature_scores': {'spectral_flatness': 0.08400185351212022, 'rhythm_regularity': 0.023911028730305837, 'bass_presence': 0.020109010040956245, 'temporal_stability': 0.08136808968734596}}
2025-02-12 09:33:35,963 - services.audio_processor - INFO - [audio_processor.py:449] - Applying speech-optimized spectral enhancement for fra
2025-02-12 09:33:36,095 - services.audio_processor - INFO - [audio_processor.py:459] - Analyzing audio quality...
2025-02-12 09:33:36,250 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 09:33:36,255 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 09:33:36,298 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 09:33:36,299 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 09:33:36,340 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 09:33:36,340 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 09:33:36,382 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 09:33:36,382 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 09:33:39,772 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-12 09:33:39,773 - services.translation_routes - INFO - [translation_routes.py:123] - 
==================================================
2025-02-12 09:33:39,773 - services.translation_routes - INFO - [translation_routes.py:124] - Input Audio Quality Report
2025-02-12 09:33:39,773 - services.translation_routes - INFO - [translation_routes.py:125] - ==================================================
2025-02-12 09:33:39,773 - services.translation_routes - INFO - [translation_routes.py:126] - Request ID: 31cc1bda
2025-02-12 09:33:39,773 - services.translation_routes - INFO - [translation_routes.py:127] - Target Language: fra
2025-02-12 09:33:39,773 - services.translation_routes - INFO - [translation_routes.py:128] - --------------------------------------------------
2025-02-12 09:33:39,773 - services.translation_routes - INFO - [translation_routes.py:129] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.069
- Rms Level: 0.114
- Crest Factor: 8.317
- Zero Crossings: 294432.000
- Silence Percentage: 23.702
- Clipping Points: 0.000
- Dynamic Range: 17318057.992

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.095
  - Temporal Flatness: 0.054

- Volume Metrics:
  - Volume Stability: 0.207
  - Volume Range: 39045333.862
  - Volume Variations: 0.071

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.027470416722832
- Background Noise: 4.326625974972339
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
No issues detected

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.8366706967353821, 'stability': 1.8690263032913208, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.5019978880882263, 'consistency': 0.290225088596344, 'distinction': 0.2739231586456299}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.406
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.234
  - Rhythm Quality: 0.390
  - Intonation Quality: 0.078

Vowel Quality:
  - Quality Score: 0.003
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-02-12 09:33:39,773 - services.translation_routes - INFO - [translation_routes.py:130] - ==================================================

2025-02-12 09:33:39,773 - services.audio_processor - INFO - [audio_processor.py:269] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpfe0ih7ch.wav
2025-02-12 09:33:39,773 - services.audio_processor - INFO - [audio_processor.py:271] - Audio info - Sample rate: 16000, Channels: 1
2025-02-12 09:33:39,777 - services.audio_processor - INFO - [audio_processor.py:280] - Original audio shape: torch.Size([1, 1106919]), Frequency: 16000Hz
2025-02-12 09:33:39,852 - services.audio_processor - INFO - [audio_processor.py:438] - Base audio processing successful, proceeding with enhancement
2025-02-12 09:33:39,872 - services.audio_processor - INFO - [audio_processor.py:446] - Background music analysis: {'has_background_music': False, 'music_confidence': 0.20938998197072828, 'feature_scores': {'spectral_flatness': 0.08400185351212022, 'rhythm_regularity': 0.023911028730305837, 'bass_presence': 0.020109010040956245, 'temporal_stability': 0.08136808968734596}}
2025-02-12 09:33:39,872 - services.audio_processor - INFO - [audio_processor.py:449] - Applying speech-optimized spectral enhancement for fra
2025-02-12 09:33:39,994 - services.audio_processor - INFO - [audio_processor.py:459] - Analyzing audio quality...
2025-02-12 09:33:40,134 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 09:33:40,135 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 09:33:40,176 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 09:33:40,177 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 09:33:40,211 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 09:33:40,212 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 09:33:40,248 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 09:33:40,249 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 09:33:43,651 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-12 09:33:43,652 - services.translation_routes - INFO - [translation_routes.py:153] - Request 31cc1bda: Background music analysis: {'has_background_music': False, 'music_confidence': 0.20938998197072828, 'feature_scores': {'spectral_flatness': 0.08400185351212022, 'rhythm_regularity': 0.023911028730305837, 'bass_presence': 0.020109010040956245, 'temporal_stability': 0.08136808968734596}}
2025-02-12 09:33:43,652 - services.translation_strategy - INFO - [translation_strategy.py:19] - 
=== AUDIO ANALYSIS ===
2025-02-12 09:33:43,652 - services.translation_strategy - INFO - [translation_strategy.py:29] - 
Audio Quality:
2025-02-12 09:33:43,652 - services.translation_strategy - INFO - [translation_strategy.py:30] - - Audio Clarity: N/A
2025-02-12 09:33:43,652 - services.translation_strategy - INFO - [translation_strategy.py:31] - - Background Noise: N/A
2025-02-12 09:33:43,652 - services.translation_strategy - INFO - [translation_strategy.py:32] - - Voice Consistency: N/A
2025-02-12 09:33:43,652 - services.translation_strategy - INFO - [translation_strategy.py:36] - 
Waveform Characteristics:
2025-02-12 09:33:43,652 - services.translation_strategy - INFO - [translation_strategy.py:37] - - Peak Amplitude: 0.9499999284744263
2025-02-12 09:33:43,652 - services.translation_strategy - INFO - [translation_strategy.py:38] - - RMS Level: 0.11422983556985855
2025-02-12 09:33:43,652 - services.translation_strategy - INFO - [translation_strategy.py:39] - - Silence Percentage: 23.70153105482304
2025-02-12 09:33:43,652 - services.translation_strategy - INFO - [translation_strategy.py:61] - 
Just listening to audio characteristics for now...
2025-02-12 09:33:43,652 - services.translation_routes - INFO - [translation_routes.py:165] - Request 31cc1bda: Audio characteristics heard: {'heard_characteristics': {'music': {'detected': False, 'confidence': 0.0}, 'audio_quality': {'clarity': 'N/A', 'background_noise': 'N/A', 'voice_consistency': 'N/A'}, 'waveform': {'peak_amplitude': 0.9499999284744263, 'rms_level': 0.11422983556985855, 'silence_percentage': 23.70153105482304}}}
2025-02-12 09:33:43,652 - services.translation_routes - INFO - [translation_routes.py:167] - Request 31cc1bda: Audio processed successfully
2025-02-12 09:33:43,757 - services.translation_routes - INFO - [translation_routes.py:184] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-02-12 09:34:04,542 - services.translation_routes - INFO - [translation_routes.py:243] - Target text: C'est une sorte de réalité irréaliste que j'ai capturé l'épitome de ce projet et c'est pourquoi cette photo qui sur papier fait pas de putain de sens et ne devrait pas être possible est 99 originaux.
2025-02-12 09:34:54,184 - services.translation_routes - INFO - [translation_routes.py:223] - Source text: When the night shadows fall then the door will open out of the window paints light will twinkle yellow fear no all the black heed no hurricane willow fear neither root nor bow tom goes on before you hey now mary do we'll be waiting for you
2025-02-12 09:36:00,792 - services.translation_routes - INFO - [translation_routes.py:267] - Processing tuple output from model
2025-02-12 09:36:00,826 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 09:36:00,827 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 09:36:00,834 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 09:36:00,834 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 09:36:00,841 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 09:36:00,841 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 09:36:00,851 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 09:36:00,852 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 09:36:01,006 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-12 09:36:01,008 - services.translation_routes - INFO - [translation_routes.py:294] - 
==================================================
2025-02-12 09:36:01,008 - services.translation_routes - INFO - [translation_routes.py:295] - Translated Audio Quality Report
2025-02-12 09:36:01,008 - services.translation_routes - INFO - [translation_routes.py:296] - ==================================================
2025-02-12 09:36:01,008 - services.translation_routes - INFO - [translation_routes.py:297] - Request ID: fdede233
2025-02-12 09:36:01,009 - services.translation_routes - INFO - [translation_routes.py:298] - Target Language: fra
2025-02-12 09:36:01,009 - services.translation_routes - INFO - [translation_routes.py:299] - --------------------------------------------------
2025-02-12 09:36:01,009 - services.translation_routes - INFO - [translation_routes.py:300] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.724
- Avg Amplitude: 0.063
- Rms Level: 0.097
- Crest Factor: 7.468
- Zero Crossings: 9734.000
- Silence Percentage: 10.267
- Clipping Points: 0.000
- Dynamic Range: 177.640

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.066
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.024
  - Temporal Flatness: 0.014

- Volume Metrics:
  - Volume Stability: 0.321
  - Volume Range: 623.675
  - Volume Variations: 0.055

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.025960622532331
- Background Noise: 3.987361594386015
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.7784932255744934, 'stability': 3.268470287322998, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.18699483573436737, 'consistency': 0.0, 'distinction': 1.0}
  - Description: Strong nasal resonance. Unstable nasal resonance. Clear distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.509
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.004
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-02-12 09:36:01,009 - services.translation_routes - INFO - [translation_routes.py:301] - ==================================================

2025-02-12 09:36:01,009 - services.translation_routes - INFO - [translation_routes.py:307] - Request fdede233: Audio output processed successfully
2025-02-12 09:36:01,015 - services.translation_routes - INFO - [translation_routes.py:362] - Request fdede233: Response prepared successfully
2025-02-12 09:36:01,016 - services.translation_routes - INFO - [translation_routes.py:375] - Request fdede233 completed in 269.08s
2025-02-12 09:36:01,018 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 269.08s, Memory Change: -731.86MB
2025-02-12 09:36:01,018 - __main__ - INFO - [app.py:278] - Request to /translate took 307.53s
2025-02-12 09:36:08,821 - services.translation_routes - INFO - [translation_routes.py:243] - Target text: hop along my little friends up with you windows toms going on ahead candles for the king down the west since the sun soon you will be broken when the night shadows fall then the door will open out of the window paints light will twinkle yellow fear no all the black heed no horry willow fear neither root nor bow tom goes on before you hey now mary do we'll be waiting for you
2025-02-12 09:37:19,426 - services.translation_routes - INFO - [translation_routes.py:267] - Processing tuple output from model
2025-02-12 09:37:19,456 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 09:37:19,457 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 09:37:19,464 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 09:37:19,464 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 09:37:19,473 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 09:37:19,473 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 09:37:19,481 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 09:37:19,481 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 09:37:19,910 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-12 09:37:19,910 - services.translation_routes - INFO - [translation_routes.py:294] - 
==================================================
2025-02-12 09:37:19,910 - services.translation_routes - INFO - [translation_routes.py:295] - Translated Audio Quality Report
2025-02-12 09:37:19,910 - services.translation_routes - INFO - [translation_routes.py:296] - ==================================================
2025-02-12 09:37:19,910 - services.translation_routes - INFO - [translation_routes.py:297] - Request ID: 31cc1bda
2025-02-12 09:37:19,910 - services.translation_routes - INFO - [translation_routes.py:298] - Target Language: fra
2025-02-12 09:37:19,910 - services.translation_routes - INFO - [translation_routes.py:299] - --------------------------------------------------
2025-02-12 09:37:19,910 - services.translation_routes - INFO - [translation_routes.py:300] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.655
- Avg Amplitude: 0.069
- Rms Level: 0.097
- Crest Factor: 6.724
- Zero Crossings: 31858.000
- Silence Percentage: 5.328
- Clipping Points: 0.000
- Dynamic Range: 65.592

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.160
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.026
  - Temporal Flatness: 0.015

- Volume Metrics:
  - Volume Stability: 0.478
  - Volume Range: 153.171
  - Volume Variations: 0.045

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.028998212654001
- Background Noise: 3.6894995771552868
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.8409481048583984, 'stability': 3.538668632507324, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.07662992924451828, 'consistency': 0.0, 'distinction': 0.08752179890871048}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.534
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.003
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-02-12 09:37:19,910 - services.translation_routes - INFO - [translation_routes.py:301] - ==================================================

2025-02-12 09:37:19,910 - services.translation_routes - INFO - [translation_routes.py:307] - Request 31cc1bda: Audio output processed successfully
2025-02-12 09:37:19,915 - services.translation_routes - INFO - [translation_routes.py:362] - Request 31cc1bda: Response prepared successfully
2025-02-12 09:37:19,916 - services.translation_routes - INFO - [translation_routes.py:375] - Request 31cc1bda completed in 224.14s
2025-02-12 09:37:19,918 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 224.14s, Memory Change: -448.70MB
2025-02-12 09:37:19,918 - __main__ - INFO - [app.py:278] - Request to /translate took 287.82s
2025-02-12 19:43:12,029 - __main__ - INFO - [app.py:217] - Received SIGINT signal
2025-02-12 19:43:12,032 - __main__ - INFO - [app.py:202] - Initiating graceful shutdown...
2025-02-12 19:43:17,037 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-02-12 19:43:17,039 - services.model_manager - INFO - [model_manager.py:233] - Cleaning up model resources
2025-02-12 19:43:17,040 - services.model_manager - INFO - [model_manager.py:246] - Model cleanup completed successfully
2025-02-12 19:43:17,046 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-02-12 19:43:17,048 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-02-12 19:43:17,050 - __main__ - INFO - [app.py:206] - Graceful shutdown completed
2025-02-12 19:43:17,052 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-02-12 19:43:17,053 - services.model_manager - INFO - [model_manager.py:233] - Cleaning up model resources
2025-02-12 19:43:17,053 - services.model_manager - INFO - [model_manager.py:246] - Model cleanup completed successfully
2025-02-12 19:43:17,054 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-02-12 19:43:17,055 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-02-12 19:43:17,056 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-02-12 19:43:17,056 - services.model_manager - INFO - [model_manager.py:233] - Cleaning up model resources
2025-02-12 19:43:17,056 - services.model_manager - INFO - [model_manager.py:246] - Model cleanup completed successfully
2025-02-12 19:43:17,056 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-02-12 19:43:17,057 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-02-12 19:43:39,966 - __main__ - INFO - [app.py:467] - Metrics server started on port 8000
2025-02-12 19:43:39,966 - services.model_manager - INFO - [model_manager.py:120] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-02-12 19:44:07,398 - services.model_manager - INFO - [model_manager.py:184] - Models loaded on CPU
2025-02-12 19:44:07,399 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-12 19:44:07,400 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-12 19:44:41,301 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-12 19:44:41,302 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-12 19:44:57,861 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-12 19:44:57,862 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-12 19:44:57,865 - services.model_manager - INFO - [model_manager.py:190] - Model initialization successful
2025-02-12 19:44:57,865 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-12 19:44:57,865 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-12 19:45:16,937 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-12 19:45:16,937 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-12 19:45:35,758 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-12 19:45:35,759 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-12 19:45:35,762 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-02-12 19:45:35,763 - __main__ - INFO - [app.py:491] - ==================================================
2025-02-12 19:45:35,763 - __main__ - INFO - [app.py:492] - Starting LinguaSync Backend
2025-02-12 19:45:35,763 - __main__ - INFO - [app.py:493] - Starting Flask app on port 5001 using cpu
2025-02-12 19:45:35,763 - __main__ - INFO - [app.py:494] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-02-12 19:45:35,763 - __main__ - INFO - [app.py:495] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-02-12 19:45:35,763 - __main__ - INFO - [app.py:496] - Maximum audio length: 300 seconds
2025-02-12 19:45:35,763 - __main__ - INFO - [app.py:497] - Sample rate: 16000 Hz
2025-02-12 19:45:35,763 - __main__ - INFO - [app.py:501] - System memory: 36.0GB total, 11.1GB available
2025-02-12 19:45:35,763 - __main__ - INFO - [app.py:502] - CPU cores: 11
2025-02-12 19:45:35,763 - __main__ - INFO - [app.py:510] - Configuration:
2025-02-12 19:45:35,763 - __main__ - INFO - [app.py:511] - - Debug mode: False
2025-02-12 19:45:35,763 - __main__ - INFO - [app.py:512] - - CORS enabled: True
2025-02-12 19:45:35,763 - __main__ - INFO - [app.py:513] - - Rate limiting: 10 requests per minute
2025-02-12 19:45:35,763 - __main__ - INFO - [app.py:514] - - Metrics enabled: True (port 8000)
2025-02-12 19:45:35,763 - __main__ - INFO - [app.py:516] - ==================================================
2025-02-12 19:47:48,053 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-02-12 19:47:48,054 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-02-12 19:47:48,057 - services.audio_link_routes - INFO - [audio_link_routes.py:216] - Processing URL: https://youtube.com/shorts/RFUAVaeEd4I?si=DzwEX49L4Ygty4eu
2025-02-12 19:47:48,057 - services.audio_link_routes - INFO - [audio_link_routes.py:233] - Processing YouTube URL
2025-02-12 19:47:48,058 - services.audio_link_routes - INFO - [audio_link_routes.py:120] - Using options for youtube: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpvkxjw7k1/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8}
2025-02-12 19:47:54,260 - services.audio_link_routes - INFO - [audio_link_routes.py:133] - Successfully downloaded youtube content
2025-02-12 19:47:54,262 - services.audio_link_routes - INFO - [audio_link_routes.py:152] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpvkxjw7k1/output.wav
2025-02-12 19:47:54,290 - services.audio_link_routes - INFO - [audio_link_routes.py:164] - Successfully converted audio to WAV
2025-02-12 19:47:54,290 - services.audio_link_routes - INFO - [audio_link_routes.py:242] - Successfully processed audio
2025-02-12 19:47:54,291 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 6.23s, Memory Change: 14.58MB
2025-02-12 19:47:54,291 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 6.23s
2025-02-12 19:47:59,020 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-12 19:47:59,022 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-12 19:48:08,677 - services.audio_link_routes - INFO - [audio_link_routes.py:216] - Processing URL: https://youtu.be/xDYy5qafTXY?si=bPvmOIPxuc7fvs-Z
2025-02-12 19:48:08,678 - services.audio_link_routes - INFO - [audio_link_routes.py:233] - Processing YouTube URL
2025-02-12 19:48:08,678 - services.audio_link_routes - INFO - [audio_link_routes.py:120] - Using options for youtube: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpkjiret_1/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8}
2025-02-12 19:48:15,501 - services.audio_link_routes - INFO - [audio_link_routes.py:133] - Successfully downloaded youtube content
2025-02-12 19:48:15,504 - services.audio_link_routes - INFO - [audio_link_routes.py:152] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpkjiret_1/output.wav
2025-02-12 19:48:15,551 - services.audio_link_routes - INFO - [audio_link_routes.py:164] - Successfully converted audio to WAV
2025-02-12 19:48:15,552 - services.audio_link_routes - INFO - [audio_link_routes.py:242] - Successfully processed audio
2025-02-12 19:48:15,553 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 6.88s, Memory Change: 53.02MB
2025-02-12 19:48:15,553 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 6.88s
2025-02-12 19:48:17,192 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-12 19:48:17,193 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-12 19:48:18,374 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-12 19:48:18,374 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-12 19:48:42,558 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-12 19:48:42,559 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-12 19:48:42,562 - services.translation_routes - INFO - [translation_routes.py:36] - Starting translation request 6d921851
2025-02-12 19:48:42,563 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-02-12 19:48:42,563 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-02-12 19:48:42,567 - services.translation_routes - INFO - [translation_routes.py:97] - Request 6d921851: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp_83uwghb.wav
2025-02-12 19:48:42,567 - services.audio_processor - INFO - [audio_processor.py:136] - Audio duration: 52.48 seconds
2025-02-12 19:48:42,567 - services.translation_routes - INFO - [translation_routes.py:112] - Request 6d921851: Beginning audio processing with diagnostics
2025-02-12 19:48:42,567 - services.audio_processor - INFO - [audio_processor.py:269] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp_83uwghb.wav
2025-02-12 19:48:42,568 - services.audio_processor - INFO - [audio_processor.py:271] - Audio info - Sample rate: 16000, Channels: 1
2025-02-12 19:48:42,570 - services.audio_processor - INFO - [audio_processor.py:280] - Original audio shape: torch.Size([1, 839634]), Frequency: 16000Hz
2025-02-12 19:48:42,625 - services.audio_processor - INFO - [audio_processor.py:438] - Base audio processing successful, proceeding with enhancement
2025-02-12 19:48:42,650 - services.audio_processor - INFO - [audio_processor.py:446] - Background music analysis: {'has_background_music': True, 'music_confidence': 0.3547474247335353, 'feature_scores': {'spectral_flatness': 0.1747071146868413, 'rhythm_regularity': 0.029706601466992662, 'bass_presence': 0.07999731566149255, 'temporal_stability': 0.0703363929182088}}
2025-02-12 19:48:42,650 - services.audio_processor - INFO - [audio_processor.py:449] - Applying speech-optimized spectral enhancement for fra
2025-02-12 19:48:42,744 - services.audio_processor - INFO - [audio_processor.py:459] - Analyzing audio quality...
2025-02-12 19:48:42,854 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 19:48:42,855 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 19:48:42,885 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 19:48:42,885 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 19:48:42,913 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 19:48:42,913 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 19:48:42,941 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 19:48:42,941 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 19:48:45,424 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-12 19:48:45,424 - services.translation_routes - INFO - [translation_routes.py:123] - 
==================================================
2025-02-12 19:48:45,424 - services.translation_routes - INFO - [translation_routes.py:124] - Input Audio Quality Report
2025-02-12 19:48:45,424 - services.translation_routes - INFO - [translation_routes.py:125] - ==================================================
2025-02-12 19:48:45,424 - services.translation_routes - INFO - [translation_routes.py:126] - Request ID: 6d921851
2025-02-12 19:48:45,424 - services.translation_routes - INFO - [translation_routes.py:127] - Target Language: fra
2025-02-12 19:48:45,424 - services.translation_routes - INFO - [translation_routes.py:128] - --------------------------------------------------
2025-02-12 19:48:45,425 - services.translation_routes - INFO - [translation_routes.py:129] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.038
- Rms Level: 0.066
- Crest Factor: 14.422
- Zero Crossings: 335957.000
- Silence Percentage: 25.137
- Clipping Points: 0.000
- Dynamic Range: 9099014.583

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 0.000
  - Temporal Variation: 0.101
  - Temporal Flatness: 0.048

- Volume Metrics:
  - Volume Stability: 0.222
  - Volume Range: 25740829.110
  - Volume Variations: 0.040

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.009134430002693
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 1.0607566833496094, 'stability': 1.490928292274475, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.6918656826019287, 'distinction': 0.06730042397975922}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.510
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.775
  - Rhythm Quality: 0.812
  - Intonation Quality: 0.738

Vowel Quality:
  - Quality Score: 0.013
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-02-12 19:48:45,425 - services.translation_routes - INFO - [translation_routes.py:130] - ==================================================

2025-02-12 19:48:45,425 - services.audio_processor - INFO - [audio_processor.py:269] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp_83uwghb.wav
2025-02-12 19:48:45,425 - services.audio_processor - INFO - [audio_processor.py:271] - Audio info - Sample rate: 16000, Channels: 1
2025-02-12 19:48:45,428 - services.audio_processor - INFO - [audio_processor.py:280] - Original audio shape: torch.Size([1, 839634]), Frequency: 16000Hz
2025-02-12 19:48:45,483 - services.audio_processor - INFO - [audio_processor.py:438] - Base audio processing successful, proceeding with enhancement
2025-02-12 19:48:45,498 - services.audio_processor - INFO - [audio_processor.py:446] - Background music analysis: {'has_background_music': True, 'music_confidence': 0.3547474247335353, 'feature_scores': {'spectral_flatness': 0.1747071146868413, 'rhythm_regularity': 0.029706601466992662, 'bass_presence': 0.07999731566149255, 'temporal_stability': 0.0703363929182088}}
2025-02-12 19:48:45,498 - services.audio_processor - INFO - [audio_processor.py:449] - Applying speech-optimized spectral enhancement for fra
2025-02-12 19:48:45,592 - services.audio_processor - INFO - [audio_processor.py:459] - Analyzing audio quality...
2025-02-12 19:48:45,700 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 19:48:45,701 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 19:48:45,729 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 19:48:45,729 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 19:48:45,762 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 19:48:45,762 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 19:48:45,789 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 19:48:45,789 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 19:48:48,259 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-12 19:48:48,260 - services.translation_routes - INFO - [translation_routes.py:153] - Request 6d921851: Background music analysis: {'has_background_music': True, 'music_confidence': 0.3547474247335353, 'feature_scores': {'spectral_flatness': 0.1747071146868413, 'rhythm_regularity': 0.029706601466992662, 'bass_presence': 0.07999731566149255, 'temporal_stability': 0.0703363929182088}}
2025-02-12 19:48:48,260 - services.translation_routes - ERROR - [translation_routes.py:169] - Audio processing error: 'TranslationStrategy' object has no attribute 'select_strategy'
2025-02-12 19:48:48,260 - services.translation_routes - INFO - [translation_routes.py:375] - Request 6d921851 completed in 5.70s
2025-02-12 19:48:48,260 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 5.70s, Memory Change: 112.19MB
2025-02-12 19:48:48,260 - __main__ - INFO - [app.py:278] - Request to /translate took 49.24s
2025-02-12 19:48:50,618 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-12 19:48:50,618 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-12 19:49:09,801 - services.audio_link_routes - INFO - [audio_link_routes.py:216] - Processing URL: https://www.tiktok.com/@fightjoe/video/7127311328095522053?is_from_webapp=1&sender_device=pc&web_id=7470222526028858902
2025-02-12 19:49:09,803 - services.audio_link_routes - INFO - [audio_link_routes.py:236] - Processing TikTok URL
2025-02-12 19:49:09,803 - services.audio_link_routes - INFO - [audio_link_routes.py:120] - Using options for tiktok: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpwuubvfon/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8, 'extractor_args': {'tiktok': {'api_hostname': 'api22-normal-c-alisg.tiktokv.com', 'app_name': 'trill', 'app_version': '34.1.2', 'manifest_app_version': '2023401020', 'app_info': '1234567890123456789/trill///1180', 'device_id': '9953722873351516592'}}}
2025-02-12 19:49:12,207 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-12 19:49:12,207 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-12 19:49:12,212 - services.translation_routes - INFO - [translation_routes.py:36] - Starting translation request 41cd5d86
2025-02-12 19:49:12,212 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-02-12 19:49:12,212 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-02-12 19:49:12,215 - services.translation_routes - INFO - [translation_routes.py:97] - Request 41cd5d86: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp5idhoeqi.wav
2025-02-12 19:49:12,216 - services.audio_processor - INFO - [audio_processor.py:136] - Audio duration: 69.18 seconds
2025-02-12 19:49:12,216 - services.translation_routes - INFO - [translation_routes.py:112] - Request 41cd5d86: Beginning audio processing with diagnostics
2025-02-12 19:49:12,216 - services.audio_processor - INFO - [audio_processor.py:269] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp5idhoeqi.wav
2025-02-12 19:49:12,216 - services.audio_processor - INFO - [audio_processor.py:271] - Audio info - Sample rate: 16000, Channels: 1
2025-02-12 19:49:12,219 - services.audio_processor - INFO - [audio_processor.py:280] - Original audio shape: torch.Size([1, 1106919]), Frequency: 16000Hz
2025-02-12 19:49:12,274 - services.audio_processor - INFO - [audio_processor.py:438] - Base audio processing successful, proceeding with enhancement
2025-02-12 19:49:12,289 - services.audio_processor - INFO - [audio_processor.py:446] - Background music analysis: {'has_background_music': False, 'music_confidence': 0.20938998197072828, 'feature_scores': {'spectral_flatness': 0.08400185351212022, 'rhythm_regularity': 0.023911028730305837, 'bass_presence': 0.020109010040956245, 'temporal_stability': 0.08136808968734596}}
2025-02-12 19:49:12,289 - services.audio_processor - INFO - [audio_processor.py:449] - Applying speech-optimized spectral enhancement for fra
2025-02-12 19:49:12,373 - services.audio_processor - INFO - [audio_processor.py:459] - Analyzing audio quality...
2025-02-12 19:49:12,483 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 19:49:12,484 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 19:49:12,507 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 19:49:12,508 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 19:49:12,530 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 19:49:12,530 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 19:49:12,551 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 19:49:12,552 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 19:49:13,206 - services.audio_link_routes - INFO - [audio_link_routes.py:133] - Successfully downloaded tiktok content
2025-02-12 19:49:13,221 - services.audio_link_routes - INFO - [audio_link_routes.py:152] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpwuubvfon/output.wav
2025-02-12 19:49:13,246 - services.audio_link_routes - INFO - [audio_link_routes.py:164] - Successfully converted audio to WAV
2025-02-12 19:49:13,277 - services.audio_link_routes - INFO - [audio_link_routes.py:242] - Successfully processed audio
2025-02-12 19:49:13,290 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 3.49s, Memory Change: 128.20MB
2025-02-12 19:49:13,305 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 3.50s
2025-02-12 19:49:15,503 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-12 19:49:15,504 - services.translation_routes - INFO - [translation_routes.py:123] - 
==================================================
2025-02-12 19:49:15,504 - services.translation_routes - INFO - [translation_routes.py:124] - Input Audio Quality Report
2025-02-12 19:49:15,504 - services.translation_routes - INFO - [translation_routes.py:125] - ==================================================
2025-02-12 19:49:15,504 - services.translation_routes - INFO - [translation_routes.py:126] - Request ID: 41cd5d86
2025-02-12 19:49:15,504 - services.translation_routes - INFO - [translation_routes.py:127] - Target Language: fra
2025-02-12 19:49:15,504 - services.translation_routes - INFO - [translation_routes.py:128] - --------------------------------------------------
2025-02-12 19:49:15,504 - services.translation_routes - INFO - [translation_routes.py:129] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.069
- Rms Level: 0.114
- Crest Factor: 8.317
- Zero Crossings: 294432.000
- Silence Percentage: 23.702
- Clipping Points: 0.000
- Dynamic Range: 17318057.992

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.095
  - Temporal Flatness: 0.054

- Volume Metrics:
  - Volume Stability: 0.207
  - Volume Range: 39045333.862
  - Volume Variations: 0.071

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.027470416722832
- Background Noise: 4.326625974972339
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
No issues detected

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.8366706967353821, 'stability': 1.8690263032913208, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.5019978880882263, 'consistency': 0.290225088596344, 'distinction': 0.2739231586456299}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.406
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.234
  - Rhythm Quality: 0.390
  - Intonation Quality: 0.078

Vowel Quality:
  - Quality Score: 0.003
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-02-12 19:49:15,504 - services.translation_routes - INFO - [translation_routes.py:130] - ==================================================

2025-02-12 19:49:15,504 - services.audio_processor - INFO - [audio_processor.py:269] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp5idhoeqi.wav
2025-02-12 19:49:15,504 - services.audio_processor - INFO - [audio_processor.py:271] - Audio info - Sample rate: 16000, Channels: 1
2025-02-12 19:49:15,508 - services.audio_processor - INFO - [audio_processor.py:280] - Original audio shape: torch.Size([1, 1106919]), Frequency: 16000Hz
2025-02-12 19:49:15,565 - services.audio_processor - INFO - [audio_processor.py:438] - Base audio processing successful, proceeding with enhancement
2025-02-12 19:49:15,582 - services.audio_processor - INFO - [audio_processor.py:446] - Background music analysis: {'has_background_music': False, 'music_confidence': 0.20938998197072828, 'feature_scores': {'spectral_flatness': 0.08400185351212022, 'rhythm_regularity': 0.023911028730305837, 'bass_presence': 0.020109010040956245, 'temporal_stability': 0.08136808968734596}}
2025-02-12 19:49:15,582 - services.audio_processor - INFO - [audio_processor.py:449] - Applying speech-optimized spectral enhancement for fra
2025-02-12 19:49:15,672 - services.audio_processor - INFO - [audio_processor.py:459] - Analyzing audio quality...
2025-02-12 19:49:15,984 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 19:49:15,987 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 19:49:16,054 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 19:49:16,055 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 19:49:16,085 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 19:49:16,085 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 19:49:16,118 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 19:49:16,119 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 19:49:18,834 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-12 19:49:18,836 - services.translation_routes - INFO - [translation_routes.py:153] - Request 41cd5d86: Background music analysis: {'has_background_music': False, 'music_confidence': 0.20938998197072828, 'feature_scores': {'spectral_flatness': 0.08400185351212022, 'rhythm_regularity': 0.023911028730305837, 'bass_presence': 0.020109010040956245, 'temporal_stability': 0.08136808968734596}}
2025-02-12 19:49:18,836 - services.translation_routes - ERROR - [translation_routes.py:169] - Audio processing error: 'TranslationStrategy' object has no attribute 'select_strategy'
2025-02-12 19:49:18,836 - services.translation_routes - INFO - [translation_routes.py:375] - Request 41cd5d86 completed in 6.62s
2025-02-12 19:49:18,837 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 6.62s, Memory Change: 124.42MB
2025-02-12 19:49:18,837 - __main__ - INFO - [app.py:278] - Request to /translate took 61.64s
2025-02-12 19:49:22,793 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-12 19:49:22,794 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-12 19:49:26,001 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-12 19:49:26,003 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-12 19:49:56,523 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-12 19:49:56,523 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-12 19:49:57,662 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-12 19:49:57,663 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-12 19:50:06,437 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-02-12 19:50:06,437 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-02-12 19:50:06,439 - services.audio_link_routes - INFO - [audio_link_routes.py:216] - Processing URL: https://www.tiktok.com/@loganpaul/video/7138576512512478510
2025-02-12 19:50:06,439 - services.audio_link_routes - INFO - [audio_link_routes.py:236] - Processing TikTok URL
2025-02-12 19:50:06,440 - services.audio_link_routes - INFO - [audio_link_routes.py:120] - Using options for tiktok: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp2b8kxk3f/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8, 'extractor_args': {'tiktok': {'api_hostname': 'api22-normal-c-alisg.tiktokv.com', 'app_name': 'trill', 'app_version': '34.1.2', 'manifest_app_version': '2023401020', 'app_info': '1234567890123456789/trill///1180', 'device_id': '4723013160070392690'}}}
2025-02-12 19:50:09,865 - services.audio_link_routes - INFO - [audio_link_routes.py:133] - Successfully downloaded tiktok content
2025-02-12 19:50:09,867 - services.audio_link_routes - INFO - [audio_link_routes.py:152] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp2b8kxk3f/output.wav
2025-02-12 19:50:09,918 - services.audio_link_routes - INFO - [audio_link_routes.py:164] - Successfully converted audio to WAV
2025-02-12 19:50:09,919 - services.audio_link_routes - INFO - [audio_link_routes.py:242] - Successfully processed audio
2025-02-12 19:50:09,920 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 3.48s, Memory Change: -0.11MB
2025-02-12 19:50:09,920 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 3.48s
2025-02-12 19:50:12,368 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-12 19:50:12,369 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-12 19:50:27,806 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-12 19:50:27,806 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-12 19:50:27,808 - services.translation_routes - INFO - [translation_routes.py:36] - Starting translation request ed3a2b2f
2025-02-12 19:50:27,808 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-02-12 19:50:27,808 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-02-12 19:50:27,809 - services.translation_routes - INFO - [translation_routes.py:97] - Request ed3a2b2f: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpnkqaxjdu.wav
2025-02-12 19:50:27,809 - services.audio_processor - INFO - [audio_processor.py:136] - Audio duration: 6.57 seconds
2025-02-12 19:50:27,809 - services.translation_routes - INFO - [translation_routes.py:112] - Request ed3a2b2f: Beginning audio processing with diagnostics
2025-02-12 19:50:27,809 - services.audio_processor - INFO - [audio_processor.py:269] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpnkqaxjdu.wav
2025-02-12 19:50:27,810 - services.audio_processor - INFO - [audio_processor.py:271] - Audio info - Sample rate: 16000, Channels: 1
2025-02-12 19:50:27,810 - services.audio_processor - INFO - [audio_processor.py:280] - Original audio shape: torch.Size([1, 105163]), Frequency: 16000Hz
2025-02-12 19:50:27,820 - services.audio_processor - INFO - [audio_processor.py:438] - Base audio processing successful, proceeding with enhancement
2025-02-12 19:50:27,826 - services.audio_processor - INFO - [audio_processor.py:446] - Background music analysis: {'has_background_music': False, 'music_confidence': 0.15608341036219223, 'feature_scores': {'spectral_flatness': 0.03820588165673722, 'rhythm_regularity': 0.023762376237623763, 'bass_presence': 0.039862824445829455, 'temporal_stability': 0.054252328022001785}}
2025-02-12 19:50:27,826 - services.audio_processor - INFO - [audio_processor.py:449] - Applying speech-optimized spectral enhancement for fra
2025-02-12 19:50:27,847 - services.audio_processor - INFO - [audio_processor.py:459] - Analyzing audio quality...
2025-02-12 19:50:27,866 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 19:50:27,866 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 19:50:27,875 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 19:50:27,876 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 19:50:27,885 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 19:50:27,886 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 19:50:27,897 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 19:50:27,897 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 19:50:28,121 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-12 19:50:28,121 - services.translation_routes - INFO - [translation_routes.py:123] - 
==================================================
2025-02-12 19:50:28,121 - services.translation_routes - INFO - [translation_routes.py:124] - Input Audio Quality Report
2025-02-12 19:50:28,121 - services.translation_routes - INFO - [translation_routes.py:125] - ==================================================
2025-02-12 19:50:28,121 - services.translation_routes - INFO - [translation_routes.py:126] - Request ID: ed3a2b2f
2025-02-12 19:50:28,121 - services.translation_routes - INFO - [translation_routes.py:127] - Target Language: fra
2025-02-12 19:50:28,121 - services.translation_routes - INFO - [translation_routes.py:128] - --------------------------------------------------
2025-02-12 19:50:28,121 - services.translation_routes - INFO - [translation_routes.py:129] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.026
- Rms Level: 0.076
- Crest Factor: 12.530
- Zero Crossings: 29106.000
- Silence Percentage: 62.741
- Clipping Points: 0.000
- Dynamic Range: 6753166.765

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.082
  - Temporal Flatness: 0.024

- Volume Metrics:
  - Volume Stability: -0.671
  - Volume Range: 28777495.027
  - Volume Variations: 0.065

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.012101101788277
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 1.0195544958114624, 'stability': 3.234647035598755, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.004738867282867432, 'distinction': 0.9893258810043335}
  - Description: Strong nasal resonance. Unstable nasal resonance. Clear distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.653
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.045
  - Rhythm Quality: 0.090
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.007
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-02-12 19:50:28,122 - services.translation_routes - INFO - [translation_routes.py:130] - ==================================================

2025-02-12 19:50:28,122 - services.audio_processor - INFO - [audio_processor.py:269] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpnkqaxjdu.wav
2025-02-12 19:50:28,122 - services.audio_processor - INFO - [audio_processor.py:271] - Audio info - Sample rate: 16000, Channels: 1
2025-02-12 19:50:28,123 - services.audio_processor - INFO - [audio_processor.py:280] - Original audio shape: torch.Size([1, 105163]), Frequency: 16000Hz
2025-02-12 19:50:28,133 - services.audio_processor - INFO - [audio_processor.py:438] - Base audio processing successful, proceeding with enhancement
2025-02-12 19:50:28,137 - services.audio_processor - INFO - [audio_processor.py:446] - Background music analysis: {'has_background_music': False, 'music_confidence': 0.15608341036219223, 'feature_scores': {'spectral_flatness': 0.03820588165673722, 'rhythm_regularity': 0.023762376237623763, 'bass_presence': 0.039862824445829455, 'temporal_stability': 0.054252328022001785}}
2025-02-12 19:50:28,137 - services.audio_processor - INFO - [audio_processor.py:449] - Applying speech-optimized spectral enhancement for fra
2025-02-12 19:50:28,153 - services.audio_processor - INFO - [audio_processor.py:459] - Analyzing audio quality...
2025-02-12 19:50:28,170 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 19:50:28,170 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 19:50:28,176 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 19:50:28,177 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 19:50:28,185 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 19:50:28,185 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 19:50:28,191 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 19:50:28,191 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 19:50:28,392 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-12 19:50:28,393 - services.translation_routes - INFO - [translation_routes.py:153] - Request ed3a2b2f: Background music analysis: {'has_background_music': False, 'music_confidence': 0.15608341036219223, 'feature_scores': {'spectral_flatness': 0.03820588165673722, 'rhythm_regularity': 0.023762376237623763, 'bass_presence': 0.039862824445829455, 'temporal_stability': 0.054252328022001785}}
2025-02-12 19:50:28,393 - services.translation_routes - ERROR - [translation_routes.py:169] - Audio processing error: 'TranslationStrategy' object has no attribute 'select_strategy'
2025-02-12 19:50:28,393 - services.translation_routes - INFO - [translation_routes.py:375] - Request ed3a2b2f completed in 0.59s
2025-02-12 19:50:28,394 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 0.59s, Memory Change: -0.98MB
2025-02-12 19:50:28,394 - __main__ - INFO - [app.py:278] - Request to /translate took 62.39s
2025-02-12 19:50:32,296 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-12 19:50:32,296 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-12 19:50:32,304 - services.translation_routes - INFO - [translation_routes.py:36] - Starting translation request ed78677e
2025-02-12 19:50:32,305 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-02-12 19:50:32,305 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-02-12 19:50:32,308 - services.translation_routes - INFO - [translation_routes.py:97] - Request ed78677e: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpc_tj4eg7.wav
2025-02-12 19:50:32,309 - services.audio_processor - INFO - [audio_processor.py:136] - Audio duration: 69.18 seconds
2025-02-12 19:50:32,309 - services.translation_routes - INFO - [translation_routes.py:112] - Request ed78677e: Beginning audio processing with diagnostics
2025-02-12 19:50:32,309 - services.audio_processor - INFO - [audio_processor.py:269] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpc_tj4eg7.wav
2025-02-12 19:50:32,309 - services.audio_processor - INFO - [audio_processor.py:271] - Audio info - Sample rate: 16000, Channels: 1
2025-02-12 19:50:32,317 - services.audio_processor - INFO - [audio_processor.py:280] - Original audio shape: torch.Size([1, 1106919]), Frequency: 16000Hz
2025-02-12 19:50:32,419 - services.audio_processor - INFO - [audio_processor.py:438] - Base audio processing successful, proceeding with enhancement
2025-02-12 19:50:32,441 - services.audio_processor - INFO - [audio_processor.py:446] - Background music analysis: {'has_background_music': False, 'music_confidence': 0.20938998197072828, 'feature_scores': {'spectral_flatness': 0.08400185351212022, 'rhythm_regularity': 0.023911028730305837, 'bass_presence': 0.020109010040956245, 'temporal_stability': 0.08136808968734596}}
2025-02-12 19:50:32,441 - services.audio_processor - INFO - [audio_processor.py:449] - Applying speech-optimized spectral enhancement for fra
2025-02-12 19:50:32,563 - services.audio_processor - INFO - [audio_processor.py:459] - Analyzing audio quality...
2025-02-12 19:50:32,817 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 19:50:32,819 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 19:50:32,889 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 19:50:32,889 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 19:50:32,927 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 19:50:32,928 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 19:50:32,971 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 19:50:32,972 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 19:50:36,341 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-12 19:50:36,342 - services.translation_routes - INFO - [translation_routes.py:123] - 
==================================================
2025-02-12 19:50:36,342 - services.translation_routes - INFO - [translation_routes.py:124] - Input Audio Quality Report
2025-02-12 19:50:36,342 - services.translation_routes - INFO - [translation_routes.py:125] - ==================================================
2025-02-12 19:50:36,345 - services.translation_routes - INFO - [translation_routes.py:126] - Request ID: ed78677e
2025-02-12 19:50:36,345 - services.translation_routes - INFO - [translation_routes.py:127] - Target Language: fra
2025-02-12 19:50:36,345 - services.translation_routes - INFO - [translation_routes.py:128] - --------------------------------------------------
2025-02-12 19:50:36,348 - services.translation_routes - INFO - [translation_routes.py:129] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.069
- Rms Level: 0.114
- Crest Factor: 8.317
- Zero Crossings: 294432.000
- Silence Percentage: 23.702
- Clipping Points: 0.000
- Dynamic Range: 17318057.992

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.095
  - Temporal Flatness: 0.054

- Volume Metrics:
  - Volume Stability: 0.207
  - Volume Range: 39045333.862
  - Volume Variations: 0.071

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.027470416722832
- Background Noise: 4.326625974972339
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
No issues detected

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.8366706967353821, 'stability': 1.8690263032913208, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.5019978880882263, 'consistency': 0.290225088596344, 'distinction': 0.2739231586456299}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.406
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.234
  - Rhythm Quality: 0.390
  - Intonation Quality: 0.078

Vowel Quality:
  - Quality Score: 0.003
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-02-12 19:50:36,348 - services.translation_routes - INFO - [translation_routes.py:130] - ==================================================

2025-02-12 19:50:36,348 - services.audio_processor - INFO - [audio_processor.py:269] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpc_tj4eg7.wav
2025-02-12 19:50:36,348 - services.audio_processor - INFO - [audio_processor.py:271] - Audio info - Sample rate: 16000, Channels: 1
2025-02-12 19:50:36,355 - services.audio_processor - INFO - [audio_processor.py:280] - Original audio shape: torch.Size([1, 1106919]), Frequency: 16000Hz
2025-02-12 19:50:36,432 - services.audio_processor - INFO - [audio_processor.py:438] - Base audio processing successful, proceeding with enhancement
2025-02-12 19:50:36,454 - services.audio_processor - INFO - [audio_processor.py:446] - Background music analysis: {'has_background_music': False, 'music_confidence': 0.20938998197072828, 'feature_scores': {'spectral_flatness': 0.08400185351212022, 'rhythm_regularity': 0.023911028730305837, 'bass_presence': 0.020109010040956245, 'temporal_stability': 0.08136808968734596}}
2025-02-12 19:50:36,454 - services.audio_processor - INFO - [audio_processor.py:449] - Applying speech-optimized spectral enhancement for fra
2025-02-12 19:50:36,583 - services.audio_processor - INFO - [audio_processor.py:459] - Analyzing audio quality...
2025-02-12 19:50:36,721 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 19:50:36,722 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 19:50:36,770 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 19:50:36,771 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 19:50:36,814 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 19:50:36,815 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 19:50:36,858 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 19:50:36,858 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 19:50:40,195 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-12 19:50:40,196 - services.translation_routes - INFO - [translation_routes.py:153] - Request ed78677e: Background music analysis: {'has_background_music': False, 'music_confidence': 0.20938998197072828, 'feature_scores': {'spectral_flatness': 0.08400185351212022, 'rhythm_regularity': 0.023911028730305837, 'bass_presence': 0.020109010040956245, 'temporal_stability': 0.08136808968734596}}
2025-02-12 19:50:40,196 - services.translation_routes - ERROR - [translation_routes.py:169] - Audio processing error: 'TranslationStrategy' object has no attribute 'select_strategy'
2025-02-12 19:50:40,197 - services.translation_routes - INFO - [translation_routes.py:375] - Request ed78677e completed in 7.89s
2025-02-12 19:50:40,198 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 7.89s, Memory Change: 12.83MB
2025-02-12 19:50:40,198 - __main__ - INFO - [app.py:278] - Request to /translate took 77.41s
2025-02-12 19:50:47,242 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-12 19:50:47,242 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-12 19:51:05,203 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-12 19:51:05,203 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-12 19:51:05,208 - services.translation_routes - INFO - [translation_routes.py:36] - Starting translation request 116d2d74
2025-02-12 19:51:05,208 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-02-12 19:51:05,208 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-02-12 19:51:05,210 - services.translation_routes - INFO - [translation_routes.py:97] - Request 116d2d74: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpdnfuimt1.wav
2025-02-12 19:51:05,210 - services.audio_processor - INFO - [audio_processor.py:136] - Audio duration: 73.49 seconds
2025-02-12 19:51:05,210 - services.translation_routes - INFO - [translation_routes.py:112] - Request 116d2d74: Beginning audio processing with diagnostics
2025-02-12 19:51:05,210 - services.audio_processor - INFO - [audio_processor.py:269] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpdnfuimt1.wav
2025-02-12 19:51:05,210 - services.audio_processor - INFO - [audio_processor.py:271] - Audio info - Sample rate: 16000, Channels: 1
2025-02-12 19:51:05,214 - services.audio_processor - INFO - [audio_processor.py:280] - Original audio shape: torch.Size([1, 1175881]), Frequency: 16000Hz
2025-02-12 19:51:05,276 - services.audio_processor - INFO - [audio_processor.py:438] - Base audio processing successful, proceeding with enhancement
2025-02-12 19:51:05,293 - services.audio_processor - INFO - [audio_processor.py:446] - Background music analysis: {'has_background_music': True, 'music_confidence': 0.4059628791204464, 'feature_scores': {'spectral_flatness': 0.1651322301984485, 'rhythm_regularity': 0.026939843068875327, 'bass_presence': 0.144706807566402, 'temporal_stability': 0.0691839982867205}}
2025-02-12 19:51:05,293 - services.audio_processor - INFO - [audio_processor.py:449] - Applying speech-optimized spectral enhancement for fra
2025-02-12 19:51:05,392 - services.audio_processor - INFO - [audio_processor.py:459] - Analyzing audio quality...
2025-02-12 19:51:05,517 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 19:51:05,518 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 19:51:05,545 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 19:51:05,545 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 19:51:05,571 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 19:51:05,571 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 19:51:05,600 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 19:51:05,600 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 19:51:08,143 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-12 19:51:08,144 - services.translation_routes - INFO - [translation_routes.py:123] - 
==================================================
2025-02-12 19:51:08,144 - services.translation_routes - INFO - [translation_routes.py:124] - Input Audio Quality Report
2025-02-12 19:51:08,144 - services.translation_routes - INFO - [translation_routes.py:125] - ==================================================
2025-02-12 19:51:08,144 - services.translation_routes - INFO - [translation_routes.py:126] - Request ID: 116d2d74
2025-02-12 19:51:08,144 - services.translation_routes - INFO - [translation_routes.py:127] - Target Language: fra
2025-02-12 19:51:08,144 - services.translation_routes - INFO - [translation_routes.py:128] - --------------------------------------------------
2025-02-12 19:51:08,144 - services.translation_routes - INFO - [translation_routes.py:129] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.035
- Rms Level: 0.064
- Crest Factor: 14.883
- Zero Crossings: 397415.000
- Silence Percentage: 25.553
- Clipping Points: 0.000
- Dynamic Range: 8430051.767

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.083
  - Temporal Flatness: 0.038

- Volume Metrics:
  - Volume Stability: 0.155
  - Volume Range: 27185562.253
  - Volume Variations: 0.041

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.008577188259245
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 1.5588304996490479, 'stability': 2.4418985843658447, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.5834342241287231, 'distinction': 0.13374167680740356}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.559
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.713
  - Rhythm Quality: 0.702
  - Intonation Quality: 0.724

Vowel Quality:
  - Quality Score: 0.010
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-02-12 19:51:08,145 - services.translation_routes - INFO - [translation_routes.py:130] - ==================================================

2025-02-12 19:51:08,145 - services.audio_processor - INFO - [audio_processor.py:269] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpdnfuimt1.wav
2025-02-12 19:51:08,145 - services.audio_processor - INFO - [audio_processor.py:271] - Audio info - Sample rate: 16000, Channels: 1
2025-02-12 19:51:08,149 - services.audio_processor - INFO - [audio_processor.py:280] - Original audio shape: torch.Size([1, 1175881]), Frequency: 16000Hz
2025-02-12 19:51:08,213 - services.audio_processor - INFO - [audio_processor.py:438] - Base audio processing successful, proceeding with enhancement
2025-02-12 19:51:08,230 - services.audio_processor - INFO - [audio_processor.py:446] - Background music analysis: {'has_background_music': True, 'music_confidence': 0.4059628791204464, 'feature_scores': {'spectral_flatness': 0.1651322301984485, 'rhythm_regularity': 0.026939843068875327, 'bass_presence': 0.144706807566402, 'temporal_stability': 0.0691839982867205}}
2025-02-12 19:51:08,230 - services.audio_processor - INFO - [audio_processor.py:449] - Applying speech-optimized spectral enhancement for fra
2025-02-12 19:51:08,335 - services.audio_processor - INFO - [audio_processor.py:459] - Analyzing audio quality...
2025-02-12 19:51:08,462 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 19:51:08,463 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 19:51:08,493 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 19:51:08,493 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 19:51:08,520 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 19:51:08,521 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 19:51:08,548 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 19:51:08,548 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 19:51:11,080 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-12 19:51:11,082 - services.translation_routes - INFO - [translation_routes.py:153] - Request 116d2d74: Background music analysis: {'has_background_music': True, 'music_confidence': 0.4059628791204464, 'feature_scores': {'spectral_flatness': 0.1651322301984485, 'rhythm_regularity': 0.026939843068875327, 'bass_presence': 0.144706807566402, 'temporal_stability': 0.0691839982867205}}
2025-02-12 19:51:11,082 - services.translation_routes - ERROR - [translation_routes.py:169] - Audio processing error: 'TranslationStrategy' object has no attribute 'select_strategy'
2025-02-12 19:51:11,082 - services.translation_routes - INFO - [translation_routes.py:375] - Request 116d2d74 completed in 5.87s
2025-02-12 19:51:11,082 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 5.87s, Memory Change: 11.27MB
2025-02-12 19:51:11,082 - __main__ - INFO - [app.py:278] - Request to /translate took 58.72s
2025-02-12 20:05:51,708 - __main__ - INFO - [app.py:217] - Received SIGINT signal
2025-02-12 20:05:51,710 - __main__ - INFO - [app.py:202] - Initiating graceful shutdown...
2025-02-12 20:05:56,713 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-02-12 20:05:56,716 - services.model_manager - INFO - [model_manager.py:233] - Cleaning up model resources
2025-02-12 20:05:56,716 - services.model_manager - INFO - [model_manager.py:246] - Model cleanup completed successfully
2025-02-12 20:05:56,717 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-02-12 20:05:56,718 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-02-12 20:05:56,718 - __main__ - INFO - [app.py:206] - Graceful shutdown completed
2025-02-12 20:05:56,719 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-02-12 20:05:56,719 - services.model_manager - INFO - [model_manager.py:233] - Cleaning up model resources
2025-02-12 20:05:56,719 - services.model_manager - INFO - [model_manager.py:246] - Model cleanup completed successfully
2025-02-12 20:05:56,720 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-02-12 20:05:56,720 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-02-12 20:05:56,720 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-02-12 20:05:56,721 - services.model_manager - INFO - [model_manager.py:233] - Cleaning up model resources
2025-02-12 20:05:56,721 - services.model_manager - INFO - [model_manager.py:246] - Model cleanup completed successfully
2025-02-12 20:05:56,721 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-02-12 20:05:56,722 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-02-12 20:06:42,596 - __main__ - INFO - [app.py:467] - Metrics server started on port 8000
2025-02-12 20:06:42,596 - services.model_manager - INFO - [model_manager.py:120] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-02-12 20:07:17,070 - services.model_manager - INFO - [model_manager.py:184] - Models loaded on CPU
2025-02-12 20:07:17,070 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-12 20:07:17,071 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-12 20:07:33,289 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-12 20:07:33,289 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-12 20:07:52,192 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-12 20:07:52,193 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-12 20:07:52,195 - services.model_manager - INFO - [model_manager.py:190] - Model initialization successful
2025-02-12 20:07:52,195 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-12 20:07:52,195 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-12 20:08:09,894 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-12 20:08:09,895 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-12 20:08:29,196 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-12 20:08:29,196 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-12 20:08:29,199 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-02-12 20:08:29,199 - __main__ - INFO - [app.py:491] - ==================================================
2025-02-12 20:08:29,199 - __main__ - INFO - [app.py:492] - Starting LinguaSync Backend
2025-02-12 20:08:29,199 - __main__ - INFO - [app.py:493] - Starting Flask app on port 5001 using cpu
2025-02-12 20:08:29,199 - __main__ - INFO - [app.py:494] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-02-12 20:08:29,199 - __main__ - INFO - [app.py:495] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-02-12 20:08:29,200 - __main__ - INFO - [app.py:496] - Maximum audio length: 300 seconds
2025-02-12 20:08:29,200 - __main__ - INFO - [app.py:497] - Sample rate: 16000 Hz
2025-02-12 20:08:29,200 - __main__ - INFO - [app.py:501] - System memory: 36.0GB total, 11.4GB available
2025-02-12 20:08:29,200 - __main__ - INFO - [app.py:502] - CPU cores: 11
2025-02-12 20:08:29,200 - __main__ - INFO - [app.py:510] - Configuration:
2025-02-12 20:08:29,200 - __main__ - INFO - [app.py:511] - - Debug mode: False
2025-02-12 20:08:29,200 - __main__ - INFO - [app.py:512] - - CORS enabled: True
2025-02-12 20:08:29,201 - __main__ - INFO - [app.py:513] - - Rate limiting: 10 requests per minute
2025-02-12 20:08:29,201 - __main__ - INFO - [app.py:514] - - Metrics enabled: True (port 8000)
2025-02-12 20:08:29,201 - __main__ - INFO - [app.py:516] - ==================================================
2025-02-12 20:09:27,955 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-02-12 20:09:27,955 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-02-12 20:09:27,958 - services.audio_link_routes - INFO - [audio_link_routes.py:216] - Processing URL: https://youtube.com/shorts/RFUAVaeEd4I?si=DzwEX49L4Ygty4eu
2025-02-12 20:09:27,959 - services.audio_link_routes - INFO - [audio_link_routes.py:233] - Processing YouTube URL
2025-02-12 20:09:27,959 - services.audio_link_routes - INFO - [audio_link_routes.py:120] - Using options for youtube: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpiusq2pr5/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8}
2025-02-12 20:09:36,938 - services.audio_link_routes - INFO - [audio_link_routes.py:133] - Successfully downloaded youtube content
2025-02-12 20:09:36,940 - services.audio_link_routes - INFO - [audio_link_routes.py:152] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpiusq2pr5/output.wav
2025-02-12 20:09:36,969 - services.audio_link_routes - INFO - [audio_link_routes.py:164] - Successfully converted audio to WAV
2025-02-12 20:09:36,970 - services.audio_link_routes - INFO - [audio_link_routes.py:242] - Successfully processed audio
2025-02-12 20:09:36,970 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 9.01s, Memory Change: 0.78MB
2025-02-12 20:09:36,970 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 9.01s
2025-02-12 20:09:43,837 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-12 20:09:43,839 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-12 20:09:48,371 - services.audio_link_routes - INFO - [audio_link_routes.py:216] - Processing URL: https://youtu.be/xDYy5qafTXY?si=bPvmOIPxuc7fvs-Z
2025-02-12 20:09:48,372 - services.audio_link_routes - INFO - [audio_link_routes.py:233] - Processing YouTube URL
2025-02-12 20:09:48,372 - services.audio_link_routes - INFO - [audio_link_routes.py:120] - Using options for youtube: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpu_3xyw0m/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8}
2025-02-12 20:10:00,906 - services.audio_link_routes - INFO - [audio_link_routes.py:133] - Successfully downloaded youtube content
2025-02-12 20:10:00,908 - services.audio_link_routes - INFO - [audio_link_routes.py:152] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpu_3xyw0m/output.wav
2025-02-12 20:10:00,954 - services.audio_link_routes - INFO - [audio_link_routes.py:164] - Successfully converted audio to WAV
2025-02-12 20:10:00,955 - services.audio_link_routes - INFO - [audio_link_routes.py:242] - Successfully processed audio
2025-02-12 20:10:00,956 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 12.58s, Memory Change: 32.42MB
2025-02-12 20:10:00,956 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 12.59s
2025-02-12 20:10:02,519 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-12 20:10:02,520 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-12 20:10:07,538 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-12 20:10:07,539 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-12 20:10:18,468 - services.audio_link_routes - INFO - [audio_link_routes.py:216] - Processing URL: https://www.tiktok.com/@fightjoe/video/7127311328095522053?is_from_webapp=1&sender_device=pc&web_id=7470222526028858902
2025-02-12 20:10:18,469 - services.audio_link_routes - INFO - [audio_link_routes.py:236] - Processing TikTok URL
2025-02-12 20:10:18,470 - services.audio_link_routes - INFO - [audio_link_routes.py:120] - Using options for tiktok: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpxzb6qhj3/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8, 'extractor_args': {'tiktok': {'api_hostname': 'api22-normal-c-alisg.tiktokv.com', 'app_name': 'trill', 'app_version': '34.1.2', 'manifest_app_version': '2023401020', 'app_info': '1234567890123456789/trill///1180', 'device_id': '9355785179885862320'}}}
2025-02-12 20:10:23,559 - services.audio_link_routes - INFO - [audio_link_routes.py:133] - Successfully downloaded tiktok content
2025-02-12 20:10:23,561 - services.audio_link_routes - INFO - [audio_link_routes.py:152] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpxzb6qhj3/output.wav
2025-02-12 20:10:23,566 - services.audio_link_routes - INFO - [audio_link_routes.py:164] - Successfully converted audio to WAV
2025-02-12 20:10:23,567 - services.audio_link_routes - INFO - [audio_link_routes.py:242] - Successfully processed audio
2025-02-12 20:10:23,567 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 5.10s, Memory Change: 6.27MB
2025-02-12 20:10:23,568 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 5.10s
2025-02-12 20:10:27,310 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-12 20:10:27,312 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-12 20:10:33,459 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-12 20:10:33,460 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-12 20:10:33,462 - services.translation_routes - INFO - [translation_routes.py:36] - Starting translation request 5ca1de41
2025-02-12 20:10:33,462 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-02-12 20:10:33,462 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-02-12 20:10:33,466 - services.translation_routes - INFO - [translation_routes.py:97] - Request 5ca1de41: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp1k3mbsfk.wav
2025-02-12 20:10:33,466 - services.audio_processor - INFO - [audio_processor.py:136] - Audio duration: 52.48 seconds
2025-02-12 20:10:33,466 - services.translation_routes - INFO - [translation_routes.py:112] - Request 5ca1de41: Beginning audio processing with diagnostics
2025-02-12 20:10:33,466 - services.audio_processor - INFO - [audio_processor.py:269] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp1k3mbsfk.wav
2025-02-12 20:10:33,467 - services.audio_processor - INFO - [audio_processor.py:271] - Audio info - Sample rate: 16000, Channels: 1
2025-02-12 20:10:33,470 - services.audio_processor - INFO - [audio_processor.py:280] - Original audio shape: torch.Size([1, 839634]), Frequency: 16000Hz
2025-02-12 20:10:33,534 - services.audio_processor - INFO - [audio_processor.py:438] - Base audio processing successful, proceeding with enhancement
2025-02-12 20:10:33,556 - services.audio_processor - INFO - [audio_processor.py:446] - Background music analysis: {'has_background_music': True, 'music_confidence': 0.3547474247335353, 'feature_scores': {'spectral_flatness': 0.1747071146868413, 'rhythm_regularity': 0.029706601466992662, 'bass_presence': 0.07999731566149255, 'temporal_stability': 0.0703363929182088}}
2025-02-12 20:10:33,559 - services.audio_processor - INFO - [audio_processor.py:449] - Applying speech-optimized spectral enhancement for fra
2025-02-12 20:10:33,684 - services.audio_processor - INFO - [audio_processor.py:459] - Analyzing audio quality...
2025-02-12 20:10:33,806 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:10:33,807 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:10:33,838 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:10:33,839 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:10:33,873 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:10:33,873 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:10:33,904 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:10:33,905 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:10:37,010 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-12 20:10:37,011 - services.translation_routes - INFO - [translation_routes.py:123] - 
==================================================
2025-02-12 20:10:37,011 - services.translation_routes - INFO - [translation_routes.py:124] - Input Audio Quality Report
2025-02-12 20:10:37,011 - services.translation_routes - INFO - [translation_routes.py:125] - ==================================================
2025-02-12 20:10:37,011 - services.translation_routes - INFO - [translation_routes.py:126] - Request ID: 5ca1de41
2025-02-12 20:10:37,011 - services.translation_routes - INFO - [translation_routes.py:127] - Target Language: fra
2025-02-12 20:10:37,011 - services.translation_routes - INFO - [translation_routes.py:128] - --------------------------------------------------
2025-02-12 20:10:37,011 - services.translation_routes - INFO - [translation_routes.py:129] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.038
- Rms Level: 0.066
- Crest Factor: 14.422
- Zero Crossings: 335957.000
- Silence Percentage: 25.137
- Clipping Points: 0.000
- Dynamic Range: 9099014.583

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 0.000
  - Temporal Variation: 0.101
  - Temporal Flatness: 0.048

- Volume Metrics:
  - Volume Stability: 0.222
  - Volume Range: 25740829.110
  - Volume Variations: 0.040

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.009134430002693
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 1.0607566833496094, 'stability': 1.490928292274475, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.6918656826019287, 'distinction': 0.06730042397975922}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.510
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.775
  - Rhythm Quality: 0.812
  - Intonation Quality: 0.738

Vowel Quality:
  - Quality Score: 0.013
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-02-12 20:10:37,011 - services.translation_routes - INFO - [translation_routes.py:130] - ==================================================

2025-02-12 20:10:37,011 - services.audio_processor - INFO - [audio_processor.py:269] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp1k3mbsfk.wav
2025-02-12 20:10:37,011 - services.audio_processor - INFO - [audio_processor.py:271] - Audio info - Sample rate: 16000, Channels: 1
2025-02-12 20:10:37,015 - services.audio_processor - INFO - [audio_processor.py:280] - Original audio shape: torch.Size([1, 839634]), Frequency: 16000Hz
2025-02-12 20:10:37,076 - services.audio_processor - INFO - [audio_processor.py:438] - Base audio processing successful, proceeding with enhancement
2025-02-12 20:10:37,094 - services.audio_processor - INFO - [audio_processor.py:446] - Background music analysis: {'has_background_music': True, 'music_confidence': 0.3547474247335353, 'feature_scores': {'spectral_flatness': 0.1747071146868413, 'rhythm_regularity': 0.029706601466992662, 'bass_presence': 0.07999731566149255, 'temporal_stability': 0.0703363929182088}}
2025-02-12 20:10:37,094 - services.audio_processor - INFO - [audio_processor.py:449] - Applying speech-optimized spectral enhancement for fra
2025-02-12 20:10:37,213 - services.audio_processor - INFO - [audio_processor.py:459] - Analyzing audio quality...
2025-02-12 20:10:37,338 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:10:37,338 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:10:37,368 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:10:37,368 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:10:37,399 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:10:37,399 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:10:37,430 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:10:37,430 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:10:40,830 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-12 20:10:40,831 - services.translation_routes - INFO - [translation_routes.py:153] - Request 5ca1de41: Background music analysis: {'has_background_music': True, 'music_confidence': 0.3547474247335353, 'feature_scores': {'spectral_flatness': 0.1747071146868413, 'rhythm_regularity': 0.029706601466992662, 'bass_presence': 0.07999731566149255, 'temporal_stability': 0.0703363929182088}}
2025-02-12 20:10:40,831 - services.translation_strategy - INFO - [translation_strategy.py:17] - 
=== AUDIO ANALYSIS ===
2025-02-12 20:10:40,831 - services.translation_strategy - INFO - [translation_strategy.py:48] - Selected strategy based on content type: speech_only
2025-02-12 20:10:40,831 - services.translation_routes - INFO - [translation_routes.py:165] - Request 5ca1de41: Audio characteristics heard: {'content_type': 'speech_only', 'heard_characteristics': {'music': {'detected': False, 'confidence': 0.0}, 'speech': {'consistency': 1.0}}}
2025-02-12 20:10:40,831 - services.translation_routes - INFO - [translation_routes.py:167] - Request 5ca1de41: Audio processed successfully
2025-02-12 20:10:40,910 - services.translation_routes - INFO - [translation_routes.py:184] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-02-12 20:10:44,409 - services.audio_link_routes - INFO - [audio_link_routes.py:216] - Processing URL: https://www.tiktok.com/@loganpaul/video/7138576512512478510
2025-02-12 20:10:44,409 - services.audio_link_routes - INFO - [audio_link_routes.py:236] - Processing TikTok URL
2025-02-12 20:10:44,410 - services.audio_link_routes - INFO - [audio_link_routes.py:120] - Using options for tiktok: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpep1p10et/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8, 'extractor_args': {'tiktok': {'api_hostname': 'api22-normal-c-alisg.tiktokv.com', 'app_name': 'trill', 'app_version': '34.1.2', 'manifest_app_version': '2023401020', 'app_info': '1234567890123456789/trill///1180', 'device_id': '0784396568729496836'}}}
2025-02-12 20:10:46,075 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-12 20:10:46,075 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-12 20:10:55,026 - services.audio_link_routes - ERROR - [audio_link_routes.py:175] - Download error for tiktok: [0;31mERROR:[0m [TikTok] 7138576512512478510: Unable to download webpage: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response')) (caused by TransportError("('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))"))
2025-02-12 20:10:55,027 - services.audio_link_routes - ERROR - [audio_link_routes.py:182] - tiktok processing error: Unable to access this TikTok content. Please try another video or check the URL.
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.12/site-packages/urllib3/connectionpool.py", line 789, in urlopen
    response = self._make_request(
               ^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.12/site-packages/urllib3/connectionpool.py", line 536, in _make_request
    response = conn.getresponse()
               ^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.12/site-packages/urllib3/connection.py", line 464, in getresponse
    httplib_response = super().getresponse()
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.12/http/client.py", line 1428, in getresponse
    response.begin()
  File "/opt/anaconda3/lib/python3.12/http/client.py", line 331, in begin
    version, status, reason = self._read_status()
                              ^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.12/http/client.py", line 300, in _read_status
    raise RemoteDisconnected("Remote end closed connection without"
http.client.RemoteDisconnected: Remote end closed connection without response

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.12/site-packages/requests/adapters.py", line 589, in send
    resp = conn.urlopen(
           ^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.12/site-packages/urllib3/connectionpool.py", line 843, in urlopen
    retries = retries.increment(
              ^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.12/site-packages/urllib3/util/retry.py", line 449, in increment
    raise reraise(type(error), error, _stacktrace)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.12/site-packages/urllib3/util/util.py", line 38, in reraise
    raise value.with_traceback(tb)
  File "/opt/anaconda3/lib/python3.12/site-packages/urllib3/connectionpool.py", line 789, in urlopen
    response = self._make_request(
               ^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.12/site-packages/urllib3/connectionpool.py", line 536, in _make_request
    response = conn.getresponse()
               ^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.12/site-packages/urllib3/connection.py", line 464, in getresponse
    httplib_response = super().getresponse()
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.12/http/client.py", line 1428, in getresponse
    response.begin()
  File "/opt/anaconda3/lib/python3.12/http/client.py", line 331, in begin
    version, status, reason = self._read_status()
                              ^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.12/http/client.py", line 300, in _read_status
    raise RemoteDisconnected("Remote end closed connection without"
urllib3.exceptions.ProtocolError: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.12/site-packages/yt_dlp/networking/_requests.py", line 328, in _send
    requests_res = session.request(
                   ^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.12/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.12/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.12/site-packages/requests/adapters.py", line 604, in send
    raise ConnectionError(err, request=request)
requests.exceptions.ConnectionError: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.12/site-packages/yt_dlp/extractor/common.py", line 898, in _request_webpage
    return self._downloader.urlopen(self._create_request(url_or_request, data, headers, query, extensions))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.12/site-packages/yt_dlp/YoutubeDL.py", line 4175, in urlopen
    return self._request_director.send(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.12/site-packages/yt_dlp/networking/common.py", line 117, in send
    response = handler.send(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.12/site-packages/yt_dlp/networking/_helper.py", line 208, in wrapper
    return func(self, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.12/site-packages/yt_dlp/networking/common.py", line 340, in send
    return self._send(request)
           ^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.12/site-packages/yt_dlp/networking/_requests.py", line 352, in _send
    raise TransportError(cause=e) from e
yt_dlp.networking.exceptions.TransportError: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.12/site-packages/yt_dlp/YoutubeDL.py", line 1637, in wrapper
    return func(self, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.12/site-packages/yt_dlp/YoutubeDL.py", line 1772, in __extract_info
    ie_result = ie.extract(url)
                ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.12/site-packages/yt_dlp/extractor/common.py", line 742, in extract
    ie_result = self._real_extract(url)
                ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.12/site-packages/yt_dlp/extractor/tiktok.py", line 894, in _real_extract
    video_data, status = self._extract_web_data_and_status(url, video_id)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.12/site-packages/yt_dlp/extractor/tiktok.py", line 222, in _extract_web_data_and_status
    res = self._download_webpage_handle(url, video_id, fatal=fatal, headers={'User-Agent': 'Mozilla/5.0'})
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.12/site-packages/yt_dlp/extractor/common.py", line 962, in _download_webpage_handle
    urlh = self._request_webpage(url_or_request, video_id, note, errnote, fatal, data=data,
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.12/site-packages/yt_dlp/extractor/common.py", line 911, in _request_webpage
    raise ExtractorError(errmsg, cause=err)
yt_dlp.utils.ExtractorError: [TikTok] 7138576512512478510: Unable to download webpage: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response')) (caused by TransportError("('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))"))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/robmills/audio-translation/Backend/services/audio_link_routes.py", line 125, in handle_video_platform_url
    info = ydl.extract_info(url, download=False)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.12/site-packages/yt_dlp/YoutubeDL.py", line 1626, in extract_info
    return self.__extract_info(url, self.get_info_extractor(key), download, extra_info, process)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.12/site-packages/yt_dlp/YoutubeDL.py", line 1655, in wrapper
    self.report_error(str(e), e.format_traceback())
  File "/opt/anaconda3/lib/python3.12/site-packages/yt_dlp/YoutubeDL.py", line 1095, in report_error
    self.trouble(f'{self._format_err("ERROR:", self.Styles.ERROR)} {message}', *args, **kwargs)
  File "/opt/anaconda3/lib/python3.12/site-packages/yt_dlp/YoutubeDL.py", line 1034, in trouble
    raise DownloadError(message, exc_info)
yt_dlp.utils.DownloadError: [0;31mERROR:[0m [TikTok] 7138576512512478510: Unable to download webpage: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response')) (caused by TransportError("('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))"))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/robmills/audio-translation/Backend/services/audio_link_routes.py", line 177, in handle_video_platform_url
    raise Exception(f"Unable to access this TikTok content. Please try another video or check the URL.")
Exception: Unable to access this TikTok content. Please try another video or check the URL.
2025-02-12 20:10:55,030 - services.audio_link_routes - ERROR - [audio_link_routes.py:250] - Processing error: Unable to access this TikTok content. Please try another video or check the URL.
2025-02-12 20:10:55,030 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 10.62s, Memory Change: 2352.00MB
2025-02-12 20:10:55,030 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 10.62s
2025-02-12 20:11:02,436 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-12 20:11:02,436 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-12 20:11:23,920 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-12 20:11:23,920 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-12 20:11:23,922 - services.translation_routes - INFO - [translation_routes.py:36] - Starting translation request b0cdf8af
2025-02-12 20:11:23,922 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-02-12 20:11:23,922 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-02-12 20:11:23,926 - services.translation_routes - INFO - [translation_routes.py:97] - Request b0cdf8af: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpql2dhrmv.wav
2025-02-12 20:11:23,927 - services.audio_processor - INFO - [audio_processor.py:136] - Audio duration: 69.18 seconds
2025-02-12 20:11:23,927 - services.translation_routes - INFO - [translation_routes.py:112] - Request b0cdf8af: Beginning audio processing with diagnostics
2025-02-12 20:11:23,927 - services.audio_processor - INFO - [audio_processor.py:269] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpql2dhrmv.wav
2025-02-12 20:11:23,927 - services.audio_processor - INFO - [audio_processor.py:271] - Audio info - Sample rate: 16000, Channels: 1
2025-02-12 20:11:23,931 - services.audio_processor - INFO - [audio_processor.py:280] - Original audio shape: torch.Size([1, 1106919]), Frequency: 16000Hz
2025-02-12 20:11:24,012 - services.audio_processor - INFO - [audio_processor.py:438] - Base audio processing successful, proceeding with enhancement
2025-02-12 20:11:24,032 - services.audio_processor - INFO - [audio_processor.py:446] - Background music analysis: {'has_background_music': False, 'music_confidence': 0.20938998197072828, 'feature_scores': {'spectral_flatness': 0.08400185351212022, 'rhythm_regularity': 0.023911028730305837, 'bass_presence': 0.020109010040956245, 'temporal_stability': 0.08136808968734596}}
2025-02-12 20:11:24,033 - services.audio_processor - INFO - [audio_processor.py:449] - Applying speech-optimized spectral enhancement for fra
2025-02-12 20:11:24,172 - services.audio_processor - INFO - [audio_processor.py:459] - Analyzing audio quality...
2025-02-12 20:11:24,309 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:11:24,310 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:11:24,353 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:11:24,353 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:11:24,393 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:11:24,394 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:11:24,433 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:11:24,434 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:11:28,911 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-12 20:11:28,911 - services.translation_routes - INFO - [translation_routes.py:123] - 
==================================================
2025-02-12 20:11:28,911 - services.translation_routes - INFO - [translation_routes.py:124] - Input Audio Quality Report
2025-02-12 20:11:28,912 - services.translation_routes - INFO - [translation_routes.py:125] - ==================================================
2025-02-12 20:11:28,912 - services.translation_routes - INFO - [translation_routes.py:126] - Request ID: b0cdf8af
2025-02-12 20:11:28,912 - services.translation_routes - INFO - [translation_routes.py:127] - Target Language: fra
2025-02-12 20:11:28,912 - services.translation_routes - INFO - [translation_routes.py:128] - --------------------------------------------------
2025-02-12 20:11:28,912 - services.translation_routes - INFO - [translation_routes.py:129] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.069
- Rms Level: 0.114
- Crest Factor: 8.317
- Zero Crossings: 294432.000
- Silence Percentage: 23.702
- Clipping Points: 0.000
- Dynamic Range: 17318057.992

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.095
  - Temporal Flatness: 0.054

- Volume Metrics:
  - Volume Stability: 0.207
  - Volume Range: 39045333.862
  - Volume Variations: 0.071

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.027470416722832
- Background Noise: 4.326625974972339
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
No issues detected

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.8366706967353821, 'stability': 1.8690263032913208, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.5019978880882263, 'consistency': 0.290225088596344, 'distinction': 0.2739231586456299}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.406
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.234
  - Rhythm Quality: 0.390
  - Intonation Quality: 0.078

Vowel Quality:
  - Quality Score: 0.003
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-02-12 20:11:28,912 - services.translation_routes - INFO - [translation_routes.py:130] - ==================================================

2025-02-12 20:11:28,912 - services.audio_processor - INFO - [audio_processor.py:269] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpql2dhrmv.wav
2025-02-12 20:11:28,912 - services.audio_processor - INFO - [audio_processor.py:271] - Audio info - Sample rate: 16000, Channels: 1
2025-02-12 20:11:28,916 - services.audio_processor - INFO - [audio_processor.py:280] - Original audio shape: torch.Size([1, 1106919]), Frequency: 16000Hz
2025-02-12 20:11:28,999 - services.audio_processor - INFO - [audio_processor.py:438] - Base audio processing successful, proceeding with enhancement
2025-02-12 20:11:29,020 - services.audio_processor - INFO - [audio_processor.py:446] - Background music analysis: {'has_background_music': False, 'music_confidence': 0.20938998197072828, 'feature_scores': {'spectral_flatness': 0.08400185351212022, 'rhythm_regularity': 0.023911028730305837, 'bass_presence': 0.020109010040956245, 'temporal_stability': 0.08136808968734596}}
2025-02-12 20:11:29,020 - services.audio_processor - INFO - [audio_processor.py:449] - Applying speech-optimized spectral enhancement for fra
2025-02-12 20:11:29,160 - services.audio_processor - INFO - [audio_processor.py:459] - Analyzing audio quality...
2025-02-12 20:11:29,307 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:11:29,308 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:11:29,358 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:11:29,359 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:11:29,417 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:11:29,418 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:11:29,491 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:11:29,492 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:11:33,967 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-12 20:11:33,968 - services.translation_routes - INFO - [translation_routes.py:153] - Request b0cdf8af: Background music analysis: {'has_background_music': False, 'music_confidence': 0.20938998197072828, 'feature_scores': {'spectral_flatness': 0.08400185351212022, 'rhythm_regularity': 0.023911028730305837, 'bass_presence': 0.020109010040956245, 'temporal_stability': 0.08136808968734596}}
2025-02-12 20:11:33,968 - services.translation_strategy - INFO - [translation_strategy.py:17] - 
=== AUDIO ANALYSIS ===
2025-02-12 20:11:33,968 - services.translation_strategy - INFO - [translation_strategy.py:48] - Selected strategy based on content type: speech_only
2025-02-12 20:11:33,968 - services.translation_routes - INFO - [translation_routes.py:165] - Request b0cdf8af: Audio characteristics heard: {'content_type': 'speech_only', 'heard_characteristics': {'music': {'detected': False, 'confidence': 0.0}, 'speech': {'consistency': 1.0}}}
2025-02-12 20:11:33,968 - services.translation_routes - INFO - [translation_routes.py:167] - Request b0cdf8af: Audio processed successfully
2025-02-12 20:11:34,071 - services.translation_routes - INFO - [translation_routes.py:184] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-02-12 20:11:42,340 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 1.48MB
2025-02-12 20:11:42,342 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.01s
2025-02-12 20:11:42,347 - services.audio_link_routes - INFO - [audio_link_routes.py:216] - Processing URL: https://www.tiktok.com/@loganpaul/video/7138576512512478510?lang=en
2025-02-12 20:11:42,348 - services.audio_link_routes - INFO - [audio_link_routes.py:236] - Processing TikTok URL
2025-02-12 20:11:42,349 - services.audio_link_routes - INFO - [audio_link_routes.py:120] - Using options for tiktok: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpgdrsy8uq/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8, 'extractor_args': {'tiktok': {'api_hostname': 'api22-normal-c-alisg.tiktokv.com', 'app_name': 'trill', 'app_version': '34.1.2', 'manifest_app_version': '2023401020', 'app_info': '1234567890123456789/trill///1180', 'device_id': '8947261265372963620'}}}
2025-02-12 20:11:44,831 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-12 20:11:44,832 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-12 20:11:44,835 - services.translation_routes - INFO - [translation_routes.py:36] - Starting translation request fb79f523
2025-02-12 20:11:44,836 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-02-12 20:11:44,836 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-02-12 20:11:44,837 - services.translation_routes - INFO - [translation_routes.py:97] - Request fb79f523: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpzhkmzhnk.wav
2025-02-12 20:11:44,840 - services.audio_processor - INFO - [audio_processor.py:136] - Audio duration: 6.57 seconds
2025-02-12 20:11:44,841 - services.translation_routes - INFO - [translation_routes.py:112] - Request fb79f523: Beginning audio processing with diagnostics
2025-02-12 20:11:44,841 - services.audio_processor - INFO - [audio_processor.py:269] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpzhkmzhnk.wav
2025-02-12 20:11:44,841 - services.audio_processor - INFO - [audio_processor.py:271] - Audio info - Sample rate: 16000, Channels: 1
2025-02-12 20:11:44,846 - services.audio_processor - INFO - [audio_processor.py:280] - Original audio shape: torch.Size([1, 105163]), Frequency: 16000Hz
2025-02-12 20:11:44,868 - services.audio_processor - INFO - [audio_processor.py:438] - Base audio processing successful, proceeding with enhancement
2025-02-12 20:11:44,883 - services.audio_processor - INFO - [audio_processor.py:446] - Background music analysis: {'has_background_music': False, 'music_confidence': 0.15608341036219223, 'feature_scores': {'spectral_flatness': 0.03820588165673722, 'rhythm_regularity': 0.023762376237623763, 'bass_presence': 0.039862824445829455, 'temporal_stability': 0.054252328022001785}}
2025-02-12 20:11:44,883 - services.audio_processor - INFO - [audio_processor.py:449] - Applying speech-optimized spectral enhancement for fra
2025-02-12 20:11:44,902 - services.audio_processor - INFO - [audio_processor.py:459] - Analyzing audio quality...
2025-02-12 20:11:44,930 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:11:44,936 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:11:44,946 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:11:44,947 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:11:44,956 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:11:44,957 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:11:44,970 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:11:44,970 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:11:45,198 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-12 20:11:45,198 - services.translation_routes - INFO - [translation_routes.py:123] - 
==================================================
2025-02-12 20:11:45,198 - services.translation_routes - INFO - [translation_routes.py:124] - Input Audio Quality Report
2025-02-12 20:11:45,198 - services.translation_routes - INFO - [translation_routes.py:125] - ==================================================
2025-02-12 20:11:45,198 - services.translation_routes - INFO - [translation_routes.py:126] - Request ID: fb79f523
2025-02-12 20:11:45,198 - services.translation_routes - INFO - [translation_routes.py:127] - Target Language: fra
2025-02-12 20:11:45,198 - services.translation_routes - INFO - [translation_routes.py:128] - --------------------------------------------------
2025-02-12 20:11:45,198 - services.translation_routes - INFO - [translation_routes.py:129] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.026
- Rms Level: 0.076
- Crest Factor: 12.530
- Zero Crossings: 29106.000
- Silence Percentage: 62.741
- Clipping Points: 0.000
- Dynamic Range: 6753166.765

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.082
  - Temporal Flatness: 0.024

- Volume Metrics:
  - Volume Stability: -0.671
  - Volume Range: 28777495.027
  - Volume Variations: 0.065

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.012101101788277
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 1.0195544958114624, 'stability': 3.234647035598755, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.004738867282867432, 'distinction': 0.9893258810043335}
  - Description: Strong nasal resonance. Unstable nasal resonance. Clear distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.653
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.045
  - Rhythm Quality: 0.090
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.007
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-02-12 20:11:45,198 - services.translation_routes - INFO - [translation_routes.py:130] - ==================================================

2025-02-12 20:11:45,198 - services.audio_processor - INFO - [audio_processor.py:269] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpzhkmzhnk.wav
2025-02-12 20:11:45,198 - services.audio_processor - INFO - [audio_processor.py:271] - Audio info - Sample rate: 16000, Channels: 1
2025-02-12 20:11:45,199 - services.audio_processor - INFO - [audio_processor.py:280] - Original audio shape: torch.Size([1, 105163]), Frequency: 16000Hz
2025-02-12 20:11:45,207 - services.audio_processor - INFO - [audio_processor.py:438] - Base audio processing successful, proceeding with enhancement
2025-02-12 20:11:45,210 - services.audio_processor - INFO - [audio_processor.py:446] - Background music analysis: {'has_background_music': False, 'music_confidence': 0.15608341036219223, 'feature_scores': {'spectral_flatness': 0.03820588165673722, 'rhythm_regularity': 0.023762376237623763, 'bass_presence': 0.039862824445829455, 'temporal_stability': 0.054252328022001785}}
2025-02-12 20:11:45,210 - services.audio_processor - INFO - [audio_processor.py:449] - Applying speech-optimized spectral enhancement for fra
2025-02-12 20:11:45,224 - services.audio_processor - INFO - [audio_processor.py:459] - Analyzing audio quality...
2025-02-12 20:11:45,236 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:11:45,237 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:11:45,242 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:11:45,242 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:11:45,249 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:11:45,249 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:11:45,271 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:11:45,271 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:11:45,506 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-12 20:11:45,506 - services.translation_routes - INFO - [translation_routes.py:153] - Request fb79f523: Background music analysis: {'has_background_music': False, 'music_confidence': 0.15608341036219223, 'feature_scores': {'spectral_flatness': 0.03820588165673722, 'rhythm_regularity': 0.023762376237623763, 'bass_presence': 0.039862824445829455, 'temporal_stability': 0.054252328022001785}}
2025-02-12 20:11:45,506 - services.translation_strategy - INFO - [translation_strategy.py:17] - 
=== AUDIO ANALYSIS ===
2025-02-12 20:11:45,506 - services.translation_strategy - INFO - [translation_strategy.py:48] - Selected strategy based on content type: speech_only
2025-02-12 20:11:45,506 - services.translation_routes - INFO - [translation_routes.py:165] - Request fb79f523: Audio characteristics heard: {'content_type': 'speech_only', 'heard_characteristics': {'music': {'detected': False, 'confidence': 0.0}, 'speech': {'consistency': 1.0}}}
2025-02-12 20:11:45,506 - services.translation_routes - INFO - [translation_routes.py:167] - Request fb79f523: Audio processed successfully
2025-02-12 20:11:45,526 - services.translation_routes - INFO - [translation_routes.py:184] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-02-12 20:11:46,741 - services.audio_link_routes - INFO - [audio_link_routes.py:133] - Successfully downloaded tiktok content
2025-02-12 20:11:46,743 - services.audio_link_routes - INFO - [audio_link_routes.py:152] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpgdrsy8uq/output.wav
2025-02-12 20:11:46,796 - services.audio_link_routes - INFO - [audio_link_routes.py:164] - Successfully converted audio to WAV
2025-02-12 20:11:46,799 - services.audio_link_routes - INFO - [audio_link_routes.py:242] - Successfully processed audio
2025-02-12 20:11:46,801 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 4.45s, Memory Change: -3139.25MB
2025-02-12 20:11:46,802 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 4.46s
2025-02-12 20:11:48,200 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-12 20:11:48,202 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-12 20:11:58,351 - services.translation_routes - INFO - [translation_routes.py:223] - Source text: if you wouldn't fight what do you think it would be I would definitely be a diabetic
2025-02-12 20:12:13,791 - services.translation_routes - INFO - [translation_routes.py:223] - Source text: The main thing is to make sure you're balanced on both feet, hands up, elbows in, a lot of people box with their elbows like this, no elbow in, and it really comes out like this as it comes out, it turns straight back to your chin when it's coming out, make sure your shoulder hits your chin, so it protects you, and turn it as it came out, turn it slightly, so you hit it with all four knuckles right here, and this right hand has to stay there.
2025-02-12 20:12:17,090 - services.translation_routes - INFO - [translation_routes.py:243] - Target text: Si tu ne faisais pas ça, ce que tu penses que tu pourrais faire, je serais définitivement diabétique.
2025-02-12 20:12:37,084 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-12 20:12:37,085 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-12 20:12:40,879 - services.translation_routes - INFO - [translation_routes.py:267] - Processing tuple output from model
2025-02-12 20:12:40,908 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:12:40,909 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:12:40,921 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:12:40,922 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:12:40,932 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:12:40,932 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:12:40,939 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:12:40,940 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:12:41,202 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-12 20:12:41,204 - services.translation_routes - INFO - [translation_routes.py:294] - 
==================================================
2025-02-12 20:12:41,204 - services.translation_routes - INFO - [translation_routes.py:295] - Translated Audio Quality Report
2025-02-12 20:12:41,204 - services.translation_routes - INFO - [translation_routes.py:296] - ==================================================
2025-02-12 20:12:41,204 - services.translation_routes - INFO - [translation_routes.py:297] - Request ID: fb79f523
2025-02-12 20:12:41,204 - services.translation_routes - INFO - [translation_routes.py:298] - Target Language: fra
2025-02-12 20:12:41,204 - services.translation_routes - INFO - [translation_routes.py:299] - --------------------------------------------------
2025-02-12 20:12:41,204 - services.translation_routes - INFO - [translation_routes.py:300] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.486
- Avg Amplitude: 0.051
- Rms Level: 0.086
- Crest Factor: 5.669
- Zero Crossings: 12968.000
- Silence Percentage: 13.864
- Clipping Points: 0.000
- Dynamic Range: 247.996

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.291
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.022
  - Temporal Flatness: 0.013

- Volume Metrics:
  - Volume Stability: 0.230
  - Volume Range: 359.119
  - Volume Variations: 0.052

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.030218293829171
- Background Noise: 3.267528031229878
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.7614728808403015, 'stability': 3.4609193801879883, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.02363424003124237, 'consistency': 0.0, 'distinction': 1.0}
  - Description: Strong nasal resonance. Unstable nasal resonance. Clear distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.524
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.003
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-02-12 20:12:41,205 - services.translation_routes - INFO - [translation_routes.py:301] - ==================================================

2025-02-12 20:12:41,205 - services.translation_routes - INFO - [translation_routes.py:307] - Request fb79f523: Audio output processed successfully
2025-02-12 20:12:41,210 - services.translation_routes - INFO - [translation_routes.py:362] - Request fb79f523: Response prepared successfully
2025-02-12 20:12:41,211 - services.translation_routes - INFO - [translation_routes.py:375] - Request fb79f523 completed in 56.38s
2025-02-12 20:12:41,212 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 56.38s, Memory Change: 2679.05MB
2025-02-12 20:12:41,213 - __main__ - INFO - [app.py:278] - Request to /translate took 133.90s
2025-02-12 20:12:57,354 - services.translation_routes - INFO - [translation_routes.py:223] - Source text: When the night shadows fall then the door will open out of the window paints light will twinkle yellow fear no all the black heed no hurricane willow fear neither root nor bow tom goes on before you hey now mary do we'll be waiting for you
2025-02-12 20:13:08,449 - services.translation_routes - INFO - [translation_routes.py:243] - Target text: [Musique épique, chanteuse et comédienne qui a fait de l'humour dans le monde entier en faisant du bruit d'un coup de poing sur son visage et ses doigts.]
2025-02-12 20:13:12,508 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-12 20:13:12,508 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-12 20:13:12,529 - services.translation_routes - INFO - [translation_routes.py:36] - Starting translation request 5ca2acd2
2025-02-12 20:13:12,530 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-02-12 20:13:12,531 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-02-12 20:13:12,536 - services.translation_routes - INFO - [translation_routes.py:97] - Request 5ca2acd2: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpmunspaxy.wav
2025-02-12 20:13:12,537 - services.audio_processor - INFO - [audio_processor.py:136] - Audio duration: 73.49 seconds
2025-02-12 20:13:12,537 - services.translation_routes - INFO - [translation_routes.py:112] - Request 5ca2acd2: Beginning audio processing with diagnostics
2025-02-12 20:13:12,537 - services.audio_processor - INFO - [audio_processor.py:269] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpmunspaxy.wav
2025-02-12 20:13:12,537 - services.audio_processor - INFO - [audio_processor.py:271] - Audio info - Sample rate: 16000, Channels: 1
2025-02-12 20:13:12,545 - services.audio_processor - INFO - [audio_processor.py:280] - Original audio shape: torch.Size([1, 1175881]), Frequency: 16000Hz
2025-02-12 20:13:12,731 - services.audio_processor - INFO - [audio_processor.py:438] - Base audio processing successful, proceeding with enhancement
2025-02-12 20:13:12,777 - services.audio_processor - INFO - [audio_processor.py:446] - Background music analysis: {'has_background_music': True, 'music_confidence': 0.4059628791204464, 'feature_scores': {'spectral_flatness': 0.1651322301984485, 'rhythm_regularity': 0.026939843068875327, 'bass_presence': 0.144706807566402, 'temporal_stability': 0.0691839982867205}}
2025-02-12 20:13:12,777 - services.audio_processor - INFO - [audio_processor.py:449] - Applying speech-optimized spectral enhancement for fra
2025-02-12 20:13:12,983 - services.audio_processor - INFO - [audio_processor.py:459] - Analyzing audio quality...
2025-02-12 20:13:13,163 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:13:13,164 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:13:13,242 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:13:13,243 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:13:13,305 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:13:13,305 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:13:13,383 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:13:13,384 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:13:16,910 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-12 20:13:16,910 - services.translation_routes - INFO - [translation_routes.py:123] - 
==================================================
2025-02-12 20:13:16,910 - services.translation_routes - INFO - [translation_routes.py:124] - Input Audio Quality Report
2025-02-12 20:13:16,910 - services.translation_routes - INFO - [translation_routes.py:125] - ==================================================
2025-02-12 20:13:16,910 - services.translation_routes - INFO - [translation_routes.py:126] - Request ID: 5ca2acd2
2025-02-12 20:13:16,911 - services.translation_routes - INFO - [translation_routes.py:127] - Target Language: fra
2025-02-12 20:13:16,911 - services.translation_routes - INFO - [translation_routes.py:128] - --------------------------------------------------
2025-02-12 20:13:16,911 - services.translation_routes - INFO - [translation_routes.py:129] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.035
- Rms Level: 0.064
- Crest Factor: 14.883
- Zero Crossings: 397415.000
- Silence Percentage: 25.553
- Clipping Points: 0.000
- Dynamic Range: 8430051.767

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.083
  - Temporal Flatness: 0.038

- Volume Metrics:
  - Volume Stability: 0.155
  - Volume Range: 27185562.253
  - Volume Variations: 0.041

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.008577188259245
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 1.5588304996490479, 'stability': 2.4418985843658447, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.5834342241287231, 'distinction': 0.13374167680740356}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.559
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.713
  - Rhythm Quality: 0.702
  - Intonation Quality: 0.724

Vowel Quality:
  - Quality Score: 0.010
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-02-12 20:13:16,911 - services.translation_routes - INFO - [translation_routes.py:130] - ==================================================

2025-02-12 20:13:16,911 - services.audio_processor - INFO - [audio_processor.py:269] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpmunspaxy.wav
2025-02-12 20:13:16,912 - services.audio_processor - INFO - [audio_processor.py:271] - Audio info - Sample rate: 16000, Channels: 1
2025-02-12 20:13:16,919 - services.audio_processor - INFO - [audio_processor.py:280] - Original audio shape: torch.Size([1, 1175881]), Frequency: 16000Hz
2025-02-12 20:13:17,024 - services.audio_processor - INFO - [audio_processor.py:438] - Base audio processing successful, proceeding with enhancement
2025-02-12 20:13:17,047 - services.audio_processor - INFO - [audio_processor.py:446] - Background music analysis: {'has_background_music': True, 'music_confidence': 0.4059628791204464, 'feature_scores': {'spectral_flatness': 0.1651322301984485, 'rhythm_regularity': 0.026939843068875327, 'bass_presence': 0.144706807566402, 'temporal_stability': 0.0691839982867205}}
2025-02-12 20:13:17,047 - services.audio_processor - INFO - [audio_processor.py:449] - Applying speech-optimized spectral enhancement for fra
2025-02-12 20:13:17,225 - services.audio_processor - INFO - [audio_processor.py:459] - Analyzing audio quality...
2025-02-12 20:13:17,402 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:13:17,402 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:13:17,453 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:13:17,454 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:13:17,504 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:13:17,504 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:13:17,550 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:13:17,551 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:13:20,902 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-12 20:13:20,903 - services.translation_routes - INFO - [translation_routes.py:153] - Request 5ca2acd2: Background music analysis: {'has_background_music': True, 'music_confidence': 0.4059628791204464, 'feature_scores': {'spectral_flatness': 0.1651322301984485, 'rhythm_regularity': 0.026939843068875327, 'bass_presence': 0.144706807566402, 'temporal_stability': 0.0691839982867205}}
2025-02-12 20:13:20,904 - services.translation_strategy - INFO - [translation_strategy.py:17] - 
=== AUDIO ANALYSIS ===
2025-02-12 20:13:20,905 - services.translation_strategy - INFO - [translation_strategy.py:48] - Selected strategy based on content type: speech_only
2025-02-12 20:13:20,905 - services.translation_routes - INFO - [translation_routes.py:165] - Request 5ca2acd2: Audio characteristics heard: {'content_type': 'speech_only', 'heard_characteristics': {'music': {'detected': False, 'confidence': 0.0}, 'speech': {'consistency': 1.0}}}
2025-02-12 20:13:20,905 - services.translation_routes - INFO - [translation_routes.py:167] - Request 5ca2acd2: Audio processed successfully
2025-02-12 20:13:21,155 - services.translation_routes - INFO - [translation_routes.py:184] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-02-12 20:14:33,020 - services.translation_routes - INFO - [translation_routes.py:267] - Processing tuple output from model
2025-02-12 20:14:33,057 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:14:33,062 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:14:33,067 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:14:33,067 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:14:33,072 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:14:33,072 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:14:33,076 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:14:33,076 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:14:33,228 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-12 20:14:33,229 - services.translation_routes - INFO - [translation_routes.py:294] - 
==================================================
2025-02-12 20:14:33,230 - services.translation_routes - INFO - [translation_routes.py:295] - Translated Audio Quality Report
2025-02-12 20:14:33,230 - services.translation_routes - INFO - [translation_routes.py:296] - ==================================================
2025-02-12 20:14:33,230 - services.translation_routes - INFO - [translation_routes.py:297] - Request ID: 5ca1de41
2025-02-12 20:14:33,230 - services.translation_routes - INFO - [translation_routes.py:298] - Target Language: fra
2025-02-12 20:14:33,230 - services.translation_routes - INFO - [translation_routes.py:299] - --------------------------------------------------
2025-02-12 20:14:33,230 - services.translation_routes - INFO - [translation_routes.py:300] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.491
- Avg Amplitude: 0.048
- Rms Level: 0.084
- Crest Factor: 5.877
- Zero Crossings: 5807.000
- Silence Percentage: 26.909
- Clipping Points: 0.000
- Dynamic Range: 1081.070

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.265
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.020
  - Temporal Flatness: 0.011

- Volume Metrics:
  - Volume Stability: 0.119
  - Volume Range: 1809.274
  - Volume Variations: 0.055

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.028432040456405
- Background Noise: 3.350780007520995
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.5262940526008606, 'stability': 2.6882009506225586, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.6766407489776611, 'consistency': 0.0, 'distinction': 1.0}
  - Description: Moderate nasal resonance. Unstable nasal resonance. Clear distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.547
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 1.000

Vowel Quality:
  - Quality Score: 0.002
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-02-12 20:14:33,230 - services.translation_routes - INFO - [translation_routes.py:301] - ==================================================

2025-02-12 20:14:33,230 - services.translation_routes - INFO - [translation_routes.py:307] - Request 5ca1de41: Audio output processed successfully
2025-02-12 20:14:33,238 - services.translation_routes - INFO - [translation_routes.py:362] - Request 5ca1de41: Response prepared successfully
2025-02-12 20:14:33,239 - services.translation_routes - INFO - [translation_routes.py:375] - Request 5ca1de41 completed in 239.78s
2025-02-12 20:14:33,241 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 239.78s, Memory Change: 2280.25MB
2025-02-12 20:14:33,241 - __main__ - INFO - [app.py:278] - Request to /translate took 289.41s
2025-02-12 20:14:39,157 - services.translation_routes - INFO - [translation_routes.py:243] - Target text: hop along my little friends up with you windows toms going on ahead candles for the king down the west since the sun soon you will be broken when the night shadows fall then the door will open out of the window paints light will twinkle yellow fear no all the black heed no horry willow fear neither root nor bow tom goes on before you hey now mary do we'll be waiting for you
2025-02-12 20:15:17,467 - services.translation_routes - INFO - [translation_routes.py:223] - Source text: This photo doesn't make sense. There's a plane that takes you up in the air and it feels like the passengers are floating. My goal was to throw them all into the air when we were at the peak of the pharaoh, weightless and I would be floating around in the center of my work. We couldn't believe it. It's one of those things where I can describe it as much as I want, but until you experience it, there's nothing like it. That's why I felt captured the epitome of this project. A photo that on paper makes no fucking sense and shouldn't be possible.
2025-02-12 20:16:22,507 - services.translation_routes - INFO - [translation_routes.py:243] - Target text: C'est une sorte de réalité irréaliste que j'ai capturé l'épitome de ce projet et c'est pourquoi cette photo qui sur papier fait pas de putain de sens et ne devrait pas être possible est 99 originaux.
2025-02-12 20:16:42,537 - services.translation_routes - INFO - [translation_routes.py:267] - Processing tuple output from model
2025-02-12 20:16:42,627 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:16:42,632 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:16:42,659 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:16:42,660 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:16:42,689 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:16:42,690 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:16:42,722 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:16:42,722 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:16:43,240 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-12 20:16:43,242 - services.translation_routes - INFO - [translation_routes.py:294] - 
==================================================
2025-02-12 20:16:43,242 - services.translation_routes - INFO - [translation_routes.py:295] - Translated Audio Quality Report
2025-02-12 20:16:43,242 - services.translation_routes - INFO - [translation_routes.py:296] - ==================================================
2025-02-12 20:16:43,242 - services.translation_routes - INFO - [translation_routes.py:297] - Request ID: b0cdf8af
2025-02-12 20:16:43,242 - services.translation_routes - INFO - [translation_routes.py:298] - Target Language: fra
2025-02-12 20:16:43,242 - services.translation_routes - INFO - [translation_routes.py:299] - --------------------------------------------------
2025-02-12 20:16:43,242 - services.translation_routes - INFO - [translation_routes.py:300] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.722
- Avg Amplitude: 0.071
- Rms Level: 0.103
- Crest Factor: 7.041
- Zero Crossings: 31820.000
- Silence Percentage: 4.841
- Clipping Points: 0.000
- Dynamic Range: 61.966

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.120
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.027
  - Temporal Flatness: 0.015

- Volume Metrics:
  - Volume Stability: 0.429
  - Volume Range: 237.150
  - Volume Variations: 0.051

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.029130313833293
- Background Noise: 3.8165179908666933
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
No issues detected

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.8817693591117859, 'stability': 3.67570161819458, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.1192183643579483, 'consistency': 0.0, 'distinction': 0.08945657312870026}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.524
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.003
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-02-12 20:16:43,242 - services.translation_routes - INFO - [translation_routes.py:301] - ==================================================

2025-02-12 20:16:43,242 - services.translation_routes - INFO - [translation_routes.py:307] - Request b0cdf8af: Audio output processed successfully
2025-02-12 20:16:43,260 - services.translation_routes - INFO - [translation_routes.py:362] - Request b0cdf8af: Response prepared successfully
2025-02-12 20:16:43,261 - services.translation_routes - INFO - [translation_routes.py:375] - Request b0cdf8af completed in 319.34s
2025-02-12 20:16:43,263 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 319.34s, Memory Change: 2064.50MB
2025-02-12 20:16:43,263 - __main__ - INFO - [app.py:278] - Request to /translate took 400.74s
2025-02-12 20:17:36,428 - services.translation_routes - INFO - [translation_routes.py:267] - Processing tuple output from model
2025-02-12 20:17:36,440 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:17:36,441 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:17:36,443 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:17:36,443 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:17:36,449 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:17:36,450 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:17:36,453 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:17:36,453 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:17:36,614 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-12 20:17:36,614 - services.translation_routes - INFO - [translation_routes.py:294] - 
==================================================
2025-02-12 20:17:36,614 - services.translation_routes - INFO - [translation_routes.py:295] - Translated Audio Quality Report
2025-02-12 20:17:36,614 - services.translation_routes - INFO - [translation_routes.py:296] - ==================================================
2025-02-12 20:17:36,614 - services.translation_routes - INFO - [translation_routes.py:297] - Request ID: 5ca2acd2
2025-02-12 20:17:36,614 - services.translation_routes - INFO - [translation_routes.py:298] - Target Language: fra
2025-02-12 20:17:36,614 - services.translation_routes - INFO - [translation_routes.py:299] - --------------------------------------------------
2025-02-12 20:17:36,614 - services.translation_routes - INFO - [translation_routes.py:300] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.570
- Avg Amplitude: 0.057
- Rms Level: 0.092
- Crest Factor: 6.223
- Zero Crossings: 13629.000
- Silence Percentage: 13.938
- Clipping Points: 0.000
- Dynamic Range: 255.056

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.222
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.026
  - Temporal Flatness: 0.015

- Volume Metrics:
  - Volume Stability: 0.299
  - Volume Range: 497.524
  - Volume Variations: 0.053

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0294464515987425
- Background Noise: 3.4891376229853583
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.8165563344955444, 'stability': 3.2650957107543945, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.12756653130054474, 'consistency': 0.0, 'distinction': 1.0}
  - Description: Strong nasal resonance. Unstable nasal resonance. Clear distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.445
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.004
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-02-12 20:17:36,614 - services.translation_routes - INFO - [translation_routes.py:301] - ==================================================

2025-02-12 20:17:36,614 - services.translation_routes - INFO - [translation_routes.py:307] - Request 5ca2acd2: Audio output processed successfully
2025-02-12 20:17:36,618 - services.translation_routes - INFO - [translation_routes.py:362] - Request 5ca2acd2: Response prepared successfully
2025-02-12 20:17:36,618 - services.translation_routes - INFO - [translation_routes.py:375] - Request 5ca2acd2 completed in 264.09s
2025-02-12 20:17:36,620 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 264.09s, Memory Change: -1890.73MB
2025-02-12 20:17:36,620 - __main__ - INFO - [app.py:278] - Request to /translate took 348.42s
2025-02-12 20:29:50,171 - __main__ - INFO - [app.py:217] - Received SIGINT signal
2025-02-12 20:29:50,173 - __main__ - INFO - [app.py:202] - Initiating graceful shutdown...
2025-02-12 20:29:55,177 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-02-12 20:29:55,178 - services.model_manager - INFO - [model_manager.py:233] - Cleaning up model resources
2025-02-12 20:29:55,179 - services.model_manager - INFO - [model_manager.py:246] - Model cleanup completed successfully
2025-02-12 20:29:55,183 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-02-12 20:29:55,184 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-02-12 20:29:55,184 - __main__ - INFO - [app.py:206] - Graceful shutdown completed
2025-02-12 20:29:55,185 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-02-12 20:29:55,186 - services.model_manager - INFO - [model_manager.py:233] - Cleaning up model resources
2025-02-12 20:29:55,186 - services.model_manager - INFO - [model_manager.py:246] - Model cleanup completed successfully
2025-02-12 20:29:55,186 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-02-12 20:29:55,187 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-02-12 20:29:55,188 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-02-12 20:29:55,188 - services.model_manager - INFO - [model_manager.py:233] - Cleaning up model resources
2025-02-12 20:29:55,188 - services.model_manager - INFO - [model_manager.py:246] - Model cleanup completed successfully
2025-02-12 20:29:55,189 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-02-12 20:29:55,189 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-02-12 20:30:59,947 - __main__ - INFO - [app.py:467] - Metrics server started on port 8000
2025-02-12 20:30:59,948 - services.model_manager - INFO - [model_manager.py:120] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-02-12 20:31:14,125 - services.model_manager - INFO - [model_manager.py:184] - Models loaded on CPU
2025-02-12 20:31:14,125 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-12 20:31:14,127 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-12 20:31:31,373 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-12 20:31:31,374 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-12 20:31:51,165 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-12 20:31:51,165 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-12 20:31:51,167 - services.model_manager - INFO - [model_manager.py:190] - Model initialization successful
2025-02-12 20:31:51,167 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-12 20:31:51,168 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-12 20:32:06,828 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-12 20:32:06,828 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-12 20:32:27,125 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-12 20:32:27,126 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-12 20:32:27,129 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-02-12 20:32:27,129 - __main__ - INFO - [app.py:491] - ==================================================
2025-02-12 20:32:27,129 - __main__ - INFO - [app.py:492] - Starting LinguaSync Backend
2025-02-12 20:32:27,129 - __main__ - INFO - [app.py:493] - Starting Flask app on port 5001 using cpu
2025-02-12 20:32:27,129 - __main__ - INFO - [app.py:494] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-02-12 20:32:27,129 - __main__ - INFO - [app.py:495] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-02-12 20:32:27,129 - __main__ - INFO - [app.py:496] - Maximum audio length: 300 seconds
2025-02-12 20:32:27,129 - __main__ - INFO - [app.py:497] - Sample rate: 16000 Hz
2025-02-12 20:32:27,129 - __main__ - INFO - [app.py:501] - System memory: 36.0GB total, 13.1GB available
2025-02-12 20:32:27,129 - __main__ - INFO - [app.py:502] - CPU cores: 11
2025-02-12 20:32:27,129 - __main__ - INFO - [app.py:510] - Configuration:
2025-02-12 20:32:27,129 - __main__ - INFO - [app.py:511] - - Debug mode: False
2025-02-12 20:32:27,129 - __main__ - INFO - [app.py:512] - - CORS enabled: True
2025-02-12 20:32:27,129 - __main__ - INFO - [app.py:513] - - Rate limiting: 10 requests per minute
2025-02-12 20:32:27,129 - __main__ - INFO - [app.py:514] - - Metrics enabled: True (port 8000)
2025-02-12 20:32:27,129 - __main__ - INFO - [app.py:516] - ==================================================
2025-02-12 20:33:16,474 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-02-12 20:33:16,475 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-02-12 20:33:16,477 - services.audio_link_routes - INFO - [audio_link_routes.py:216] - Processing URL: https://youtube.com/shorts/RFUAVaeEd4I?si=DzwEX49L4Ygty4eu
2025-02-12 20:33:16,477 - services.audio_link_routes - INFO - [audio_link_routes.py:233] - Processing YouTube URL
2025-02-12 20:33:16,478 - services.audio_link_routes - INFO - [audio_link_routes.py:120] - Using options for youtube: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpmkq0cjka/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8}
2025-02-12 20:33:23,042 - services.audio_link_routes - INFO - [audio_link_routes.py:133] - Successfully downloaded youtube content
2025-02-12 20:33:23,044 - services.audio_link_routes - INFO - [audio_link_routes.py:152] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpmkq0cjka/output.wav
2025-02-12 20:33:23,080 - services.audio_link_routes - INFO - [audio_link_routes.py:164] - Successfully converted audio to WAV
2025-02-12 20:33:23,081 - services.audio_link_routes - INFO - [audio_link_routes.py:242] - Successfully processed audio
2025-02-12 20:33:23,081 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 6.60s, Memory Change: 2.34MB
2025-02-12 20:33:23,081 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 6.60s
2025-02-12 20:33:24,858 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-12 20:33:24,860 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-12 20:33:42,681 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-12 20:33:42,682 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-12 20:33:58,750 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-12 20:33:58,751 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-12 20:33:58,754 - services.translation_routes - INFO - [translation_routes.py:36] - Starting translation request bbb90861
2025-02-12 20:33:58,754 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-02-12 20:33:58,754 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-02-12 20:33:58,756 - services.translation_routes - INFO - [translation_routes.py:97] - Request bbb90861: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpm845i4q6.wav
2025-02-12 20:33:58,757 - services.audio_processor - INFO - [audio_processor.py:136] - Audio duration: 52.48 seconds
2025-02-12 20:33:58,757 - services.translation_routes - INFO - [translation_routes.py:112] - Request bbb90861: Beginning audio processing with diagnostics
2025-02-12 20:33:58,757 - services.audio_processor - INFO - [audio_processor.py:269] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpm845i4q6.wav
2025-02-12 20:33:58,757 - services.audio_processor - INFO - [audio_processor.py:271] - Audio info - Sample rate: 16000, Channels: 1
2025-02-12 20:33:58,760 - services.audio_processor - INFO - [audio_processor.py:280] - Original audio shape: torch.Size([1, 839634]), Frequency: 16000Hz
2025-02-12 20:33:58,806 - services.audio_processor - INFO - [audio_processor.py:438] - Base audio processing successful, proceeding with enhancement
2025-02-12 20:33:58,824 - services.audio_processor - INFO - [audio_processor.py:446] - Background music analysis: {'has_background_music': True, 'music_confidence': 0.3547474247335353, 'feature_scores': {'spectral_flatness': 0.1747071146868413, 'rhythm_regularity': 0.029706601466992662, 'bass_presence': 0.07999731566149255, 'temporal_stability': 0.0703363929182088}}
2025-02-12 20:33:58,824 - services.audio_processor - INFO - [audio_processor.py:449] - Applying speech-optimized spectral enhancement for fra
2025-02-12 20:33:58,887 - services.audio_processor - INFO - [audio_processor.py:459] - Analyzing audio quality...
2025-02-12 20:33:58,975 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:33:58,976 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:33:58,991 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:33:58,991 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:33:59,007 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:33:59,007 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:33:59,024 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:33:59,025 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:34:00,425 - services.audio_link_routes - INFO - [audio_link_routes.py:216] - Processing URL: https://youtu.be/xDYy5qafTXY?si=bPvmOIPxuc7fvs-Z
2025-02-12 20:34:00,427 - services.audio_link_routes - INFO - [audio_link_routes.py:233] - Processing YouTube URL
2025-02-12 20:34:00,430 - services.audio_link_routes - INFO - [audio_link_routes.py:120] - Using options for youtube: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpp4cxqyr2/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8}
2025-02-12 20:34:01,023 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-12 20:34:01,023 - services.translation_routes - INFO - [translation_routes.py:123] - 
==================================================
2025-02-12 20:34:01,023 - services.translation_routes - INFO - [translation_routes.py:124] - Input Audio Quality Report
2025-02-12 20:34:01,023 - services.translation_routes - INFO - [translation_routes.py:125] - ==================================================
2025-02-12 20:34:01,023 - services.translation_routes - INFO - [translation_routes.py:126] - Request ID: bbb90861
2025-02-12 20:34:01,024 - services.translation_routes - INFO - [translation_routes.py:127] - Target Language: fra
2025-02-12 20:34:01,024 - services.translation_routes - INFO - [translation_routes.py:128] - --------------------------------------------------
2025-02-12 20:34:01,024 - services.translation_routes - INFO - [translation_routes.py:129] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.038
- Rms Level: 0.066
- Crest Factor: 14.422
- Zero Crossings: 335957.000
- Silence Percentage: 25.137
- Clipping Points: 0.000
- Dynamic Range: 9099014.583

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 0.000
  - Temporal Variation: 0.101
  - Temporal Flatness: 0.048

- Volume Metrics:
  - Volume Stability: 0.222
  - Volume Range: 25740829.110
  - Volume Variations: 0.040

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.009134430002693
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 1.0607566833496094, 'stability': 1.490928292274475, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.6918656826019287, 'distinction': 0.06730042397975922}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.510
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.775
  - Rhythm Quality: 0.812
  - Intonation Quality: 0.738

Vowel Quality:
  - Quality Score: 0.013
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-02-12 20:34:01,024 - services.translation_routes - INFO - [translation_routes.py:130] - ==================================================

2025-02-12 20:34:01,024 - services.audio_processor - INFO - [audio_processor.py:269] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpm845i4q6.wav
2025-02-12 20:34:01,024 - services.audio_processor - INFO - [audio_processor.py:271] - Audio info - Sample rate: 16000, Channels: 1
2025-02-12 20:34:01,027 - services.audio_processor - INFO - [audio_processor.py:280] - Original audio shape: torch.Size([1, 839634]), Frequency: 16000Hz
2025-02-12 20:34:01,068 - services.audio_processor - INFO - [audio_processor.py:438] - Base audio processing successful, proceeding with enhancement
2025-02-12 20:34:01,080 - services.audio_processor - INFO - [audio_processor.py:446] - Background music analysis: {'has_background_music': True, 'music_confidence': 0.3547474247335353, 'feature_scores': {'spectral_flatness': 0.1747071146868413, 'rhythm_regularity': 0.029706601466992662, 'bass_presence': 0.07999731566149255, 'temporal_stability': 0.0703363929182088}}
2025-02-12 20:34:01,081 - services.audio_processor - INFO - [audio_processor.py:449] - Applying speech-optimized spectral enhancement for fra
2025-02-12 20:34:01,146 - services.audio_processor - INFO - [audio_processor.py:459] - Analyzing audio quality...
2025-02-12 20:34:01,234 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:34:01,234 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:34:01,253 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:34:01,253 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:34:01,272 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:34:01,272 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:34:01,291 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:34:01,292 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:34:03,925 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-12 20:34:03,927 - services.translation_routes - INFO - [translation_routes.py:153] - Request bbb90861: Background music analysis: {'has_background_music': True, 'music_confidence': 0.3547474247335353, 'feature_scores': {'spectral_flatness': 0.1747071146868413, 'rhythm_regularity': 0.029706601466992662, 'bass_presence': 0.07999731566149255, 'temporal_stability': 0.0703363929182088}}
2025-02-12 20:34:03,927 - services.translation_strategy - INFO - [translation_strategy.py:17] - 
=== DETAILED AUDIO ANALYSIS ===
2025-02-12 20:34:03,927 - services.translation_strategy - INFO - [translation_strategy.py:25] - 
    Music Detection:
    - Has Background Music: False
    - Music Confidence: 0.000
    - Feature Scores:
    • Spectral Flatness: 0.000
    • Rhythm Regularity: 0.000
    • Bass Presence: 0.000
    • Temporal Stability: 0.000
            
2025-02-12 20:34:03,928 - services.translation_strategy - INFO - [translation_strategy.py:38] - 
    Audio Quality Metrics:
    - Audio Clarity: 3.009
    - Background Noise: 5.000
    - Voice Consistency: 1.000
            
2025-02-12 20:34:03,928 - services.translation_strategy - INFO - [translation_strategy.py:51] - Content Type Decision: speech_only (Low music confidence)
2025-02-12 20:34:03,928 - services.translation_strategy - INFO - [translation_strategy.py:54] - 
    Decision Factors:
    - Music Confidence Threshold: 0.4
    - Current Music Confidence: 0.000
    - Has Background Music Flag: False
    - Selected Type: speech_only
            
2025-02-12 20:34:03,928 - services.translation_routes - INFO - [translation_routes.py:165] - Request bbb90861: Audio characteristics heard: {'content_type': 'speech_only', 'heard_characteristics': {'music': {'detected': False, 'confidence': 0.0, 'feature_scores': {}}, 'speech': {'consistency': 1.0, 'clarity': 3.009134430002693, 'background_noise': 5.0}}}
2025-02-12 20:34:03,928 - services.translation_routes - INFO - [translation_routes.py:167] - Request bbb90861: Audio processed successfully
2025-02-12 20:34:03,973 - services.translation_routes - INFO - [translation_routes.py:184] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-02-12 20:34:07,163 - services.audio_link_routes - INFO - [audio_link_routes.py:133] - Successfully downloaded youtube content
2025-02-12 20:34:07,165 - services.audio_link_routes - INFO - [audio_link_routes.py:152] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpp4cxqyr2/output.wav
2025-02-12 20:34:07,207 - services.audio_link_routes - INFO - [audio_link_routes.py:164] - Successfully converted audio to WAV
2025-02-12 20:34:07,208 - services.audio_link_routes - INFO - [audio_link_routes.py:242] - Successfully processed audio
2025-02-12 20:34:07,209 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 6.78s, Memory Change: 1073.56MB
2025-02-12 20:34:07,209 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 6.78s
2025-02-12 20:34:17,106 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-12 20:34:17,107 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-12 20:34:34,070 - services.audio_link_routes - INFO - [audio_link_routes.py:216] - Processing URL: https://www.tiktok.com/@fightjoe/video/7127311328095522053?is_from_webapp=1&sender_device=pc&web_id=7470222526028858902
2025-02-12 20:34:34,070 - services.audio_link_routes - INFO - [audio_link_routes.py:236] - Processing TikTok URL
2025-02-12 20:34:34,070 - services.audio_link_routes - INFO - [audio_link_routes.py:120] - Using options for tiktok: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpetnmegw3/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8, 'extractor_args': {'tiktok': {'api_hostname': 'api22-normal-c-alisg.tiktokv.com', 'app_name': 'trill', 'app_version': '34.1.2', 'manifest_app_version': '2023401020', 'app_info': '1234567890123456789/trill///1180', 'device_id': '0034211154471541367'}}}
2025-02-12 20:34:37,848 - services.audio_link_routes - INFO - [audio_link_routes.py:133] - Successfully downloaded tiktok content
2025-02-12 20:34:37,850 - services.audio_link_routes - INFO - [audio_link_routes.py:152] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpetnmegw3/output.wav
2025-02-12 20:34:37,855 - services.audio_link_routes - INFO - [audio_link_routes.py:164] - Successfully converted audio to WAV
2025-02-12 20:34:37,856 - services.audio_link_routes - INFO - [audio_link_routes.py:242] - Successfully processed audio
2025-02-12 20:34:37,856 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 3.79s, Memory Change: 126.05MB
2025-02-12 20:34:37,856 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 3.79s
2025-02-12 20:34:41,145 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-12 20:34:41,146 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-12 20:34:46,193 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-12 20:34:46,194 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-12 20:35:02,648 - services.audio_link_routes - INFO - [audio_link_routes.py:216] - Processing URL: https://www.tiktok.com/@loganpaul/video/7138576512512478510
2025-02-12 20:35:02,650 - services.audio_link_routes - INFO - [audio_link_routes.py:236] - Processing TikTok URL
2025-02-12 20:35:02,650 - services.audio_link_routes - INFO - [audio_link_routes.py:120] - Using options for tiktok: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpipnz0ojk/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8, 'extractor_args': {'tiktok': {'api_hostname': 'api22-normal-c-alisg.tiktokv.com', 'app_name': 'trill', 'app_version': '34.1.2', 'manifest_app_version': '2023401020', 'app_info': '1234567890123456789/trill///1180', 'device_id': '4211673511393130213'}}}
2025-02-12 20:35:06,059 - services.translation_routes - INFO - [translation_routes.py:223] - Source text: The main thing is to make sure you're balanced on both feet, hands up, elbows in, a lot of people box with their elbows like this, no elbow in, and it really comes out like this as it comes out, it turns straight back to your chin when it's coming out, make sure your shoulder hits your chin, so it protects you, and turn it as it came out, turn it slightly, so you hit it with all four knuckles right here, and this right hand has to stay there.
2025-02-12 20:35:06,217 - services.audio_link_routes - INFO - [audio_link_routes.py:133] - Successfully downloaded tiktok content
2025-02-12 20:35:06,219 - services.audio_link_routes - INFO - [audio_link_routes.py:152] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpipnz0ojk/output.wav
2025-02-12 20:35:06,287 - services.audio_link_routes - INFO - [audio_link_routes.py:164] - Successfully converted audio to WAV
2025-02-12 20:35:06,288 - services.audio_link_routes - INFO - [audio_link_routes.py:242] - Successfully processed audio
2025-02-12 20:35:06,289 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 3.64s, Memory Change: -132.80MB
2025-02-12 20:35:06,289 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 3.64s
2025-02-12 20:35:16,093 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-12 20:35:16,094 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-12 20:35:16,113 - services.translation_routes - INFO - [translation_routes.py:36] - Starting translation request e34cf630
2025-02-12 20:35:16,113 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-02-12 20:35:16,113 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-02-12 20:35:16,119 - services.translation_routes - INFO - [translation_routes.py:97] - Request e34cf630: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpmrdqybtn.wav
2025-02-12 20:35:16,120 - services.audio_processor - INFO - [audio_processor.py:136] - Audio duration: 69.18 seconds
2025-02-12 20:35:16,120 - services.translation_routes - INFO - [translation_routes.py:112] - Request e34cf630: Beginning audio processing with diagnostics
2025-02-12 20:35:16,120 - services.audio_processor - INFO - [audio_processor.py:269] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpmrdqybtn.wav
2025-02-12 20:35:16,120 - services.audio_processor - INFO - [audio_processor.py:271] - Audio info - Sample rate: 16000, Channels: 1
2025-02-12 20:35:16,125 - services.audio_processor - INFO - [audio_processor.py:280] - Original audio shape: torch.Size([1, 1106919]), Frequency: 16000Hz
2025-02-12 20:35:16,237 - services.audio_processor - INFO - [audio_processor.py:438] - Base audio processing successful, proceeding with enhancement
2025-02-12 20:35:16,277 - services.audio_processor - INFO - [audio_processor.py:446] - Background music analysis: {'has_background_music': False, 'music_confidence': 0.20938998197072828, 'feature_scores': {'spectral_flatness': 0.08400185351212022, 'rhythm_regularity': 0.023911028730305837, 'bass_presence': 0.020109010040956245, 'temporal_stability': 0.08136808968734596}}
2025-02-12 20:35:16,278 - services.audio_processor - INFO - [audio_processor.py:449] - Applying speech-optimized spectral enhancement for fra
2025-02-12 20:35:16,504 - services.audio_processor - INFO - [audio_processor.py:459] - Analyzing audio quality...
2025-02-12 20:35:16,879 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:35:16,887 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:35:16,962 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:35:16,963 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:35:17,038 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:35:17,038 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:35:17,098 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:35:17,099 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:35:21,549 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-12 20:35:21,549 - services.translation_routes - INFO - [translation_routes.py:123] - 
==================================================
2025-02-12 20:35:21,549 - services.translation_routes - INFO - [translation_routes.py:124] - Input Audio Quality Report
2025-02-12 20:35:21,549 - services.translation_routes - INFO - [translation_routes.py:125] - ==================================================
2025-02-12 20:35:21,549 - services.translation_routes - INFO - [translation_routes.py:126] - Request ID: e34cf630
2025-02-12 20:35:21,549 - services.translation_routes - INFO - [translation_routes.py:127] - Target Language: fra
2025-02-12 20:35:21,549 - services.translation_routes - INFO - [translation_routes.py:128] - --------------------------------------------------
2025-02-12 20:35:21,549 - services.translation_routes - INFO - [translation_routes.py:129] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.069
- Rms Level: 0.114
- Crest Factor: 8.317
- Zero Crossings: 294432.000
- Silence Percentage: 23.702
- Clipping Points: 0.000
- Dynamic Range: 17318057.992

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.095
  - Temporal Flatness: 0.054

- Volume Metrics:
  - Volume Stability: 0.207
  - Volume Range: 39045333.862
  - Volume Variations: 0.071

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.027470416722832
- Background Noise: 4.326625974972339
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
No issues detected

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.8366706967353821, 'stability': 1.8690263032913208, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.5019978880882263, 'consistency': 0.290225088596344, 'distinction': 0.2739231586456299}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.406
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.234
  - Rhythm Quality: 0.390
  - Intonation Quality: 0.078

Vowel Quality:
  - Quality Score: 0.003
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-02-12 20:35:21,549 - services.translation_routes - INFO - [translation_routes.py:130] - ==================================================

2025-02-12 20:35:21,550 - services.audio_processor - INFO - [audio_processor.py:269] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpmrdqybtn.wav
2025-02-12 20:35:21,550 - services.audio_processor - INFO - [audio_processor.py:271] - Audio info - Sample rate: 16000, Channels: 1
2025-02-12 20:35:21,554 - services.audio_processor - INFO - [audio_processor.py:280] - Original audio shape: torch.Size([1, 1106919]), Frequency: 16000Hz
2025-02-12 20:35:21,629 - services.audio_processor - INFO - [audio_processor.py:438] - Base audio processing successful, proceeding with enhancement
2025-02-12 20:35:21,648 - services.audio_processor - INFO - [audio_processor.py:446] - Background music analysis: {'has_background_music': False, 'music_confidence': 0.20938998197072828, 'feature_scores': {'spectral_flatness': 0.08400185351212022, 'rhythm_regularity': 0.023911028730305837, 'bass_presence': 0.020109010040956245, 'temporal_stability': 0.08136808968734596}}
2025-02-12 20:35:21,649 - services.audio_processor - INFO - [audio_processor.py:449] - Applying speech-optimized spectral enhancement for fra
2025-02-12 20:35:21,796 - services.audio_processor - INFO - [audio_processor.py:459] - Analyzing audio quality...
2025-02-12 20:35:21,939 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:35:21,939 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:35:21,983 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:35:21,984 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:35:22,040 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:35:22,041 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:35:22,099 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:35:22,099 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:35:24,996 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-12 20:35:25,027 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-12 20:35:26,702 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-12 20:35:26,702 - services.translation_routes - INFO - [translation_routes.py:153] - Request e34cf630: Background music analysis: {'has_background_music': False, 'music_confidence': 0.20938998197072828, 'feature_scores': {'spectral_flatness': 0.08400185351212022, 'rhythm_regularity': 0.023911028730305837, 'bass_presence': 0.020109010040956245, 'temporal_stability': 0.08136808968734596}}
2025-02-12 20:35:26,703 - services.translation_strategy - INFO - [translation_strategy.py:17] - 
=== DETAILED AUDIO ANALYSIS ===
2025-02-12 20:35:26,703 - services.translation_strategy - INFO - [translation_strategy.py:25] - 
    Music Detection:
    - Has Background Music: False
    - Music Confidence: 0.000
    - Feature Scores:
    • Spectral Flatness: 0.000
    • Rhythm Regularity: 0.000
    • Bass Presence: 0.000
    • Temporal Stability: 0.000
            
2025-02-12 20:35:26,703 - services.translation_strategy - INFO - [translation_strategy.py:38] - 
    Audio Quality Metrics:
    - Audio Clarity: 3.027
    - Background Noise: 4.327
    - Voice Consistency: 1.000
            
2025-02-12 20:35:26,703 - services.translation_strategy - INFO - [translation_strategy.py:51] - Content Type Decision: speech_only (Low music confidence)
2025-02-12 20:35:26,703 - services.translation_strategy - INFO - [translation_strategy.py:54] - 
    Decision Factors:
    - Music Confidence Threshold: 0.4
    - Current Music Confidence: 0.000
    - Has Background Music Flag: False
    - Selected Type: speech_only
            
2025-02-12 20:35:26,703 - services.translation_routes - INFO - [translation_routes.py:165] - Request e34cf630: Audio characteristics heard: {'content_type': 'speech_only', 'heard_characteristics': {'music': {'detected': False, 'confidence': 0.0, 'feature_scores': {}}, 'speech': {'consistency': 1.0, 'clarity': 3.027470416722832, 'background_noise': 4.326625974972339}}}
2025-02-12 20:35:26,703 - services.translation_routes - INFO - [translation_routes.py:167] - Request e34cf630: Audio processed successfully
2025-02-12 20:35:26,788 - services.translation_routes - INFO - [translation_routes.py:184] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-02-12 20:35:44,469 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-12 20:35:44,471 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-12 20:35:56,056 - services.translation_routes - INFO - [translation_routes.py:243] - Target text: [Musique épique, chanteuse et comédienne qui a fait de l'humour dans le monde entier en faisant du bruit d'un coup de poing sur son visage et ses doigts.]
2025-02-12 20:36:20,252 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-12 20:36:20,254 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-12 20:36:20,265 - services.translation_routes - INFO - [translation_routes.py:36] - Starting translation request 9102e327
2025-02-12 20:36:20,266 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-02-12 20:36:20,266 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-02-12 20:36:20,268 - services.translation_routes - INFO - [translation_routes.py:97] - Request 9102e327: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpgq7q358d.wav
2025-02-12 20:36:20,273 - services.audio_processor - INFO - [audio_processor.py:136] - Audio duration: 6.57 seconds
2025-02-12 20:36:20,273 - services.translation_routes - INFO - [translation_routes.py:112] - Request 9102e327: Beginning audio processing with diagnostics
2025-02-12 20:36:20,273 - services.audio_processor - INFO - [audio_processor.py:269] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpgq7q358d.wav
2025-02-12 20:36:20,273 - services.audio_processor - INFO - [audio_processor.py:271] - Audio info - Sample rate: 16000, Channels: 1
2025-02-12 20:36:20,276 - services.audio_processor - INFO - [audio_processor.py:280] - Original audio shape: torch.Size([1, 105163]), Frequency: 16000Hz
2025-02-12 20:36:20,294 - services.audio_processor - INFO - [audio_processor.py:438] - Base audio processing successful, proceeding with enhancement
2025-02-12 20:36:20,306 - services.audio_processor - INFO - [audio_processor.py:446] - Background music analysis: {'has_background_music': False, 'music_confidence': 0.15608341036219223, 'feature_scores': {'spectral_flatness': 0.03820588165673722, 'rhythm_regularity': 0.023762376237623763, 'bass_presence': 0.039862824445829455, 'temporal_stability': 0.054252328022001785}}
2025-02-12 20:36:20,307 - services.audio_processor - INFO - [audio_processor.py:449] - Applying speech-optimized spectral enhancement for fra
2025-02-12 20:36:20,347 - services.audio_processor - INFO - [audio_processor.py:459] - Analyzing audio quality...
2025-02-12 20:36:20,387 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:36:20,395 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:36:20,415 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:36:20,415 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:36:20,423 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:36:20,423 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:36:20,432 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:36:20,433 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:36:20,732 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-12 20:36:20,734 - services.translation_routes - INFO - [translation_routes.py:123] - 
==================================================
2025-02-12 20:36:20,734 - services.translation_routes - INFO - [translation_routes.py:124] - Input Audio Quality Report
2025-02-12 20:36:20,734 - services.translation_routes - INFO - [translation_routes.py:125] - ==================================================
2025-02-12 20:36:20,735 - services.translation_routes - INFO - [translation_routes.py:126] - Request ID: 9102e327
2025-02-12 20:36:20,735 - services.translation_routes - INFO - [translation_routes.py:127] - Target Language: fra
2025-02-12 20:36:20,735 - services.translation_routes - INFO - [translation_routes.py:128] - --------------------------------------------------
2025-02-12 20:36:20,735 - services.translation_routes - INFO - [translation_routes.py:129] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.026
- Rms Level: 0.076
- Crest Factor: 12.530
- Zero Crossings: 29106.000
- Silence Percentage: 62.741
- Clipping Points: 0.000
- Dynamic Range: 6753166.765

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.082
  - Temporal Flatness: 0.024

- Volume Metrics:
  - Volume Stability: -0.671
  - Volume Range: 28777495.027
  - Volume Variations: 0.065

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.012101101788277
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 1.0195544958114624, 'stability': 3.234647035598755, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.004738867282867432, 'distinction': 0.9893258810043335}
  - Description: Strong nasal resonance. Unstable nasal resonance. Clear distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.653
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.045
  - Rhythm Quality: 0.090
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.007
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-02-12 20:36:20,735 - services.translation_routes - INFO - [translation_routes.py:130] - ==================================================

2025-02-12 20:36:20,735 - services.audio_processor - INFO - [audio_processor.py:269] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpgq7q358d.wav
2025-02-12 20:36:20,736 - services.audio_processor - INFO - [audio_processor.py:271] - Audio info - Sample rate: 16000, Channels: 1
2025-02-12 20:36:20,737 - services.audio_processor - INFO - [audio_processor.py:280] - Original audio shape: torch.Size([1, 105163]), Frequency: 16000Hz
2025-02-12 20:36:20,745 - services.audio_processor - INFO - [audio_processor.py:438] - Base audio processing successful, proceeding with enhancement
2025-02-12 20:36:20,749 - services.audio_processor - INFO - [audio_processor.py:446] - Background music analysis: {'has_background_music': False, 'music_confidence': 0.15608341036219223, 'feature_scores': {'spectral_flatness': 0.03820588165673722, 'rhythm_regularity': 0.023762376237623763, 'bass_presence': 0.039862824445829455, 'temporal_stability': 0.054252328022001785}}
2025-02-12 20:36:20,749 - services.audio_processor - INFO - [audio_processor.py:449] - Applying speech-optimized spectral enhancement for fra
2025-02-12 20:36:20,771 - services.audio_processor - INFO - [audio_processor.py:459] - Analyzing audio quality...
2025-02-12 20:36:20,803 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:36:20,804 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:36:20,816 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:36:20,817 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:36:20,831 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:36:20,831 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:36:20,840 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:36:20,840 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:36:21,029 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-12 20:36:21,029 - services.translation_routes - INFO - [translation_routes.py:153] - Request 9102e327: Background music analysis: {'has_background_music': False, 'music_confidence': 0.15608341036219223, 'feature_scores': {'spectral_flatness': 0.03820588165673722, 'rhythm_regularity': 0.023762376237623763, 'bass_presence': 0.039862824445829455, 'temporal_stability': 0.054252328022001785}}
2025-02-12 20:36:21,029 - services.translation_strategy - INFO - [translation_strategy.py:17] - 
=== DETAILED AUDIO ANALYSIS ===
2025-02-12 20:36:21,030 - services.translation_strategy - INFO - [translation_strategy.py:25] - 
    Music Detection:
    - Has Background Music: False
    - Music Confidence: 0.000
    - Feature Scores:
    • Spectral Flatness: 0.000
    • Rhythm Regularity: 0.000
    • Bass Presence: 0.000
    • Temporal Stability: 0.000
            
2025-02-12 20:36:21,030 - services.translation_strategy - INFO - [translation_strategy.py:38] - 
    Audio Quality Metrics:
    - Audio Clarity: 3.012
    - Background Noise: 5.000
    - Voice Consistency: 1.000
            
2025-02-12 20:36:21,030 - services.translation_strategy - INFO - [translation_strategy.py:51] - Content Type Decision: speech_only (Low music confidence)
2025-02-12 20:36:21,030 - services.translation_strategy - INFO - [translation_strategy.py:54] - 
    Decision Factors:
    - Music Confidence Threshold: 0.4
    - Current Music Confidence: 0.000
    - Has Background Music Flag: False
    - Selected Type: speech_only
            
2025-02-12 20:36:21,030 - services.translation_routes - INFO - [translation_routes.py:165] - Request 9102e327: Audio characteristics heard: {'content_type': 'speech_only', 'heard_characteristics': {'music': {'detected': False, 'confidence': 0.0, 'feature_scores': {}}, 'speech': {'consistency': 1.0, 'clarity': 3.012101101788277, 'background_noise': 5.0}}}
2025-02-12 20:36:21,030 - services.translation_routes - INFO - [translation_routes.py:167] - Request 9102e327: Audio processed successfully
2025-02-12 20:36:21,054 - services.translation_routes - INFO - [translation_routes.py:184] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-02-12 20:36:33,625 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-12 20:36:33,626 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-12 20:36:35,024 - services.translation_routes - INFO - [translation_routes.py:223] - Source text: if you wouldn't fight what do you think it would be I would definitely be a diabetic
2025-02-12 20:36:51,920 - services.translation_routes - INFO - [translation_routes.py:243] - Target text: Si tu ne faisais pas ça, ce que tu penses que tu pourrais faire, je serais définitivement diabétique.
2025-02-12 20:36:52,773 - services.translation_routes - INFO - [translation_routes.py:223] - Source text: When the night shadows fall then the door will open out of the window paints light will twinkle yellow fear no all the black heed no hurricane willow fear neither root nor bow tom goes on before you hey now mary do we'll be waiting for you
2025-02-12 20:37:14,631 - services.translation_routes - INFO - [translation_routes.py:267] - Processing tuple output from model
2025-02-12 20:37:14,648 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:37:14,649 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:37:14,653 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:37:14,654 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:37:14,659 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:37:14,660 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:37:14,667 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:37:14,667 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:37:14,778 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-12 20:37:14,779 - services.translation_routes - INFO - [translation_routes.py:294] - 
==================================================
2025-02-12 20:37:14,779 - services.translation_routes - INFO - [translation_routes.py:295] - Translated Audio Quality Report
2025-02-12 20:37:14,779 - services.translation_routes - INFO - [translation_routes.py:296] - ==================================================
2025-02-12 20:37:14,779 - services.translation_routes - INFO - [translation_routes.py:297] - Request ID: bbb90861
2025-02-12 20:37:14,779 - services.translation_routes - INFO - [translation_routes.py:298] - Target Language: fra
2025-02-12 20:37:14,779 - services.translation_routes - INFO - [translation_routes.py:299] - --------------------------------------------------
2025-02-12 20:37:14,779 - services.translation_routes - INFO - [translation_routes.py:300] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.609
- Avg Amplitude: 0.048
- Rms Level: 0.082
- Crest Factor: 7.390
- Zero Crossings: 5277.000
- Silence Percentage: 21.908
- Clipping Points: 0.000
- Dynamic Range: 568.736

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.076
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.027
  - Temporal Flatness: 0.014

- Volume Metrics:
  - Volume Stability: 0.222
  - Volume Range: 641.067
  - Volume Variations: 0.051

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0223095777227047
- Background Noise: 3.956042662456356
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.518236517906189, 'stability': 2.228264808654785, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.8836628198623657, 'consistency': 0.0, 'distinction': 1.0}
  - Description: Moderate nasal resonance. Unstable nasal resonance. Clear distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.576
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.040
  - Rhythm Quality: 0.000
  - Intonation Quality: 1.000

Vowel Quality:
  - Quality Score: 0.004
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-02-12 20:37:14,779 - services.translation_routes - INFO - [translation_routes.py:301] - ==================================================

2025-02-12 20:37:14,779 - services.translation_routes - INFO - [translation_routes.py:307] - Request bbb90861: Audio output processed successfully
2025-02-12 20:37:14,785 - services.translation_routes - INFO - [translation_routes.py:362] - Request bbb90861: Response prepared successfully
2025-02-12 20:37:14,787 - services.translation_routes - INFO - [translation_routes.py:375] - Request bbb90861 completed in 196.03s
2025-02-12 20:37:14,788 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 196.03s, Memory Change: 1830.77MB
2025-02-12 20:37:14,788 - __main__ - INFO - [app.py:278] - Request to /translate took 229.93s
2025-02-12 20:37:16,673 - services.translation_routes - INFO - [translation_routes.py:267] - Processing tuple output from model
2025-02-12 20:37:16,686 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:37:16,686 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:37:16,693 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:37:16,693 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:37:16,700 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:37:16,701 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:37:16,708 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:37:16,709 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:37:16,866 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-12 20:37:16,866 - services.translation_routes - INFO - [translation_routes.py:294] - 
==================================================
2025-02-12 20:37:16,866 - services.translation_routes - INFO - [translation_routes.py:295] - Translated Audio Quality Report
2025-02-12 20:37:16,866 - services.translation_routes - INFO - [translation_routes.py:296] - ==================================================
2025-02-12 20:37:16,867 - services.translation_routes - INFO - [translation_routes.py:297] - Request ID: 9102e327
2025-02-12 20:37:16,867 - services.translation_routes - INFO - [translation_routes.py:298] - Target Language: fra
2025-02-12 20:37:16,867 - services.translation_routes - INFO - [translation_routes.py:299] - --------------------------------------------------
2025-02-12 20:37:16,867 - services.translation_routes - INFO - [translation_routes.py:300] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.516
- Avg Amplitude: 0.049
- Rms Level: 0.082
- Crest Factor: 6.294
- Zero Crossings: 13044.000
- Silence Percentage: 13.935
- Clipping Points: 0.000
- Dynamic Range: 235.953

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.213
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.023
  - Temporal Flatness: 0.013

- Volume Metrics:
  - Volume Stability: 0.231
  - Volume Range: 344.976
  - Volume Variations: 0.050

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0260597303933654
- Background Noise: 3.5177126415846898
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.7092999815940857, 'stability': 3.142971992492676, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.10657326877117157, 'consistency': 0.0, 'distinction': 1.0}
  - Description: Strong nasal resonance. Unstable nasal resonance. Clear distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.516
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.003
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-02-12 20:37:16,867 - services.translation_routes - INFO - [translation_routes.py:301] - ==================================================

2025-02-12 20:37:16,867 - services.translation_routes - INFO - [translation_routes.py:307] - Request 9102e327: Audio output processed successfully
2025-02-12 20:37:16,869 - services.translation_routes - INFO - [translation_routes.py:362] - Request 9102e327: Response prepared successfully
2025-02-12 20:37:16,871 - services.translation_routes - INFO - [translation_routes.py:375] - Request 9102e327 completed in 56.61s
2025-02-12 20:37:16,871 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 56.61s, Memory Change: 4084.17MB
2025-02-12 20:37:16,871 - __main__ - INFO - [app.py:278] - Request to /translate took 155.73s
2025-02-12 20:37:23,223 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-12 20:37:23,223 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-12 20:37:23,245 - services.translation_routes - INFO - [translation_routes.py:36] - Starting translation request 481cde04
2025-02-12 20:37:23,246 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-02-12 20:37:23,247 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-02-12 20:37:23,254 - services.translation_routes - INFO - [translation_routes.py:97] - Request 481cde04: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpdynx9w4q.wav
2025-02-12 20:37:23,255 - services.audio_processor - INFO - [audio_processor.py:136] - Audio duration: 73.49 seconds
2025-02-12 20:37:23,255 - services.translation_routes - INFO - [translation_routes.py:112] - Request 481cde04: Beginning audio processing with diagnostics
2025-02-12 20:37:23,256 - services.audio_processor - INFO - [audio_processor.py:269] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpdynx9w4q.wav
2025-02-12 20:37:23,256 - services.audio_processor - INFO - [audio_processor.py:271] - Audio info - Sample rate: 16000, Channels: 1
2025-02-12 20:37:23,273 - services.audio_processor - INFO - [audio_processor.py:280] - Original audio shape: torch.Size([1, 1175881]), Frequency: 16000Hz
2025-02-12 20:37:23,360 - services.audio_processor - INFO - [audio_processor.py:438] - Base audio processing successful, proceeding with enhancement
2025-02-12 20:37:23,385 - services.audio_processor - INFO - [audio_processor.py:446] - Background music analysis: {'has_background_music': True, 'music_confidence': 0.4059628791204464, 'feature_scores': {'spectral_flatness': 0.1651322301984485, 'rhythm_regularity': 0.026939843068875327, 'bass_presence': 0.144706807566402, 'temporal_stability': 0.0691839982867205}}
2025-02-12 20:37:23,385 - services.audio_processor - INFO - [audio_processor.py:449] - Applying speech-optimized spectral enhancement for fra
2025-02-12 20:37:23,514 - services.audio_processor - INFO - [audio_processor.py:459] - Analyzing audio quality...
2025-02-12 20:37:23,691 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:37:23,692 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:37:23,746 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:37:23,747 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:37:23,785 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:37:23,786 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:37:23,825 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:37:23,825 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:37:26,690 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-12 20:37:26,690 - services.translation_routes - INFO - [translation_routes.py:123] - 
==================================================
2025-02-12 20:37:26,690 - services.translation_routes - INFO - [translation_routes.py:124] - Input Audio Quality Report
2025-02-12 20:37:26,690 - services.translation_routes - INFO - [translation_routes.py:125] - ==================================================
2025-02-12 20:37:26,690 - services.translation_routes - INFO - [translation_routes.py:126] - Request ID: 481cde04
2025-02-12 20:37:26,690 - services.translation_routes - INFO - [translation_routes.py:127] - Target Language: fra
2025-02-12 20:37:26,690 - services.translation_routes - INFO - [translation_routes.py:128] - --------------------------------------------------
2025-02-12 20:37:26,690 - services.translation_routes - INFO - [translation_routes.py:129] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.035
- Rms Level: 0.064
- Crest Factor: 14.883
- Zero Crossings: 397415.000
- Silence Percentage: 25.553
- Clipping Points: 0.000
- Dynamic Range: 8430051.767

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.083
  - Temporal Flatness: 0.038

- Volume Metrics:
  - Volume Stability: 0.155
  - Volume Range: 27185562.253
  - Volume Variations: 0.041

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.008577188259245
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 1.5588304996490479, 'stability': 2.4418985843658447, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.5834342241287231, 'distinction': 0.13374167680740356}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.559
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.713
  - Rhythm Quality: 0.702
  - Intonation Quality: 0.724

Vowel Quality:
  - Quality Score: 0.010
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-02-12 20:37:26,690 - services.translation_routes - INFO - [translation_routes.py:130] - ==================================================

2025-02-12 20:37:26,690 - services.audio_processor - INFO - [audio_processor.py:269] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpdynx9w4q.wav
2025-02-12 20:37:26,690 - services.audio_processor - INFO - [audio_processor.py:271] - Audio info - Sample rate: 16000, Channels: 1
2025-02-12 20:37:26,695 - services.audio_processor - INFO - [audio_processor.py:280] - Original audio shape: torch.Size([1, 1175881]), Frequency: 16000Hz
2025-02-12 20:37:26,767 - services.audio_processor - INFO - [audio_processor.py:438] - Base audio processing successful, proceeding with enhancement
2025-02-12 20:37:26,787 - services.audio_processor - INFO - [audio_processor.py:446] - Background music analysis: {'has_background_music': True, 'music_confidence': 0.4059628791204464, 'feature_scores': {'spectral_flatness': 0.1651322301984485, 'rhythm_regularity': 0.026939843068875327, 'bass_presence': 0.144706807566402, 'temporal_stability': 0.0691839982867205}}
2025-02-12 20:37:26,788 - services.audio_processor - INFO - [audio_processor.py:449] - Applying speech-optimized spectral enhancement for fra
2025-02-12 20:37:26,908 - services.audio_processor - INFO - [audio_processor.py:459] - Analyzing audio quality...
2025-02-12 20:37:27,085 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:37:27,086 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:37:27,125 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:37:27,125 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:37:27,166 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:37:27,166 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:37:27,203 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:37:27,203 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:37:30,071 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-12 20:37:30,073 - services.translation_routes - INFO - [translation_routes.py:153] - Request 481cde04: Background music analysis: {'has_background_music': True, 'music_confidence': 0.4059628791204464, 'feature_scores': {'spectral_flatness': 0.1651322301984485, 'rhythm_regularity': 0.026939843068875327, 'bass_presence': 0.144706807566402, 'temporal_stability': 0.0691839982867205}}
2025-02-12 20:37:30,073 - services.translation_strategy - INFO - [translation_strategy.py:17] - 
=== DETAILED AUDIO ANALYSIS ===
2025-02-12 20:37:30,073 - services.translation_strategy - INFO - [translation_strategy.py:25] - 
    Music Detection:
    - Has Background Music: False
    - Music Confidence: 0.000
    - Feature Scores:
    • Spectral Flatness: 0.000
    • Rhythm Regularity: 0.000
    • Bass Presence: 0.000
    • Temporal Stability: 0.000
            
2025-02-12 20:37:30,073 - services.translation_strategy - INFO - [translation_strategy.py:38] - 
    Audio Quality Metrics:
    - Audio Clarity: 3.009
    - Background Noise: 5.000
    - Voice Consistency: 1.000
            
2025-02-12 20:37:30,073 - services.translation_strategy - INFO - [translation_strategy.py:51] - Content Type Decision: speech_only (Low music confidence)
2025-02-12 20:37:30,073 - services.translation_strategy - INFO - [translation_strategy.py:54] - 
    Decision Factors:
    - Music Confidence Threshold: 0.4
    - Current Music Confidence: 0.000
    - Has Background Music Flag: False
    - Selected Type: speech_only
            
2025-02-12 20:37:30,073 - services.translation_routes - INFO - [translation_routes.py:165] - Request 481cde04: Audio characteristics heard: {'content_type': 'speech_only', 'heard_characteristics': {'music': {'detected': False, 'confidence': 0.0, 'feature_scores': {}}, 'speech': {'consistency': 1.0, 'clarity': 3.008577188259245, 'background_noise': 5.0}}}
2025-02-12 20:37:30,073 - services.translation_routes - INFO - [translation_routes.py:167] - Request 481cde04: Audio processed successfully
2025-02-12 20:37:30,159 - services.translation_routes - INFO - [translation_routes.py:184] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-02-12 20:38:14,226 - services.translation_routes - INFO - [translation_routes.py:243] - Target text: hop along my little friends up with you windows toms going on ahead candles for the king down the west since the sun soon you will be broken when the night shadows fall then the door will open out of the window paints light will twinkle yellow fear no all the black heed no horry willow fear neither root nor bow tom goes on before you hey now mary do we'll be waiting for you
2025-02-12 20:39:14,259 - services.translation_routes - INFO - [translation_routes.py:223] - Source text: This photo doesn't make sense. There's a plane that takes you up in the air and it feels like the passengers are floating. My goal was to throw them all into the air when we were at the peak of the pharaoh, weightless and I would be floating around in the center of my work. We couldn't believe it. It's one of those things where I can describe it as much as I want, but until you experience it, there's nothing like it. That's why I felt captured the epitome of this project. A photo that on paper makes no fucking sense and shouldn't be possible.
2025-02-12 20:40:11,808 - services.translation_routes - INFO - [translation_routes.py:267] - Processing tuple output from model
2025-02-12 20:40:11,875 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:40:11,880 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:40:11,898 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:40:11,898 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:40:11,909 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:40:11,909 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:40:11,923 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:40:11,924 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:40:12,431 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-12 20:40:12,433 - services.translation_routes - INFO - [translation_routes.py:294] - 
==================================================
2025-02-12 20:40:12,433 - services.translation_routes - INFO - [translation_routes.py:295] - Translated Audio Quality Report
2025-02-12 20:40:12,433 - services.translation_routes - INFO - [translation_routes.py:296] - ==================================================
2025-02-12 20:40:12,433 - services.translation_routes - INFO - [translation_routes.py:297] - Request ID: e34cf630
2025-02-12 20:40:12,433 - services.translation_routes - INFO - [translation_routes.py:298] - Target Language: fra
2025-02-12 20:40:12,433 - services.translation_routes - INFO - [translation_routes.py:299] - --------------------------------------------------
2025-02-12 20:40:12,433 - services.translation_routes - INFO - [translation_routes.py:300] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.626
- Avg Amplitude: 0.069
- Rms Level: 0.099
- Crest Factor: 6.307
- Zero Crossings: 30482.000
- Silence Percentage: 5.838
- Clipping Points: 0.000
- Dynamic Range: 75.481

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.212
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.026
  - Temporal Flatness: 0.015

- Volume Metrics:
  - Volume Stability: 0.455
  - Volume Range: 257.790
  - Volume Variations: 0.048

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.031458383312468
- Background Noise: 3.522693980338069
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.8064621090888977, 'stability': 3.3954358100891113, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.0, 'distinction': 0.1031906008720398}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.534
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.003
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-02-12 20:40:12,433 - services.translation_routes - INFO - [translation_routes.py:301] - ==================================================

2025-02-12 20:40:12,433 - services.translation_routes - INFO - [translation_routes.py:307] - Request e34cf630: Audio output processed successfully
2025-02-12 20:40:12,442 - services.translation_routes - INFO - [translation_routes.py:362] - Request e34cf630: Response prepared successfully
2025-02-12 20:40:12,443 - services.translation_routes - INFO - [translation_routes.py:375] - Request e34cf630 completed in 296.33s
2025-02-12 20:40:12,446 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 296.33s, Memory Change: -3043.77MB
2025-02-12 20:40:12,447 - __main__ - INFO - [app.py:278] - Request to /translate took 355.34s
2025-02-12 20:40:15,906 - services.translation_routes - INFO - [translation_routes.py:243] - Target text: C'est une sorte de réalité irréaliste que j'ai capturé l'épitome de ce projet et c'est pourquoi cette photo qui sur papier fait pas de putain de sens et ne devrait pas être possible est 99 originaux.
2025-02-12 20:41:22,903 - services.translation_routes - INFO - [translation_routes.py:267] - Processing tuple output from model
2025-02-12 20:41:22,919 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:41:22,920 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:41:22,924 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:41:22,924 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:41:22,929 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:41:22,929 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:41:22,934 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 20:41:22,935 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 20:41:23,158 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-02-12 20:41:23,158 - services.translation_routes - INFO - [translation_routes.py:294] - 
==================================================
2025-02-12 20:41:23,158 - services.translation_routes - INFO - [translation_routes.py:295] - Translated Audio Quality Report
2025-02-12 20:41:23,158 - services.translation_routes - INFO - [translation_routes.py:296] - ==================================================
2025-02-12 20:41:23,158 - services.translation_routes - INFO - [translation_routes.py:297] - Request ID: 481cde04
2025-02-12 20:41:23,158 - services.translation_routes - INFO - [translation_routes.py:298] - Target Language: fra
2025-02-12 20:41:23,158 - services.translation_routes - INFO - [translation_routes.py:299] - --------------------------------------------------
2025-02-12 20:41:23,158 - services.translation_routes - INFO - [translation_routes.py:300] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.751
- Avg Amplitude: 0.060
- Rms Level: 0.099
- Crest Factor: 7.578
- Zero Crossings: 18572.000
- Silence Percentage: 14.740
- Clipping Points: 0.000
- Dynamic Range: 308.337

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.053
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.027
  - Temporal Flatness: 0.014

- Volume Metrics:
  - Volume Stability: 0.235
  - Volume Range: 905.950
  - Volume Variations: 0.060

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0261393678138955
- Background Noise: 4.031317414804144
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.9494515657424927, 'stability': 3.792532444000244, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.0, 'distinction': 0.21919751167297363}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.511
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.003
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-02-12 20:41:23,158 - services.translation_routes - INFO - [translation_routes.py:301] - ==================================================

2025-02-12 20:41:23,158 - services.translation_routes - INFO - [translation_routes.py:307] - Request 481cde04: Audio output processed successfully
2025-02-12 20:41:23,163 - services.translation_routes - INFO - [translation_routes.py:362] - Request 481cde04: Response prepared successfully
2025-02-12 20:41:23,163 - services.translation_routes - INFO - [translation_routes.py:375] - Request 481cde04 completed in 239.92s
2025-02-12 20:41:23,166 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 239.92s, Memory Change: -4832.94MB
2025-02-12 20:41:23,166 - __main__ - INFO - [app.py:278] - Request to /translate took 338.70s
