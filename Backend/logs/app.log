2025-02-12 07:22:10,395 - __main__ - INFO - [app.py:467] - Metrics server started on port 8000
2025-02-12 07:22:10,395 - services.model_manager - INFO - [model_manager.py:120] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-02-12 07:22:23,809 - services.model_manager - INFO - [model_manager.py:184] - Models loaded on CPU
2025-02-12 07:22:23,810 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-12 07:22:23,813 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-12 07:22:55,481 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-12 07:22:55,482 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-12 07:23:13,201 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-12 07:23:13,201 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-12 07:23:13,205 - services.model_manager - INFO - [model_manager.py:190] - Model initialization successful
2025-02-12 07:23:13,205 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-12 07:23:13,205 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-12 07:23:28,602 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-12 07:23:28,602 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-12 07:23:47,661 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-12 07:23:47,661 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-12 07:23:47,664 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-02-12 07:23:47,664 - __main__ - INFO - [app.py:491] - ==================================================
2025-02-12 07:23:47,664 - __main__ - INFO - [app.py:492] - Starting LinguaSync Backend
2025-02-12 07:23:47,664 - __main__ - INFO - [app.py:493] - Starting Flask app on port 5001 using cpu
2025-02-12 07:23:47,664 - __main__ - INFO - [app.py:494] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-02-12 07:23:47,664 - __main__ - INFO - [app.py:495] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-02-12 07:23:47,664 - __main__ - INFO - [app.py:496] - Maximum audio length: 300 seconds
2025-02-12 07:23:47,664 - __main__ - INFO - [app.py:497] - Sample rate: 16000 Hz
2025-02-12 07:23:47,664 - __main__ - INFO - [app.py:501] - System memory: 36.0GB total, 13.7GB available
2025-02-12 07:23:47,664 - __main__ - INFO - [app.py:502] - CPU cores: 11
2025-02-12 07:23:47,664 - __main__ - INFO - [app.py:510] - Configuration:
2025-02-12 07:23:47,664 - __main__ - INFO - [app.py:511] - - Debug mode: False
2025-02-12 07:23:47,664 - __main__ - INFO - [app.py:512] - - CORS enabled: True
2025-02-12 07:23:47,664 - __main__ - INFO - [app.py:513] - - Rate limiting: 10 requests per minute
2025-02-12 07:23:47,664 - __main__ - INFO - [app.py:514] - - Metrics enabled: True (port 8000)
2025-02-12 07:23:47,664 - __main__ - INFO - [app.py:516] - ==================================================
2025-02-12 07:24:38,205 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.20MB
2025-02-12 07:24:38,207 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-02-12 07:24:38,213 - services.audio_link_routes - INFO - [audio_link_routes.py:216] - Processing URL: https://youtube.com/shorts/RFUAVaeEd4I?si=DzwEX49L4Ygty4eu
2025-02-12 07:24:38,215 - services.audio_link_routes - INFO - [audio_link_routes.py:233] - Processing YouTube URL
2025-02-12 07:24:38,216 - services.audio_link_routes - INFO - [audio_link_routes.py:120] - Using options for youtube: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpqamhkeap/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8}
2025-02-12 07:24:41,648 - services.audio_link_routes - INFO - [audio_link_routes.py:133] - Successfully downloaded youtube content
2025-02-12 07:24:41,650 - services.audio_link_routes - INFO - [audio_link_routes.py:152] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpqamhkeap/output.wav
2025-02-12 07:24:41,678 - services.audio_link_routes - INFO - [audio_link_routes.py:164] - Successfully converted audio to WAV
2025-02-12 07:24:41,679 - services.audio_link_routes - INFO - [audio_link_routes.py:242] - Successfully processed audio
2025-02-12 07:24:41,679 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 3.47s, Memory Change: 47.72MB
2025-02-12 07:24:41,679 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 3.47s
2025-02-12 07:24:46,869 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-02-12 07:24:46,871 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-02-12 07:25:04,652 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-02-12 07:25:04,655 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-02-12 07:25:20,955 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-02-12 07:25:20,956 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-02-12 07:25:20,959 - services.translation_routes - INFO - [translation_routes.py:36] - Starting translation request cf6539f1
2025-02-12 07:25:20,959 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-02-12 07:25:20,959 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-02-12 07:25:20,960 - services.translation_routes - INFO - [translation_routes.py:97] - Request cf6539f1: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpa5yisaeq.wav
2025-02-12 07:25:20,963 - services.audio_processor - INFO - [audio_processor.py:136] - Audio duration: 52.48 seconds
2025-02-12 07:25:20,963 - services.translation_routes - INFO - [translation_routes.py:112] - Request cf6539f1: Beginning audio processing with diagnostics
2025-02-12 07:25:20,963 - services.audio_processor - INFO - [audio_processor.py:269] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpa5yisaeq.wav
2025-02-12 07:25:20,963 - services.audio_processor - INFO - [audio_processor.py:271] - Audio info - Sample rate: 16000, Channels: 1
2025-02-12 07:25:20,967 - services.audio_processor - INFO - [audio_processor.py:280] - Original audio shape: torch.Size([1, 839634]), Frequency: 16000Hz
2025-02-12 07:25:21,025 - services.audio_processor - INFO - [audio_processor.py:438] - Base audio processing successful, proceeding with enhancement
2025-02-12 07:25:21,047 - services.audio_processor - INFO - [audio_processor.py:446] - Background music analysis: {'has_background_music': True, 'music_confidence': 0.3547474247335353, 'feature_scores': {'spectral_flatness': 0.1747071146868413, 'rhythm_regularity': 0.029706601466992662, 'bass_presence': 0.07999731566149255, 'temporal_stability': 0.0703363929182088}}
2025-02-12 07:25:21,047 - services.audio_processor - INFO - [audio_processor.py:449] - Applying speech-optimized spectral enhancement for spa
2025-02-12 07:25:21,047 - services.audio_processor - WARNING - [audio_processor.py:354] - No specific parameters for spa, using defaults
2025-02-12 07:25:21,115 - services.audio_processor - INFO - [audio_processor.py:459] - Analyzing audio quality...
2025-02-12 07:25:21,210 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 07:25:21,213 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 07:25:21,230 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 07:25:21,231 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 07:25:21,248 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 07:25:21,248 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 07:25:21,266 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 07:25:21,267 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 07:25:23,250 - services.diagnostics.language_analysis.spanish - ERROR - [spanish.py:161] - Spanish timing analysis failed: 'SpanishAnalyzer' object has no attribute '_find_syllable_boundaries'
2025-02-12 07:25:23,369 - services.diagnostics.language_analysis.spanish - ERROR - [spanish.py:218] - Spanish vowel analysis failed: 'SpanishAnalyzer' object has no attribute '_analyze_vowel_formants'
2025-02-12 07:25:23,375 - services.diagnostics.language_analysis.spanish - ERROR - [spanish.py:249] - Spanish stress analysis failed: 'SpanishAnalyzer' object has no attribute '_find_stress_peaks'
2025-02-12 07:25:23,375 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for spa
2025-02-12 07:25:23,376 - services.translation_routes - INFO - [translation_routes.py:123] - 
==================================================
2025-02-12 07:25:23,376 - services.translation_routes - INFO - [translation_routes.py:124] - Input Audio Quality Report
2025-02-12 07:25:23,376 - services.translation_routes - INFO - [translation_routes.py:125] - ==================================================
2025-02-12 07:25:23,376 - services.translation_routes - INFO - [translation_routes.py:126] - Request ID: cf6539f1
2025-02-12 07:25:23,376 - services.translation_routes - INFO - [translation_routes.py:127] - Target Language: spa
2025-02-12 07:25:23,376 - services.translation_routes - INFO - [translation_routes.py:128] - --------------------------------------------------
2025-02-12 07:25:23,376 - services.translation_routes - INFO - [translation_routes.py:129] - Audio Quality Analysis Report
==============================

Target Language: spa

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.038
- Rms Level: 0.066
- Crest Factor: 14.422
- Zero Crossings: 335957.000
- Silence Percentage: 25.137
- Clipping Points: 0.000
- Dynamic Range: 9099014.583

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 0.000
  - Temporal Variation: 0.101
  - Temporal Flatness: 0.048

- Volume Metrics:
  - Volume Stability: 0.222
  - Volume Range: 25740829.110
  - Volume Variations: 0.040

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.009134430002693
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Phoneme Analysis:
  - Trilled R: {'features': {'modulation_rate': 3412.396290873597, 'strength': 1.4564002752304077}, 'strength': 1.0, 'regularity': 0.0, 'duration': -177.80774116675843, 'overall_quality': 0.5}
  - Interdental Theta: {'energy': 1.7171649932861328, 'consistency': -0.39795219898223877, 'spectral_shape': {'centroid': 0.4623025953769684, 'spread': 0.28357934951782227, 'quality': 0.7393616288900375}, 'quality': 0.6861914743979772}
  - Stop Consonants: {'voiceless_stops': {'strength': 1.0, 'precision': 0.9452079426034381, 'quality': 0.972603971301719}, 'voiced_stops': {'voicing': 0.1356859654188156, 'precision': 0.3153348105134042, 'quality': 0.2255103879661099}, 'overall_quality': 0.5990571796339145}

Syllable Timing:

Intonation Patterns:
  - Contour Patterns: {'mean_pitch': 187.02680422921776, 'pitch_variability': 0.333713884112371, 'rise_fall_ratio': 0.8202764976832523, 'quality': 0.666286115905472}
  - Melodic Features: {'range': 1.0, 'movement': 0.8990564683362993, 'quality': 0.9495282341681497}
  - Overall Quality: 0.808

Vowel Clarity:

Stress Patterns:
2025-02-12 07:25:23,376 - services.translation_routes - INFO - [translation_routes.py:130] - ==================================================

2025-02-12 07:25:23,377 - services.audio_processor - INFO - [audio_processor.py:269] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpa5yisaeq.wav
2025-02-12 07:25:23,377 - services.audio_processor - INFO - [audio_processor.py:271] - Audio info - Sample rate: 16000, Channels: 1
2025-02-12 07:25:23,379 - services.audio_processor - INFO - [audio_processor.py:280] - Original audio shape: torch.Size([1, 839634]), Frequency: 16000Hz
2025-02-12 07:25:23,420 - services.audio_processor - INFO - [audio_processor.py:438] - Base audio processing successful, proceeding with enhancement
2025-02-12 07:25:23,431 - services.audio_processor - INFO - [audio_processor.py:446] - Background music analysis: {'has_background_music': True, 'music_confidence': 0.3547474247335353, 'feature_scores': {'spectral_flatness': 0.1747071146868413, 'rhythm_regularity': 0.029706601466992662, 'bass_presence': 0.07999731566149255, 'temporal_stability': 0.0703363929182088}}
2025-02-12 07:25:23,431 - services.audio_processor - INFO - [audio_processor.py:449] - Applying speech-optimized spectral enhancement for spa
2025-02-12 07:25:23,431 - services.audio_processor - WARNING - [audio_processor.py:354] - No specific parameters for spa, using defaults
2025-02-12 07:25:23,494 - services.audio_processor - INFO - [audio_processor.py:459] - Analyzing audio quality...
2025-02-12 07:25:23,583 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 07:25:23,583 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 07:25:23,600 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 07:25:23,600 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 07:25:23,618 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 07:25:23,618 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 07:25:23,636 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 07:25:23,636 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 07:25:25,603 - services.diagnostics.language_analysis.spanish - ERROR - [spanish.py:161] - Spanish timing analysis failed: 'SpanishAnalyzer' object has no attribute '_find_syllable_boundaries'
2025-02-12 07:25:25,722 - services.diagnostics.language_analysis.spanish - ERROR - [spanish.py:218] - Spanish vowel analysis failed: 'SpanishAnalyzer' object has no attribute '_analyze_vowel_formants'
2025-02-12 07:25:25,727 - services.diagnostics.language_analysis.spanish - ERROR - [spanish.py:249] - Spanish stress analysis failed: 'SpanishAnalyzer' object has no attribute '_find_stress_peaks'
2025-02-12 07:25:25,728 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for spa
2025-02-12 07:25:25,729 - services.translation_routes - INFO - [translation_routes.py:153] - Request cf6539f1: Background music analysis: {'has_background_music': True, 'music_confidence': 0.3547474247335353, 'feature_scores': {'spectral_flatness': 0.1747071146868413, 'rhythm_regularity': 0.029706601466992662, 'bass_presence': 0.07999731566149255, 'temporal_stability': 0.0703363929182088}}
2025-02-12 07:25:25,729 - services.translation_strategy - INFO - [translation_strategy.py:19] - 
=== AUDIO ANALYSIS ===
2025-02-12 07:25:25,729 - services.translation_strategy - INFO - [translation_strategy.py:29] - 
Audio Quality:
2025-02-12 07:25:25,729 - services.translation_strategy - INFO - [translation_strategy.py:30] - - Audio Clarity: N/A
2025-02-12 07:25:25,729 - services.translation_strategy - INFO - [translation_strategy.py:31] - - Background Noise: N/A
2025-02-12 07:25:25,729 - services.translation_strategy - INFO - [translation_strategy.py:32] - - Voice Consistency: N/A
2025-02-12 07:25:25,729 - services.translation_strategy - INFO - [translation_strategy.py:36] - 
Waveform Characteristics:
2025-02-12 07:25:25,729 - services.translation_strategy - INFO - [translation_strategy.py:37] - - Peak Amplitude: 0.949999988079071
2025-02-12 07:25:25,729 - services.translation_strategy - INFO - [translation_strategy.py:38] - - RMS Level: 0.06587004661560059
2025-02-12 07:25:25,729 - services.translation_strategy - INFO - [translation_strategy.py:39] - - Silence Percentage: 25.136641315949987
2025-02-12 07:25:25,729 - services.translation_strategy - INFO - [translation_strategy.py:61] - 
Just listening to audio characteristics for now...
2025-02-12 07:25:25,730 - services.translation_routes - INFO - [translation_routes.py:165] - Request cf6539f1: Audio characteristics heard: {'heard_characteristics': {'music': {'detected': False, 'confidence': 0.0}, 'audio_quality': {'clarity': 'N/A', 'background_noise': 'N/A', 'voice_consistency': 'N/A'}, 'waveform': {'peak_amplitude': 0.949999988079071, 'rms_level': 0.06587004661560059, 'silence_percentage': 25.136641315949987}}}
2025-02-12 07:25:25,730 - services.translation_routes - INFO - [translation_routes.py:167] - Request cf6539f1: Audio processed successfully
2025-02-12 07:25:25,775 - services.translation_routes - INFO - [translation_routes.py:184] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-02-12 07:26:05,127 - services.translation_routes - INFO - [translation_routes.py:223] - Source text: The main thing is to make sure you're balanced on both feet, hands up, elbows in, a lot of people box with their elbows like this, no elbow in, and it really comes out like this as it comes out, it turns straight back to your chin when it's coming out, make sure your shoulder hits your chin, so it protects you, and turn it as it came out, turn it slightly, so you hit it with all four knuckles right here, and this right hand has to stay there.
2025-02-12 07:26:48,557 - services.translation_routes - INFO - [translation_routes.py:243] - Target text: Alright, I've got to throw you through the jug. The main thing is make sure you're balanced on both feet. Hands up. Elbows in. Lots of people box with their elbows like this. No elbows in because of the body shot. And it really comes like this just straight out as it comes out. It turns straight back to the chin. When it's coming out, make sure your shoulder hits your chin so it protects you. Turn it as it is coming out slightly. So you hit with all four knuckles right here and it comes back and this right hand has to stay there.
2025-02-12 07:27:18,475 - services.translation_routes - INFO - [translation_routes.py:267] - Processing tuple output from model
2025-02-12 07:27:18,487 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 07:27:18,487 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 07:27:18,491 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 07:27:18,491 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 07:27:18,496 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 07:27:18,496 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 07:27:18,500 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-02-12 07:27:18,500 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-02-12 07:27:18,612 - services.diagnostics.language_analysis.spanish - ERROR - [spanish.py:161] - Spanish timing analysis failed: 'SpanishAnalyzer' object has no attribute '_find_syllable_boundaries'
2025-02-12 07:27:18,621 - services.diagnostics.language_analysis.spanish - ERROR - [spanish.py:218] - Spanish vowel analysis failed: 'SpanishAnalyzer' object has no attribute '_analyze_vowel_formants'
2025-02-12 07:27:18,622 - services.diagnostics.language_analysis.spanish - ERROR - [spanish.py:249] - Spanish stress analysis failed: 'SpanishAnalyzer' object has no attribute '_find_stress_peaks'
2025-02-12 07:27:18,623 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for spa
2025-02-12 07:27:18,624 - services.translation_routes - INFO - [translation_routes.py:294] - 
==================================================
2025-02-12 07:27:18,624 - services.translation_routes - INFO - [translation_routes.py:295] - Translated Audio Quality Report
2025-02-12 07:27:18,624 - services.translation_routes - INFO - [translation_routes.py:296] - ==================================================
2025-02-12 07:27:18,624 - services.translation_routes - INFO - [translation_routes.py:297] - Request ID: cf6539f1
2025-02-12 07:27:18,624 - services.translation_routes - INFO - [translation_routes.py:298] - Target Language: spa
2025-02-12 07:27:18,624 - services.translation_routes - INFO - [translation_routes.py:299] - --------------------------------------------------
2025-02-12 07:27:18,624 - services.translation_routes - INFO - [translation_routes.py:300] - Audio Quality Analysis Report
==============================

Target Language: spa

Waveform Analysis:
--------------------
- Peak Amplitude: 0.585
- Avg Amplitude: 0.066
- Rms Level: 0.104
- Crest Factor: 5.599
- Zero Crossings: 6369.000
- Silence Percentage: 16.260
- Clipping Points: 0.000
- Dynamic Range: 577.420

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.300
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.028
  - Temporal Flatness: 0.015

- Volume Metrics:
  - Volume Stability: 0.261
  - Volume Range: 2625.132
  - Volume Variations: 0.062

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.037298405408786
- Background Noise: 3.2397584086932265
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
No issues detected

Language-Specific Analysis:
--------------------

Phoneme Analysis:
  - Trilled R: {'features': {'modulation_rate': 3529.526598340654, 'strength': 1.0765678882598877}, 'strength': 1.0, 'regularity': 0.0, 'duration': -136.02050046103307, 'overall_quality': 0.5}
  - Interdental Theta: {'energy': 0.8466175198554993, 'consistency': -2.4851362705230713, 'spectral_shape': {'centroid': 0.421909898519516, 'spread': 0.21899597346782684, 'quality': 0.751456968486309}, 'quality': -0.2956872607270877}
  - Stop Consonants: {'voiceless_stops': {'strength': 1.0, 'precision': 0.24840820011626563, 'quality': 0.6242041000581329}, 'voiced_stops': {'voicing': 0.23814657330513, 'precision': 0.09488798078823135, 'quality': 0.16651727704668068}, 'overall_quality': 0.3953606885524068}

Syllable Timing:

Intonation Patterns:
  - Contour Patterns: {'mean_pitch': 216.03734240692313, 'pitch_variability': 0.22476895688630633, 'rise_fall_ratio': 0.7142857141399417, 'quality': 0.7752310431240979}
  - Melodic Features: {'range': 1.0, 'movement': 0.42496959987168986, 'quality': 0.7124847999358449}
  - Overall Quality: 0.744

Vowel Clarity:

Stress Patterns:
2025-02-12 07:27:18,624 - services.translation_routes - INFO - [translation_routes.py:301] - ==================================================

2025-02-12 07:27:18,624 - services.translation_routes - INFO - [translation_routes.py:307] - Request cf6539f1: Audio output processed successfully
2025-02-12 07:27:18,627 - services.translation_routes - INFO - [translation_routes.py:362] - Request cf6539f1: Response prepared successfully
2025-02-12 07:27:18,627 - services.translation_routes - INFO - [translation_routes.py:375] - Request cf6539f1 completed in 117.67s
2025-02-12 07:27:18,630 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 117.67s, Memory Change: 3212.05MB
2025-02-12 07:27:18,630 - __main__ - INFO - [app.py:278] - Request to /translate took 151.76s
2025-02-12 07:39:35,699 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-02-12 07:39:35,700 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-02-12 07:39:35,702 - services.audio_link_routes - INFO - [audio_link_routes.py:216] - Processing URL: https://www.tiktok.com/@fightjoe/video/7127311328095522053
2025-02-12 07:39:35,702 - services.audio_link_routes - INFO - [audio_link_routes.py:236] - Processing TikTok URL
2025-02-12 07:39:35,703 - services.audio_link_routes - INFO - [audio_link_routes.py:120] - Using options for tiktok: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpbs4ufsqu/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8, 'extractor_args': {'tiktok': {'api_hostname': 'api22-normal-c-alisg.tiktokv.com', 'app_name': 'trill', 'app_version': '34.1.2', 'manifest_app_version': '2023401020', 'app_info': '1234567890123456789/trill///1180', 'device_id': '2094528318954116761'}}}
2025-02-12 07:39:36,036 - services.audio_link_routes - ERROR - [audio_link_routes.py:175] - Download error for tiktok: [0;31mERROR:[0m [TikTok] 7127311328095522053: Unable to extract webpage video data; please report this issue on  https://github.com/yt-dlp/yt-dlp/issues?q= , filling out the appropriate issue template. Confirm you are on the latest version using  yt-dlp -U
2025-02-12 07:39:36,036 - services.audio_link_routes - ERROR - [audio_link_routes.py:182] - tiktok processing error: Unable to access this TikTok content. Please try another video or check the URL.
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.12/site-packages/yt_dlp/YoutubeDL.py", line 1637, in wrapper
    return func(self, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.12/site-packages/yt_dlp/YoutubeDL.py", line 1772, in __extract_info
    ie_result = ie.extract(url)
                ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.12/site-packages/yt_dlp/extractor/common.py", line 742, in extract
    ie_result = self._real_extract(url)
                ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.12/site-packages/yt_dlp/extractor/tiktok.py", line 894, in _real_extract
    video_data, status = self._extract_web_data_and_status(url, video_id)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.12/site-packages/yt_dlp/extractor/tiktok.py", line 250, in _extract_web_data_and_status
    raise ExtractorError('Unable to extract webpage video data')
yt_dlp.utils.ExtractorError: [TikTok] 7127311328095522053: Unable to extract webpage video data; please report this issue on  https://github.com/yt-dlp/yt-dlp/issues?q= , filling out the appropriate issue template. Confirm you are on the latest version using  yt-dlp -U

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/robmills/audio-translation/Backend/services/audio_link_routes.py", line 125, in handle_video_platform_url
    info = ydl.extract_info(url, download=False)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.12/site-packages/yt_dlp/YoutubeDL.py", line 1626, in extract_info
    return self.__extract_info(url, self.get_info_extractor(key), download, extra_info, process)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.12/site-packages/yt_dlp/YoutubeDL.py", line 1655, in wrapper
    self.report_error(str(e), e.format_traceback())
  File "/opt/anaconda3/lib/python3.12/site-packages/yt_dlp/YoutubeDL.py", line 1095, in report_error
    self.trouble(f'{self._format_err("ERROR:", self.Styles.ERROR)} {message}', *args, **kwargs)
  File "/opt/anaconda3/lib/python3.12/site-packages/yt_dlp/YoutubeDL.py", line 1034, in trouble
    raise DownloadError(message, exc_info)
yt_dlp.utils.DownloadError: [0;31mERROR:[0m [TikTok] 7127311328095522053: Unable to extract webpage video data; please report this issue on  https://github.com/yt-dlp/yt-dlp/issues?q= , filling out the appropriate issue template. Confirm you are on the latest version using  yt-dlp -U

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/robmills/audio-translation/Backend/services/audio_link_routes.py", line 177, in handle_video_platform_url
    raise Exception(f"Unable to access this TikTok content. Please try another video or check the URL.")
Exception: Unable to access this TikTok content. Please try another video or check the URL.
2025-02-12 07:39:36,038 - services.audio_link_routes - ERROR - [audio_link_routes.py:250] - Processing error: Unable to access this TikTok content. Please try another video or check the URL.
2025-02-12 07:39:36,041 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.34s, Memory Change: 4.56MB
2025-02-12 07:39:36,041 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.34s
