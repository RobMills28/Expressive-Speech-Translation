2025-03-26 08:19:10,772 - __main__ - INFO - [app.py:656] - Metrics server started on port 8000
2025-03-26 08:19:10,772 - services.model_manager - INFO - [model_manager.py:120] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-03-26 08:19:29,133 - services.model_manager - INFO - [model_manager.py:184] - Models loaded on CPU
2025-03-26 08:19:29,133 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-03-26 08:19:29,135 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-03-26 08:20:01,460 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-03-26 08:20:01,461 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-03-26 08:20:17,516 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-03-26 08:20:17,516 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-03-26 08:20:17,519 - services.model_manager - INFO - [model_manager.py:190] - Model initialization successful
2025-03-26 08:20:17,519 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-03-26 08:20:17,519 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-03-26 08:20:36,860 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-03-26 08:20:36,860 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-03-26 08:20:55,474 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-03-26 08:20:55,474 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-03-26 08:20:55,477 - __main__ - INFO - [app.py:607] - Cleanup complete: removed 0 files, freed 0.00MB
2025-03-26 08:20:55,477 - __main__ - INFO - [app.py:680] - ==================================================
2025-03-26 08:20:55,477 - __main__ - INFO - [app.py:681] - Starting LinguaSync Backend
2025-03-26 08:20:55,477 - __main__ - INFO - [app.py:682] - Starting Flask app on port 5001 using cpu
2025-03-26 08:20:55,477 - __main__ - INFO - [app.py:683] - Python version: 3.9.21 (main, Dec 11 2024, 10:21:40) 
[Clang 14.0.6 ]
2025-03-26 08:20:55,477 - __main__ - INFO - [app.py:684] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por', 'rus', 'jpn', 'cmn', 'ukr', 'ben', 'cat', 'cmn_Hant', 'cym', 'dan', 'eng', 'est', 'fin', 'hin', 'ind', 'kor', 'mlt', 'nld', 'pes', 'pol', 'ron', 'slk', 'swe', 'swh', 'tel', 'tgl', 'tha', 'tur', 'urd', 'uzn', 'vie']
2025-03-26 08:20:55,477 - __main__ - INFO - [app.py:685] - Maximum audio length: 300 seconds
2025-03-26 08:20:55,477 - __main__ - INFO - [app.py:686] - Sample rate: 16000 Hz
2025-03-26 08:20:55,477 - __main__ - INFO - [app.py:690] - System memory: 36.0GB total, 16.9GB available
2025-03-26 08:20:55,477 - __main__ - INFO - [app.py:691] - CPU cores: 11
2025-03-26 08:20:55,478 - __main__ - INFO - [app.py:699] - Configuration:
2025-03-26 08:20:55,478 - __main__ - INFO - [app.py:700] - - Debug mode: False
2025-03-26 08:20:55,478 - __main__ - INFO - [app.py:701] - - CORS enabled: True
2025-03-26 08:20:55,478 - __main__ - INFO - [app.py:702] - - Rate limiting: 10 requests per minute
2025-03-26 08:20:55,478 - __main__ - INFO - [app.py:703] - - Metrics enabled: True (port 8000)
2025-03-26 08:20:55,478 - __main__ - INFO - [app.py:704] - - Translation backends: seamless, espnet
2025-03-26 08:20:55,478 - __main__ - INFO - [app.py:705] - - Default backend: seamless
2025-03-26 08:20:55,478 - __main__ - INFO - [app.py:707] - ==================================================
2025-03-26 08:21:52,587 - __main__ - ERROR - [app.py:502] - Error getting available backends: 'TranslationManager' object has no attribute 'get_available_backends'
2025-03-26 08:21:52,588 - __main__ - INFO - [app.py:282] - Request to /available-backends took 0.00s
2025-03-26 08:21:52,591 - __main__ - ERROR - [app.py:502] - Error getting available backends: 'TranslationManager' object has no attribute 'get_available_backends'
2025-03-26 08:21:52,592 - __main__ - INFO - [app.py:282] - Request to /available-backends took 0.00s
2025-03-26 08:28:44,776 - __main__ - INFO - [app.py:567] - Processing video with seamless backend for language spa
2025-03-26 08:28:44,776 - services.error_handler - ERROR - [error_handler.py:36] - Error f328b8fb: handle_video_processing() takes 1 positional argument but 2 were given
Traceback (most recent call last):
  File "/Users/robmills/audio-translation/Backend/app.py", line 573, in process_video
    return handle_video_processing(target_language, backend)
TypeError: handle_video_processing() takes 1 positional argument but 2 were given
2025-03-26 08:28:44,777 - services.utils - INFO - [utils.py:57] - Performance - Function: process_video, Duration: 0.00s, Memory Change: 0.17MB
2025-03-26 08:28:44,777 - __main__ - INFO - [app.py:282] - Request to /process-video took 0.00s
2025-03-26 08:53:15,923 - __main__ - INFO - [app.py:221] - Received SIGINT signal
2025-03-26 08:53:15,924 - __main__ - INFO - [app.py:206] - Initiating graceful shutdown...
2025-03-26 08:53:20,926 - __main__ - INFO - [app.py:625] - Application shutting down...
2025-03-26 08:53:20,927 - services.model_manager - INFO - [model_manager.py:233] - Cleaning up model resources
2025-03-26 08:53:20,927 - services.model_manager - INFO - [model_manager.py:246] - Model cleanup completed successfully
2025-03-26 08:53:20,928 - __main__ - INFO - [app.py:607] - Cleanup complete: removed 0 files, freed 0.00MB
2025-03-26 08:53:20,929 - __main__ - INFO - [app.py:639] - Cleanup completed successfully
2025-03-26 08:53:20,929 - __main__ - INFO - [app.py:210] - Graceful shutdown completed
2025-03-26 08:53:20,930 - __main__ - INFO - [app.py:625] - Application shutting down...
2025-03-26 08:53:20,930 - services.model_manager - INFO - [model_manager.py:233] - Cleaning up model resources
2025-03-26 08:53:20,931 - services.model_manager - INFO - [model_manager.py:246] - Model cleanup completed successfully
2025-03-26 08:53:20,931 - __main__ - INFO - [app.py:607] - Cleanup complete: removed 0 files, freed 0.00MB
2025-03-26 08:53:20,931 - __main__ - INFO - [app.py:639] - Cleanup completed successfully
2025-03-26 08:53:20,932 - __main__ - INFO - [app.py:625] - Application shutting down...
2025-03-26 08:53:20,932 - services.model_manager - INFO - [model_manager.py:233] - Cleaning up model resources
2025-03-26 08:53:20,932 - services.model_manager - INFO - [model_manager.py:246] - Model cleanup completed successfully
2025-03-26 08:53:20,932 - __main__ - INFO - [app.py:607] - Cleanup complete: removed 0 files, freed 0.00MB
2025-03-26 08:53:20,933 - __main__ - INFO - [app.py:639] - Cleanup completed successfully
2025-03-26 09:17:52,484 - __main__ - INFO - [app.py:656] - Metrics server started on port 8000
2025-03-26 09:17:52,484 - services.model_manager - INFO - [model_manager.py:120] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-03-26 09:18:11,688 - services.model_manager - INFO - [model_manager.py:184] - Models loaded on CPU
2025-03-26 09:18:11,689 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-03-26 09:18:11,689 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-03-26 09:18:32,068 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-03-26 09:18:32,068 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-03-26 09:18:48,943 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-03-26 09:18:48,943 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-03-26 09:18:48,945 - services.model_manager - INFO - [model_manager.py:190] - Model initialization successful
2025-03-26 09:18:48,945 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-03-26 09:18:48,946 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-03-26 09:19:05,953 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-03-26 09:19:05,953 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-03-26 09:19:21,372 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-03-26 09:19:21,372 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-03-26 09:19:21,375 - __main__ - INFO - [app.py:607] - Cleanup complete: removed 0 files, freed 0.00MB
2025-03-26 09:19:21,375 - __main__ - INFO - [app.py:680] - ==================================================
2025-03-26 09:19:21,375 - __main__ - INFO - [app.py:681] - Starting LinguaSync Backend
2025-03-26 09:19:21,375 - __main__ - INFO - [app.py:682] - Starting Flask app on port 5001 using cpu
2025-03-26 09:19:21,375 - __main__ - INFO - [app.py:683] - Python version: 3.9.21 (main, Dec 11 2024, 10:21:40) 
[Clang 14.0.6 ]
2025-03-26 09:19:21,375 - __main__ - INFO - [app.py:684] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por', 'rus', 'jpn', 'cmn', 'ukr', 'ben', 'cat', 'cmn_Hant', 'cym', 'dan', 'eng', 'est', 'fin', 'hin', 'ind', 'kor', 'mlt', 'nld', 'pes', 'pol', 'ron', 'slk', 'swe', 'swh', 'tel', 'tgl', 'tha', 'tur', 'urd', 'uzn', 'vie']
2025-03-26 09:19:21,375 - __main__ - INFO - [app.py:685] - Maximum audio length: 300 seconds
2025-03-26 09:19:21,375 - __main__ - INFO - [app.py:686] - Sample rate: 16000 Hz
2025-03-26 09:19:21,375 - __main__ - INFO - [app.py:690] - System memory: 36.0GB total, 15.7GB available
2025-03-26 09:19:21,375 - __main__ - INFO - [app.py:691] - CPU cores: 11
2025-03-26 09:19:21,375 - __main__ - INFO - [app.py:699] - Configuration:
2025-03-26 09:19:21,375 - __main__ - INFO - [app.py:700] - - Debug mode: False
2025-03-26 09:19:21,375 - __main__ - INFO - [app.py:701] - - CORS enabled: True
2025-03-26 09:19:21,375 - __main__ - INFO - [app.py:702] - - Rate limiting: 10 requests per minute
2025-03-26 09:19:21,375 - __main__ - INFO - [app.py:703] - - Metrics enabled: True (port 8000)
2025-03-26 09:19:21,375 - __main__ - INFO - [app.py:704] - - Translation backends: seamless, espnet
2025-03-26 09:19:21,375 - __main__ - INFO - [app.py:705] - - Default backend: seamless
2025-03-26 09:19:21,375 - __main__ - INFO - [app.py:707] - ==================================================
2025-03-26 09:20:24,518 - __main__ - ERROR - [app.py:502] - Error getting available backends: Object of type ESPnetBackend is not JSON serializable
2025-03-26 09:20:24,519 - __main__ - INFO - [app.py:282] - Request to /available-backends took 0.00s
2025-03-26 09:20:24,522 - __main__ - ERROR - [app.py:502] - Error getting available backends: Object of type ESPnetBackend is not JSON serializable
2025-03-26 09:20:24,523 - __main__ - INFO - [app.py:282] - Request to /available-backends took 0.00s
2025-03-26 09:20:37,448 - __main__ - INFO - [app.py:567] - Processing video with seamless backend for language spa
2025-03-26 09:20:37,448 - services.video_routes - INFO - [video_routes.py:891] - Received video processing request for language: spa
2025-03-26 09:20:37,448 - services.video_routes - INFO - [video_routes.py:902] - Processing video: lipsync(English).mov for language: spa
2025-03-26 09:20:37,448 - services.video_routes - INFO - [video_routes.py:32] - Initializing VideoProcessor
2025-03-26 09:20:37,448 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-03-26 09:20:37,448 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-03-26 09:20:37,448 - services.model_manager - INFO - [model_manager.py:52] - Starting enhanced model verification
2025-03-26 09:20:37,449 - services.model_manager - INFO - [model_manager.py:63] - Testing clean_speech
2025-03-26 09:20:54,495 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified clean_speech
2025-03-26 09:20:54,495 - services.model_manager - INFO - [model_manager.py:63] - Testing speech_with_music
2025-03-26 09:21:11,470 - services.model_manager - INFO - [model_manager.py:108] - Successfully verified speech_with_music
2025-03-26 09:21:11,470 - services.model_manager - INFO - [model_manager.py:110] - Model verification successful
2025-03-26 09:21:11,473 - services.video_routes - INFO - [video_routes.py:37] - Using device: cpu
2025-03-26 09:21:11,473 - services.video_routes - INFO - [video_routes.py:42] - Temp directory: temp
2025-03-26 09:21:11,473 - services.video_routes - INFO - [video_routes.py:49] - Checking Wav2Lip setup...
2025-03-26 09:21:11,473 - services.video_routes - INFO - [video_routes.py:56] - Wav2Lip directory found: /Users/robmills/audio-translation/Backend/Wav2Lip
2025-03-26 09:21:11,473 - services.video_routes - INFO - [video_routes.py:71] - âœ“ Inference script found: Wav2Lip/inference.py (9750 bytes)
2025-03-26 09:21:11,473 - services.video_routes - INFO - [video_routes.py:71] - âœ“ Audio processing module found: Wav2Lip/audio.py (4508 bytes)
2025-03-26 09:21:11,473 - services.video_routes - INFO - [video_routes.py:71] - âœ“ Face detection API found: Wav2Lip/face_detection/api.py (2266 bytes)
2025-03-26 09:21:11,474 - services.video_routes - INFO - [video_routes.py:71] - âœ“ Face detection model found: Wav2Lip/face_detection/detection/sfd/s3fd.pth (89843225 bytes)
2025-03-26 09:21:11,474 - services.video_routes - INFO - [video_routes.py:71] - âœ“ Primary model checkpoint found: Wav2Lip/checkpoints/wav2lip.pth (435807851 bytes)
2025-03-26 09:21:11,475 - services.video_routes - WARNING - [video_routes.py:73] - âœ— GAN model checkpoint (optional) not found: Wav2Lip/checkpoints/wav2lip_gan.pth
2025-03-26 09:21:11,475 - services.utils - INFO - [utils.py:57] - Performance - Function: process_video, Duration: 34.03s, Memory Change: 34.36MB
2025-03-26 09:21:11,475 - __main__ - INFO - [app.py:282] - Request to /process-video took 34.03s
2025-03-26 09:21:11,475 - services.video_routes - INFO - [video_routes.py:720] - Starting video processing for language: spa, backend: <services.seamless_backend.SeamlessBackend object at 0x326ff1f10>
2025-03-26 09:21:11,475 - services.video_routes - INFO - [video_routes.py:725] - Input video filename: lipsync(English).mov, content type: video/quicktime
2025-03-26 09:21:11,498 - services.video_routes - INFO - [video_routes.py:734] - Saved uploaded video (size: 35740094 bytes)
2025-03-26 09:21:11,498 - services.video_routes - INFO - [video_routes.py:82] - Extracting audio from /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpp3olxsj1.mp4
2025-03-26 09:21:11,498 - services.video_routes - INFO - [video_routes.py:94] - Running FFmpeg command: ffmpeg -y -i /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpp3olxsj1.mp4 -vn -acodec pcm_s16le -ar 16000 -ac 1 temp/temp_audio.wav
2025-03-26 09:21:11,937 - services.video_routes - INFO - [video_routes.py:105] - Audio successfully extracted to temp/temp_audio.wav (size: 853040 bytes)
2025-03-26 09:21:11,937 - services.video_routes - INFO - [video_routes.py:341] - Detecting speech start in temp/temp_audio.wav
2025-03-26 09:21:11,943 - services.video_routes - INFO - [video_routes.py:383] - Detected speech start at 0.390 seconds
2025-03-26 09:21:11,943 - services.video_routes - INFO - [video_routes.py:749] - Detected speech starts at: 0.39 seconds
2025-03-26 09:21:11,943 - services.audio_processor - INFO - [audio_processor.py:280] - Loading audio from: temp/temp_audio.wav
2025-03-26 09:21:11,944 - services.audio_processor - INFO - [audio_processor.py:282] - Audio info - Sample rate: 16000, Channels: 1
2025-03-26 09:21:11,946 - services.audio_processor - INFO - [audio_processor.py:291] - Original audio shape: torch.Size([1, 426481]), Frequency: 16000Hz
2025-03-26 09:21:11,975 - services.video_routes - INFO - [video_routes.py:184] - Translating audio of shape torch.Size([1, 426240]) to language spa
2025-03-26 09:21:12,004 - services.video_routes - INFO - [video_routes.py:209] - Generating text translation in spa
2025-03-26 09:21:22,825 - services.video_routes - INFO - [video_routes.py:218] - Generated text: AsÃ­ que voy a hablar en inglÃ©s y este vÃ­deo se convertirÃ¡ en otro idioma y mis labios se sincronizarÃ¡n con el habla de otro idioma.
2025-03-26 09:21:22,826 - services.video_routes - INFO - [video_routes.py:221] - Generating translated speech for language spa
2025-03-26 09:21:33,223 - services.video_routes - INFO - [video_routes.py:233] - Speech generation completed in 10.40 seconds
2025-03-26 09:21:33,224 - services.video_routes - INFO - [video_routes.py:262] - Translation successful, audio shape: torch.Size([1, 105280])
2025-03-26 09:21:33,224 - services.video_routes - INFO - [video_routes.py:765] - Translation completed in 21.25 seconds
2025-03-26 09:21:33,224 - services.video_routes - INFO - [video_routes.py:155] - Saving audio tensor of shape torch.Size([1, 105280]) to temp/translated_audio.wav
2025-03-26 09:21:33,226 - services.video_routes - INFO - [video_routes.py:175] - Audio saved successfully to temp/translated_audio.wav (size: 210604 bytes)
2025-03-26 09:21:33,226 - services.video_routes - INFO - [video_routes.py:392] - Detecting face in /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpp3olxsj1.mp4
2025-03-26 09:21:36,069 - services.video_routes - INFO - [video_routes.py:458] - Selected face detected with bounding box: (693, 344, 1040, 841)
2025-03-26 09:21:36,071 - services.video_routes - INFO - [video_routes.py:785] - Face detection completed in 2.85 seconds, result: True
2025-03-26 09:21:36,071 - services.video_routes - INFO - [video_routes.py:800] - Attempting lip sync with Wav2Lip
2025-03-26 09:21:36,071 - services.video_routes - INFO - [video_routes.py:467] - Starting lip sync with Wav2Lip: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpp3olxsj1.mp4 + temp/translated_audio.wav
2025-03-26 09:21:36,077 - services.video_routes - INFO - [video_routes.py:564] - Running Wav2Lip with command: python Wav2Lip/inference.py --checkpoint_path Wav2Lip/checkpoints/wav2lip.pth --face /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpp3olxsj1.mp4 --audio temp/translated_audio.wav --outfile temp/synced_video.mp4 --nosmooth --pads 0 20 0 0 --resize_factor 2
2025-03-26 09:24:06,025 - services.video_routes - INFO - [video_routes.py:577] - Process stdout: Using cpu for inference.
Reading video frames...
Number of frames available for inference: 801
(80, 527)
Length of mel chunks: 194
Load checkpoint from: Wav2Lip/checkpoints/wav2lip.pth
Model loaded

2025-03-26 09:24:06,026 - services.video_routes - ERROR - [video_routes.py:582] - Process stderr: 
  0%|          | 0/2 [00:00<?, ?it/s]

  0%|          | 0/13 [00:00<?, ?it/s][A

  8%|â–Š         | 1/13 [00:11<02:21, 11.81s/it][A

 15%|â–ˆâ–Œ        | 2/13 [00:23<02:09, 11.74s/it][A

 23%|â–ˆâ–ˆâ–Ž       | 3/13 [00:34<01:55, 11.58s/it][A

 31%|â–ˆâ–ˆâ–ˆ       | 4/13 [00:46<01:43, 11.54s/it][A

 38%|â–ˆâ–ˆâ–ˆâ–Š      | 5/13 [00:58<01:33, 11.63s/it][A

 46%|â–ˆâ–ˆâ–ˆâ–ˆâ–Œ     | 6/13 [01:10<01:22, 11.79s/it][A

 54%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–    | 7/13 [01:21<01:10, 11.77s/it][A

 62%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–   | 8/13 [01:33<00:58, 11.67s/it][A

 69%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‰   | 9/13 [01:44<00:46, 11.59s/it][A

 77%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‹  | 10/13 [01:56<00:34, 11.49s/it][A

 85%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ– | 11/13 [02:07<00:22, 11.42s/it][A

 92%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–| 12/13 [02:18<00:11, 11.45s/it][A

100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 13/13 [02:20<00:00,  8.55s/it][A
100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 13/13 [02:20<00:00, 10.83s/it]

 50%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ     | 1/2 [02:24<02:24, 144.22s/it]
100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 2/2 [02:25<00:00, 60.38s/it] 
100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 2/2 [02:25<00:00, 72.95s/it]
ffmpeg version 7.1 Copyright (c) 2000-2024 the FFmpeg developers
  built with Apple clang version 16.0.0 (clang-1600.0.26.4)
  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/7.1_4 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags='-Wl,-ld_classic' --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon
  libavutil      59. 39.100 / 59. 39.100
  libavcodec     61. 19.100 / 61. 19.100
  libavformat    61.  7.100 / 61.  7.100
  libavdevice    61.  3.100 / 61.  3.100
  libavfilter    10.  4.100 / 10.  4.100
  libswscale      8.  3.100 /  8.  3.100
  libswresample   5.  3.100 /  5.  3.100
  libpostproc    58.  3.100 / 58.  3.100
[aist#0:0/pcm_s16le @ 0x132a05170] Guessed Channel Layout: mono
Input #0, wav, from 'temp/translated_audio.wav':
  Duration: 00:00:06.58, bitrate: 256 kb/s
  Stream #0:0: Audio: pcm_s16le ([1][0][0][0] / 0x0001), 16000 Hz, mono, s16, 256 kb/s
Input #1, avi, from 'temp/result.avi':
  Metadata:
    software        : Lavf61.7.100
  Duration: 00:00:06.47, start: 0.000000, bitrate: 811 kb/s
  Stream #1:0: Video: mpeg4 (Simple Profile) (DIVX / 0x58564944), yuv420p, 810x540 [SAR 1:1 DAR 3:2], 802 kb/s, 30 fps, 30 tbr, 30 tbn
Stream mapping:
  Stream #1:0 -> #0:0 (mpeg4 (native) -> h264 (libx264))
  Stream #0:0 -> #0:1 (pcm_s16le (native) -> aac (native))
Press [q] to stop, [?] for help
[libx264 @ 0x132908530] -qscale is ignored, -crf is recommended.
[libx264 @ 0x132908530] using SAR=1/1
[libx264 @ 0x132908530] using cpu capabilities: ARMv8 NEON
[libx264 @ 0x132908530] profile High, level 3.1, 4:2:0, 8-bit
[libx264 @ 0x132908530] 264 - core 164 r3108 31e19f9 - H.264/MPEG-4 AVC codec - Copyleft 2003-2023 - http://www.videolan.org/x264.html - options: cabac=1 ref=3 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=7 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=16 lookahead_threads=2 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=2 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=40 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00
Output #0, mp4, to 'temp/synced_video.mp4':
  Metadata:
    encoder         : Lavf61.7.100
  Stream #0:0: Video: h264 (avc1 / 0x31637661), yuv420p(tv, progressive), 810x540 [SAR 1:1 DAR 3:2], q=2-31, 30 fps, 15360 tbn
      Metadata:
        encoder         : Lavc61.19.100 libx264
      Side data:
        cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A
  Stream #0:1: Audio: aac (LC) (mp4a / 0x6134706D), 16000 Hz, mono, fltp, 69 kb/s
      Metadata:
        encoder         : Lavc61.19.100 aac
[out#0/mp4 @ 0x132907550] video:322KiB audio:64KiB subtitle:0KiB other streams:0KiB global headers:0KiB muxing overhead: 1.318656%
frame=  194 fps=0.0 q=-1.0 Lsize=     392KiB time=00:00:06.40 bitrate= 501.2kbits/s speed=24.3x    
[libx264 @ 0x132908530] frame I:1     Avg QP:19.03  size: 13524
[libx264 @ 0x132908530] frame P:51    Avg QP:19.82  size:  4145
[libx264 @ 0x132908530] frame B:142   Avg QP:22.44  size:   737
[libx264 @ 0x132908530] consecutive B-frames:  0.5%  5.2%  1.5% 92.8%
[libx264 @ 0x132908530] mb I  I16..4: 32.2% 66.8%  1.0%
[libx264 @ 0x132908530] mb P  I16..4:  3.2%  9.5%  0.1%  P16..4: 40.4%  7.4%  4.1%  0.0%  0.0%    skip:35.4%
[libx264 @ 0x132908530] mb B  I16..4:  0.3%  1.4%  0.0%  B16..8: 25.9%  0.6%  0.0%  direct: 0.4%  skip:71.3%  L0:51.1% L1:48.3% BI: 0.6%
[libx264 @ 0x132908530] 8x8 transform intra:75.9% inter:88.8%
[libx264 @ 0x132908530] coded y,uvDC,uvAC intra: 33.9% 48.7% 3.6% inter: 3.4% 7.2% 0.0%
[libx264 @ 0x132908530] i16 v,h,dc,p: 24% 24% 31% 21%
[libx264 @ 0x132908530] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 15% 16% 64%  1%  0%  1%  1%  1%  1%
[libx264 @ 0x132908530] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 31% 18% 34%  4%  3%  4%  2%  2%  2%
[libx264 @ 0x132908530] i8c dc,h,v,p: 50% 20% 27%  3%
[libx264 @ 0x132908530] Weighted P-Frames: Y:0.0% UV:0.0%
[libx264 @ 0x132908530] ref P L0: 64.4%  5.6% 20.7%  9.2%
[libx264 @ 0x132908530] ref B L0: 81.3% 14.9%  3.8%
[libx264 @ 0x132908530] ref B L1: 96.4%  3.6%
[libx264 @ 0x132908530] kb/s:407.65
[aac @ 0x131f17860] Qavg: 2094.574

2025-03-26 09:24:06,026 - services.video_routes - INFO - [video_routes.py:674] - Wav2Lip process completed successfully. Output saved to temp/synced_video.mp4
2025-03-26 09:24:06,026 - services.video_routes - INFO - [video_routes.py:686] - Output file verified: temp/synced_video.mp4 (size: 400924 bytes)
2025-03-26 09:24:06,087 - services.video_routes - INFO - [video_routes.py:808] - Lip sync attempt completed in 150.02 seconds, success: True
2025-03-26 09:24:06,087 - services.video_routes - INFO - [video_routes.py:846] - Final video created: temp/synced_video.mp4 (size: 400924 bytes)
2025-03-26 09:24:06,088 - services.video_routes - INFO - [video_routes.py:860] - Encoded video data in 0.00 seconds (length: 534568 characters)
2025-03-26 09:24:06,089 - services.video_routes - INFO - [video_routes.py:866] - Total video processing completed in 174.61 seconds
