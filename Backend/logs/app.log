<<<<<<< HEAD
2025-01-26 18:17:12,989 - __main__ - INFO - [app.py:217] - Received SIGINT signal
2025-01-26 18:17:13,019 - __main__ - INFO - [app.py:202] - Initiating graceful shutdown...
2025-01-26 18:17:18,026 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-26 18:17:18,044 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-26 18:17:18,046 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-26 18:17:18,055 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-26 18:17:18,059 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-26 18:17:18,060 - __main__ - INFO - [app.py:206] - Graceful shutdown completed
2025-01-26 18:17:18,068 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-26 18:17:18,068 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-26 18:17:18,068 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-26 18:17:18,071 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-26 18:17:18,071 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-26 18:17:18,072 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-26 18:17:18,072 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-26 18:17:18,072 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-26 18:17:18,072 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-26 18:17:18,073 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-26 18:17:33,141 - __main__ - INFO - [app.py:467] - Metrics server started on port 8000
2025-01-26 18:17:33,141 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-26 18:17:47,124 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-26 18:18:05,136 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-26 18:18:05,138 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-26 18:18:10,659 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-26 18:18:10,660 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-26 18:18:10,660 - __main__ - INFO - [app.py:491] - ==================================================
2025-01-26 18:18:10,660 - __main__ - INFO - [app.py:492] - Starting LinguaSync Backend
2025-01-26 18:18:10,661 - __main__ - INFO - [app.py:493] - Starting Flask app on port 5001 using cpu
2025-01-26 18:18:10,661 - __main__ - INFO - [app.py:494] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-01-26 18:18:10,661 - __main__ - INFO - [app.py:495] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-26 18:18:10,661 - __main__ - INFO - [app.py:496] - Maximum audio length: 300 seconds
2025-01-26 18:18:10,661 - __main__ - INFO - [app.py:497] - Sample rate: 16000 Hz
2025-01-26 18:18:10,661 - __main__ - INFO - [app.py:501] - System memory: 36.0GB total, 15.3GB available
2025-01-26 18:18:10,661 - __main__ - INFO - [app.py:502] - CPU cores: 11
2025-01-26 18:18:10,661 - __main__ - INFO - [app.py:510] - Configuration:
2025-01-26 18:18:10,661 - __main__ - INFO - [app.py:511] - - Debug mode: False
2025-01-26 18:18:10,661 - __main__ - INFO - [app.py:512] - - CORS enabled: True
2025-01-26 18:18:10,661 - __main__ - INFO - [app.py:513] - - Rate limiting: 10 requests per minute
2025-01-26 18:18:10,661 - __main__ - INFO - [app.py:514] - - Metrics enabled: True (port 8000)
2025-01-26 18:18:10,661 - __main__ - INFO - [app.py:516] - ==================================================
2025-01-29 17:00:30,333 - __main__ - INFO - [app.py:467] - Metrics server started on port 8000
2025-01-29 17:00:30,334 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-29 17:00:43,504 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-29 17:01:00,570 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-29 17:01:00,571 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-29 17:01:05,307 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-29 17:01:05,309 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-29 17:01:05,309 - __main__ - INFO - [app.py:491] - ==================================================
2025-01-29 17:01:05,309 - __main__ - INFO - [app.py:492] - Starting LinguaSync Backend
2025-01-29 17:01:05,309 - __main__ - INFO - [app.py:493] - Starting Flask app on port 5001 using cpu
2025-01-29 17:01:05,309 - __main__ - INFO - [app.py:494] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-01-29 17:01:05,309 - __main__ - INFO - [app.py:495] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-29 17:01:05,309 - __main__ - INFO - [app.py:496] - Maximum audio length: 300 seconds
2025-01-29 17:01:05,309 - __main__ - INFO - [app.py:497] - Sample rate: 16000 Hz
2025-01-29 17:01:05,309 - __main__ - INFO - [app.py:501] - System memory: 36.0GB total, 12.8GB available
2025-01-29 17:01:05,310 - __main__ - INFO - [app.py:502] - CPU cores: 11
2025-01-29 17:01:05,310 - __main__ - INFO - [app.py:510] - Configuration:
2025-01-29 17:01:05,310 - __main__ - INFO - [app.py:511] - - Debug mode: False
2025-01-29 17:01:05,310 - __main__ - INFO - [app.py:512] - - CORS enabled: True
2025-01-29 17:01:05,310 - __main__ - INFO - [app.py:513] - - Rate limiting: 10 requests per minute
2025-01-29 17:01:05,310 - __main__ - INFO - [app.py:514] - - Metrics enabled: True (port 8000)
2025-01-29 17:01:05,310 - __main__ - INFO - [app.py:516] - ==================================================
2025-01-29 17:01:22,004 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.02MB
2025-01-29 17:01:22,005 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-29 17:01:22,007 - services.audio_link_routes - INFO - [audio_link_routes.py:216] - Processing URL: https://youtu.be/xDYy5qafTXY?si=1pDRfyxeISAf7JR2
2025-01-29 17:01:22,008 - services.audio_link_routes - INFO - [audio_link_routes.py:233] - Processing YouTube URL
2025-01-29 17:01:22,008 - services.audio_link_routes - INFO - [audio_link_routes.py:120] - Using options for youtube: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpt2hspj5d/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8}
2025-01-29 17:01:25,990 - services.audio_link_routes - INFO - [audio_link_routes.py:133] - Successfully downloaded youtube content
2025-01-29 17:01:25,992 - services.audio_link_routes - INFO - [audio_link_routes.py:152] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpt2hspj5d/output.wav
2025-01-29 17:01:26,032 - services.audio_link_routes - INFO - [audio_link_routes.py:164] - Successfully converted audio to WAV
2025-01-29 17:01:26,033 - services.audio_link_routes - INFO - [audio_link_routes.py:242] - Successfully processed audio
2025-01-29 17:01:26,034 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 4.03s, Memory Change: 46.86MB
2025-01-29 17:01:26,034 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 4.03s
2025-01-29 17:01:38,357 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-29 17:01:38,359 - services.translation_routes - INFO - [translation_routes.py:41] - Starting translation request 6a1232e8
2025-01-29 17:01:38,359 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-29 17:01:38,359 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-29 17:01:38,360 - services.translation_routes - INFO - [translation_routes.py:105] - Request 6a1232e8: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpkge9om8l.wav
2025-01-29 17:01:38,363 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 69.18 seconds
2025-01-29 17:01:38,363 - services.translation_routes - INFO - [translation_routes.py:118] - Request 6a1232e8: Beginning audio processing with diagnostics
2025-01-29 17:01:38,363 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpkge9om8l.wav
2025-01-29 17:01:38,363 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 16000, Channels: 1
2025-01-29 17:01:38,368 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([1, 1106919]), Frequency: 16000Hz
2025-01-29 17:01:38,439 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-29 17:01:38,448 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-29 17:01:38,542 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-29 17:01:38,663 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:01:38,666 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:01:38,689 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:01:38,690 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:01:38,713 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:01:38,713 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:01:38,735 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:01:38,736 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:01:41,370 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-29 17:01:41,370 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-29 17:01:41,570 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:01:41,570 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:01:41,595 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:01:41,595 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:01:41,618 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:01:41,619 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:01:41,641 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:01:41,641 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:01:44,404 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-29 17:01:44,404 - services.translation_routes - INFO - [translation_routes.py:130] - 
==================================================
2025-01-29 17:01:44,404 - services.translation_routes - INFO - [translation_routes.py:131] - Input Audio Quality Report
2025-01-29 17:01:44,404 - services.translation_routes - INFO - [translation_routes.py:132] - ==================================================
2025-01-29 17:01:44,404 - services.translation_routes - INFO - [translation_routes.py:133] - Request ID: 6a1232e8
2025-01-29 17:01:44,404 - services.translation_routes - INFO - [translation_routes.py:134] - Target Language: fra
2025-01-29 17:01:44,404 - services.translation_routes - INFO - [translation_routes.py:135] - --------------------------------------------------
2025-01-29 17:01:44,404 - services.translation_routes - INFO - [translation_routes.py:136] - Audio Quality Analysis Report
=======
2025-01-23 08:34:50,533 - __main__ - INFO - [app.py:217] - Received SIGINT signal
2025-01-23 08:34:50,538 - __main__ - INFO - [app.py:202] - Initiating graceful shutdown...
2025-01-23 08:34:55,539 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-23 08:34:55,541 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-23 08:34:55,541 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-23 08:34:55,544 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 08:34:55,545 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-23 08:34:55,545 - __main__ - INFO - [app.py:206] - Graceful shutdown completed
2025-01-23 08:34:55,547 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-23 08:34:55,548 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-23 08:34:55,548 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-23 08:34:55,549 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 08:34:55,549 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-23 08:34:55,550 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-23 08:34:55,550 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-23 08:34:55,551 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-23 08:34:55,551 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 08:34:55,552 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-23 08:36:06,237 - __main__ - INFO - [app.py:467] - Metrics server started on port 8000
2025-01-23 08:36:06,238 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-23 08:36:19,507 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-23 08:36:26,158 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-23 08:36:26,159 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-23 08:36:31,950 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-23 08:36:31,952 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 08:36:31,952 - __main__ - INFO - [app.py:491] - ==================================================
2025-01-23 08:36:31,952 - __main__ - INFO - [app.py:492] - Starting LinguaSync Backend
2025-01-23 08:36:31,952 - __main__ - INFO - [app.py:493] - Starting Flask app on port 5001 using cpu
2025-01-23 08:36:31,952 - __main__ - INFO - [app.py:494] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-01-23 08:36:31,952 - __main__ - INFO - [app.py:495] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-23 08:36:31,952 - __main__ - INFO - [app.py:496] - Maximum audio length: 300 seconds
2025-01-23 08:36:31,952 - __main__ - INFO - [app.py:497] - Sample rate: 16000 Hz
2025-01-23 08:36:31,952 - __main__ - INFO - [app.py:501] - System memory: 36.0GB total, 17.7GB available
2025-01-23 08:36:31,952 - __main__ - INFO - [app.py:502] - CPU cores: 11
2025-01-23 08:36:31,952 - __main__ - INFO - [app.py:510] - Configuration:
2025-01-23 08:36:31,952 - __main__ - INFO - [app.py:511] - - Debug mode: False
2025-01-23 08:36:31,952 - __main__ - INFO - [app.py:512] - - CORS enabled: True
2025-01-23 08:36:31,952 - __main__ - INFO - [app.py:513] - - Rate limiting: 10 requests per minute
2025-01-23 08:36:31,952 - __main__ - INFO - [app.py:514] - - Metrics enabled: True (port 8000)
2025-01-23 08:36:31,952 - __main__ - INFO - [app.py:516] - ==================================================
2025-01-23 08:37:51,973 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-01-23 08:37:51,974 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-23 08:37:51,978 - services.audio_link_routes - INFO - [audio_link_routes.py:173] - Processing URL: https://www.tiktok.com/@ellendegeneres/video/7462053313240927534
2025-01-23 08:37:51,979 - services.audio_link_routes - INFO - [audio_link_routes.py:193] - Processing TikTok URL
2025-01-23 08:37:52,302 - services.audio_link_routes - ERROR - [audio_link_routes.py:123] - Download error for tiktok: [0;31mERROR:[0m [TikTok] 7462053313240927534: Unable to extract webpage video data; please report this issue on  https://github.com/yt-dlp/yt-dlp/issues?q= , filling out the appropriate issue template. Confirm you are on the latest version using  yt-dlp -U
2025-01-23 08:37:52,302 - services.audio_link_routes - ERROR - [audio_link_routes.py:139] - tiktok processing error: Unable to access this tiktok content. Please check the URL and try again
2025-01-23 08:37:52,303 - services.audio_link_routes - ERROR - [audio_link_routes.py:207] - Processing error: Unable to access this tiktok content. Please check the URL and try again
2025-01-23 08:37:52,304 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.33s, Memory Change: 0.44MB
2025-01-23 08:37:52,305 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.33s
2025-01-23 08:38:42,805 - services.audio_link_routes - INFO - [audio_link_routes.py:173] - Processing URL: https://www.youtube.com/watch?v=HMF3tpA0TL4&list=RDGMEMHDXYb1_DDSgDsobPsOFxpAVMHMF3tpA0TL4&start_radio=1
2025-01-23 08:38:42,806 - services.audio_link_routes - INFO - [audio_link_routes.py:190] - Processing YouTube URL
2025-01-23 08:46:04,416 - services.audio_link_routes - ERROR - [audio_link_routes.py:123] - Download error for youtube: [0;31mERROR:[0m [youtube] HrTWjrYYxBU: Video unavailable. This content isn't available, try again later.
2025-01-23 08:46:04,423 - services.audio_link_routes - ERROR - [audio_link_routes.py:139] - youtube processing error: Unable to access this youtube content. Please check the URL and try again
2025-01-23 08:46:04,423 - services.audio_link_routes - ERROR - [audio_link_routes.py:207] - Processing error: Unable to access this youtube content. Please check the URL and try again
2025-01-23 08:46:04,454 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 441.65s, Memory Change: 162.72MB
2025-01-23 08:46:04,455 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 441.65s
2025-01-23 08:56:07,613 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.02MB
2025-01-23 08:56:07,614 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-23 08:56:07,617 - services.audio_link_routes - INFO - [audio_link_routes.py:173] - Processing URL: https://youtu.be/xDYy5qafTXY?si=RD40B2xq90RYg2Q0
2025-01-23 08:56:07,618 - services.audio_link_routes - INFO - [audio_link_routes.py:190] - Processing YouTube URL
2025-01-23 08:56:11,314 - services.audio_link_routes - ERROR - [audio_link_routes.py:139] - youtube processing error: Unable to process this youtube content. Please try a different video
2025-01-23 08:56:11,315 - services.audio_link_routes - ERROR - [audio_link_routes.py:207] - Processing error: Unable to process this youtube content. Please try a different video
2025-01-23 08:56:11,316 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 3.70s, Memory Change: 14.77MB
2025-01-23 08:56:11,316 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 3.70s
2025-01-23 09:03:21,558 - __main__ - INFO - [app.py:217] - Received SIGINT signal
2025-01-23 09:03:21,561 - __main__ - INFO - [app.py:202] - Initiating graceful shutdown...
2025-01-23 09:03:26,561 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-23 09:03:26,563 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-23 09:03:26,563 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-23 09:03:26,566 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 09:03:26,567 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-23 09:03:26,567 - __main__ - INFO - [app.py:206] - Graceful shutdown completed
2025-01-23 09:03:26,569 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-23 09:03:26,569 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-23 09:03:26,570 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-23 09:03:26,570 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 09:03:26,571 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-23 09:03:26,571 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-23 09:03:26,572 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-23 09:03:26,572 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-23 09:03:26,573 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 09:03:26,573 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-23 09:04:18,083 - __main__ - INFO - [app.py:467] - Metrics server started on port 8000
2025-01-23 09:04:18,083 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-23 09:04:31,212 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-23 09:04:38,378 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-23 09:04:38,379 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-23 09:04:43,364 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-23 09:04:43,366 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 09:04:43,366 - __main__ - INFO - [app.py:491] - ==================================================
2025-01-23 09:04:43,366 - __main__ - INFO - [app.py:492] - Starting LinguaSync Backend
2025-01-23 09:04:43,366 - __main__ - INFO - [app.py:493] - Starting Flask app on port 5001 using cpu
2025-01-23 09:04:43,366 - __main__ - INFO - [app.py:494] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-01-23 09:04:43,366 - __main__ - INFO - [app.py:495] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-23 09:04:43,366 - __main__ - INFO - [app.py:496] - Maximum audio length: 300 seconds
2025-01-23 09:04:43,366 - __main__ - INFO - [app.py:497] - Sample rate: 16000 Hz
2025-01-23 09:04:43,366 - __main__ - INFO - [app.py:501] - System memory: 36.0GB total, 15.1GB available
2025-01-23 09:04:43,366 - __main__ - INFO - [app.py:502] - CPU cores: 11
2025-01-23 09:04:43,366 - __main__ - INFO - [app.py:510] - Configuration:
2025-01-23 09:04:43,366 - __main__ - INFO - [app.py:511] - - Debug mode: False
2025-01-23 09:04:43,366 - __main__ - INFO - [app.py:512] - - CORS enabled: True
2025-01-23 09:04:43,366 - __main__ - INFO - [app.py:513] - - Rate limiting: 10 requests per minute
2025-01-23 09:04:43,366 - __main__ - INFO - [app.py:514] - - Metrics enabled: True (port 8000)
2025-01-23 09:04:43,366 - __main__ - INFO - [app.py:516] - ==================================================
2025-01-23 09:05:46,250 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-01-23 09:05:46,251 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-23 09:05:46,254 - services.audio_link_routes - INFO - [audio_link_routes.py:174] - Processing URL: https://youtube.com/shorts/dOfQCX8fzZg?si=3ZB0P1f9YrHWs6_t
2025-01-23 09:05:46,255 - services.audio_link_routes - INFO - [audio_link_routes.py:191] - Processing YouTube URL
2025-01-23 09:05:49,926 - services.audio_link_routes - INFO - [audio_link_routes.py:200] - Successfully processed audio
2025-01-23 09:05:49,926 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 3.67s, Memory Change: 7.84MB
2025-01-23 09:05:49,926 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 3.67s
2025-01-23 09:06:00,644 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-23 09:06:00,645 - services.translation_routes - INFO - [translation_routes.py:29] - Starting translation request dc390d56
2025-01-23 09:06:00,645 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-23 09:06:00,645 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-23 09:06:00,646 - services.translation_routes - INFO - [translation_routes.py:86] - Request dc390d56: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpfpknrpar.wav
2025-01-23 09:06:00,647 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 49.32 seconds
2025-01-23 09:06:00,647 - services.translation_routes - INFO - [translation_routes.py:99] - Request dc390d56: Beginning audio processing with diagnostics
2025-01-23 09:06:00,647 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpfpknrpar.wav
2025-01-23 09:06:00,647 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 16000, Channels: 1
2025-01-23 09:06:00,651 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([1, 789107]), Frequency: 16000Hz
2025-01-23 09:06:00,695 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-23 09:06:00,700 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-23 09:06:00,762 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-23 09:06:00,845 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:06:00,845 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:06:00,862 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:06:00,862 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:06:00,877 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:06:00,877 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:06:00,893 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:06:00,894 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:06:02,681 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-23 09:06:02,682 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-23 09:06:02,825 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:06:02,825 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:06:02,841 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:06:02,841 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:06:02,857 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:06:02,858 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:06:02,873 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:06:02,873 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:06:04,704 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-23 09:06:04,704 - services.translation_routes - INFO - [translation_routes.py:110] - 
==================================================
2025-01-23 09:06:04,704 - services.translation_routes - INFO - [translation_routes.py:111] - Input Audio Quality Report
2025-01-23 09:06:04,704 - services.translation_routes - INFO - [translation_routes.py:112] - ==================================================
2025-01-23 09:06:04,704 - services.translation_routes - INFO - [translation_routes.py:113] - Request ID: dc390d56
2025-01-23 09:06:04,704 - services.translation_routes - INFO - [translation_routes.py:114] - Target Language: fra
2025-01-23 09:06:04,705 - services.translation_routes - INFO - [translation_routes.py:115] - --------------------------------------------------
2025-01-23 09:06:04,705 - services.translation_routes - INFO - [translation_routes.py:116] - Audio Quality Analysis Report
>>>>>>> parent of a02b9e660 (changes to translation_routes.py -- largely good but need to figure out a tiktok solution)
==============================

Target Language: fra

Waveform Analysis:
--------------------
<<<<<<< HEAD
- Peak Amplitude: 0.950
- Avg Amplitude: 0.047
- Rms Level: 0.083
- Crest Factor: 11.431
- Zero Crossings: 544258.000
- Silence Percentage: 26.518
- Clipping Points: 0.000
- Dynamic Range: 11733475.464
=======
- Peak Amplitude: 0.805
- Avg Amplitude: 0.029
- Rms Level: 0.054
- Crest Factor: 15.007
- Zero Crossings: 394279.000
- Silence Percentage: 35.615
- Clipping Points: 0.000
- Dynamic Range: 8355702.910
>>>>>>> parent of a02b9e660 (changes to translation_routes.py -- largely good but need to figure out a tiktok solution)

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
<<<<<<< HEAD
  - Smoothing Detected: 0.000
  - Temporal Variation: 0.129
  - Temporal Flatness: 0.070

- Volume Metrics:
  - Volume Stability: 0.133
  - Volume Range: 34134310.484
  - Volume Variations: 0.054
=======
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.080
  - Temporal Flatness: 0.043

- Volume Metrics:
  - Volume Stability: 0.140
  - Volume Range: 22859556.973
  - Volume Variations: 0.035
>>>>>>> parent of a02b9e660 (changes to translation_routes.py -- largely good but need to figure out a tiktok solution)

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
<<<<<<< HEAD
- Audio Clarity: 3.0145404384009926
=======
- Audio Clarity: 3.007151714733603
>>>>>>> parent of a02b9e660 (changes to translation_routes.py -- largely good but need to figure out a tiktok solution)
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
<<<<<<< HEAD
  - Nasal Resonance: {'strength': 0.6778058409690857, 'stability': 0.9730591177940369, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.4255729913711548, 'consistency': 0.39680999517440796, 'distinction': 0.26997312903404236}
  - Description: Moderate nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.407
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.473
  - Rhythm Quality: 0.536
  - Intonation Quality: 0.409

Vowel Quality:
  - Quality Score: 0.010
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-29 17:01:44,404 - services.translation_routes - INFO - [translation_routes.py:137] - ==================================================

2025-01-29 17:01:44,405 - services.translation_routes - INFO - [translation_routes.py:164] - Request 6a1232e8: Audio processed successfully
2025-01-29 17:01:44,529 - services.translation_routes - INFO - [translation_routes.py:187] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-29 17:02:24,758 - services.translation_routes - INFO - [translation_routes.py:233] - Source text: When the night shadows fall then the door will open out of the window paints light will twinkle yellow fear no all the black heed no horrible willow fear neither root nor bow tom goes on before you hey now mary doll will be waiting for you
2025-01-29 17:03:09,716 - services.translation_routes - INFO - [translation_routes.py:255] - Target text: hop along my little friends up with you windows toms going on ahead candles for the kingdom down the west since the sun soon you will be broken when the night shadows fall then the door will open out of the window paint light will twinkle yellow fear no all the black heed no horry willow fear neither root nor bow tom goes on before you hein now mary do will be waiting for you
2025-01-29 17:04:20,160 - services.translation_routes - INFO - [translation_routes.py:277] - Processing model output type: <class 'tuple'>
2025-01-29 17:04:20,161 - services.translation_routes - INFO - [translation_routes.py:282] - Processing tuple output from model
2025-01-29 17:04:20,191 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:04:20,191 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:04:20,196 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:04:20,197 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:04:20,204 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:04:20,204 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:04:20,211 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:04:20,211 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:04:20,646 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-29 17:04:20,646 - services.translation_routes - INFO - [translation_routes.py:323] - 
==================================================
2025-01-29 17:04:20,646 - services.translation_routes - INFO - [translation_routes.py:324] - Translated Audio Quality Report
2025-01-29 17:04:20,646 - services.translation_routes - INFO - [translation_routes.py:325] - ==================================================
2025-01-29 17:04:20,646 - services.translation_routes - INFO - [translation_routes.py:326] - Request ID: 6a1232e8
2025-01-29 17:04:20,646 - services.translation_routes - INFO - [translation_routes.py:327] - Target Language: fra
2025-01-29 17:04:20,646 - services.translation_routes - INFO - [translation_routes.py:328] - --------------------------------------------------
2025-01-29 17:04:20,646 - services.translation_routes - INFO - [translation_routes.py:329] - Audio Quality Analysis Report
=======
  - Nasal Resonance: {'strength': 2.146029233932495, 'stability': 2.325944185256958, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.593830943107605, 'distinction': 0.09012619405984879}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.515
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.633
  - Rhythm Quality: 0.674
  - Intonation Quality: 0.592

Vowel Quality:
  - Quality Score: 0.013
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-23 09:06:04,705 - services.translation_routes - INFO - [translation_routes.py:117] - ==================================================

2025-01-23 09:06:04,705 - services.translation_routes - INFO - [translation_routes.py:128] - Request dc390d56: Audio processed successfully
2025-01-23 09:06:04,751 - services.translation_routes - INFO - [translation_routes.py:147] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-23 09:06:25,963 - services.translation_routes - INFO - [translation_routes.py:185] - Source text: I'd like to thank my wife because she's my best friend, and my daughter because she thinks I'm cool because I did The Lion King.
2025-01-23 09:06:47,581 - services.translation_routes - INFO - [translation_routes.py:204] - Target text: J'aimerais remercier ma femme parce qu'elle est ma meilleure amie, je voudrais remercier mon fille parce quelle pense que je suis cool parce que j'ai fait le Lion King.
2025-01-23 09:07:24,890 - services.translation_routes - INFO - [translation_routes.py:227] - Processing tuple output from model
2025-01-23 09:07:24,904 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:07:24,905 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:07:24,910 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:07:24,910 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:07:24,914 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:07:24,914 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:07:24,921 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:07:24,921 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:07:25,084 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-23 09:07:25,084 - services.translation_routes - INFO - [translation_routes.py:251] - 
==================================================
2025-01-23 09:07:25,084 - services.translation_routes - INFO - [translation_routes.py:252] - Translated Audio Quality Report
2025-01-23 09:07:25,084 - services.translation_routes - INFO - [translation_routes.py:253] - ==================================================
2025-01-23 09:07:25,084 - services.translation_routes - INFO - [translation_routes.py:254] - Request ID: dc390d56
2025-01-23 09:07:25,084 - services.translation_routes - INFO - [translation_routes.py:255] - Target Language: fra
2025-01-23 09:07:25,084 - services.translation_routes - INFO - [translation_routes.py:256] - --------------------------------------------------
2025-01-23 09:07:25,084 - services.translation_routes - INFO - [translation_routes.py:257] - Audio Quality Analysis Report
>>>>>>> parent of a02b9e660 (changes to translation_routes.py -- largely good but need to figure out a tiktok solution)
==============================

Target Language: fra

Waveform Analysis:
--------------------
<<<<<<< HEAD
- Peak Amplitude: 0.811
- Avg Amplitude: 0.071
- Rms Level: 0.102
- Crest Factor: 7.945
- Zero Crossings: 32096.000
- Silence Percentage: 5.429
- Clipping Points: 0.000
- Dynamic Range: 67.245
=======
- Peak Amplitude: 0.693
- Avg Amplitude: 0.064
- Rms Level: 0.096
- Crest Factor: 7.180
- Zero Crossings: 9155.000
- Silence Percentage: 13.512
- Clipping Points: 0.000
- Dynamic Range: 250.840
>>>>>>> parent of a02b9e660 (changes to translation_routes.py -- largely good but need to figure out a tiktok solution)

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
<<<<<<< HEAD
  - Compression Severity: 0.007
=======
  - Compression Severity: 0.103
>>>>>>> parent of a02b9e660 (changes to translation_routes.py -- largely good but need to figure out a tiktok solution)
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
<<<<<<< HEAD
  - Temporal Variation: 0.027
  - Temporal Flatness: 0.015

- Volume Metrics:
  - Volume Stability: 0.455
  - Volume Range: 298.202
  - Volume Variations: 0.049
=======
  - Temporal Variation: 0.020
  - Temporal Flatness: 0.012

- Volume Metrics:
  - Volume Stability: 0.259
  - Volume Range: 462.288
  - Volume Variations: 0.058
>>>>>>> parent of a02b9e660 (changes to translation_routes.py -- largely good but need to figure out a tiktok solution)

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
<<<<<<< HEAD
- Audio Clarity: 3.0256960341052324
- Background Noise: 4.1779892823888245
=======
- Audio Clarity: 3.0268752743591336
- Background Noise: 3.871986466373222
>>>>>>> parent of a02b9e660 (changes to translation_routes.py -- largely good but need to figure out a tiktok solution)
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
<<<<<<< HEAD
No issues detected
=======
- Muffled
>>>>>>> parent of a02b9e660 (changes to translation_routes.py -- largely good but need to figure out a tiktok solution)

Language-Specific Analysis:
--------------------

Nasalization:
<<<<<<< HEAD
  - Nasal Resonance: {'strength': 0.8530664443969727, 'stability': 3.571580410003662, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.090754434466362, 'consistency': 0.0, 'distinction': 0.09213312715291977}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.546
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.004
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-29 17:04:20,646 - services.translation_routes - INFO - [translation_routes.py:330] - ==================================================

2025-01-29 17:04:20,646 - services.translation_routes - WARNING - [translation_routes.py:341] - Low speech clarity in output audio
2025-01-29 17:04:20,646 - services.translation_routes - INFO - [translation_routes.py:343] - Request 6a1232e8: Audio output processed successfully
2025-01-29 17:04:20,654 - services.translation_routes - INFO - [translation_routes.py:413] - Request 6a1232e8: Response prepared successfully
2025-01-29 17:04:20,717 - services.translation_routes - INFO - [translation_routes.py:438] - Request 6a1232e8 completed in 162.36s
2025-01-29 17:04:20,717 - services.translation_routes - ERROR - [translation_routes.py:449] - Error during cleanup: type object 'ResourceMonitor' has no attribute 'get_process_memory'
2025-01-29 17:04:20,719 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 162.36s, Memory Change: 669.23MB
2025-01-29 17:04:20,720 - __main__ - INFO - [app.py:278] - Request to /translate took 170.16s
2025-01-29 17:05:19,168 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-29 17:05:19,172 - services.translation_routes - INFO - [translation_routes.py:41] - Starting translation request 1c6220c9
2025-01-29 17:05:19,173 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-29 17:05:19,173 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-29 17:05:19,174 - services.translation_routes - INFO - [translation_routes.py:105] - Request 1c6220c9: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmplsah94mt.wav
2025-01-29 17:05:19,175 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 69.18 seconds
2025-01-29 17:05:19,175 - services.translation_routes - INFO - [translation_routes.py:118] - Request 1c6220c9: Beginning audio processing with diagnostics
2025-01-29 17:05:19,175 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmplsah94mt.wav
2025-01-29 17:05:19,175 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 16000, Channels: 1
2025-01-29 17:05:19,179 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([1, 1106919]), Frequency: 16000Hz
2025-01-29 17:05:19,239 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-29 17:05:19,246 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for spa
2025-01-29 17:05:19,246 - services.audio_processor - WARNING - [audio_processor.py:289] - No specific parameters for spa, using defaults
2025-01-29 17:05:19,337 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-29 17:05:19,445 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:05:19,446 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:05:19,467 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:05:19,467 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:05:19,491 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:05:19,491 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:05:19,511 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:05:19,512 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:05:22,240 - services.diagnostics.language_analysis.spanish - ERROR - [spanish.py:161] - Spanish timing analysis failed: 'SpanishAnalyzer' object has no attribute '_find_syllable_boundaries'
2025-01-29 17:05:22,397 - services.diagnostics.language_analysis.spanish - ERROR - [spanish.py:218] - Spanish vowel analysis failed: 'SpanishAnalyzer' object has no attribute '_analyze_vowel_formants'
2025-01-29 17:05:22,404 - services.diagnostics.language_analysis.spanish - ERROR - [spanish.py:249] - Spanish stress analysis failed: 'SpanishAnalyzer' object has no attribute '_find_stress_peaks'
2025-01-29 17:05:22,404 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for spa
2025-01-29 17:05:22,404 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-29 17:05:22,410 - services.audio_processor - WARNING - [audio_processor.py:289] - No specific parameters for spa, using defaults
2025-01-29 17:05:22,600 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:05:22,601 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:05:22,624 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:05:22,624 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:05:22,652 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:05:22,652 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:05:22,680 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:05:22,681 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:05:25,478 - services.diagnostics.language_analysis.spanish - ERROR - [spanish.py:161] - Spanish timing analysis failed: 'SpanishAnalyzer' object has no attribute '_find_syllable_boundaries'
2025-01-29 17:05:25,635 - services.diagnostics.language_analysis.spanish - ERROR - [spanish.py:218] - Spanish vowel analysis failed: 'SpanishAnalyzer' object has no attribute '_analyze_vowel_formants'
2025-01-29 17:05:25,645 - services.diagnostics.language_analysis.spanish - ERROR - [spanish.py:249] - Spanish stress analysis failed: 'SpanishAnalyzer' object has no attribute '_find_stress_peaks'
2025-01-29 17:05:25,646 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for spa
2025-01-29 17:05:25,646 - services.translation_routes - INFO - [translation_routes.py:130] - 
==================================================
2025-01-29 17:05:25,646 - services.translation_routes - INFO - [translation_routes.py:131] - Input Audio Quality Report
2025-01-29 17:05:25,647 - services.translation_routes - INFO - [translation_routes.py:132] - ==================================================
2025-01-29 17:05:25,647 - services.translation_routes - INFO - [translation_routes.py:133] - Request ID: 1c6220c9
2025-01-29 17:05:25,647 - services.translation_routes - INFO - [translation_routes.py:134] - Target Language: spa
2025-01-29 17:05:25,647 - services.translation_routes - INFO - [translation_routes.py:135] - --------------------------------------------------
2025-01-29 17:05:25,647 - services.translation_routes - INFO - [translation_routes.py:136] - Audio Quality Analysis Report
==============================

Target Language: spa

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.047
- Rms Level: 0.083
- Crest Factor: 11.431
- Zero Crossings: 544258.000
- Silence Percentage: 26.518
- Clipping Points: 0.000
- Dynamic Range: 11733475.464

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 0.000
  - Temporal Variation: 0.129
  - Temporal Flatness: 0.070

- Volume Metrics:
  - Volume Stability: 0.133
  - Volume Range: 34134310.484
  - Volume Variations: 0.054

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0145404384009926
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Phoneme Analysis:
  - Trilled R: {'features': {'modulation_rate': 3474.865788189361, 'strength': 2.179466724395752}, 'strength': 1.0, 'regularity': 0.0, 'duration': -271.0357704457514, 'overall_quality': 0.5}
  - Interdental Theta: {'energy': 1.6295353174209595, 'consistency': -0.7976514101028442, 'spectral_shape': {'centroid': 0.39418837428092957, 'spread': 0.2142299860715866, 'quality': 0.739979200065136}, 'quality': 0.5239543691277504}
  - Stop Consonants: {'voiceless_stops': {'strength': 1.0, 'precision': 0.9041951449762362, 'quality': 0.9520975724881181}, 'voiced_stops': {'voicing': 0.3723117709159851, 'precision': 0.4930680909184735, 'quality': 0.4326899309172293}, 'overall_quality': 0.6923937517026737}

Syllable Timing:

Intonation Patterns:
  - Contour Patterns: {'mean_pitch': 205.68371261804114, 'pitch_variability': 0.3483661276838237, 'rise_fall_ratio': 1.0755813953279927, 'quality': 0.6516338723331133}
  - Melodic Features: {'range': 1.0, 'movement': 0.8126844675044396, 'quality': 0.9063422337522198}
  - Overall Quality: 0.779

Vowel Clarity:

Stress Patterns:
2025-01-29 17:05:25,647 - services.translation_routes - INFO - [translation_routes.py:137] - ==================================================

2025-01-29 17:05:25,648 - services.translation_routes - INFO - [translation_routes.py:164] - Request 1c6220c9: Audio processed successfully
2025-01-29 17:05:25,759 - services.translation_routes - INFO - [translation_routes.py:187] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-29 17:06:07,271 - services.translation_routes - INFO - [translation_routes.py:233] - Source text: When the night shadows fall then the door will open out of the window paints light will twinkle yellow fear no all the black heed no horrible willow fear neither root nor bow tom goes on before you hey now mary doll will be waiting for you
2025-01-29 17:06:45,256 - services.translation_routes - INFO - [translation_routes.py:255] - Target text: la puerta se abrirá fuera de la ventana pinta la luz brillará amarillo miedo no a todo el negro heed no horri willow miedo ni raíz ni baúl tom va en antes de ti hey ahora mary dor will be waiting for you
2025-01-29 17:07:55,532 - services.translation_routes - INFO - [translation_routes.py:277] - Processing model output type: <class 'tuple'>
2025-01-29 17:07:55,532 - services.translation_routes - INFO - [translation_routes.py:282] - Processing tuple output from model
2025-01-29 17:07:55,582 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:07:55,583 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:07:55,594 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:07:55,594 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:07:55,600 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:07:55,600 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:07:55,609 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:07:55,610 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:07:56,090 - services.diagnostics.language_analysis.spanish - ERROR - [spanish.py:161] - Spanish timing analysis failed: 'SpanishAnalyzer' object has no attribute '_find_syllable_boundaries'
2025-01-29 17:07:56,131 - services.diagnostics.language_analysis.spanish - ERROR - [spanish.py:218] - Spanish vowel analysis failed: 'SpanishAnalyzer' object has no attribute '_analyze_vowel_formants'
2025-01-29 17:07:56,134 - services.diagnostics.language_analysis.spanish - ERROR - [spanish.py:249] - Spanish stress analysis failed: 'SpanishAnalyzer' object has no attribute '_find_stress_peaks'
2025-01-29 17:07:56,134 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for spa
2025-01-29 17:07:56,134 - services.translation_routes - INFO - [translation_routes.py:323] - 
==================================================
2025-01-29 17:07:56,134 - services.translation_routes - INFO - [translation_routes.py:324] - Translated Audio Quality Report
2025-01-29 17:07:56,134 - services.translation_routes - INFO - [translation_routes.py:325] - ==================================================
2025-01-29 17:07:56,134 - services.translation_routes - INFO - [translation_routes.py:326] - Request ID: 1c6220c9
2025-01-29 17:07:56,134 - services.translation_routes - INFO - [translation_routes.py:327] - Target Language: spa
2025-01-29 17:07:56,135 - services.translation_routes - INFO - [translation_routes.py:328] - --------------------------------------------------
2025-01-29 17:07:56,135 - services.translation_routes - INFO - [translation_routes.py:329] - Audio Quality Analysis Report
==============================

Target Language: spa

Waveform Analysis:
--------------------
- Peak Amplitude: 0.738
- Avg Amplitude: 0.074
- Rms Level: 0.107
- Crest Factor: 6.879
- Zero Crossings: 31540.000
- Silence Percentage: 5.251
- Clipping Points: 0.000
- Dynamic Range: 73.006

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.140
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.028
  - Temporal Flatness: 0.016

- Volume Metrics:
  - Volume Stability: 0.425
  - Volume Range: 369.704
  - Volume Variations: 0.054

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0311992706111957
- Background Noise: 3.7516735424203462
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
No issues detected

Language-Specific Analysis:
--------------------

Phoneme Analysis:
  - Trilled R: {'features': {'modulation_rate': 3451.4397266959495, 'strength': 1.003147840499878}, 'strength': 1.0, 'regularity': 0.0, 'duration': -123.8956791717468, 'overall_quality': 0.5}
  - Interdental Theta: {'energy': 0.9372486472129822, 'consistency': -3.2025113105773926, 'spectral_shape': {'centroid': 0.46186205744743347, 'spread': 0.26496440172195435, 'quality': 0.748448833823204}, 'quality': -0.5056046098470688}
  - Stop Consonants: {'voiceless_stops': {'strength': 1.0, 'precision': 0.17893771673730507, 'quality': 0.5894688583686525}, 'voiced_stops': {'voicing': 0.25499585270881653, 'precision': 0.4029687453088858, 'quality': 0.3289822990088512}, 'overall_quality': 0.4592255786887518}

Syllable Timing:

Intonation Patterns:
  - Contour Patterns: {'mean_pitch': 216.76161748916232, 'pitch_variability': 0.17256854405889083, 'rise_fall_ratio': 0.6185567010096715, 'quality': 0.8274314559490704}
  - Melodic Features: {'range': 1.0, 'movement': 0.3111689375220407, 'quality': 0.6555844687610204}
  - Overall Quality: 0.742

Vowel Clarity:

Stress Patterns:
2025-01-29 17:07:56,135 - services.translation_routes - INFO - [translation_routes.py:330] - ==================================================

2025-01-29 17:07:56,135 - services.translation_routes - WARNING - [translation_routes.py:341] - Low speech clarity in output audio
2025-01-29 17:07:56,135 - services.translation_routes - INFO - [translation_routes.py:343] - Request 1c6220c9: Audio output processed successfully
2025-01-29 17:07:56,144 - services.translation_routes - INFO - [translation_routes.py:413] - Request 1c6220c9: Response prepared successfully
2025-01-29 17:07:56,209 - services.translation_routes - INFO - [translation_routes.py:438] - Request 1c6220c9 completed in 157.04s
2025-01-29 17:07:56,209 - services.translation_routes - ERROR - [translation_routes.py:449] - Error during cleanup: type object 'ResourceMonitor' has no attribute 'get_process_memory'
2025-01-29 17:07:56,210 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 157.04s, Memory Change: -307.33MB
2025-01-29 17:07:56,210 - __main__ - INFO - [app.py:278] - Request to /translate took 163.77s
2025-01-29 17:24:24,189 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-01-29 17:24:24,190 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-29 17:24:24,193 - services.audio_link_routes - INFO - [audio_link_routes.py:216] - Processing URL: https://www.tiktok.com/@fightjoe/video/7127311328095522053
2025-01-29 17:24:24,193 - services.audio_link_routes - INFO - [audio_link_routes.py:236] - Processing TikTok URL
2025-01-29 17:24:24,194 - services.audio_link_routes - INFO - [audio_link_routes.py:120] - Using options for tiktok: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpat8t1xzo/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8, 'extractor_args': {'tiktok': {'api_hostname': 'api22-normal-c-alisg.tiktokv.com', 'app_name': 'trill', 'app_version': '34.1.2', 'manifest_app_version': '2023401020', 'app_info': '1234567890123456789/trill///1180', 'device_id': '2848411811468905775'}}}
2025-01-29 17:24:25,870 - services.audio_link_routes - INFO - [audio_link_routes.py:133] - Successfully downloaded tiktok content
2025-01-29 17:24:25,872 - services.audio_link_routes - INFO - [audio_link_routes.py:152] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpat8t1xzo/output.wav
2025-01-29 17:24:25,877 - services.audio_link_routes - INFO - [audio_link_routes.py:164] - Successfully converted audio to WAV
2025-01-29 17:24:25,878 - services.audio_link_routes - INFO - [audio_link_routes.py:242] - Successfully processed audio
2025-01-29 17:24:25,878 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 1.69s, Memory Change: 19.02MB
2025-01-29 17:24:25,878 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 1.69s
2025-01-29 17:24:35,580 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-29 17:24:35,583 - services.translation_routes - INFO - [translation_routes.py:41] - Starting translation request 87abf5e9
2025-01-29 17:24:35,583 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-29 17:24:35,583 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-29 17:24:35,584 - services.translation_routes - INFO - [translation_routes.py:105] - Request 87abf5e9: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpzymii65b.wav
2025-01-29 17:24:35,584 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 6.57 seconds
2025-01-29 17:24:35,585 - services.translation_routes - INFO - [translation_routes.py:118] - Request 87abf5e9: Beginning audio processing with diagnostics
2025-01-29 17:24:35,585 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpzymii65b.wav
2025-01-29 17:24:35,585 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 16000, Channels: 1
2025-01-29 17:24:35,586 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([1, 105163]), Frequency: 16000Hz
2025-01-29 17:24:35,598 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-29 17:24:35,601 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for spa
2025-01-29 17:24:35,601 - services.audio_processor - WARNING - [audio_processor.py:289] - No specific parameters for spa, using defaults
2025-01-29 17:24:35,609 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-29 17:24:35,620 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:24:35,620 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:24:35,624 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:24:35,624 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:24:35,628 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:24:35,628 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:24:35,632 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:24:35,632 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:24:35,791 - services.diagnostics.language_analysis.spanish - ERROR - [spanish.py:161] - Spanish timing analysis failed: 'SpanishAnalyzer' object has no attribute '_find_syllable_boundaries'
2025-01-29 17:24:35,806 - services.diagnostics.language_analysis.spanish - ERROR - [spanish.py:218] - Spanish vowel analysis failed: 'SpanishAnalyzer' object has no attribute '_analyze_vowel_formants'
2025-01-29 17:24:35,807 - services.diagnostics.language_analysis.spanish - ERROR - [spanish.py:249] - Spanish stress analysis failed: 'SpanishAnalyzer' object has no attribute '_find_stress_peaks'
2025-01-29 17:24:35,807 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for spa
2025-01-29 17:24:35,807 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-29 17:24:35,808 - services.audio_processor - WARNING - [audio_processor.py:289] - No specific parameters for spa, using defaults
2025-01-29 17:24:35,826 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:24:35,827 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:24:35,829 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:24:35,829 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:24:35,832 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:24:35,832 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:24:35,836 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:24:35,836 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:24:35,999 - services.diagnostics.language_analysis.spanish - ERROR - [spanish.py:161] - Spanish timing analysis failed: 'SpanishAnalyzer' object has no attribute '_find_syllable_boundaries'
2025-01-29 17:24:36,014 - services.diagnostics.language_analysis.spanish - ERROR - [spanish.py:218] - Spanish vowel analysis failed: 'SpanishAnalyzer' object has no attribute '_analyze_vowel_formants'
2025-01-29 17:24:36,015 - services.diagnostics.language_analysis.spanish - ERROR - [spanish.py:249] - Spanish stress analysis failed: 'SpanishAnalyzer' object has no attribute '_find_stress_peaks'
2025-01-29 17:24:36,015 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for spa
2025-01-29 17:24:36,015 - services.translation_routes - INFO - [translation_routes.py:130] - 
==================================================
2025-01-29 17:24:36,015 - services.translation_routes - INFO - [translation_routes.py:131] - Input Audio Quality Report
2025-01-29 17:24:36,015 - services.translation_routes - INFO - [translation_routes.py:132] - ==================================================
2025-01-29 17:24:36,015 - services.translation_routes - INFO - [translation_routes.py:133] - Request ID: 87abf5e9
2025-01-29 17:24:36,015 - services.translation_routes - INFO - [translation_routes.py:134] - Target Language: spa
2025-01-29 17:24:36,015 - services.translation_routes - INFO - [translation_routes.py:135] - --------------------------------------------------
2025-01-29 17:24:36,015 - services.translation_routes - INFO - [translation_routes.py:136] - Audio Quality Analysis Report
==============================

Target Language: spa

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.021
- Rms Level: 0.071
- Crest Factor: 13.339
- Zero Crossings: 37090.000
- Silence Percentage: 67.795
- Clipping Points: 0.000
- Dynamic Range: 4800816.700

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.098
  - Temporal Flatness: 0.028

- Volume Metrics:
  - Volume Stability: -0.884
  - Volume Range: 30950176.716
  - Volume Variations: 0.063

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0106790928303826
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Phoneme Analysis:
  - Trilled R: {'features': {'modulation_rate': 3888.7262079062957, 'strength': 0.27673375606536865}, 'strength': 0.27673375606536865, 'regularity': 0.0, 'duration': -38.57896193600551, 'overall_quality': 0.13836687803268433}
  - Interdental Theta: {'energy': 1.187762975692749, 'consistency': -2.089454174041748, 'spectral_shape': {'centroid': 0.7130780816078186, 'spread': 0.13163381814956665, 'quality': 0.9276440441608429}, 'quality': 0.008650948603947958}
  - Stop Consonants: {'voiceless_stops': {'strength': 1.0, 'precision': 0.6657999935961989, 'quality': 0.8328999967980995}, 'voiced_stops': {'voicing': 0.11019591242074966, 'precision': 0.7167365638763759, 'quality': 0.41346623814856276}, 'overall_quality': 0.6231831174733311}

Syllable Timing:
=======
  - Nasal Resonance: {'strength': 0.6399332284927368, 'stability': 3.4097635746002197, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.2834731638431549, 'consistency': 0.0, 'distinction': 1.0}
  - Description: Moderate nasal resonance. Unstable nasal resonance. Clear distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.534
  - Description: Weak or inconsistent liaison patterns
>>>>>>> parent of a02b9e660 (changes to translation_routes.py -- largely good but need to figure out a tiktok solution)

Intonation Patterns:
  - Contour Patterns: {'mean_pitch': 125.75927983166838, 'pitch_variability': 0.5649175372293127, 'rise_fall_ratio': 0.8499999997875, 'quality': 0.4350824628156078}
  - Melodic Features: {'range': 1.0, 'movement': 1.0, 'quality': 1.0}
  - Overall Quality: 0.718

<<<<<<< HEAD
Vowel Clarity:

Stress Patterns:
2025-01-29 17:24:36,016 - services.translation_routes - INFO - [translation_routes.py:137] - ==================================================

2025-01-29 17:24:36,016 - services.translation_routes - INFO - [translation_routes.py:164] - Request 87abf5e9: Audio processed successfully
2025-01-29 17:24:36,074 - services.translation_routes - INFO - [translation_routes.py:187] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-29 17:24:42,735 - services.translation_routes - INFO - [translation_routes.py:233] - Source text: If you weren't what do you think you would be? I definitely wouldn't be diabetic.
2025-01-29 17:24:48,100 - services.translation_routes - INFO - [translation_routes.py:255] - Target text: Si no lo hicieras, ¿qué crees que harías?
2025-01-29 17:24:54,455 - services.translation_routes - INFO - [translation_routes.py:277] - Processing model output type: <class 'tuple'>
2025-01-29 17:24:54,455 - services.translation_routes - INFO - [translation_routes.py:282] - Processing tuple output from model
2025-01-29 17:24:54,463 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:24:54,464 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:24:54,468 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:24:54,468 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:24:54,472 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:24:54,472 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:24:54,475 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-29 17:24:54,475 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-29 17:24:54,547 - services.diagnostics.language_analysis.spanish - ERROR - [spanish.py:161] - Spanish timing analysis failed: 'SpanishAnalyzer' object has no attribute '_find_syllable_boundaries'
2025-01-29 17:24:54,553 - services.diagnostics.language_analysis.spanish - ERROR - [spanish.py:218] - Spanish vowel analysis failed: 'SpanishAnalyzer' object has no attribute '_analyze_vowel_formants'
2025-01-29 17:24:54,554 - services.diagnostics.language_analysis.spanish - ERROR - [spanish.py:249] - Spanish stress analysis failed: 'SpanishAnalyzer' object has no attribute '_find_stress_peaks'
2025-01-29 17:24:54,554 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for spa
2025-01-29 17:24:54,554 - services.translation_routes - INFO - [translation_routes.py:323] - 
==================================================
2025-01-29 17:24:54,554 - services.translation_routes - INFO - [translation_routes.py:324] - Translated Audio Quality Report
2025-01-29 17:24:54,555 - services.translation_routes - INFO - [translation_routes.py:325] - ==================================================
2025-01-29 17:24:54,555 - services.translation_routes - INFO - [translation_routes.py:326] - Request ID: 87abf5e9
2025-01-29 17:24:54,555 - services.translation_routes - INFO - [translation_routes.py:327] - Target Language: spa
2025-01-29 17:24:54,555 - services.translation_routes - INFO - [translation_routes.py:328] - --------------------------------------------------
2025-01-29 17:24:54,555 - services.translation_routes - INFO - [translation_routes.py:329] - Audio Quality Analysis Report
==============================

Target Language: spa

Waveform Analysis:
--------------------
- Peak Amplitude: 0.622
- Avg Amplitude: 0.070
- Rms Level: 0.122
- Crest Factor: 5.115
- Zero Crossings: 5164.000
- Silence Percentage: 16.312
- Clipping Points: 0.000
- Dynamic Range: 394.337
=======
Vowel Quality:
  - Quality Score: 0.003
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-23 09:07:25,084 - services.translation_routes - INFO - [translation_routes.py:258] - ==================================================

2025-01-23 09:07:25,084 - services.translation_routes - INFO - [translation_routes.py:264] - Request dc390d56: Audio output processed successfully
2025-01-23 09:07:25,087 - services.translation_routes - INFO - [translation_routes.py:317] - Request dc390d56: Response prepared successfully
2025-01-23 09:07:25,087 - services.translation_routes - INFO - [translation_routes.py:328] - Request dc390d56 completed in 84.44s
2025-01-23 09:07:25,090 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 84.45s, Memory Change: 2425.56MB
2025-01-23 09:07:25,090 - __main__ - INFO - [app.py:278] - Request to /translate took 90.18s
2025-01-23 09:10:03,662 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-01-23 09:10:03,664 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-23 09:10:03,668 - services.audio_link_routes - INFO - [audio_link_routes.py:174] - Processing URL: https://www.tiktok.com/@ellendegeneres/video/7462053313240927534
2025-01-23 09:10:03,669 - services.audio_link_routes - INFO - [audio_link_routes.py:194] - Processing TikTok URL
2025-01-23 09:10:05,273 - services.audio_link_routes - INFO - [audio_link_routes.py:200] - Successfully processed audio
2025-01-23 09:10:05,273 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 1.61s, Memory Change: 2.95MB
2025-01-23 09:10:05,274 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 1.61s
2025-01-23 09:10:17,054 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-23 09:10:17,058 - services.translation_routes - INFO - [translation_routes.py:29] - Starting translation request f674c248
2025-01-23 09:10:17,058 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-23 09:10:17,058 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-23 09:10:17,060 - services.translation_routes - INFO - [translation_routes.py:86] - Request f674c248: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpbpluk4zd.wav
2025-01-23 09:10:17,060 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 96.85 seconds
2025-01-23 09:10:17,060 - services.translation_routes - INFO - [translation_routes.py:99] - Request f674c248: Beginning audio processing with diagnostics
2025-01-23 09:10:17,060 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpbpluk4zd.wav
2025-01-23 09:10:17,060 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 16000, Channels: 1
2025-01-23 09:10:17,066 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([1, 1549630]), Frequency: 16000Hz
2025-01-23 09:10:17,152 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-23 09:10:17,160 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-23 09:10:17,309 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-23 09:10:17,472 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:10:17,473 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:10:17,507 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:10:17,507 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:10:17,542 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:10:17,542 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:10:17,576 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:10:17,577 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:10:20,599 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-23 09:10:20,599 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-23 09:10:20,887 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:10:20,887 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:10:20,920 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:10:20,920 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:10:20,955 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:10:20,955 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:10:20,988 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:10:20,988 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:10:24,108 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-23 09:10:24,108 - services.translation_routes - INFO - [translation_routes.py:110] - 
==================================================
2025-01-23 09:10:24,108 - services.translation_routes - INFO - [translation_routes.py:111] - Input Audio Quality Report
2025-01-23 09:10:24,108 - services.translation_routes - INFO - [translation_routes.py:112] - ==================================================
2025-01-23 09:10:24,108 - services.translation_routes - INFO - [translation_routes.py:113] - Request ID: f674c248
2025-01-23 09:10:24,109 - services.translation_routes - INFO - [translation_routes.py:114] - Target Language: fra
2025-01-23 09:10:24,109 - services.translation_routes - INFO - [translation_routes.py:115] - --------------------------------------------------
2025-01-23 09:10:24,109 - services.translation_routes - INFO - [translation_routes.py:116] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.021
- Rms Level: 0.046
- Crest Factor: 20.598
- Zero Crossings: 726921.000
- Silence Percentage: 43.257
- Clipping Points: 0.000
- Dynamic Range: 5833420.895
>>>>>>> parent of a02b9e660 (changes to translation_routes.py -- largely good but need to figure out a tiktok solution)

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
<<<<<<< HEAD
  - Compression Severity: 0.361
=======
  - Compression Severity: 0.000
>>>>>>> parent of a02b9e660 (changes to translation_routes.py -- largely good but need to figure out a tiktok solution)
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
<<<<<<< HEAD
  - Temporal Variation: 0.034
  - Temporal Flatness: 0.018

- Volume Metrics:
  - Volume Stability: 0.128
  - Volume Range: 381.855
  - Volume Variations: 0.080
=======
  - Temporal Variation: 0.072
  - Temporal Flatness: 0.030

- Volume Metrics:
  - Volume Stability: -0.134
  - Volume Range: 23558643.460
  - Volume Variations: 0.035
>>>>>>> parent of a02b9e660 (changes to translation_routes.py -- largely good but need to figure out a tiktok solution)

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
<<<<<<< HEAD
- Audio Clarity: 3.047578158554429
- Background Noise: 3.0460929412145368
=======
- Audio Clarity: 3.004478381776771
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.37451744079589844, 'stability': 0.7744566798210144, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.09089379012584686, 'consistency': 0.5062854290008545, 'distinction': 0.401911199092865}
  - Description: Weak nasal resonance. Unstable nasal resonance. Moderate distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.566
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.572
  - Rhythm Quality: 0.624
  - Intonation Quality: 0.519

Vowel Quality:
  - Quality Score: 0.006
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-23 09:10:24,109 - services.translation_routes - INFO - [translation_routes.py:117] - ==================================================

2025-01-23 09:10:24,109 - services.translation_routes - INFO - [translation_routes.py:128] - Request f674c248: Audio processed successfully
2025-01-23 09:10:24,193 - services.translation_routes - INFO - [translation_routes.py:147] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-23 09:11:29,978 - services.translation_routes - INFO - [translation_routes.py:185] - Source text: It's the highest melting point of all the elements.
2025-01-23 09:12:31,567 - services.translation_routes - INFO - [translation_routes.py:204] - Target text: C'est le plus haut point de fusion de tous les éléments.
2025-01-23 09:14:43,218 - services.translation_routes - INFO - [translation_routes.py:227] - Processing tuple output from model
2025-01-23 09:14:43,247 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:14:43,251 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:14:43,253 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:14:43,253 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:14:43,256 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:14:43,256 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:14:43,258 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:14:43,258 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:14:43,329 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-23 09:14:43,331 - services.translation_routes - INFO - [translation_routes.py:251] - 
==================================================
2025-01-23 09:14:43,331 - services.translation_routes - INFO - [translation_routes.py:252] - Translated Audio Quality Report
2025-01-23 09:14:43,331 - services.translation_routes - INFO - [translation_routes.py:253] - ==================================================
2025-01-23 09:14:43,331 - services.translation_routes - INFO - [translation_routes.py:254] - Request ID: f674c248
2025-01-23 09:14:43,331 - services.translation_routes - INFO - [translation_routes.py:255] - Target Language: fra
2025-01-23 09:14:43,331 - services.translation_routes - INFO - [translation_routes.py:256] - --------------------------------------------------
2025-01-23 09:14:43,331 - services.translation_routes - INFO - [translation_routes.py:257] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.563
- Avg Amplitude: 0.064
- Rms Level: 0.103
- Crest Factor: 5.483
- Zero Crossings: 3675.000
- Silence Percentage: 18.120
- Clipping Points: 0.000
- Dynamic Range: 435.690

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.315
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.021
  - Temporal Flatness: 0.012

- Volume Metrics:
  - Volume Stability: 0.265
  - Volume Range: 691.879
  - Volume Variations: 0.061

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0374802083957566
- Background Noise: 3.1933310075472146
>>>>>>> parent of a02b9e660 (changes to translation_routes.py -- largely good but need to figure out a tiktok solution)
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
No issues detected

Language-Specific Analysis:
--------------------

<<<<<<< HEAD
Phoneme Analysis:
  - Trilled R: {'features': {'modulation_rate': 3295.26598340654, 'strength': 1.229113221168518}, 'strength': 1.0, 'regularity': 0.0, 'duration': -144.82377310209412, 'overall_quality': 0.5}
  - Interdental Theta: {'energy': 1.0553842782974243, 'consistency': -2.24236798286438, 'spectral_shape': {'centroid': 0.4065695106983185, 'spread': 0.19193464517593384, 'quality': 0.7573174387216568}, 'quality': -0.14322208861509958}
  - Stop Consonants: {'voiceless_stops': {'strength': 1.0, 'precision': 0.3576378414104151, 'quality': 0.6788189207052076}, 'voiced_stops': {'voicing': 0.3050684630870819, 'precision': 0.41449680658816357, 'quality': 0.35978263483762274}, 'overall_quality': 0.5193007777714151}

Syllable Timing:

Intonation Patterns:
  - Contour Patterns: {'mean_pitch': 230.04439160437946, 'pitch_variability': 0.18562841660937263, 'rise_fall_ratio': 0.7307692304881657, 'quality': 0.8143715833986966}
  - Melodic Features: {'range': 0.7755332716514759, 'movement': 0.3027763911574187, 'quality': 0.5391548314044473}
  - Overall Quality: 0.677

Vowel Clarity:

Stress Patterns:
2025-01-29 17:24:54,555 - services.translation_routes - INFO - [translation_routes.py:330] - ==================================================

2025-01-29 17:24:54,555 - services.translation_routes - WARNING - [translation_routes.py:341] - Low speech clarity in output audio
2025-01-29 17:24:54,555 - services.translation_routes - INFO - [translation_routes.py:343] - Request 87abf5e9: Audio output processed successfully
2025-01-29 17:24:54,556 - services.translation_routes - INFO - [translation_routes.py:413] - Request 87abf5e9: Response prepared successfully
2025-01-29 17:24:54,609 - services.translation_routes - INFO - [translation_routes.py:438] - Request 87abf5e9 completed in 19.03s
2025-01-29 17:24:54,609 - services.translation_routes - ERROR - [translation_routes.py:449] - Error during cleanup: type object 'ResourceMonitor' has no attribute 'get_process_memory'
2025-01-29 17:24:54,610 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 19.03s, Memory Change: 431.19MB
2025-01-29 17:24:54,610 - __main__ - INFO - [app.py:278] - Request to /translate took 27.08s
=======
Nasalization:
  - Nasal Resonance: {'strength': 0.6256275773048401, 'stability': 3.1791577339172363, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.6216173768043518, 'consistency': 0.0, 'distinction': 1.0}
  - Description: Moderate nasal resonance. Unstable nasal resonance. Clear distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.516
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 1.000

Vowel Quality:
  - Quality Score: 0.003
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-23 09:14:43,331 - services.translation_routes - INFO - [translation_routes.py:258] - ==================================================

2025-01-23 09:14:43,331 - services.translation_routes - INFO - [translation_routes.py:264] - Request f674c248: Audio output processed successfully
2025-01-23 09:14:43,337 - services.translation_routes - INFO - [translation_routes.py:317] - Request f674c248: Response prepared successfully
2025-01-23 09:14:43,338 - services.translation_routes - INFO - [translation_routes.py:328] - Request f674c248 completed in 266.28s
2025-01-23 09:14:43,340 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 266.28s, Memory Change: -6257.03MB
2025-01-23 09:14:43,340 - __main__ - INFO - [app.py:278] - Request to /translate took 272.21s
2025-01-23 10:38:13,662 - __main__ - INFO - [app.py:217] - Received SIGINT signal
2025-01-23 10:38:13,663 - __main__ - INFO - [app.py:202] - Initiating graceful shutdown...
2025-01-23 10:38:18,665 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-23 10:38:18,666 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-23 10:38:18,667 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-23 10:38:18,669 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 10:38:18,671 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-23 10:38:18,671 - __main__ - INFO - [app.py:206] - Graceful shutdown completed
2025-01-23 10:38:18,678 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-23 10:38:18,679 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-23 10:38:18,679 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-23 10:38:18,682 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 10:38:18,682 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-23 10:38:18,682 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-23 10:38:18,683 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-23 10:38:18,683 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-23 10:38:18,684 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 10:38:18,684 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-23 10:38:40,627 - __main__ - INFO - [app.py:467] - Metrics server started on port 8000
2025-01-23 10:38:40,627 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-23 10:38:53,404 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-23 10:39:00,514 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-23 10:39:00,516 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-23 10:39:05,542 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-23 10:39:05,544 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 10:39:05,545 - __main__ - INFO - [app.py:491] - ==================================================
2025-01-23 10:39:05,545 - __main__ - INFO - [app.py:492] - Starting LinguaSync Backend
2025-01-23 10:39:05,545 - __main__ - INFO - [app.py:493] - Starting Flask app on port 5001 using cpu
2025-01-23 10:39:05,545 - __main__ - INFO - [app.py:494] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-01-23 10:39:05,545 - __main__ - INFO - [app.py:495] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-23 10:39:05,545 - __main__ - INFO - [app.py:496] - Maximum audio length: 300 seconds
2025-01-23 10:39:05,545 - __main__ - INFO - [app.py:497] - Sample rate: 16000 Hz
2025-01-23 10:39:05,545 - __main__ - INFO - [app.py:501] - System memory: 36.0GB total, 14.4GB available
2025-01-23 10:39:05,545 - __main__ - INFO - [app.py:502] - CPU cores: 11
2025-01-23 10:39:05,545 - __main__ - INFO - [app.py:510] - Configuration:
2025-01-23 10:39:05,545 - __main__ - INFO - [app.py:511] - - Debug mode: False
2025-01-23 10:39:05,545 - __main__ - INFO - [app.py:512] - - CORS enabled: True
2025-01-23 10:39:05,545 - __main__ - INFO - [app.py:513] - - Rate limiting: 10 requests per minute
2025-01-23 10:39:05,545 - __main__ - INFO - [app.py:514] - - Metrics enabled: True (port 8000)
2025-01-23 10:39:05,545 - __main__ - INFO - [app.py:516] - ==================================================
2025-01-23 10:41:46,621 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.42MB
2025-01-23 10:41:46,622 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-23 10:41:46,624 - services.audio_link_routes - INFO - [audio_link_routes.py:205] - Processing URL: https://www.tiktok.com/@ellendegeneres/video/7462053313240927534
2025-01-23 10:41:46,625 - services.audio_link_routes - INFO - [audio_link_routes.py:225] - Processing TikTok URL
2025-01-23 10:41:46,625 - services.audio_link_routes - INFO - [audio_link_routes.py:132] - Using options for tiktok: {'format': 'bestaudio/best', 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpgg5eebc2/output.wav', 'quiet': False, 'no_warnings': True, 'extract_audio': True, 'extractor_args': {'tiktok': {'app_version': '34.1.2', 'manifest_app_version': '2023401020', 'aid': '1180'}}}
2025-01-23 10:41:48,150 - services.audio_link_routes - INFO - [audio_link_routes.py:147] - Successfully downloaded tiktok content
2025-01-23 10:41:48,152 - services.audio_link_routes - ERROR - [audio_link_routes.py:171] - tiktok processing error: Failed to download audio from tiktok
2025-01-23 10:41:48,152 - services.audio_link_routes - ERROR - [audio_link_routes.py:239] - Processing error: Failed to download audio from tiktok
2025-01-23 10:41:48,153 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 1.53s, Memory Change: 29.67MB
2025-01-23 10:41:48,153 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 1.53s
2025-01-23 10:43:47,529 - __main__ - INFO - [app.py:217] - Received SIGINT signal
2025-01-23 10:43:47,530 - __main__ - INFO - [app.py:202] - Initiating graceful shutdown...
2025-01-23 10:43:52,534 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-23 10:43:52,535 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-23 10:43:52,535 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-23 10:43:52,537 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 10:43:52,538 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-23 10:43:52,538 - __main__ - INFO - [app.py:206] - Graceful shutdown completed
2025-01-23 10:43:52,539 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-23 10:43:52,539 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-23 10:43:52,539 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-23 10:43:52,540 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 10:43:52,540 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-23 10:43:52,541 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-23 10:43:52,541 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-23 10:43:52,541 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-23 10:43:52,542 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 10:43:52,542 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-23 10:44:07,862 - __main__ - INFO - [app.py:467] - Metrics server started on port 8000
2025-01-23 10:44:07,863 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-23 10:44:21,076 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-23 10:44:27,468 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-23 10:44:27,469 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-23 10:44:32,699 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-23 10:44:32,701 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 10:44:32,701 - __main__ - INFO - [app.py:491] - ==================================================
2025-01-23 10:44:32,701 - __main__ - INFO - [app.py:492] - Starting LinguaSync Backend
2025-01-23 10:44:32,701 - __main__ - INFO - [app.py:493] - Starting Flask app on port 5001 using cpu
2025-01-23 10:44:32,701 - __main__ - INFO - [app.py:494] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-01-23 10:44:32,701 - __main__ - INFO - [app.py:495] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-23 10:44:32,701 - __main__ - INFO - [app.py:496] - Maximum audio length: 300 seconds
2025-01-23 10:44:32,701 - __main__ - INFO - [app.py:497] - Sample rate: 16000 Hz
2025-01-23 10:44:32,701 - __main__ - INFO - [app.py:501] - System memory: 36.0GB total, 14.3GB available
2025-01-23 10:44:32,702 - __main__ - INFO - [app.py:502] - CPU cores: 11
2025-01-23 10:44:32,702 - __main__ - INFO - [app.py:510] - Configuration:
2025-01-23 10:44:32,702 - __main__ - INFO - [app.py:511] - - Debug mode: False
2025-01-23 10:44:32,702 - __main__ - INFO - [app.py:512] - - CORS enabled: True
2025-01-23 10:44:32,702 - __main__ - INFO - [app.py:513] - - Rate limiting: 10 requests per minute
2025-01-23 10:44:32,702 - __main__ - INFO - [app.py:514] - - Metrics enabled: True (port 8000)
2025-01-23 10:44:32,702 - __main__ - INFO - [app.py:516] - ==================================================
2025-01-23 10:45:21,889 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-01-23 10:45:21,890 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-23 10:45:21,893 - services.audio_link_routes - INFO - [audio_link_routes.py:205] - Processing URL: https://www.tiktok.com/@ellendegeneres/video/7462053313240927534
2025-01-23 10:45:21,894 - services.audio_link_routes - INFO - [audio_link_routes.py:225] - Processing TikTok URL
2025-01-23 10:45:21,894 - services.audio_link_routes - ERROR - [audio_link_routes.py:171] - tiktok processing error: name 'random' is not defined
2025-01-23 10:45:21,895 - services.audio_link_routes - ERROR - [audio_link_routes.py:239] - Processing error: name 'random' is not defined
2025-01-23 10:45:21,895 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.02MB
2025-01-23 10:45:21,895 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-23 10:45:53,177 - services.audio_link_routes - INFO - [audio_link_routes.py:205] - Processing URL: https://www.tiktok.com/@ellendegeneres/video/7462053313240927534
2025-01-23 10:45:53,178 - services.audio_link_routes - INFO - [audio_link_routes.py:225] - Processing TikTok URL
2025-01-23 10:45:53,179 - services.audio_link_routes - ERROR - [audio_link_routes.py:171] - tiktok processing error: name 'random' is not defined
2025-01-23 10:45:53,179 - services.audio_link_routes - ERROR - [audio_link_routes.py:239] - Processing error: name 'random' is not defined
2025-01-23 10:45:53,180 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-01-23 10:45:53,180 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-23 10:46:03,465 - __main__ - INFO - [app.py:217] - Received SIGINT signal
2025-01-23 10:46:03,466 - __main__ - INFO - [app.py:202] - Initiating graceful shutdown...
2025-01-23 10:46:08,471 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-23 10:46:08,472 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-23 10:46:08,472 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-23 10:46:08,474 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 10:46:08,475 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-23 10:46:08,475 - __main__ - INFO - [app.py:206] - Graceful shutdown completed
2025-01-23 10:46:08,476 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-23 10:46:08,476 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-23 10:46:08,476 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-23 10:46:08,477 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 10:46:08,477 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-23 10:46:08,478 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-23 10:46:08,478 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-23 10:46:08,478 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-23 10:46:08,479 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 10:46:08,480 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-23 10:46:59,154 - __main__ - INFO - [app.py:467] - Metrics server started on port 8000
2025-01-23 10:46:59,154 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-23 10:47:12,366 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-23 10:47:21,075 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-23 10:47:21,076 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-23 10:47:26,454 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-23 10:47:26,456 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 10:47:26,456 - __main__ - INFO - [app.py:491] - ==================================================
2025-01-23 10:47:26,456 - __main__ - INFO - [app.py:492] - Starting LinguaSync Backend
2025-01-23 10:47:26,456 - __main__ - INFO - [app.py:493] - Starting Flask app on port 5001 using cpu
2025-01-23 10:47:26,456 - __main__ - INFO - [app.py:494] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-01-23 10:47:26,456 - __main__ - INFO - [app.py:495] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-23 10:47:26,456 - __main__ - INFO - [app.py:496] - Maximum audio length: 300 seconds
2025-01-23 10:47:26,456 - __main__ - INFO - [app.py:497] - Sample rate: 16000 Hz
2025-01-23 10:47:26,456 - __main__ - INFO - [app.py:501] - System memory: 36.0GB total, 14.1GB available
2025-01-23 10:47:26,456 - __main__ - INFO - [app.py:502] - CPU cores: 11
2025-01-23 10:47:26,456 - __main__ - INFO - [app.py:510] - Configuration:
2025-01-23 10:47:26,456 - __main__ - INFO - [app.py:511] - - Debug mode: False
2025-01-23 10:47:26,456 - __main__ - INFO - [app.py:512] - - CORS enabled: True
2025-01-23 10:47:26,456 - __main__ - INFO - [app.py:513] - - Rate limiting: 10 requests per minute
2025-01-23 10:47:26,456 - __main__ - INFO - [app.py:514] - - Metrics enabled: True (port 8000)
2025-01-23 10:47:26,456 - __main__ - INFO - [app.py:516] - ==================================================
2025-01-23 10:49:26,331 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-01-23 10:49:26,332 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-23 10:49:26,336 - services.audio_link_routes - INFO - [audio_link_routes.py:206] - Processing URL: https://www.tiktok.com/@ellendegeneres/video/7462053313240927534
2025-01-23 10:49:26,336 - services.audio_link_routes - INFO - [audio_link_routes.py:226] - Processing TikTok URL
2025-01-23 10:49:26,337 - services.audio_link_routes - INFO - [audio_link_routes.py:133] - Using options for tiktok: {'format': 'bestaudio/best', 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpapq60hpr/output.wav', 'quiet': False, 'no_warnings': True, 'extract_audio': True, 'extractor_args': {'tiktok': {'api_hostname': 'api22-normal-c-alisg.tiktokv.com', 'app_name': 'trill', 'app_version': '34.1.2', 'manifest_app_version': '2023401020', 'app_info': '1234567890123456789/trill///1180', 'device_id': '0147365705519617337'}}}
2025-01-23 10:49:27,853 - services.audio_link_routes - INFO - [audio_link_routes.py:148] - Successfully downloaded tiktok content
2025-01-23 10:49:27,854 - services.audio_link_routes - ERROR - [audio_link_routes.py:172] - tiktok processing error: Failed to download audio from tiktok
2025-01-23 10:49:27,854 - services.audio_link_routes - ERROR - [audio_link_routes.py:240] - Processing error: Failed to download audio from tiktok
2025-01-23 10:49:27,855 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 1.52s, Memory Change: 5.41MB
2025-01-23 10:49:27,855 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 1.52s
2025-01-23 14:07:26,659 - __main__ - INFO - [app.py:217] - Received SIGINT signal
2025-01-23 14:07:26,663 - __main__ - INFO - [app.py:202] - Initiating graceful shutdown...
2025-01-23 14:07:31,667 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-23 14:07:31,669 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-23 14:07:31,669 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-23 14:07:31,672 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 14:07:31,673 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-23 14:07:31,673 - __main__ - INFO - [app.py:206] - Graceful shutdown completed
2025-01-23 14:07:31,675 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-23 14:07:31,675 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-23 14:07:31,675 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-23 14:07:31,676 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 14:07:31,676 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-23 14:07:31,677 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-23 14:07:31,677 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-23 14:07:31,678 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-23 14:07:31,678 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 14:07:31,679 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-23 14:11:06,119 - __main__ - INFO - [app.py:467] - Metrics server started on port 8000
2025-01-23 14:11:06,119 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-23 14:11:18,663 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-23 14:11:28,508 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-23 14:11:28,510 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-23 14:11:35,343 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-23 14:11:35,344 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 14:11:35,344 - __main__ - INFO - [app.py:491] - ==================================================
2025-01-23 14:11:35,344 - __main__ - INFO - [app.py:492] - Starting LinguaSync Backend
2025-01-23 14:11:35,344 - __main__ - INFO - [app.py:493] - Starting Flask app on port 5001 using cpu
2025-01-23 14:11:35,344 - __main__ - INFO - [app.py:494] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-01-23 14:11:35,344 - __main__ - INFO - [app.py:495] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-23 14:11:35,344 - __main__ - INFO - [app.py:496] - Maximum audio length: 300 seconds
2025-01-23 14:11:35,344 - __main__ - INFO - [app.py:497] - Sample rate: 16000 Hz
2025-01-23 14:11:35,344 - __main__ - INFO - [app.py:501] - System memory: 36.0GB total, 17.5GB available
2025-01-23 14:11:35,344 - __main__ - INFO - [app.py:502] - CPU cores: 11
2025-01-23 14:11:35,344 - __main__ - INFO - [app.py:510] - Configuration:
2025-01-23 14:11:35,344 - __main__ - INFO - [app.py:511] - - Debug mode: False
2025-01-23 14:11:35,344 - __main__ - INFO - [app.py:512] - - CORS enabled: True
2025-01-23 14:11:35,344 - __main__ - INFO - [app.py:513] - - Rate limiting: 10 requests per minute
2025-01-23 14:11:35,344 - __main__ - INFO - [app.py:514] - - Metrics enabled: True (port 8000)
2025-01-23 14:11:35,344 - __main__ - INFO - [app.py:516] - ==================================================
2025-01-23 14:13:12,912 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-01-23 14:13:12,912 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-23 14:13:12,915 - services.audio_link_routes - INFO - [audio_link_routes.py:206] - Processing URL: https://www.tiktok.com/@loganpaul/video/7138576512512478510?is_from_webapp=1&sender_device=pc&web_id=7412617488065742368
2025-01-23 14:13:12,915 - services.audio_link_routes - INFO - [audio_link_routes.py:226] - Processing TikTok URL
2025-01-23 14:13:12,916 - services.audio_link_routes - INFO - [audio_link_routes.py:133] - Using options for tiktok: {'format': 'bestaudio/best', 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpksvttcxh/output.wav', 'quiet': False, 'no_warnings': True, 'extract_audio': True, 'extractor_args': {'tiktok': {'app_version': '34.1.2', 'manifest_app_version': '2023401020', 'aid': '1180'}}}
2025-01-23 14:13:14,674 - services.audio_link_routes - INFO - [audio_link_routes.py:148] - Successfully downloaded tiktok content
2025-01-23 14:13:14,676 - services.audio_link_routes - ERROR - [audio_link_routes.py:172] - tiktok processing error: Failed to download audio from tiktok
2025-01-23 14:13:14,676 - services.audio_link_routes - ERROR - [audio_link_routes.py:240] - Processing error: Failed to download audio from tiktok
2025-01-23 14:13:14,676 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 1.76s, Memory Change: 2.03MB
2025-01-23 14:13:14,676 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 1.76s
2025-01-23 14:17:37,395 - __main__ - INFO - [app.py:217] - Received SIGINT signal
2025-01-23 14:17:37,395 - __main__ - INFO - [app.py:202] - Initiating graceful shutdown...
2025-01-23 14:17:42,398 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-23 14:17:42,399 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-23 14:17:42,399 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-23 14:17:42,399 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 14:17:42,399 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-23 14:17:42,400 - __main__ - INFO - [app.py:206] - Graceful shutdown completed
2025-01-23 14:17:42,400 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-23 14:17:42,400 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-23 14:17:42,400 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-23 14:17:42,400 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 14:17:42,400 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-23 14:17:42,400 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-23 14:17:42,400 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-23 14:17:42,401 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-23 14:17:42,401 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 14:17:42,401 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-23 14:17:54,019 - __main__ - INFO - [app.py:467] - Metrics server started on port 8000
2025-01-23 14:17:54,019 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-23 14:18:06,872 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-23 14:18:11,719 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-23 14:18:11,719 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-23 14:18:16,586 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-23 14:18:16,588 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 14:18:16,588 - __main__ - INFO - [app.py:491] - ==================================================
2025-01-23 14:18:16,588 - __main__ - INFO - [app.py:492] - Starting LinguaSync Backend
2025-01-23 14:18:16,588 - __main__ - INFO - [app.py:493] - Starting Flask app on port 5001 using cpu
2025-01-23 14:18:16,588 - __main__ - INFO - [app.py:494] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-01-23 14:18:16,588 - __main__ - INFO - [app.py:495] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-23 14:18:16,588 - __main__ - INFO - [app.py:496] - Maximum audio length: 300 seconds
2025-01-23 14:18:16,588 - __main__ - INFO - [app.py:497] - Sample rate: 16000 Hz
2025-01-23 14:18:16,588 - __main__ - INFO - [app.py:501] - System memory: 36.0GB total, 16.6GB available
2025-01-23 14:18:16,588 - __main__ - INFO - [app.py:502] - CPU cores: 11
2025-01-23 14:18:16,588 - __main__ - INFO - [app.py:510] - Configuration:
2025-01-23 14:18:16,588 - __main__ - INFO - [app.py:511] - - Debug mode: False
2025-01-23 14:18:16,588 - __main__ - INFO - [app.py:512] - - CORS enabled: True
2025-01-23 14:18:16,588 - __main__ - INFO - [app.py:513] - - Rate limiting: 10 requests per minute
2025-01-23 14:18:16,588 - __main__ - INFO - [app.py:514] - - Metrics enabled: True (port 8000)
2025-01-23 14:18:16,588 - __main__ - INFO - [app.py:516] - ==================================================
2025-01-23 14:20:14,541 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-01-23 14:20:14,542 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-23 14:20:14,547 - services.audio_link_routes - INFO - [audio_link_routes.py:206] - Processing URL: https://www.tiktok.com/@loganpaul/video/7138576512512478510?is_from_webapp=1&sender_device=pc&web_id=7412617488065742368
2025-01-23 14:20:14,549 - services.audio_link_routes - INFO - [audio_link_routes.py:226] - Processing TikTok URL
2025-01-23 14:20:14,551 - services.audio_link_routes - INFO - [audio_link_routes.py:133] - Using options for tiktok: {'format': 'bestaudio/best', 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpodzjymng/output.wav', 'quiet': False, 'no_warnings': True, 'extract_audio': True, 'extractor_args': {'tiktok': {'api_hostname': 'api22-normal-c-alisg.tiktokv.com', 'app_name': 'trill', 'app_version': '34.1.2', 'manifest_app_version': '2023401020', 'app_info': '1234567890123456789/trill///1180', 'device_id': '0852363973132853448'}}}
2025-01-23 14:20:16,029 - services.audio_link_routes - INFO - [audio_link_routes.py:148] - Successfully downloaded tiktok content
2025-01-23 14:20:16,031 - services.audio_link_routes - ERROR - [audio_link_routes.py:172] - tiktok processing error: Failed to download audio from tiktok
2025-01-23 14:20:16,031 - services.audio_link_routes - ERROR - [audio_link_routes.py:240] - Processing error: Failed to download audio from tiktok
2025-01-23 14:20:16,031 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 1.48s, Memory Change: 1.95MB
2025-01-23 14:20:16,031 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 1.48s
2025-01-23 14:20:43,649 - services.audio_link_routes - INFO - [audio_link_routes.py:206] - Processing URL: https://www.tiktok.com/@loganpaul/video/7138576512512478510?is_from_webapp=1&sender_device=pc&web_id=7412617488065742368
2025-01-23 14:20:43,650 - services.audio_link_routes - INFO - [audio_link_routes.py:226] - Processing TikTok URL
2025-01-23 14:20:43,650 - services.audio_link_routes - INFO - [audio_link_routes.py:133] - Using options for tiktok: {'format': 'bestaudio/best', 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpx0q1hc9p/output.wav', 'quiet': False, 'no_warnings': True, 'extract_audio': True, 'extractor_args': {'tiktok': {'api_hostname': 'api22-normal-c-alisg.tiktokv.com', 'app_name': 'trill', 'app_version': '34.1.2', 'manifest_app_version': '2023401020', 'app_info': '1234567890123456789/trill///1180', 'device_id': '9237854521759457447'}}}
2025-01-23 14:20:44,942 - services.audio_link_routes - INFO - [audio_link_routes.py:148] - Successfully downloaded tiktok content
2025-01-23 14:20:44,944 - services.audio_link_routes - ERROR - [audio_link_routes.py:172] - tiktok processing error: Failed to download audio from tiktok
2025-01-23 14:20:44,944 - services.audio_link_routes - ERROR - [audio_link_routes.py:240] - Processing error: Failed to download audio from tiktok
2025-01-23 14:20:44,944 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 1.30s, Memory Change: 0.00MB
2025-01-23 14:20:44,945 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 1.30s
2025-01-23 14:50:47,546 - __main__ - INFO - [app.py:217] - Received SIGINT signal
2025-01-23 14:50:47,548 - __main__ - INFO - [app.py:202] - Initiating graceful shutdown...
2025-01-23 14:50:52,551 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-23 14:50:52,552 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-23 14:50:52,553 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-23 14:50:52,554 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 14:50:52,555 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-23 14:50:52,555 - __main__ - INFO - [app.py:206] - Graceful shutdown completed
2025-01-23 14:50:52,556 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-23 14:50:52,557 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-23 14:50:52,557 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-23 14:50:52,558 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 14:50:52,559 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-23 14:50:52,559 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-23 14:50:52,559 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-23 14:50:52,560 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-23 14:50:52,560 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 14:50:52,561 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-23 14:51:03,874 - __main__ - INFO - [app.py:467] - Metrics server started on port 8000
2025-01-23 14:51:03,874 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-23 14:51:17,418 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-23 14:51:24,029 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-23 14:51:24,030 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-23 14:51:28,090 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-23 14:51:28,092 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 14:51:28,092 - __main__ - INFO - [app.py:491] - ==================================================
2025-01-23 14:51:28,092 - __main__ - INFO - [app.py:492] - Starting LinguaSync Backend
2025-01-23 14:51:28,092 - __main__ - INFO - [app.py:493] - Starting Flask app on port 5001 using cpu
2025-01-23 14:51:28,092 - __main__ - INFO - [app.py:494] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-01-23 14:51:28,092 - __main__ - INFO - [app.py:495] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-23 14:51:28,092 - __main__ - INFO - [app.py:496] - Maximum audio length: 300 seconds
2025-01-23 14:51:28,092 - __main__ - INFO - [app.py:497] - Sample rate: 16000 Hz
2025-01-23 14:51:28,092 - __main__ - INFO - [app.py:501] - System memory: 36.0GB total, 14.8GB available
2025-01-23 14:51:28,092 - __main__ - INFO - [app.py:502] - CPU cores: 11
2025-01-23 14:51:28,092 - __main__ - INFO - [app.py:510] - Configuration:
2025-01-23 14:51:28,092 - __main__ - INFO - [app.py:511] - - Debug mode: False
2025-01-23 14:51:28,092 - __main__ - INFO - [app.py:512] - - CORS enabled: True
2025-01-23 14:51:28,092 - __main__ - INFO - [app.py:513] - - Rate limiting: 10 requests per minute
2025-01-23 14:51:28,092 - __main__ - INFO - [app.py:514] - - Metrics enabled: True (port 8000)
2025-01-23 14:51:28,093 - __main__ - INFO - [app.py:516] - ==================================================
2025-01-23 14:52:06,992 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-01-23 14:52:06,992 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-23 14:52:06,995 - services.audio_link_routes - INFO - [audio_link_routes.py:216] - Processing URL: https://www.tiktok.com/@loganpaul/video/7138576512512478510?is_from_webapp=1&sender_device=pc&web_id=7412617488065742368
2025-01-23 14:52:06,996 - services.audio_link_routes - INFO - [audio_link_routes.py:236] - Processing TikTok URL
2025-01-23 14:52:06,996 - services.audio_link_routes - INFO - [audio_link_routes.py:120] - Using options for tiktok: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpfymbvozv/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8, 'extractor_args': {'tiktok': {'api_hostname': 'api22-normal-c-alisg.tiktokv.com', 'app_name': 'trill', 'app_version': '34.1.2', 'manifest_app_version': '2023401020', 'app_info': '1234567890123456789/trill///1180', 'device_id': '4069187456410993372'}}}
2025-01-23 14:52:09,314 - services.audio_link_routes - INFO - [audio_link_routes.py:133] - Successfully downloaded tiktok content
2025-01-23 14:52:09,316 - services.audio_link_routes - INFO - [audio_link_routes.py:152] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpfymbvozv/output.wav
2025-01-23 14:52:09,362 - services.audio_link_routes - INFO - [audio_link_routes.py:164] - Successfully converted audio to WAV
2025-01-23 14:52:09,363 - services.audio_link_routes - INFO - [audio_link_routes.py:242] - Successfully processed audio
2025-01-23 14:52:09,363 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 2.37s, Memory Change: 3.89MB
2025-01-23 14:52:09,363 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 2.37s
2025-01-23 14:52:22,712 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-23 14:52:22,713 - services.translation_routes - INFO - [translation_routes.py:29] - Starting translation request d1f51838
2025-01-23 14:52:22,713 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-23 14:52:22,713 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-23 14:52:22,714 - services.translation_routes - INFO - [translation_routes.py:86] - Request d1f51838: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpjj3bzirg.wav
2025-01-23 14:52:22,716 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 73.49 seconds
2025-01-23 14:52:22,716 - services.translation_routes - INFO - [translation_routes.py:99] - Request d1f51838: Beginning audio processing with diagnostics
2025-01-23 14:52:22,716 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpjj3bzirg.wav
2025-01-23 14:52:22,716 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 16000, Channels: 1
2025-01-23 14:52:22,720 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([1, 1175881]), Frequency: 16000Hz
2025-01-23 14:52:22,786 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-23 14:52:22,792 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for deu
2025-01-23 14:52:22,891 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-23 14:52:23,026 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 14:52:23,027 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 14:52:23,057 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 14:52:23,057 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 14:52:23,085 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 14:52:23,086 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 14:52:23,115 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 14:52:23,115 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 14:52:25,749 - services.diagnostics.language_analysis.german - ERROR - [german.py:113] - German consonant analysis failed: 'GermanAnalyzer' object has no attribute '_analyze_plosives'
2025-01-23 14:52:25,949 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for deu
2025-01-23 14:52:25,950 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-23 14:52:26,163 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 14:52:26,163 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 14:52:26,186 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 14:52:26,186 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 14:52:26,210 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 14:52:26,210 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 14:52:26,232 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 14:52:26,232 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 14:52:28,594 - services.diagnostics.language_analysis.german - ERROR - [german.py:113] - German consonant analysis failed: 'GermanAnalyzer' object has no attribute '_analyze_plosives'
2025-01-23 14:52:28,782 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for deu
2025-01-23 14:52:28,783 - services.translation_routes - INFO - [translation_routes.py:110] - 
==================================================
2025-01-23 14:52:28,783 - services.translation_routes - INFO - [translation_routes.py:111] - Input Audio Quality Report
2025-01-23 14:52:28,783 - services.translation_routes - INFO - [translation_routes.py:112] - ==================================================
2025-01-23 14:52:28,783 - services.translation_routes - INFO - [translation_routes.py:113] - Request ID: d1f51838
2025-01-23 14:52:28,783 - services.translation_routes - INFO - [translation_routes.py:114] - Target Language: deu
2025-01-23 14:52:28,783 - services.translation_routes - INFO - [translation_routes.py:115] - --------------------------------------------------
2025-01-23 14:52:28,783 - services.translation_routes - INFO - [translation_routes.py:116] - Audio Quality Analysis Report
==============================

Target Language: deu

Waveform Analysis:
--------------------
- Peak Amplitude: 0.888
- Avg Amplitude: 0.030
- Rms Level: 0.067
- Crest Factor: 13.298
- Zero Crossings: 606111.000
- Silence Percentage: 36.962
- Clipping Points: 0.000
- Dynamic Range: 7604833.184

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 0.000
  - Temporal Variation: 0.110
  - Temporal Flatness: 0.048

- Volume Metrics:
  - Volume Stability: -0.167
  - Volume Range: 38327881.694
  - Volume Variations: 0.051

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.010046553817161
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Vowel Analysis:
  - Formant Structure: {'accuracy': 1.5508040189743042, 'stability': 2.3914520740509033}
  - Length Distinction: {'ratio': 9.741427473173506, 'consistency': 36.41680849123612}
  - Quality: {'clarity': 1.5508040189743042, 'stability': -0.5420724153518677, 'formant_definition': 31.59930992126465}

Consonant Features:

Word Stress:
  - Stress Contrast: 0.480
  - Rhythm Regularity: 0.522
  - Overall Stress Quality: 0.501

Glottal Stops:
  - Presence: 24.320
  - Clarity: 0.287

Final Devoicing:
  - Devoicing Strength: 0.000
  - Consistency: -0.427

Schwa Realization:
  - Presence: 1.172
  - Stability: -0.777
  - Quality: 0.197
2025-01-23 14:52:28,783 - services.translation_routes - INFO - [translation_routes.py:117] - ==================================================

2025-01-23 14:52:28,783 - services.translation_routes - INFO - [translation_routes.py:128] - Request d1f51838: Audio processed successfully
2025-01-23 14:52:28,845 - services.translation_routes - INFO - [translation_routes.py:147] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-23 14:53:16,543 - services.translation_routes - INFO - [translation_routes.py:185] - Source text: This photo doesn't make sense. You've seen it in sci-fi movies. There's a plane that takes you up in the air and then dies, so it feels like the passengers are floating.
2025-01-23 14:53:46,066 - services.translation_routes - INFO - [translation_routes.py:204] - Target text: Das ganze Flugzeug war völlig still, wir konnten es nicht glauben.
2025-01-23 14:54:52,995 - services.translation_routes - INFO - [translation_routes.py:227] - Processing tuple output from model
2025-01-23 14:54:53,008 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 14:54:53,008 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 14:54:53,011 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 14:54:53,012 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 14:54:53,017 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 14:54:53,017 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 14:54:53,021 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 14:54:53,021 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 14:54:53,166 - services.diagnostics.language_analysis.german - ERROR - [german.py:113] - German consonant analysis failed: 'GermanAnalyzer' object has no attribute '_analyze_plosives'
2025-01-23 14:54:53,181 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for deu
2025-01-23 14:54:53,181 - services.translation_routes - INFO - [translation_routes.py:251] - 
==================================================
2025-01-23 14:54:53,181 - services.translation_routes - INFO - [translation_routes.py:252] - Translated Audio Quality Report
2025-01-23 14:54:53,181 - services.translation_routes - INFO - [translation_routes.py:253] - ==================================================
2025-01-23 14:54:53,181 - services.translation_routes - INFO - [translation_routes.py:254] - Request ID: d1f51838
2025-01-23 14:54:53,181 - services.translation_routes - INFO - [translation_routes.py:255] - Target Language: deu
2025-01-23 14:54:53,181 - services.translation_routes - INFO - [translation_routes.py:256] - --------------------------------------------------
2025-01-23 14:54:53,181 - services.translation_routes - INFO - [translation_routes.py:257] - Audio Quality Analysis Report
==============================

Target Language: deu

Waveform Analysis:
--------------------
- Peak Amplitude: 0.726
- Avg Amplitude: 0.088
- Rms Level: 0.131
- Crest Factor: 5.545
- Zero Crossings: 10486.000
- Silence Percentage: 9.956
- Clipping Points: 0.000
- Dynamic Range: 230.907

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.307
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.031
  - Temporal Flatness: 0.018

- Volume Metrics:
  - Volume Stability: 0.370
  - Volume Range: 1471.842
  - Volume Variations: 0.070

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0472486079411576
- Background Noise: 3.2179616857657183
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
No issues detected

Language-Specific Analysis:
--------------------

Vowel Analysis:
  - Formant Structure: {'accuracy': 1.0153974294662476, 'stability': 4.896450042724609}
  - Length Distinction: {'ratio': 15.185585532833668, 'consistency': 66.69757549440963}
  - Quality: {'clarity': 1.0153974294662476, 'stability': -3.8222007751464844, 'formant_definition': 218.13729858398438}

Consonant Features:

Word Stress:
  - Stress Contrast: 1.000
  - Rhythm Regularity: 0.493
  - Overall Stress Quality: 0.746

Glottal Stops:
  - Presence: 11.203
  - Clarity: 0.354

Final Devoicing:
  - Devoicing Strength: 0.000
  - Consistency: -4.255

Schwa Realization:
  - Presence: 1.035
  - Stability: -4.551
  - Quality: -1.758
2025-01-23 14:54:53,181 - services.translation_routes - INFO - [translation_routes.py:258] - ==================================================

2025-01-23 14:54:53,181 - services.translation_routes - INFO - [translation_routes.py:264] - Request d1f51838: Audio output processed successfully
2025-01-23 14:54:53,184 - services.translation_routes - INFO - [translation_routes.py:317] - Request d1f51838: Response prepared successfully
2025-01-23 14:54:53,184 - services.translation_routes - INFO - [translation_routes.py:328] - Request d1f51838 completed in 150.47s
2025-01-23 14:54:53,186 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 150.47s, Memory Change: 129.62MB
2025-01-23 14:54:53,186 - __main__ - INFO - [app.py:278] - Request to /translate took 156.21s
>>>>>>> parent of a02b9e660 (changes to translation_routes.py -- largely good but need to figure out a tiktok solution)
2025-02-01 20:55:37,071 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-02-01 20:55:37,073 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
