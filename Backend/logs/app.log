2025-05-23 07:44:56,636 - root - INFO - [app.py:44] - Root logging configured at app startup.
2025-05-23 07:45:42,699 - root - INFO - [app.py:44] - Root logging configured at app startup.
2025-05-23 07:45:48,676 - services.cascaded_backend - INFO - [cascaded_backend.py:47] - Whisper library FOUND and imported successfully.
2025-05-23 07:45:48,680 - services.cascaded_backend - WARNING - [cascaded_backend.py:57] - OpenVoice API not available: HTTPConnectionPool(host='localhost', port=8000): Max retries exceeded with url: /status (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x329959280>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-05-23 07:45:50,670 - services.cascaded_backend - INFO - [cascaded_backend.py:64] - Initializing CascadedBackend with device: cpu, use_voice_cloning_config: True
2025-05-23 07:45:50,670 - services.cascaded_backend - INFO - [cascaded_backend.py:66] - CascadedBackend will use device: cpu
2025-05-23 07:45:50,670 - services.cascaded_backend - INFO - [cascaded_backend.py:113] - CascadedBackend __init__. Whisper: True, OpenVoice API: False, AWS Polly (boto3): True
2025-05-23 07:45:50,672 - services.cascaded_backend - INFO - [cascaded_backend.py:132] - Initializing CascadedBackend on device: cpu
2025-05-23 07:45:54,362 - services.cascaded_backend - INFO - [cascaded_backend.py:134] - Whisper ASR loaded.
2025-05-23 07:45:57,155 - services.cascaded_backend - INFO - [cascaded_backend.py:140] - NLLB translation model and tokenizer loaded.
2025-05-23 07:45:57,155 - services.cascaded_backend - INFO - [cascaded_backend.py:120] - Creating AWS Polly client for region: us-east-1
2025-05-23 07:45:57,211 - services.cascaded_backend - INFO - [cascaded_backend.py:123] - AWS Polly client for us-east-1 created successfully.
2025-05-23 07:45:57,211 - services.cascaded_backend - INFO - [cascaded_backend.py:145] - CascadedBackend initialized in 6.54s
2025-05-23 07:46:38,591 - services.cascaded_backend - INFO - [cascaded_backend.py:254] - [translate_speech] CALLED. app_source_lang='eng', app_target_lang='fra'
2025-05-23 07:46:41,296 - services.cascaded_backend - INFO - [cascaded_backend.py:272] - Whisper ASR: ' Okay, this is a test. Let's see if we can translate this video and al...'
2025-05-23 07:46:41,298 - services.cascaded_backend - WARNING - [cascaded_backend.py:290] - NLLB BOS for 'fra_Latn' not found.
2025-05-23 07:46:44,096 - services.cascaded_backend - INFO - [cascaded_backend.py:295] - NLLB Translation: 'Bien, esto es una prueba. Veamos si podemos traducir este video y tamb...'
2025-05-23 07:46:44,096 - services.cascaded_backend - INFO - [cascaded_backend.py:197] - [_generate_base_tts_audio] For app_lang 'fra', text: 'Bien, esto es una prueba. Veamos si podemos traducir este video y tamb...'
2025-05-23 07:46:44,096 - services.cascaded_backend - INFO - [cascaded_backend.py:120] - Creating AWS Polly client for region: eu-west-1
2025-05-23 07:46:44,098 - services.cascaded_backend - INFO - [cascaded_backend.py:123] - AWS Polly client for eu-west-1 created successfully.
2025-05-23 07:46:44,098 - services.cascaded_backend - INFO - [cascaded_backend.py:170] - Attempting Polly TTS for 'fra' with VoiceId 'Lea'.
2025-05-23 07:46:44,612 - services.cascaded_backend - INFO - [cascaded_backend.py:182] - Polly MP3 OK: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpnrgg9b18/base_tts_polly_fra.mp3 (46125b)
2025-05-23 07:46:44,791 - services.cascaded_backend - INFO - [cascaded_backend.py:189] - Polly 16kHz WAV OK: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpnrgg9b18/base_tts_polly_fra_16k.wav
2025-05-23 07:46:44,792 - services.cascaded_backend - INFO - [cascaded_backend.py:306] - OpenVoice cloning decision: Config=True, API=False, BaseTTS_OK=True -> Clone=False
2025-05-23 07:46:44,792 - services.cascaded_backend - INFO - [cascaded_backend.py:314] - OpenVoice cloning SKIPPED.
2025-05-23 07:46:44,792 - services.cascaded_backend - INFO - [cascaded_backend.py:315] - Final audio shape: torch.Size([1, 122880]), dtype: torch.float32
2025-05-23 07:46:44,792 - services.cascaded_backend - INFO - [cascaded_backend.py:317] - Processing completed in 6.20s
2025-05-23 07:47:37,974 - services.video_routes - ERROR - [video_routes.py:199] - Wav2Lip process failed with code 1.
2025-05-23 07:47:37,975 - services.video_routes - ERROR - [video_routes.py:200] - Wav2Lip STDOUT:
Using cpu for inference.
Reading video frames...
Number of frames available for inference: 420
Audio file is already WAV: /Users/robmills/Documents/Magenta AI/Backend/temp_video_processing_requests/7748eb9b-7105-4777-a415-7de93bc831f2/7748eb9b-7105-4777-a415-7de93bc831f2_final_audio_for_lipsync.wav
Mel spectrogram shape: (80, 615)
Length of mel chunks: 227

2025-05-23 07:47:37,975 - services.video_routes - ERROR - [video_routes.py:201] - Wav2Lip STDERR:

Wav2Lip batch processing:   0%|          | 0/2 [00:00<?, ?it/s]

Face detection:   0%|          | 0/15 [00:00<?, ?it/s][A
Face detection:   0%|          | 0/15 [00:49<?, ?it/s]

Wav2Lip batch processing:   0%|          | 0/2 [00:50<?, ?it/s]
Traceback (most recent call last):
  File "/Users/robmills/Documents/Magenta AI/Backend/Wav2Lip/inference.py", line 556, in <module>
    main()
  File "/Users/robmills/Documents/Magenta AI/Backend/Wav2Lip/inference.py", line 413, in main
    for i, (img_batch, mel_batch, frames, coords) in enumerate(tqdm(gen, 
  File "/Users/robmills/Documents/Magenta AI/Backend/Wav2Lip/venv_wav2lip/lib/python3.9/site-packages/tqdm/std.py", line 1127, in __iter__
    for obj in iterable:
  File "/Users/robmills/Documents/Magenta AI/Backend/Wav2Lip/inference.py", line 134, in datagen
    face_det_results = face_detect(frames) # BGR2RGB for CNN face detection
  File "/Users/robmills/Documents/Magenta AI/Backend/Wav2Lip/inference.py", line 89, in face_detect
    raise e
  File "/Users/robmills/Documents/Magenta AI/Backend/Wav2Lip/inference.py", line 78, in face_detect
    predictions.extend(detector.get_detections_for_batch(np.array(images[i:i + batch_size])))
  File "/Users/robmills/Documents/Magenta AI/Backend/Wav2Lip/face_detection/api.py", line 66, in get_detections_for_batch
    detected_faces = self.face_detector.detect_from_batch(images.copy())
  File "/Users/robmills/Documents/Magenta AI/Backend/Wav2Lip/face_detection/detection/sfd/sfd_detector.py", line 42, in detect_from_batch
    bboxlists = batch_detect(self.face_detector, images, device=self.device)
  File "/Users/robmills/Documents/Magenta AI/Backend/Wav2Lip/face_detection/detection/sfd/detect.py", line 68, in batch_detect
    olist = net(imgs)
  File "/Users/robmills/Documents/Magenta AI/Backend/Wav2Lip/venv_wav2lip/lib/python3.9/site-packages/torch/nn/modules/module.py", line 1194, in _call_impl
    return forward_call(*input, **kwargs)
  File "/Users/robmills/Documents/Magenta AI/Backend/Wav2Lip/face_detection/detection/sfd/net_s3fd.py", line 97, in forward
    h = F.relu(self.fc6(h))
  File "/Users/robmills/Documents/Magenta AI/Backend/Wav2Lip/venv_wav2lip/lib/python3.9/site-packages/torch/nn/modules/module.py", line 1194, in _call_impl
    return forward_call(*input, **kwargs)
  File "/Users/robmills/Documents/Magenta AI/Backend/Wav2Lip/venv_wav2lip/lib/python3.9/site-packages/torch/nn/modules/conv.py", line 463, in forward
    return self._conv_forward(input, self.weight, self.bias)
  File "/Users/robmills/Documents/Magenta AI/Backend/Wav2Lip/venv_wav2lip/lib/python3.9/site-packages/torch/nn/modules/conv.py", line 459, in _conv_forward
    return F.conv2d(input, weight, bias, self.stride,
RuntimeError: NNPACK SpatialConvolution_updateOutput failed

2025-05-23 07:47:37,976 - services.video_routes - WARNING - [video_routes.py:292] - [7748eb9b-7105-4777-a415-7de93bc831f2] Lip sync failed/skipped. Merging audio with original video (no new lip sync).
2025-05-23 07:52:51,303 - root - INFO - [app.py:44] - Root logging configured at app startup.
2025-05-23 07:52:53,800 - services.cascaded_backend - INFO - [cascaded_backend.py:47] - Whisper library FOUND and imported successfully.
2025-05-23 07:52:53,804 - services.cascaded_backend - WARNING - [cascaded_backend.py:57] - OpenVoice API not available: HTTPConnectionPool(host='localhost', port=8000): Max retries exceeded with url: /status (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x310199280>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-05-23 07:52:55,540 - services.cascaded_backend - INFO - [cascaded_backend.py:64] - Initializing CascadedBackend with device: cpu, use_voice_cloning_config: True
2025-05-23 07:52:55,540 - services.cascaded_backend - INFO - [cascaded_backend.py:66] - CascadedBackend will use device: cpu
2025-05-23 07:52:55,540 - services.cascaded_backend - INFO - [cascaded_backend.py:113] - CascadedBackend __init__. Whisper: True, OpenVoice API: False, AWS Polly (boto3): True
2025-05-23 07:52:55,541 - services.cascaded_backend - INFO - [cascaded_backend.py:132] - Initializing CascadedBackend on device: cpu
2025-05-23 07:52:58,857 - services.cascaded_backend - INFO - [cascaded_backend.py:134] - Whisper ASR loaded.
2025-05-23 07:53:00,745 - services.cascaded_backend - INFO - [cascaded_backend.py:140] - NLLB translation model and tokenizer loaded.
2025-05-23 07:53:00,745 - services.cascaded_backend - INFO - [cascaded_backend.py:120] - Creating AWS Polly client for region: us-east-1
2025-05-23 07:53:00,776 - services.cascaded_backend - INFO - [cascaded_backend.py:123] - AWS Polly client for us-east-1 created successfully.
2025-05-23 07:53:00,776 - services.cascaded_backend - INFO - [cascaded_backend.py:145] - CascadedBackend initialized in 5.23s
2025-05-23 07:53:27,099 - services.cascaded_backend - INFO - [cascaded_backend.py:254] - [translate_speech] CALLED. app_source_lang='eng', app_target_lang='spa'
2025-05-23 07:53:29,616 - services.cascaded_backend - INFO - [cascaded_backend.py:272] - Whisper ASR: ' Okay, this is a test. Let's see if we can translate this video and al...'
2025-05-23 07:53:29,617 - services.cascaded_backend - WARNING - [cascaded_backend.py:290] - NLLB BOS for 'spa_Latn' not found.
2025-05-23 07:53:32,786 - services.cascaded_backend - INFO - [cascaded_backend.py:295] - NLLB Translation: 'Bien, esto es una prueba. Veamos si podemos traducir este video y tamb...'
2025-05-23 07:53:32,786 - services.cascaded_backend - INFO - [cascaded_backend.py:197] - [_generate_base_tts_audio] For app_lang 'spa', text: 'Bien, esto es una prueba. Veamos si podemos traducir este video y tamb...'
2025-05-23 07:53:32,786 - services.cascaded_backend - INFO - [cascaded_backend.py:120] - Creating AWS Polly client for region: eu-west-1
2025-05-23 07:53:32,788 - services.cascaded_backend - INFO - [cascaded_backend.py:123] - AWS Polly client for eu-west-1 created successfully.
2025-05-23 07:53:32,788 - services.cascaded_backend - INFO - [cascaded_backend.py:170] - Attempting Polly TTS for 'spa' with VoiceId 'Lucia'.
2025-05-23 07:53:33,248 - services.cascaded_backend - INFO - [cascaded_backend.py:182] - Polly MP3 OK: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpbnkc0_2r/base_tts_polly_spa.mp3 (39213b)
2025-05-23 07:53:33,433 - services.cascaded_backend - INFO - [cascaded_backend.py:189] - Polly 16kHz WAV OK: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpbnkc0_2r/base_tts_polly_spa_16k.wav
2025-05-23 07:53:33,434 - services.cascaded_backend - INFO - [cascaded_backend.py:306] - OpenVoice cloning decision: Config=True, API=False, BaseTTS_OK=True -> Clone=False
2025-05-23 07:53:33,434 - services.cascaded_backend - INFO - [cascaded_backend.py:314] - OpenVoice cloning SKIPPED.
2025-05-23 07:53:33,434 - services.cascaded_backend - INFO - [cascaded_backend.py:315] - Final audio shape: torch.Size([1, 104448]), dtype: torch.float32
2025-05-23 07:53:33,434 - services.cascaded_backend - INFO - [cascaded_backend.py:317] - Processing completed in 6.33s
2025-05-23 07:54:31,230 - services.video_routes - ERROR - [video_routes.py:199] - Wav2Lip process failed with code 1.
2025-05-23 07:54:31,231 - services.video_routes - ERROR - [video_routes.py:200] - Wav2Lip STDOUT:
Using cpu for inference.
Reading video frames...
Number of frames available for inference: 420
Audio file is already WAV: /Users/robmills/Documents/Magenta AI/Backend/temp_video_processing_requests/972519cf-3a3f-49dd-8682-1a9a5f06a6e8/972519cf-3a3f-49dd-8682-1a9a5f06a6e8_final_audio_for_lipsync.wav
Mel spectrogram shape: (80, 523)
Length of mel chunks: 192

2025-05-23 07:54:31,232 - services.video_routes - ERROR - [video_routes.py:201] - Wav2Lip STDERR:

Wav2Lip batch processing:   0%|          | 0/2 [00:00<?, ?it/s]

Face detection:   0%|          | 0/12 [00:00<?, ?it/s][A
Face detection:   0%|          | 0/12 [00:55<?, ?it/s]

Wav2Lip batch processing:   0%|          | 0/2 [00:55<?, ?it/s]
Traceback (most recent call last):
  File "/Users/robmills/Documents/Magenta AI/Backend/Wav2Lip/inference.py", line 556, in <module>
    main()
  File "/Users/robmills/Documents/Magenta AI/Backend/Wav2Lip/inference.py", line 413, in main
    for i, (img_batch, mel_batch, frames, coords) in enumerate(tqdm(gen, 
  File "/Users/robmills/Documents/Magenta AI/Backend/Wav2Lip/venv_wav2lip/lib/python3.9/site-packages/tqdm/std.py", line 1127, in __iter__
    for obj in iterable:
  File "/Users/robmills/Documents/Magenta AI/Backend/Wav2Lip/inference.py", line 134, in datagen
    face_det_results = face_detect(frames) # BGR2RGB for CNN face detection
  File "/Users/robmills/Documents/Magenta AI/Backend/Wav2Lip/inference.py", line 89, in face_detect
    raise e
  File "/Users/robmills/Documents/Magenta AI/Backend/Wav2Lip/inference.py", line 78, in face_detect
    predictions.extend(detector.get_detections_for_batch(np.array(images[i:i + batch_size])))
  File "/Users/robmills/Documents/Magenta AI/Backend/Wav2Lip/face_detection/api.py", line 66, in get_detections_for_batch
    detected_faces = self.face_detector.detect_from_batch(images.copy())
  File "/Users/robmills/Documents/Magenta AI/Backend/Wav2Lip/face_detection/detection/sfd/sfd_detector.py", line 42, in detect_from_batch
    bboxlists = batch_detect(self.face_detector, images, device=self.device)
  File "/Users/robmills/Documents/Magenta AI/Backend/Wav2Lip/face_detection/detection/sfd/detect.py", line 68, in batch_detect
    olist = net(imgs)
  File "/Users/robmills/Documents/Magenta AI/Backend/Wav2Lip/venv_wav2lip/lib/python3.9/site-packages/torch/nn/modules/module.py", line 1194, in _call_impl
    return forward_call(*input, **kwargs)
  File "/Users/robmills/Documents/Magenta AI/Backend/Wav2Lip/face_detection/detection/sfd/net_s3fd.py", line 97, in forward
    h = F.relu(self.fc6(h))
  File "/Users/robmills/Documents/Magenta AI/Backend/Wav2Lip/venv_wav2lip/lib/python3.9/site-packages/torch/nn/modules/module.py", line 1194, in _call_impl
    return forward_call(*input, **kwargs)
  File "/Users/robmills/Documents/Magenta AI/Backend/Wav2Lip/venv_wav2lip/lib/python3.9/site-packages/torch/nn/modules/conv.py", line 463, in forward
    return self._conv_forward(input, self.weight, self.bias)
  File "/Users/robmills/Documents/Magenta AI/Backend/Wav2Lip/venv_wav2lip/lib/python3.9/site-packages/torch/nn/modules/conv.py", line 459, in _conv_forward
    return F.conv2d(input, weight, bias, self.stride,
RuntimeError: NNPACK SpatialConvolution_updateOutput failed

2025-05-23 07:54:31,232 - services.video_routes - WARNING - [video_routes.py:292] - [972519cf-3a3f-49dd-8682-1a9a5f06a6e8] Lip sync failed/skipped. Merging audio with original video (no new lip sync).
2025-05-23 08:07:05,070 - root - INFO - [app.py:44] - Root logging configured at app startup.
2025-05-23 08:07:07,850 - services.cascaded_backend - INFO - [cascaded_backend.py:47] - Whisper library FOUND and imported successfully.
2025-05-23 08:07:07,854 - services.cascaded_backend - WARNING - [cascaded_backend.py:57] - OpenVoice API not available: HTTPConnectionPool(host='localhost', port=8000): Max retries exceeded with url: /status (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x31a059280>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-05-23 08:07:09,714 - services.cascaded_backend - INFO - [cascaded_backend.py:64] - Initializing CascadedBackend with device: cpu, use_voice_cloning_config: True
2025-05-23 08:07:09,714 - services.cascaded_backend - INFO - [cascaded_backend.py:66] - CascadedBackend will use device: cpu
2025-05-23 08:07:09,714 - services.cascaded_backend - INFO - [cascaded_backend.py:113] - CascadedBackend __init__. Whisper: True, OpenVoice API: False, AWS Polly (boto3): True
2025-05-23 08:07:09,715 - services.cascaded_backend - INFO - [cascaded_backend.py:132] - Initializing CascadedBackend on device: cpu
2025-05-23 08:07:13,175 - services.cascaded_backend - INFO - [cascaded_backend.py:134] - Whisper ASR loaded.
2025-05-23 08:07:15,561 - services.cascaded_backend - INFO - [cascaded_backend.py:140] - NLLB translation model and tokenizer loaded.
2025-05-23 08:07:15,562 - services.cascaded_backend - INFO - [cascaded_backend.py:120] - Creating AWS Polly client for region: us-east-1
2025-05-23 08:07:15,616 - services.cascaded_backend - INFO - [cascaded_backend.py:123] - AWS Polly client for us-east-1 created successfully.
2025-05-23 08:07:15,616 - services.cascaded_backend - INFO - [cascaded_backend.py:145] - CascadedBackend initialized in 5.90s
2025-05-23 08:07:48,184 - services.cascaded_backend - INFO - [cascaded_backend.py:254] - [translate_speech] CALLED. app_source_lang='eng', app_target_lang='ita'
2025-05-23 08:07:50,944 - services.cascaded_backend - INFO - [cascaded_backend.py:272] - Whisper ASR: ' Okay, this is a test. Let's see if we can translate this video and al...'
2025-05-23 08:07:50,945 - services.cascaded_backend - WARNING - [cascaded_backend.py:290] - NLLB BOS for 'ita_Latn' not found.
2025-05-23 08:07:53,833 - services.cascaded_backend - INFO - [cascaded_backend.py:295] - NLLB Translation: 'Bien, esto es una prueba. Veamos si podemos traducir este video y tamb...'
2025-05-23 08:07:53,834 - services.cascaded_backend - INFO - [cascaded_backend.py:197] - [_generate_base_tts_audio] For app_lang 'ita', text: 'Bien, esto es una prueba. Veamos si podemos traducir este video y tamb...'
2025-05-23 08:07:53,834 - services.cascaded_backend - INFO - [cascaded_backend.py:120] - Creating AWS Polly client for region: eu-central-1
2025-05-23 08:07:53,835 - services.cascaded_backend - INFO - [cascaded_backend.py:123] - AWS Polly client for eu-central-1 created successfully.
2025-05-23 08:07:53,836 - services.cascaded_backend - INFO - [cascaded_backend.py:170] - Attempting Polly TTS for 'ita' with VoiceId 'Bianca'.
2025-05-23 08:07:54,389 - services.cascaded_backend - INFO - [cascaded_backend.py:182] - Polly MP3 OK: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmptw65r04d/base_tts_polly_ita.mp3 (52173b)
2025-05-23 08:07:54,579 - services.cascaded_backend - INFO - [cascaded_backend.py:189] - Polly 16kHz WAV OK: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmptw65r04d/base_tts_polly_ita_16k.wav
2025-05-23 08:07:54,580 - services.cascaded_backend - INFO - [cascaded_backend.py:306] - OpenVoice cloning decision: Config=True, API=False, BaseTTS_OK=True -> Clone=False
2025-05-23 08:07:54,580 - services.cascaded_backend - INFO - [cascaded_backend.py:314] - OpenVoice cloning SKIPPED.
2025-05-23 08:07:54,580 - services.cascaded_backend - INFO - [cascaded_backend.py:315] - Final audio shape: torch.Size([1, 139008]), dtype: torch.float32
2025-05-23 08:07:54,580 - services.cascaded_backend - INFO - [cascaded_backend.py:317] - Processing completed in 6.40s
2025-05-23 08:17:56,335 - services.video_routes - ERROR - [video_routes.py:214] - Wav2Lip process timed out after 10 minutes.
2025-05-23 08:17:56,352 - services.video_routes - WARNING - [video_routes.py:292] - [0480fb9a-f352-4e24-ac53-8735f782fccd] Lip sync failed/skipped. Merging audio with original video (no new lip sync).
2025-05-23 08:48:48,407 - root - INFO - [app.py:44] - Root logging configured at app startup.
2025-05-23 08:48:51,613 - services.cascaded_backend - INFO - [cascaded_backend.py:47] - Whisper library FOUND and imported successfully.
2025-05-23 08:48:51,616 - services.cascaded_backend - WARNING - [cascaded_backend.py:57] - OpenVoice API not available: HTTPConnectionPool(host='localhost', port=8000): Max retries exceeded with url: /status (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x32e0de280>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-05-23 08:48:53,464 - services.cascaded_backend - INFO - [cascaded_backend.py:64] - Initializing CascadedBackend with device: cpu, use_voice_cloning_config: True
2025-05-23 08:48:53,464 - services.cascaded_backend - INFO - [cascaded_backend.py:66] - CascadedBackend will use device: cpu
2025-05-23 08:48:53,465 - services.cascaded_backend - INFO - [cascaded_backend.py:113] - CascadedBackend __init__. Whisper: True, OpenVoice API: False, AWS Polly (boto3): True
2025-05-23 08:48:53,466 - services.cascaded_backend - INFO - [cascaded_backend.py:132] - Initializing CascadedBackend on device: cpu
2025-05-23 08:48:56,889 - services.cascaded_backend - INFO - [cascaded_backend.py:134] - Whisper ASR loaded.
2025-05-23 08:48:59,249 - services.cascaded_backend - INFO - [cascaded_backend.py:140] - NLLB translation model and tokenizer loaded.
2025-05-23 08:48:59,249 - services.cascaded_backend - INFO - [cascaded_backend.py:120] - Creating AWS Polly client for region: us-east-1
2025-05-23 08:48:59,301 - services.cascaded_backend - INFO - [cascaded_backend.py:123] - AWS Polly client for us-east-1 created successfully.
2025-05-23 08:48:59,301 - services.cascaded_backend - INFO - [cascaded_backend.py:145] - CascadedBackend initialized in 5.84s
2025-05-23 08:49:30,109 - services.cascaded_backend - INFO - [cascaded_backend.py:254] - [translate_speech] CALLED. app_source_lang='eng', app_target_lang='fra'
2025-05-23 08:49:32,844 - services.cascaded_backend - INFO - [cascaded_backend.py:272] - Whisper ASR: ' Okay, this is a test. Let's see if we can translate this video and al...'
2025-05-23 08:49:32,847 - services.cascaded_backend - WARNING - [cascaded_backend.py:290] - NLLB BOS for 'fra_Latn' not found.
2025-05-23 08:49:35,686 - services.cascaded_backend - INFO - [cascaded_backend.py:295] - NLLB Translation: 'Bien, esto es una prueba. Veamos si podemos traducir este video y tamb...'
2025-05-23 08:49:35,687 - services.cascaded_backend - INFO - [cascaded_backend.py:197] - [_generate_base_tts_audio] For app_lang 'fra', text: 'Bien, esto es una prueba. Veamos si podemos traducir este video y tamb...'
2025-05-23 08:49:35,687 - services.cascaded_backend - INFO - [cascaded_backend.py:120] - Creating AWS Polly client for region: eu-west-1
2025-05-23 08:49:35,689 - services.cascaded_backend - INFO - [cascaded_backend.py:123] - AWS Polly client for eu-west-1 created successfully.
2025-05-23 08:49:35,689 - services.cascaded_backend - INFO - [cascaded_backend.py:170] - Attempting Polly TTS for 'fra' with VoiceId 'Lea'.
2025-05-23 08:49:36,230 - services.cascaded_backend - INFO - [cascaded_backend.py:182] - Polly MP3 OK: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp1qrpmtdh/base_tts_polly_fra.mp3 (46125b)
2025-05-23 08:49:36,404 - services.cascaded_backend - INFO - [cascaded_backend.py:189] - Polly 16kHz WAV OK: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp1qrpmtdh/base_tts_polly_fra_16k.wav
2025-05-23 08:49:36,405 - services.cascaded_backend - INFO - [cascaded_backend.py:306] - OpenVoice cloning decision: Config=True, API=False, BaseTTS_OK=True -> Clone=False
2025-05-23 08:49:36,405 - services.cascaded_backend - INFO - [cascaded_backend.py:314] - OpenVoice cloning SKIPPED.
2025-05-23 08:49:36,405 - services.cascaded_backend - INFO - [cascaded_backend.py:315] - Final audio shape: torch.Size([1, 122880]), dtype: torch.float32
2025-05-23 08:49:36,405 - services.cascaded_backend - INFO - [cascaded_backend.py:317] - Processing completed in 6.30s
2025-05-23 09:52:45,811 - root - INFO - [app.py:41] - Root logging configured at app startup.
2025-05-23 09:52:49,073 - services.cascaded_backend - INFO - [cascaded_backend.py:47] - Whisper library FOUND and imported successfully.
2025-05-23 09:52:49,077 - services.cascaded_backend - WARNING - [cascaded_backend.py:57] - OpenVoice API not available: HTTPConnectionPool(host='localhost', port=8000): Max retries exceeded with url: /status (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x3380d8730>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-05-23 09:52:50,984 - services.cascaded_backend - INFO - [cascaded_backend.py:64] - Initializing CascadedBackend with device: cpu, use_voice_cloning_config: True
2025-05-23 09:52:50,984 - services.cascaded_backend - INFO - [cascaded_backend.py:66] - CascadedBackend will use device: cpu
2025-05-23 09:52:50,984 - services.cascaded_backend - INFO - [cascaded_backend.py:113] - CascadedBackend __init__. Whisper: True, OpenVoice API: False, AWS Polly (boto3): True
2025-05-23 09:52:50,985 - services.cascaded_backend - INFO - [cascaded_backend.py:132] - Initializing CascadedBackend on device: cpu
2025-05-23 09:52:54,629 - services.cascaded_backend - INFO - [cascaded_backend.py:134] - Whisper ASR loaded.
2025-05-23 09:52:57,030 - services.cascaded_backend - INFO - [cascaded_backend.py:140] - NLLB translation model and tokenizer loaded.
2025-05-23 09:52:57,031 - services.cascaded_backend - INFO - [cascaded_backend.py:120] - Creating AWS Polly client for region: us-east-1
2025-05-23 09:52:57,083 - services.cascaded_backend - INFO - [cascaded_backend.py:123] - AWS Polly client for us-east-1 created successfully.
2025-05-23 09:52:57,083 - services.cascaded_backend - INFO - [cascaded_backend.py:145] - CascadedBackend initialized in 6.10s
2025-05-23 09:53:50,047 - werkzeug - ERROR - [_internal.py:97] - Error on request:
Traceback (most recent call last):
  File "/opt/anaconda3/envs/speech_env/lib/python3.9/site-packages/werkzeug/serving.py", line 370, in run_wsgi
    execute(self.server.app)
  File "/opt/anaconda3/envs/speech_env/lib/python3.9/site-packages/werkzeug/serving.py", line 333, in execute
    for data in application_iter:
  File "/opt/anaconda3/envs/speech_env/lib/python3.9/site-packages/werkzeug/wsgi.py", line 256, in __next__
    return self._next()
  File "/opt/anaconda3/envs/speech_env/lib/python3.9/site-packages/werkzeug/wrappers/response.py", line 32, in _iter_encoded
    for item in iterable:
  File "/opt/anaconda3/envs/speech_env/lib/python3.9/site-packages/flask/helpers.py", line 125, in generator
    yield from gen
  File "/Users/robmills/Documents/Magenta AI/Backend/services/video_routes.py", line 248, in process_video
    request_id = str(uuid.uuid4())
NameError: name 'uuid' is not defined
2025-05-23 09:59:39,609 - root - INFO - [app.py:41] - Root logging configured at app startup.
2025-05-23 09:59:42,119 - services.cascaded_backend - INFO - [cascaded_backend.py:47] - Whisper library FOUND and imported successfully.
2025-05-23 09:59:42,122 - services.cascaded_backend - WARNING - [cascaded_backend.py:57] - OpenVoice API not available: HTTPConnectionPool(host='localhost', port=8000): Max retries exceeded with url: /status (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x316d180d0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-05-23 09:59:43,875 - services.cascaded_backend - INFO - [cascaded_backend.py:64] - Initializing CascadedBackend with device: cpu, use_voice_cloning_config: True
2025-05-23 09:59:43,875 - services.cascaded_backend - INFO - [cascaded_backend.py:66] - CascadedBackend will use device: cpu
2025-05-23 09:59:43,875 - services.cascaded_backend - INFO - [cascaded_backend.py:113] - CascadedBackend __init__. Whisper: True, OpenVoice API: False, AWS Polly (boto3): True
2025-05-23 09:59:43,877 - services.cascaded_backend - INFO - [cascaded_backend.py:132] - Initializing CascadedBackend on device: cpu
2025-05-23 09:59:47,273 - services.cascaded_backend - INFO - [cascaded_backend.py:134] - Whisper ASR loaded.
2025-05-23 09:59:49,675 - services.cascaded_backend - INFO - [cascaded_backend.py:140] - NLLB translation model and tokenizer loaded.
2025-05-23 09:59:49,675 - services.cascaded_backend - INFO - [cascaded_backend.py:120] - Creating AWS Polly client for region: us-east-1
2025-05-23 09:59:49,708 - services.cascaded_backend - INFO - [cascaded_backend.py:123] - AWS Polly client for us-east-1 created successfully.
2025-05-23 09:59:49,708 - services.cascaded_backend - INFO - [cascaded_backend.py:145] - CascadedBackend initialized in 5.83s
2025-05-23 10:00:13,501 - services.cascaded_backend - INFO - [cascaded_backend.py:254] - [translate_speech] CALLED. app_source_lang='eng', app_target_lang='fra'
2025-05-23 10:00:17,489 - services.cascaded_backend - INFO - [cascaded_backend.py:272] - Whisper ASR: ' Hey, I hope you're doing well and you're having a good weekend. I wan...'
2025-05-23 10:00:17,492 - services.cascaded_backend - WARNING - [cascaded_backend.py:290] - NLLB BOS for 'fra_Latn' not found.
2025-05-23 10:00:22,371 - services.cascaded_backend - INFO - [cascaded_backend.py:295] - NLLB Translation: 'Ehi, spero che ti stia andando bene e che tu stia passando un buon fin...'
2025-05-23 10:00:22,372 - services.cascaded_backend - INFO - [cascaded_backend.py:197] - [_generate_base_tts_audio] For app_lang 'fra', text: 'Ehi, spero che ti stia andando bene e che tu stia passando un buon fin...'
2025-05-23 10:00:22,372 - services.cascaded_backend - INFO - [cascaded_backend.py:120] - Creating AWS Polly client for region: eu-west-1
2025-05-23 10:00:22,373 - services.cascaded_backend - INFO - [cascaded_backend.py:123] - AWS Polly client for eu-west-1 created successfully.
2025-05-23 10:00:22,374 - services.cascaded_backend - INFO - [cascaded_backend.py:170] - Attempting Polly TTS for 'fra' with VoiceId 'Lea'.
2025-05-23 10:00:23,172 - services.cascaded_backend - INFO - [cascaded_backend.py:182] - Polly MP3 OK: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmppegupd6u/base_tts_polly_fra.mp3 (89901b)
2025-05-23 10:00:23,368 - services.cascaded_backend - INFO - [cascaded_backend.py:189] - Polly 16kHz WAV OK: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmppegupd6u/base_tts_polly_fra_16k.wav
2025-05-23 10:00:23,369 - services.cascaded_backend - INFO - [cascaded_backend.py:306] - OpenVoice cloning decision: Config=True, API=False, BaseTTS_OK=True -> Clone=False
2025-05-23 10:00:23,369 - services.cascaded_backend - INFO - [cascaded_backend.py:314] - OpenVoice cloning SKIPPED.
2025-05-23 10:00:23,369 - services.cascaded_backend - INFO - [cascaded_backend.py:315] - Final audio shape: torch.Size([1, 239616]), dtype: torch.float32
2025-05-23 10:00:23,369 - services.cascaded_backend - INFO - [cascaded_backend.py:317] - Processing completed in 9.87s
2025-05-23 10:12:48,936 - root - INFO - [app.py:41] - Root logging configured at app startup.
2025-05-23 10:12:52,313 - services.cascaded_backend - INFO - [cascaded_backend.py:47] - Whisper library FOUND and imported successfully.
2025-05-23 10:12:52,317 - services.cascaded_backend - WARNING - [cascaded_backend.py:57] - OpenVoice API not available: HTTPConnectionPool(host='localhost', port=8000): Max retries exceeded with url: /status (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x336718640>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-05-23 10:12:54,265 - services.cascaded_backend - INFO - [cascaded_backend.py:64] - Initializing CascadedBackend with device: cpu, use_voice_cloning_config: True
2025-05-23 10:12:54,265 - services.cascaded_backend - INFO - [cascaded_backend.py:66] - CascadedBackend will use device: cpu
2025-05-23 10:12:54,265 - services.cascaded_backend - INFO - [cascaded_backend.py:113] - CascadedBackend __init__. Whisper: True, OpenVoice API: False, AWS Polly (boto3): True
2025-05-23 10:12:54,267 - services.cascaded_backend - INFO - [cascaded_backend.py:132] - Initializing CascadedBackend on device: cpu
2025-05-23 10:12:57,921 - services.cascaded_backend - INFO - [cascaded_backend.py:134] - Whisper ASR loaded.
2025-05-23 10:13:00,020 - services.cascaded_backend - INFO - [cascaded_backend.py:140] - NLLB translation model and tokenizer loaded.
2025-05-23 10:13:00,021 - services.cascaded_backend - INFO - [cascaded_backend.py:120] - Creating AWS Polly client for region: us-east-1
2025-05-23 10:13:00,078 - services.cascaded_backend - INFO - [cascaded_backend.py:123] - AWS Polly client for us-east-1 created successfully.
2025-05-23 10:13:00,078 - services.cascaded_backend - INFO - [cascaded_backend.py:145] - CascadedBackend initialized in 5.81s
2025-05-23 10:15:23,581 - services.cascaded_backend - INFO - [cascaded_backend.py:254] - [translate_speech] CALLED. app_source_lang='eng', app_target_lang='spa'
2025-05-23 10:15:27,513 - services.cascaded_backend - INFO - [cascaded_backend.py:272] - Whisper ASR: ' Hey, I hope you're doing well and you're having a good weekend. I wan...'
2025-05-23 10:15:27,515 - services.cascaded_backend - WARNING - [cascaded_backend.py:290] - NLLB BOS for 'spa_Latn' not found.
2025-05-23 10:15:32,253 - services.cascaded_backend - INFO - [cascaded_backend.py:295] - NLLB Translation: 'Ehi, spero che ti stia andando bene e che tu stia passando un buon fin...'
2025-05-23 10:15:32,253 - services.cascaded_backend - INFO - [cascaded_backend.py:197] - [_generate_base_tts_audio] For app_lang 'spa', text: 'Ehi, spero che ti stia andando bene e che tu stia passando un buon fin...'
2025-05-23 10:15:32,253 - services.cascaded_backend - INFO - [cascaded_backend.py:120] - Creating AWS Polly client for region: eu-west-1
2025-05-23 10:15:32,255 - services.cascaded_backend - INFO - [cascaded_backend.py:123] - AWS Polly client for eu-west-1 created successfully.
2025-05-23 10:15:32,255 - services.cascaded_backend - INFO - [cascaded_backend.py:170] - Attempting Polly TTS for 'spa' with VoiceId 'Lucia'.
2025-05-23 10:15:33,019 - services.cascaded_backend - INFO - [cascaded_backend.py:182] - Polly MP3 OK: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp8fme9s9p/base_tts_polly_spa.mp3 (83997b)
2025-05-23 10:15:33,270 - services.cascaded_backend - INFO - [cascaded_backend.py:189] - Polly 16kHz WAV OK: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmp8fme9s9p/base_tts_polly_spa_16k.wav
2025-05-23 10:15:33,271 - services.cascaded_backend - INFO - [cascaded_backend.py:306] - OpenVoice cloning decision: Config=True, API=False, BaseTTS_OK=True -> Clone=False
2025-05-23 10:15:33,271 - services.cascaded_backend - INFO - [cascaded_backend.py:314] - OpenVoice cloning SKIPPED.
2025-05-23 10:15:33,271 - services.cascaded_backend - INFO - [cascaded_backend.py:315] - Final audio shape: torch.Size([1, 223872]), dtype: torch.float32
2025-05-23 10:15:33,271 - services.cascaded_backend - INFO - [cascaded_backend.py:317] - Processing completed in 9.69s
2025-05-23 10:17:38,660 - services.cascaded_backend - INFO - [cascaded_backend.py:254] - [translate_speech] CALLED. app_source_lang='eng', app_target_lang='spa'
2025-05-23 10:17:42,252 - services.cascaded_backend - INFO - [cascaded_backend.py:272] - Whisper ASR: ' Hey, I hope you're doing well and you're having a good weekend. I wan...'
2025-05-23 10:17:42,252 - services.cascaded_backend - WARNING - [cascaded_backend.py:290] - NLLB BOS for 'spa_Latn' not found.
2025-05-23 10:17:46,674 - services.cascaded_backend - INFO - [cascaded_backend.py:295] - NLLB Translation: 'Ehi, spero che ti stia andando bene e che tu stia passando un buon fin...'
2025-05-23 10:17:46,675 - services.cascaded_backend - INFO - [cascaded_backend.py:197] - [_generate_base_tts_audio] For app_lang 'spa', text: 'Ehi, spero che ti stia andando bene e che tu stia passando un buon fin...'
2025-05-23 10:17:46,675 - services.cascaded_backend - INFO - [cascaded_backend.py:170] - Attempting Polly TTS for 'spa' with VoiceId 'Lucia'.
2025-05-23 10:17:47,260 - services.cascaded_backend - INFO - [cascaded_backend.py:182] - Polly MP3 OK: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpq_ubdz5g/base_tts_polly_spa.mp3 (83997b)
2025-05-23 10:17:47,526 - services.cascaded_backend - INFO - [cascaded_backend.py:189] - Polly 16kHz WAV OK: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpq_ubdz5g/base_tts_polly_spa_16k.wav
2025-05-23 10:17:47,527 - services.cascaded_backend - INFO - [cascaded_backend.py:306] - OpenVoice cloning decision: Config=True, API=False, BaseTTS_OK=True -> Clone=False
2025-05-23 10:17:47,527 - services.cascaded_backend - INFO - [cascaded_backend.py:314] - OpenVoice cloning SKIPPED.
2025-05-23 10:17:47,527 - services.cascaded_backend - INFO - [cascaded_backend.py:315] - Final audio shape: torch.Size([1, 223872]), dtype: torch.float32
2025-05-23 10:17:47,527 - services.cascaded_backend - INFO - [cascaded_backend.py:317] - Processing completed in 8.87s
2025-05-23 10:53:24,701 - root - INFO - [app.py:41] - Root logging configured at app startup.
2025-05-23 10:53:28,415 - services.cascaded_backend - INFO - [cascaded_backend.py:47] - Whisper library FOUND and imported successfully.
2025-05-23 10:53:28,419 - services.cascaded_backend - WARNING - [cascaded_backend.py:57] - OpenVoice API not available: HTTPConnectionPool(host='localhost', port=8000): Max retries exceeded with url: /status (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x337a9b370>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-05-23 10:53:30,401 - services.cascaded_backend - INFO - [cascaded_backend.py:64] - Initializing CascadedBackend with device: cpu, use_voice_cloning_config: True
2025-05-23 10:53:30,401 - services.cascaded_backend - INFO - [cascaded_backend.py:66] - CascadedBackend will use device: cpu
2025-05-23 10:53:30,401 - services.cascaded_backend - INFO - [cascaded_backend.py:113] - CascadedBackend __init__. Whisper: True, OpenVoice API: False, AWS Polly (boto3): True
2025-05-23 10:53:30,402 - services.cascaded_backend - INFO - [cascaded_backend.py:132] - Initializing CascadedBackend on device: cpu
2025-05-23 10:53:33,909 - services.cascaded_backend - INFO - [cascaded_backend.py:134] - Whisper ASR loaded.
2025-05-23 10:53:36,066 - services.cascaded_backend - INFO - [cascaded_backend.py:140] - NLLB translation model and tokenizer loaded.
2025-05-23 10:53:36,066 - services.cascaded_backend - INFO - [cascaded_backend.py:120] - Creating AWS Polly client for region: us-east-1
2025-05-23 10:53:36,119 - services.cascaded_backend - INFO - [cascaded_backend.py:123] - AWS Polly client for us-east-1 created successfully.
2025-05-23 10:53:36,119 - services.cascaded_backend - INFO - [cascaded_backend.py:145] - CascadedBackend initialized in 5.72s
2025-05-23 10:54:25,964 - services.cascaded_backend - INFO - [cascaded_backend.py:254] - [translate_speech] CALLED. app_source_lang='eng', app_target_lang='spa'
2025-05-23 10:54:30,024 - services.cascaded_backend - INFO - [cascaded_backend.py:272] - Whisper ASR: ' Hey, I hope you're doing well and you're having a good weekend. I wan...'
2025-05-23 10:54:30,027 - services.cascaded_backend - WARNING - [cascaded_backend.py:290] - NLLB BOS for 'spa_Latn' not found.
2025-05-23 10:54:34,839 - services.cascaded_backend - INFO - [cascaded_backend.py:295] - NLLB Translation: 'Ehi, spero che ti stia andando bene e che tu stia passando un buon fin...'
2025-05-23 10:54:34,839 - services.cascaded_backend - INFO - [cascaded_backend.py:197] - [_generate_base_tts_audio] For app_lang 'spa', text: 'Ehi, spero che ti stia andando bene e che tu stia passando un buon fin...'
2025-05-23 10:54:34,839 - services.cascaded_backend - INFO - [cascaded_backend.py:120] - Creating AWS Polly client for region: eu-west-1
2025-05-23 10:54:34,841 - services.cascaded_backend - INFO - [cascaded_backend.py:123] - AWS Polly client for eu-west-1 created successfully.
2025-05-23 10:54:34,841 - services.cascaded_backend - INFO - [cascaded_backend.py:170] - Attempting Polly TTS for 'spa' with VoiceId 'Lucia'.
2025-05-23 10:54:35,571 - services.cascaded_backend - INFO - [cascaded_backend.py:182] - Polly MP3 OK: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpoqaxj8bb/base_tts_polly_spa.mp3 (83997b)
2025-05-23 10:54:35,784 - services.cascaded_backend - INFO - [cascaded_backend.py:189] - Polly 16kHz WAV OK: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpoqaxj8bb/base_tts_polly_spa_16k.wav
2025-05-23 10:54:35,785 - services.cascaded_backend - INFO - [cascaded_backend.py:306] - OpenVoice cloning decision: Config=True, API=False, BaseTTS_OK=True -> Clone=False
2025-05-23 10:54:35,785 - services.cascaded_backend - INFO - [cascaded_backend.py:314] - OpenVoice cloning SKIPPED.
2025-05-23 10:54:35,785 - services.cascaded_backend - INFO - [cascaded_backend.py:315] - Final audio shape: torch.Size([1, 223872]), dtype: torch.float32
2025-05-23 10:54:35,785 - services.cascaded_backend - INFO - [cascaded_backend.py:317] - Processing completed in 9.82s
2025-05-23 11:59:58,076 - services.cascaded_backend - INFO - [cascaded_backend.py:254] - [translate_speech] CALLED. app_source_lang='eng', app_target_lang='fra'
2025-05-23 12:00:44,023 - services.video_routes - WARNING - [video_routes.py:196] - [ead57a7b-7596-4ac2-9a95-66a136ddd9a9] Wav2Lip STDERR:

Wav2Lip Model Inference:   0%|          | 0/4 [00:00<?, ?it/s]

Face detection batch:   0%|          | 0/26 [00:00<?, ?it/s][A
Face detection batch:   0%|          | 0/26 [00:51<?, ?it/s]


Face detection batch:   0%|          | 0/52 [00:00<?, ?it/s][A

Face detection batch:   2%|▏         | 1/52 [00:31<26:40, 31.38s/it][A

Face detection batch:   4%|▍         | 2/52 [01:02<26:05, 31.32s/it][A

Face detection batch:   6%|▌         | 3/52 [01:32<25:11, 30.85s/it][A

Face detection batch:   8%|▊         | 4/52 [01:56<23:03, 28.82s/it][A

Face detection batch:  10%|▉         | 5/52 [02:20<21:32, 27.50s/it][A

Face detection batch:  12%|█▏        | 6/52 [02:52<22:07, 28.86s/it][A

Face detection batch:  13%|█▎        | 7/52 [18:28<3:45:46, 301.04s/it][A

Face detection batch:  15%|█▌        | 8/52 [1:03:37<12:30:19, 1023.16s/it][A

Face detection batch:  17%|█▋        | 9/52 [1:04:01<8:38:36, 723.63s/it]  [A

Face detection batch:  19%|█▉        | 10/52 [1:04:31<6:00:52, 515.54s/it][A/opt/anaconda3/envs/speech_env/lib/python3.9/multiprocessing/resource_tracker.py:216: UserWarning: resource_tracker: There appear to be 1 leaked semaphore objects to clean up at shutdown
  warnings.warn('resource_tracker: There appear to be %d '

2025-05-23 12:00:44,039 - services.video_routes - ERROR - [video_routes.py:199] - [ead57a7b-7596-4ac2-9a95-66a136ddd9a9] Wav2Lip process failed with code -9.
2025-05-23 12:00:44,046 - services.video_routes - WARNING - [video_routes.py:312] - [ead57a7b-7596-4ac2-9a95-66a136ddd9a9] Lip sync failed or output invalid. Fallback: Merging translated audio with original video.
2025-05-23 12:00:50,659 - services.cascaded_backend - INFO - [cascaded_backend.py:272] - Whisper ASR: ' Hey, I hope you're doing well and you're having a good weekend. I wan...'
2025-05-23 12:00:50,716 - services.cascaded_backend - WARNING - [cascaded_backend.py:290] - NLLB BOS for 'fra_Latn' not found.
2025-05-23 12:00:59,554 - services.cascaded_backend - INFO - [cascaded_backend.py:295] - NLLB Translation: 'Ehi, spero che ti stia andando bene e che tu stia passando un buon fin...'
2025-05-23 12:00:59,554 - services.cascaded_backend - INFO - [cascaded_backend.py:197] - [_generate_base_tts_audio] For app_lang 'fra', text: 'Ehi, spero che ti stia andando bene e che tu stia passando un buon fin...'
2025-05-23 12:00:59,554 - services.cascaded_backend - INFO - [cascaded_backend.py:170] - Attempting Polly TTS for 'fra' with VoiceId 'Lea'.
2025-05-23 12:01:00,664 - services.cascaded_backend - INFO - [cascaded_backend.py:182] - Polly MP3 OK: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmprkhkgx8o/base_tts_polly_fra.mp3 (89901b)
2025-05-23 12:01:00,984 - services.cascaded_backend - INFO - [cascaded_backend.py:189] - Polly 16kHz WAV OK: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmprkhkgx8o/base_tts_polly_fra_16k.wav
2025-05-23 12:01:00,989 - services.cascaded_backend - INFO - [cascaded_backend.py:306] - OpenVoice cloning decision: Config=True, API=False, BaseTTS_OK=True -> Clone=False
2025-05-23 12:01:00,989 - services.cascaded_backend - INFO - [cascaded_backend.py:314] - OpenVoice cloning SKIPPED.
2025-05-23 12:01:00,989 - services.cascaded_backend - INFO - [cascaded_backend.py:315] - Final audio shape: torch.Size([1, 239616]), dtype: torch.float32
2025-05-23 12:01:00,989 - services.cascaded_backend - INFO - [cascaded_backend.py:317] - Processing completed in 62.91s
2025-05-23 12:25:17,713 - services.video_routes - WARNING - [video_routes.py:196] - [1c6d9719-4423-4b56-8a97-bd13b830b808] Wav2Lip STDERR:

Wav2Lip Model Inference:   0%|          | 0/4 [00:00<?, ?it/s]

Face detection batch:   0%|          | 0/28 [00:00<?, ?it/s][A
Face detection batch:   0%|          | 0/28 [00:50<?, ?it/s]


Face detection batch:   0%|          | 0/56 [00:00<?, ?it/s][A

Face detection batch:   2%|▏         | 1/56 [00:33<30:16, 33.03s/it][A

Face detection batch:   4%|▎         | 2/56 [01:03<28:55, 32.14s/it][A

Face detection batch:   5%|▌         | 3/56 [01:32<27:32, 31.19s/it][A

Face detection batch:   7%|▋         | 4/56 [02:00<26:21, 30.41s/it][A

Face detection batch:   9%|▉         | 5/56 [02:24<24:03, 28.31s/it][A

Face detection batch:  11%|█         | 6/56 [02:50<23:07, 27.75s/it][A

Face detection batch:  12%|█▎        | 7/56 [03:14<21:42, 26.58s/it][A

Face detection batch:  14%|█▍        | 8/56 [09:58<1:51:46, 139.72s/it][A

Face detection batch:  16%|█▌        | 9/56 [10:29<1:23:53, 107.09s/it][A

Face detection batch:  18%|█▊        | 10/56 [10:58<1:04:20, 83.91s/it][A

Face detection batch:  20%|█▉        | 11/56 [11:28<50:43, 67.62s/it]  [A

Face detection batch:  21%|██▏       | 12/56 [12:00<41:48, 57.02s/it][A

Face detection batch:  23%|██▎       | 13/56 [12:26<34:03, 47.53s/it][A

Face detection batch:  25%|██▌       | 14/56 [12:51<28:35, 40.85s/it][A

Face detection batch:  27%|██▋       | 15/56 [13:21<25:43, 37.64s/it][A

Face detection batch:  29%|██▊       | 16/56 [13:45<22:16, 33.41s/it][A

Face detection batch:  30%|███       | 17/56 [14:14<20:53, 32.15s/it][A

Face detection batch:  32%|███▏      | 18/56 [14:45<20:08, 31.80s/it][A

Face detection batch:  34%|███▍      | 19/56 [15:15<19:22, 31.43s/it][A

Face detection batch:  36%|███▌      | 20/56 [15:48<19:09, 31.92s/it][A

Face detection batch:  38%|███▊      | 21/56 [17:00<25:32, 43.79s/it][A

Face detection batch:  39%|███▉      | 22/56 [17:35<23:23, 41.27s/it][A

Face detection batch:  41%|████      | 23/56 [18:06<20:54, 38.03s/it][A

Face detection batch:  43%|████▎     | 24/56 [18:33<18:35, 34.85s/it][A

Face detection batch:  45%|████▍     | 25/56 [18:57<16:15, 31.47s/it][A

Face detection batch:  46%|████▋     | 26/56 [19:20<14:31, 29.05s/it][A

Face detection batch:  48%|████▊     | 27/56 [19:43<13:09, 27.22s/it][A

Face detection batch:  50%|█████     | 28/56 [20:09<12:27, 26.71s/it][A

Face detection batch:  52%|█████▏    | 29/56 [20:43<13:02, 28.98s/it][A

Face detection batch:  54%|█████▎    | 30/56 [21:15<12:59, 29.99s/it][A

Face detection batch:  55%|█████▌    | 31/56 [21:48<12:48, 30.74s/it][A

Face detection batch:  57%|█████▋    | 32/56 [22:26<13:08, 32.85s/it][A

Face detection batch:  59%|█████▉    | 33/56 [22:58<12:30, 32.61s/it][A
Face detection batch:  59%|█████▉    | 33/56 [23:22<16:17, 42.48s/it]

Wav2Lip Model Inference:   0%|          | 0/4 [24:12<?, ?it/s]
Traceback (most recent call last):
  File "/Users/robmills/Documents/Magenta AI/Backend/Wav2Lip/inference.py", line 636, in <module>
    main()
  File "/Users/robmills/Documents/Magenta AI/Backend/Wav2Lip/inference.py", line 489, in main
    for i_batch, batch_data_tuple in enumerate(tqdm(gen, 
  File "/Users/robmills/Documents/Magenta AI/Backend/Wav2Lip/venv_wav2lip/lib/python3.9/site-packages/tqdm/std.py", line 1127, in __iter__
    for obj in iterable:
  File "/Users/robmills/Documents/Magenta AI/Backend/Wav2Lip/inference.py", line 163, in datagen
    face_det_results = face_detect(frames) 
  File "/Users/robmills/Documents/Magenta AI/Backend/Wav2Lip/inference.py", line 75, in face_detect
    predictions.extend(detector.get_detections_for_batch(batch_images))
  File "/Users/robmills/Documents/Magenta AI/Backend/Wav2Lip/face_detection/api.py", line 66, in get_detections_for_batch
    detected_faces = self.face_detector.detect_from_batch(images.copy())
  File "/Users/robmills/Documents/Magenta AI/Backend/Wav2Lip/face_detection/detection/sfd/sfd_detector.py", line 42, in detect_from_batch
    bboxlists = batch_detect(self.face_detector, images, device=self.device)
  File "/Users/robmills/Documents/Magenta AI/Backend/Wav2Lip/face_detection/detection/sfd/detect.py", line 68, in batch_detect
    olist = net(imgs)
  File "/Users/robmills/Documents/Magenta AI/Backend/Wav2Lip/venv_wav2lip/lib/python3.9/site-packages/torch/nn/modules/module.py", line 1194, in _call_impl
    return forward_call(*input, **kwargs)
  File "/Users/robmills/Documents/Magenta AI/Backend/Wav2Lip/face_detection/detection/sfd/net_s3fd.py", line 79, in forward
    h = F.relu(self.conv3_1(h))
  File "/Users/robmills/Documents/Magenta AI/Backend/Wav2Lip/venv_wav2lip/lib/python3.9/site-packages/torch/nn/modules/module.py", line 1194, in _call_impl
    return forward_call(*input, **kwargs)
  File "/Users/robmills/Documents/Magenta AI/Backend/Wav2Lip/venv_wav2lip/lib/python3.9/site-packages/torch/nn/modules/conv.py", line 463, in forward
    return self._conv_forward(input, self.weight, self.bias)
  File "/Users/robmills/Documents/Magenta AI/Backend/Wav2Lip/venv_wav2lip/lib/python3.9/site-packages/torch/nn/modules/conv.py", line 459, in _conv_forward
    return F.conv2d(input, weight, bias, self.stride,
KeyboardInterrupt

2025-05-23 12:25:17,721 - services.video_routes - ERROR - [video_routes.py:199] - [1c6d9719-4423-4b56-8a97-bd13b830b808] Wav2Lip process failed with code -2.
2025-05-23 12:25:17,722 - services.video_routes - WARNING - [video_routes.py:312] - [1c6d9719-4423-4b56-8a97-bd13b830b808] Lip sync failed or output invalid. Fallback: Merging translated audio with original video.
2025-05-23 12:25:33,130 - root - INFO - [app.py:41] - Root logging configured at app startup.
2025-05-23 12:25:36,431 - services.cascaded_backend - INFO - [cascaded_backend.py:47] - Whisper library FOUND and imported successfully.
2025-05-23 12:25:36,435 - services.cascaded_backend - WARNING - [cascaded_backend.py:57] - OpenVoice API not available: HTTPConnectionPool(host='localhost', port=8000): Max retries exceeded with url: /status (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x331f23370>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-05-23 12:25:38,304 - services.cascaded_backend - INFO - [cascaded_backend.py:64] - Initializing CascadedBackend with device: cpu, use_voice_cloning_config: True
2025-05-23 12:25:38,304 - services.cascaded_backend - INFO - [cascaded_backend.py:66] - CascadedBackend will use device: cpu
2025-05-23 12:25:38,304 - services.cascaded_backend - INFO - [cascaded_backend.py:113] - CascadedBackend __init__. Whisper: True, OpenVoice API: False, AWS Polly (boto3): True
2025-05-23 12:25:38,305 - services.cascaded_backend - INFO - [cascaded_backend.py:132] - Initializing CascadedBackend on device: cpu
2025-05-23 12:25:41,772 - services.cascaded_backend - INFO - [cascaded_backend.py:134] - Whisper ASR loaded.
2025-05-23 12:25:43,847 - services.cascaded_backend - INFO - [cascaded_backend.py:140] - NLLB translation model and tokenizer loaded.
2025-05-23 12:25:43,847 - services.cascaded_backend - INFO - [cascaded_backend.py:120] - Creating AWS Polly client for region: us-east-1
2025-05-23 12:25:43,901 - services.cascaded_backend - INFO - [cascaded_backend.py:123] - AWS Polly client for us-east-1 created successfully.
2025-05-23 12:25:43,902 - services.cascaded_backend - INFO - [cascaded_backend.py:145] - CascadedBackend initialized in 5.60s
2025-05-23 12:26:22,709 - services.cascaded_backend - INFO - [cascaded_backend.py:254] - [translate_speech] CALLED. app_source_lang='eng', app_target_lang='deu'
2025-05-23 12:26:25,355 - services.cascaded_backend - INFO - [cascaded_backend.py:272] - Whisper ASR: ' Okay, this is a test. Let's see if we can translate this video and al...'
2025-05-23 12:26:25,356 - services.cascaded_backend - WARNING - [cascaded_backend.py:290] - NLLB BOS for 'deu_Latn' not found.
2025-05-23 12:26:29,865 - services.cascaded_backend - INFO - [cascaded_backend.py:295] - NLLB Translation: 'Bien, esto es una prueba. Veamos si podemos traducir este video y tamb...'
2025-05-23 12:26:29,866 - services.cascaded_backend - INFO - [cascaded_backend.py:197] - [_generate_base_tts_audio] For app_lang 'deu', text: 'Bien, esto es una prueba. Veamos si podemos traducir este video y tamb...'
2025-05-23 12:26:29,866 - services.cascaded_backend - INFO - [cascaded_backend.py:120] - Creating AWS Polly client for region: eu-central-1
2025-05-23 12:26:29,868 - services.cascaded_backend - INFO - [cascaded_backend.py:123] - AWS Polly client for eu-central-1 created successfully.
2025-05-23 12:26:29,868 - services.cascaded_backend - INFO - [cascaded_backend.py:170] - Attempting Polly TTS for 'deu' with VoiceId 'Vicki'.
2025-05-23 12:26:30,479 - services.cascaded_backend - INFO - [cascaded_backend.py:182] - Polly MP3 OK: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmph3hj34g0/base_tts_polly_deu.mp3 (56349b)
2025-05-23 12:26:30,756 - services.cascaded_backend - INFO - [cascaded_backend.py:189] - Polly 16kHz WAV OK: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmph3hj34g0/base_tts_polly_deu_16k.wav
2025-05-23 12:26:30,757 - services.cascaded_backend - INFO - [cascaded_backend.py:306] - OpenVoice cloning decision: Config=True, API=False, BaseTTS_OK=True -> Clone=False
2025-05-23 12:26:30,757 - services.cascaded_backend - INFO - [cascaded_backend.py:314] - OpenVoice cloning SKIPPED.
2025-05-23 12:26:30,757 - services.cascaded_backend - INFO - [cascaded_backend.py:315] - Final audio shape: torch.Size([1, 150144]), dtype: torch.float32
2025-05-23 12:26:30,757 - services.cascaded_backend - INFO - [cascaded_backend.py:317] - Processing completed in 8.05s
2025-05-23 12:45:42,427 - services.video_routes - WARNING - [video_routes.py:196] - [18245402-b2ce-44c4-864d-021b6c12a5d8] Wav2Lip STDERR:

Wav2Lip Model Inference:   0%|          | 0/3 [00:00<?, ?it/s]

Face detection batch:   0%|          | 0/18 [00:00<?, ?it/s][A
Face detection batch:   0%|          | 0/18 [00:56<?, ?it/s]


Face detection batch:   0%|          | 0/35 [00:00<?, ?it/s][A

Face detection batch:   3%|▎         | 1/35 [00:46<26:04, 46.02s/it][A

Face detection batch:   6%|▌         | 2/35 [01:36<26:01, 47.30s/it][A

Face detection batch:   9%|▊         | 3/35 [02:15<23:51, 44.74s/it][A

Face detection batch:  11%|█▏        | 4/35 [02:49<21:34, 41.77s/it][A

Face detection batch:  14%|█▍        | 5/35 [03:28<20:27, 40.91s/it][A

Face detection batch:  17%|█▋        | 6/35 [04:06<19:21, 40.06s/it][A

Face detection batch:  20%|██        | 7/35 [04:45<18:31, 39.71s/it][A

Face detection batch:  23%|██▎       | 8/35 [05:24<17:40, 39.29s/it][A

Face detection batch:  26%|██▌       | 9/35 [06:00<16:43, 38.58s/it][A

Face detection batch:  29%|██▊       | 10/35 [06:36<15:43, 37.75s/it][A

Face detection batch:  31%|███▏      | 11/35 [07:08<14:20, 35.86s/it][A

Face detection batch:  34%|███▍      | 12/35 [07:35<12:47, 33.39s/it][A

Face detection batch:  37%|███▋      | 13/35 [08:01<11:24, 31.10s/it][A

Face detection batch:  40%|████      | 14/35 [08:28<10:24, 29.72s/it][A

Face detection batch:  43%|████▎     | 15/35 [08:57<09:50, 29.53s/it][A

Face detection batch:  46%|████▌     | 16/35 [09:24<09:10, 28.96s/it][A

Face detection batch:  49%|████▊     | 17/35 [09:53<08:41, 29.00s/it][A

Face detection batch:  51%|█████▏    | 18/35 [10:25<08:24, 29.69s/it][A

Face detection batch:  54%|█████▍    | 19/35 [10:53<07:47, 29.24s/it][A

Face detection batch:  57%|█████▋    | 20/35 [11:19<07:04, 28.30s/it][A

Face detection batch:  60%|██████    | 21/35 [11:45<06:24, 27.44s/it][A

Face detection batch:  63%|██████▎   | 22/35 [12:09<05:45, 26.60s/it][A

Face detection batch:  66%|██████▌   | 23/35 [12:36<05:19, 26.61s/it][A

Face detection batch:  69%|██████▊   | 24/35 [13:05<05:01, 27.39s/it][A

Face detection batch:  71%|███████▏  | 25/35 [13:32<04:31, 27.19s/it][A

Face detection batch:  74%|███████▍  | 26/35 [13:56<03:58, 26.47s/it][A

Face detection batch:  77%|███████▋  | 27/35 [14:22<03:30, 26.27s/it][A

Face detection batch:  80%|████████  | 28/35 [14:53<03:13, 27.63s/it][A

Face detection batch:  83%|████████▎ | 29/35 [15:20<02:43, 27.27s/it][A

Face detection batch:  86%|████████▌ | 30/35 [15:46<02:15, 27.14s/it][A

Face detection batch:  89%|████████▊ | 31/35 [16:11<01:45, 26.39s/it][A

Face detection batch:  91%|█████████▏| 32/35 [16:39<01:20, 26.86s/it][A

Face detection batch:  94%|█████████▍| 33/35 [17:07<00:54, 27.30s/it][A

Face detection batch:  97%|█████████▋| 34/35 [17:37<00:28, 28.10s/it][A

Face detection batch: 100%|██████████| 35/35 [17:51<00:00, 23.74s/it][A
Face detection batch: 100%|██████████| 35/35 [17:51<00:00, 30.61s/it]

Wav2Lip Model Inference:  33%|███▎      | 1/3 [18:57<37:54, 1137.04s/it]
Wav2Lip Model Inference:  67%|██████▋   | 2/3 [19:04<13:18, 798.26s/it] 
Wav2Lip Model Inference: 100%|██████████| 3/3 [19:06<00:00, 559.19s/it]
Wav2Lip Model Inference: 100%|██████████| 3/3 [19:06<00:00, 382.06s/it]

