2025-01-25 15:31:02,643 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.53MB
2025-01-25 15:31:02,648 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.01s
2025-01-25 15:31:02,654 - services.audio_link_routes - INFO - [audio_link_routes.py:216] - Processing URL: https://youtube.com/shorts/DybbzHdNogk?si=QleZXrjy-t7KCnH-
2025-01-25 15:31:02,657 - services.audio_link_routes - INFO - [audio_link_routes.py:233] - Processing YouTube URL
2025-01-25 15:31:02,659 - services.audio_link_routes - INFO - [audio_link_routes.py:120] - Using options for youtube: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpa1j6pu1h/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8}
2025-01-25 15:31:06,411 - services.audio_link_routes - INFO - [audio_link_routes.py:133] - Successfully downloaded youtube content
2025-01-25 15:31:06,413 - services.audio_link_routes - INFO - [audio_link_routes.py:152] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpa1j6pu1h/output.wav
2025-01-25 15:31:06,427 - services.audio_link_routes - INFO - [audio_link_routes.py:164] - Successfully converted audio to WAV
2025-01-25 15:31:06,428 - services.audio_link_routes - INFO - [audio_link_routes.py:242] - Successfully processed audio
2025-01-25 15:31:06,429 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 3.78s, Memory Change: 199.08MB
2025-01-25 15:31:06,429 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 3.78s
2025-01-25 15:31:09,884 - services.model_manager - INFO - [model_manager.py:188] - Model inactive for too long, reloading...
2025-01-25 15:31:09,885 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-25 15:31:24,435 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-25 15:31:43,535 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-25 15:31:43,538 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-25 15:31:50,141 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-25 15:31:50,144 - services.translation_routes - INFO - [translation_routes.py:30] - Starting translation request 737956bd
2025-01-25 15:31:50,145 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-25 15:31:50,145 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-25 15:31:50,147 - services.translation_routes - INFO - [translation_routes.py:87] - Request 737956bd: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpfyzy7hh1.wav
2025-01-25 15:31:50,151 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 19.25 seconds
2025-01-25 15:31:50,151 - services.translation_routes - INFO - [translation_routes.py:100] - Request 737956bd: Beginning audio processing with diagnostics
2025-01-25 15:31:50,151 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpfyzy7hh1.wav
2025-01-25 15:31:50,151 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 16000, Channels: 1
2025-01-25 15:31:50,157 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([1, 307990]), Frequency: 16000Hz
2025-01-25 15:31:50,188 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-25 15:31:50,194 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-25 15:31:50,219 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-25 15:31:50,271 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 15:31:50,275 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 15:31:50,285 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 15:31:50,285 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 15:31:50,295 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 15:31:50,296 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 15:31:50,305 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 15:31:50,306 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 15:31:51,150 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-25 15:31:51,150 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-25 15:31:51,211 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 15:31:51,211 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 15:31:51,220 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 15:31:51,220 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 15:31:51,227 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 15:31:51,227 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 15:31:51,235 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 15:31:51,235 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 15:31:51,812 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-25 15:31:51,812 - services.translation_routes - INFO - [translation_routes.py:111] - 
==================================================
2025-01-25 15:31:51,812 - services.translation_routes - INFO - [translation_routes.py:112] - Input Audio Quality Report
2025-01-25 15:31:51,812 - services.translation_routes - INFO - [translation_routes.py:113] - ==================================================
2025-01-25 15:31:51,812 - services.translation_routes - INFO - [translation_routes.py:114] - Request ID: 737956bd
2025-01-25 15:31:51,812 - services.translation_routes - INFO - [translation_routes.py:115] - Target Language: fra
2025-01-25 15:31:51,812 - services.translation_routes - INFO - [translation_routes.py:116] - --------------------------------------------------
2025-01-25 15:31:51,812 - services.translation_routes - INFO - [translation_routes.py:117] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.042
- Rms Level: 0.098
- Crest Factor: 9.721
- Zero Crossings: 161470.000
- Silence Percentage: 47.007
- Clipping Points: 0.000
- Dynamic Range: 11894631.545

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 0.000
  - Temporal Variation: 0.175
  - Temporal Flatness: 0.070

- Volume Metrics:
  - Volume Stability: -0.011
  - Volume Range: 25688430.667
  - Volume Variations: 0.070

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.020105763966966
- Background Noise: 4.88844768831307
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 1.3607534170150757, 'stability': 2.5722947120666504, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.07924658805131912, 'consistency': 0.1415557861328125, 'distinction': 0.12459858506917953}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.563
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.175
  - Rhythm Quality: 0.214
  - Intonation Quality: 0.137

Vowel Quality:
  - Quality Score: 0.018
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-25 15:31:51,812 - services.translation_routes - INFO - [translation_routes.py:118] - ==================================================

2025-01-25 15:31:51,813 - services.translation_routes - INFO - [translation_routes.py:129] - Request 737956bd: Audio processed successfully
2025-01-25 15:31:51,850 - services.translation_routes - INFO - [translation_routes.py:148] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-25 15:32:15,640 - services.translation_routes - INFO - [translation_routes.py:186] - Source text: Mike Tyson, he had to punch Zack in the face. He kept doing it wrong for the camera. In fact, he was pulling it back too far. So I remember coming over here with Zack and showing him how to throw a punch. And without missing a beat, he goes, "This is great. I'm getting boxing lessons from the captain of the Jewish debating team".
2025-01-25 15:32:41,861 - services.translation_routes - INFO - [translation_routes.py:205] - Target text: Mike Tyson a dû donner un coup de poing au visage de Zack, il a continué à faire du mal pour la caméra, en fait il était en train de le tirer trop loin. Je me souviens de venir ici avec Zack et je lui montre comment jeter un punch. Et sans manquer une perle, il dit : "C'est génial, je reçois des leçons de boxe du capitaine de l'équipe de débat juif."
2025-01-25 15:33:02,179 - services.translation_routes - INFO - [translation_routes.py:228] - Processing tuple output from model
2025-01-25 15:33:02,200 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 15:33:02,201 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 15:33:02,205 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 15:33:02,205 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 15:33:02,212 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 15:33:02,213 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 15:33:02,220 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 15:33:02,220 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 15:33:02,418 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-25 15:33:02,419 - services.translation_routes - INFO - [translation_routes.py:252] - 
==================================================
2025-01-25 15:33:02,419 - services.translation_routes - INFO - [translation_routes.py:253] - Translated Audio Quality Report
2025-01-25 15:33:02,419 - services.translation_routes - INFO - [translation_routes.py:254] - ==================================================
2025-01-25 15:33:02,419 - services.translation_routes - INFO - [translation_routes.py:255] - Request ID: 737956bd
2025-01-25 15:33:02,419 - services.translation_routes - INFO - [translation_routes.py:256] - Target Language: fra
2025-01-25 15:33:02,419 - services.translation_routes - INFO - [translation_routes.py:257] - --------------------------------------------------
2025-01-25 15:33:02,419 - services.translation_routes - INFO - [translation_routes.py:258] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.722
- Avg Amplitude: 0.068
- Rms Level: 0.104
- Crest Factor: 6.919
- Zero Crossings: 12638.000
- Silence Percentage: 10.320
- Clipping Points: 0.000
- Dynamic Range: 187.124

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.135
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.027
  - Temporal Flatness: 0.015

- Volume Metrics:
  - Volume Stability: 0.341
  - Volume Range: 431.012
  - Volume Variations: 0.058

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0301511131312324
- Background Noise: 3.767598023578425
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
No issues detected

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.9748983979225159, 'stability': 3.6346378326416016, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.0, 'distinction': 0.08624616265296936}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.543
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.004
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-25 15:33:02,419 - services.translation_routes - INFO - [translation_routes.py:259] - ==================================================

2025-01-25 15:33:02,419 - services.translation_routes - INFO - [translation_routes.py:265] - Request 737956bd: Audio output processed successfully
2025-01-25 15:33:02,424 - services.translation_routes - INFO - [translation_routes.py:318] - Request 737956bd: Response prepared successfully
2025-01-25 15:33:02,424 - services.translation_routes - INFO - [translation_routes.py:329] - Request 737956bd completed in 72.28s
2025-01-25 15:33:02,426 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 72.28s, Memory Change: 8561.23MB
2025-01-25 15:33:02,426 - __main__ - INFO - [app.py:278] - Request to /translate took 112.54s
2025-01-25 16:31:21,533 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.56MB
2025-01-25 16:31:21,536 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.01s
2025-01-25 16:31:21,541 - services.audio_link_routes - INFO - [audio_link_routes.py:216] - Processing URL: https://www.tiktok.com/@loganpaul/video/7138576512512478510
2025-01-25 16:31:21,542 - services.audio_link_routes - INFO - [audio_link_routes.py:236] - Processing TikTok URL
2025-01-25 16:31:21,543 - services.audio_link_routes - INFO - [audio_link_routes.py:120] - Using options for tiktok: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpwsrl1_pw/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8, 'extractor_args': {'tiktok': {'api_hostname': 'api22-normal-c-alisg.tiktokv.com', 'app_name': 'trill', 'app_version': '34.1.2', 'manifest_app_version': '2023401020', 'app_info': '1234567890123456789/trill///1180', 'device_id': '3984149233173979330'}}}
2025-01-25 16:31:23,016 - services.audio_link_routes - INFO - [audio_link_routes.py:133] - Successfully downloaded tiktok content
2025-01-25 16:31:23,019 - services.audio_link_routes - INFO - [audio_link_routes.py:152] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpwsrl1_pw/output.wav
2025-01-25 16:31:23,060 - services.audio_link_routes - INFO - [audio_link_routes.py:164] - Successfully converted audio to WAV
2025-01-25 16:31:23,061 - services.audio_link_routes - INFO - [audio_link_routes.py:242] - Successfully processed audio
2025-01-25 16:31:23,062 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 1.52s, Memory Change: 91.95MB
2025-01-25 16:31:23,062 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 1.52s
2025-01-25 16:31:46,729 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-25 16:31:46,734 - services.translation_routes - INFO - [translation_routes.py:30] - Starting translation request 4dd06700
2025-01-25 16:31:46,734 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-25 16:31:46,734 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-25 16:31:46,737 - services.translation_routes - INFO - [translation_routes.py:87] - Request 4dd06700: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpkdnc3w1l.wav
2025-01-25 16:31:46,738 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 73.49 seconds
2025-01-25 16:31:46,738 - services.translation_routes - INFO - [translation_routes.py:100] - Request 4dd06700: Beginning audio processing with diagnostics
2025-01-25 16:31:46,738 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpkdnc3w1l.wav
2025-01-25 16:31:46,738 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 16000, Channels: 1
2025-01-25 16:31:46,742 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([1, 1175881]), Frequency: 16000Hz
2025-01-25 16:31:46,816 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-25 16:31:46,830 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-25 16:31:46,922 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-25 16:31:47,050 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 16:31:47,051 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 16:31:47,073 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 16:31:47,073 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 16:31:47,095 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 16:31:47,095 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 16:31:47,118 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 16:31:47,119 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 16:31:49,641 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-25 16:31:49,641 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-25 16:31:49,862 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 16:31:49,863 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 16:31:49,885 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 16:31:49,885 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 16:31:49,908 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 16:31:49,908 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 16:31:49,932 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 16:31:49,932 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 16:31:52,348 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-25 16:31:52,348 - services.translation_routes - INFO - [translation_routes.py:111] - 
==================================================
2025-01-25 16:31:52,349 - services.translation_routes - INFO - [translation_routes.py:112] - Input Audio Quality Report
2025-01-25 16:31:52,349 - services.translation_routes - INFO - [translation_routes.py:113] - ==================================================
2025-01-25 16:31:52,349 - services.translation_routes - INFO - [translation_routes.py:114] - Request ID: 4dd06700
2025-01-25 16:31:52,349 - services.translation_routes - INFO - [translation_routes.py:115] - Target Language: fra
2025-01-25 16:31:52,349 - services.translation_routes - INFO - [translation_routes.py:116] - --------------------------------------------------
2025-01-25 16:31:52,349 - services.translation_routes - INFO - [translation_routes.py:117] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.030
- Rms Level: 0.066
- Crest Factor: 14.362
- Zero Crossings: 607056.000
- Silence Percentage: 36.919
- Clipping Points: 0.000
- Dynamic Range: 7477676.676

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 0.000
  - Temporal Variation: 0.110
  - Temporal Flatness: 0.047

- Volume Metrics:
  - Volume Stability: -0.172
  - Volume Range: 38459184.766
  - Volume Variations: 0.050

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.009210845533956
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 1.3861757516860962, 'stability': 2.4274330139160156, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.3255118131637573, 'distinction': 0.10339464992284775}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.561
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.491
  - Rhythm Quality: 0.517
  - Intonation Quality: 0.464

Vowel Quality:
  - Quality Score: 0.009
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-25 16:31:52,349 - services.translation_routes - INFO - [translation_routes.py:118] - ==================================================

2025-01-25 16:31:52,349 - services.translation_routes - INFO - [translation_routes.py:129] - Request 4dd06700: Audio processed successfully
2025-01-25 16:31:52,427 - services.translation_routes - INFO - [translation_routes.py:148] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-25 16:32:56,146 - services.translation_routes - INFO - [translation_routes.py:186] - Source text: This photo doesn't make sense. There's a plane that takes you up in the air and it feels like the passengers are floating. My goal was to throw them all into the air when we were at the peak of my work. And while the whole plane was completely silent, we couldn't believe it. It's one of those things where I can describe it as much as I want, but until you experience it, there's nothing like it.
2025-01-25 16:33:45,278 - services.translation_routes - INFO - [translation_routes.py:205] - Target text: C'est une photo qui a été capturée sur papier et qui n'a pas de sens, mais c'est possible.
2025-01-25 16:35:21,635 - services.translation_routes - INFO - [translation_routes.py:228] - Processing tuple output from model
2025-01-25 16:35:21,647 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 16:35:21,648 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 16:35:21,651 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 16:35:21,651 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 16:35:21,653 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 16:35:21,654 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 16:35:21,657 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 16:35:21,658 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 16:35:21,761 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-25 16:35:21,761 - services.translation_routes - INFO - [translation_routes.py:252] - 
==================================================
2025-01-25 16:35:21,761 - services.translation_routes - INFO - [translation_routes.py:253] - Translated Audio Quality Report
2025-01-25 16:35:21,761 - services.translation_routes - INFO - [translation_routes.py:254] - ==================================================
2025-01-25 16:35:21,761 - services.translation_routes - INFO - [translation_routes.py:255] - Request ID: 4dd06700
2025-01-25 16:35:21,761 - services.translation_routes - INFO - [translation_routes.py:256] - Target Language: fra
2025-01-25 16:35:21,761 - services.translation_routes - INFO - [translation_routes.py:257] - --------------------------------------------------
2025-01-25 16:35:21,761 - services.translation_routes - INFO - [translation_routes.py:258] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.795
- Avg Amplitude: 0.052
- Rms Level: 0.096
- Crest Factor: 8.268
- Zero Crossings: 11086.000
- Silence Percentage: 16.884
- Clipping Points: 0.000
- Dynamic Range: 323.109

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.027
  - Temporal Flatness: 0.014

- Volume Metrics:
  - Volume Stability: 0.078
  - Volume Range: 537.967
  - Volume Variations: 0.066

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0232680979972124
- Background Noise: 4.30731554751968
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.8084978461265564, 'stability': 3.2139432430267334, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.1915850043296814, 'consistency': 0.0, 'distinction': 1.0}
  - Description: Strong nasal resonance. Unstable nasal resonance. Clear distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.493
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.004
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-25 16:35:21,761 - services.translation_routes - INFO - [translation_routes.py:259] - ==================================================

2025-01-25 16:35:21,761 - services.translation_routes - INFO - [translation_routes.py:265] - Request 4dd06700: Audio output processed successfully
2025-01-25 16:35:21,767 - services.translation_routes - INFO - [translation_routes.py:318] - Request 4dd06700: Response prepared successfully
2025-01-25 16:35:21,768 - services.translation_routes - INFO - [translation_routes.py:329] - Request 4dd06700 completed in 215.03s
2025-01-25 16:35:21,769 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 215.04s, Memory Change: -4637.28MB
2025-01-25 16:35:21,770 - __main__ - INFO - [app.py:278] - Request to /translate took 236.82s
2025-01-25 17:23:40,650 - __main__ - INFO - [app.py:217] - Received SIGINT signal
2025-01-25 17:23:40,656 - __main__ - INFO - [app.py:202] - Initiating graceful shutdown...
2025-01-25 17:23:45,659 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-25 17:23:45,661 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-25 17:23:45,661 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-25 17:23:45,666 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-25 17:23:45,668 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-25 17:23:45,669 - __main__ - INFO - [app.py:206] - Graceful shutdown completed
2025-01-25 17:23:45,677 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-25 17:23:45,678 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-25 17:23:45,678 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-25 17:23:45,679 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-25 17:23:45,679 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-25 17:23:45,680 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-25 17:23:45,680 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-25 17:23:45,680 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-25 17:23:45,681 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-25 17:23:45,681 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-25 17:24:05,288 - __main__ - INFO - [app.py:467] - Metrics server started on port 8000
2025-01-25 17:24:05,288 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-25 17:24:19,174 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-25 17:24:37,352 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-25 17:24:37,355 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-25 17:24:43,019 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-25 17:24:43,020 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-25 17:24:43,020 - __main__ - INFO - [app.py:491] - ==================================================
2025-01-25 17:24:43,020 - __main__ - INFO - [app.py:492] - Starting LinguaSync Backend
2025-01-25 17:24:43,020 - __main__ - INFO - [app.py:493] - Starting Flask app on port 5001 using cpu
2025-01-25 17:24:43,020 - __main__ - INFO - [app.py:494] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-01-25 17:24:43,020 - __main__ - INFO - [app.py:495] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-25 17:24:43,020 - __main__ - INFO - [app.py:496] - Maximum audio length: 300 seconds
2025-01-25 17:24:43,020 - __main__ - INFO - [app.py:497] - Sample rate: 16000 Hz
2025-01-25 17:24:43,020 - __main__ - INFO - [app.py:501] - System memory: 36.0GB total, 10.2GB available
2025-01-25 17:24:43,021 - __main__ - INFO - [app.py:502] - CPU cores: 11
2025-01-25 17:24:43,021 - __main__ - INFO - [app.py:510] - Configuration:
2025-01-25 17:24:43,021 - __main__ - INFO - [app.py:511] - - Debug mode: False
2025-01-25 17:24:43,021 - __main__ - INFO - [app.py:512] - - CORS enabled: True
2025-01-25 17:24:43,021 - __main__ - INFO - [app.py:513] - - Rate limiting: 10 requests per minute
2025-01-25 17:24:43,021 - __main__ - INFO - [app.py:514] - - Metrics enabled: True (port 8000)
2025-01-25 17:24:43,021 - __main__ - INFO - [app.py:516] - ==================================================
2025-01-25 17:26:34,255 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.53MB
2025-01-25 17:26:34,256 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-25 17:26:34,259 - services.audio_link_routes - INFO - [audio_link_routes.py:216] - Processing URL: https://youtube.com/shorts/DybbzHdNogk?si=wlt7r5-LJt2oKvuG
2025-01-25 17:26:34,260 - services.audio_link_routes - INFO - [audio_link_routes.py:233] - Processing YouTube URL
2025-01-25 17:26:34,261 - services.audio_link_routes - INFO - [audio_link_routes.py:120] - Using options for youtube: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpi8xrk64y/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8}
2025-01-25 17:26:37,387 - services.audio_link_routes - INFO - [audio_link_routes.py:133] - Successfully downloaded youtube content
2025-01-25 17:26:37,389 - services.audio_link_routes - INFO - [audio_link_routes.py:152] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpi8xrk64y/output.wav
2025-01-25 17:26:37,400 - services.audio_link_routes - INFO - [audio_link_routes.py:164] - Successfully converted audio to WAV
2025-01-25 17:26:37,401 - services.audio_link_routes - INFO - [audio_link_routes.py:242] - Successfully processed audio
2025-01-25 17:26:37,401 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 3.14s, Memory Change: 91.72MB
2025-01-25 17:26:37,401 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 3.14s
2025-01-25 17:26:49,168 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-25 17:26:49,170 - services.translation_routes - INFO - [translation_routes.py:30] - Starting translation request d2f670c7
2025-01-25 17:26:49,170 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-25 17:26:49,170 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-25 17:26:49,172 - services.translation_routes - INFO - [translation_routes.py:87] - Request d2f670c7: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmppjj1_w9p.wav
2025-01-25 17:26:49,172 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 19.25 seconds
2025-01-25 17:26:49,172 - services.translation_routes - INFO - [translation_routes.py:100] - Request d2f670c7: Beginning audio processing with diagnostics
2025-01-25 17:26:49,172 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmppjj1_w9p.wav
2025-01-25 17:26:49,172 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 16000, Channels: 1
2025-01-25 17:26:49,174 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([1, 307990]), Frequency: 16000Hz
2025-01-25 17:26:49,194 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-25 17:26:49,196 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-25 17:26:49,219 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-25 17:26:49,254 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 17:26:49,254 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 17:26:49,263 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 17:26:49,263 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 17:26:49,270 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 17:26:49,270 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 17:26:49,278 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 17:26:49,278 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 17:26:49,891 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-25 17:26:49,892 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-25 17:26:49,947 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 17:26:49,947 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 17:26:49,955 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 17:26:49,955 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 17:26:49,964 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 17:26:49,964 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 17:26:49,971 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 17:26:49,972 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 17:26:50,538 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-25 17:26:50,538 - services.translation_routes - INFO - [translation_routes.py:111] - 
==================================================
2025-01-25 17:26:50,538 - services.translation_routes - INFO - [translation_routes.py:112] - Input Audio Quality Report
2025-01-25 17:26:50,538 - services.translation_routes - INFO - [translation_routes.py:113] - ==================================================
2025-01-25 17:26:50,538 - services.translation_routes - INFO - [translation_routes.py:114] - Request ID: d2f670c7
2025-01-25 17:26:50,538 - services.translation_routes - INFO - [translation_routes.py:115] - Target Language: fra
2025-01-25 17:26:50,538 - services.translation_routes - INFO - [translation_routes.py:116] - --------------------------------------------------
2025-01-25 17:26:50,538 - services.translation_routes - INFO - [translation_routes.py:117] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.042
- Rms Level: 0.098
- Crest Factor: 9.721
- Zero Crossings: 161470.000
- Silence Percentage: 47.007
- Clipping Points: 0.000
- Dynamic Range: 11894631.545

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 0.000
  - Temporal Variation: 0.175
  - Temporal Flatness: 0.070

- Volume Metrics:
  - Volume Stability: -0.011
  - Volume Range: 25688430.667
  - Volume Variations: 0.070

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.020105763966966
- Background Noise: 4.88844768831307
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 1.3607534170150757, 'stability': 2.5722947120666504, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.07924658805131912, 'consistency': 0.1415557861328125, 'distinction': 0.12459858506917953}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.563
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.175
  - Rhythm Quality: 0.214
  - Intonation Quality: 0.137

Vowel Quality:
  - Quality Score: 0.018
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-25 17:26:50,538 - services.translation_routes - INFO - [translation_routes.py:118] - ==================================================

2025-01-25 17:26:50,538 - services.translation_routes - INFO - [translation_routes.py:129] - Request d2f670c7: Audio processed successfully
2025-01-25 17:26:50,559 - services.translation_routes - INFO - [translation_routes.py:148] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-25 17:27:13,830 - services.translation_routes - INFO - [translation_routes.py:186] - Source text: Mike Tyson, he had to punch Zack in the face. He kept doing it wrong for the camera. In fact, he was pulling it back too far. So I remember coming over here with Zack and showing him how to throw a punch. And without missing a beat, he goes, "This is great. I'm getting boxing lessons from the captain of the Jewish debating team".
2025-01-25 17:27:40,669 - services.translation_routes - INFO - [translation_routes.py:205] - Target text: Mike Tyson, il a dû donner un coup de poing au visage de Zack. Il a continué à faire du mal pour la caméra. En fait, il était en train de le tirer trop loin. Je me souviens de lui montrer comment jeter un punch. Et sans manquer une perle, il dit : "C'est génial, je reçois des leçons de boxe du capitaine de l'équipe de débat juif."
2025-01-25 17:27:53,824 - services.translation_routes - INFO - [translation_routes.py:228] - Processing tuple output from model
2025-01-25 17:27:53,840 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 17:27:53,841 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 17:27:53,846 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 17:27:53,846 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 17:27:53,853 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 17:27:53,853 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 17:27:53,857 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 17:27:53,857 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 17:27:53,997 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-25 17:27:53,997 - services.translation_routes - INFO - [translation_routes.py:252] - 
==================================================
2025-01-25 17:27:53,997 - services.translation_routes - INFO - [translation_routes.py:253] - Translated Audio Quality Report
2025-01-25 17:27:53,997 - services.translation_routes - INFO - [translation_routes.py:254] - ==================================================
2025-01-25 17:27:53,997 - services.translation_routes - INFO - [translation_routes.py:255] - Request ID: d2f670c7
2025-01-25 17:27:53,997 - services.translation_routes - INFO - [translation_routes.py:256] - Target Language: fra
2025-01-25 17:27:53,997 - services.translation_routes - INFO - [translation_routes.py:257] - --------------------------------------------------
2025-01-25 17:27:53,997 - services.translation_routes - INFO - [translation_routes.py:258] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.775
- Avg Amplitude: 0.064
- Rms Level: 0.102
- Crest Factor: 7.577
- Zero Crossings: 8655.000
- Silence Percentage: 17.093
- Clipping Points: 0.000
- Dynamic Range: 566.668

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.053
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.027
  - Temporal Flatness: 0.014

- Volume Metrics:
  - Volume Stability: 0.246
  - Volume Range: 2500.200
  - Volume Variations: 0.062

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0269895766400214
- Background Noise: 4.030733887169091
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
No issues detected

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.8454324007034302, 'stability': 3.4227914810180664, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.07640337944030762, 'consistency': 0.0, 'distinction': 1.0}
  - Description: Strong nasal resonance. Unstable nasal resonance. Clear distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.571
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.004
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-25 17:27:53,997 - services.translation_routes - INFO - [translation_routes.py:259] - ==================================================

2025-01-25 17:27:53,997 - services.translation_routes - INFO - [translation_routes.py:265] - Request d2f670c7: Audio output processed successfully
2025-01-25 17:27:54,001 - services.translation_routes - INFO - [translation_routes.py:318] - Request d2f670c7: Response prepared successfully
2025-01-25 17:27:54,001 - services.translation_routes - INFO - [translation_routes.py:329] - Request d2f670c7 completed in 64.83s
2025-01-25 17:27:54,002 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 64.83s, Memory Change: 1095.00MB
2025-01-25 17:27:54,002 - __main__ - INFO - [app.py:278] - Request to /translate took 74.92s
2025-01-25 17:38:37,530 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-25 17:38:37,534 - services.translation_routes - INFO - [translation_routes.py:30] - Starting translation request 2b940027
2025-01-25 17:38:37,534 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-25 17:38:37,534 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-25 17:38:37,540 - services.translation_routes - INFO - [translation_routes.py:87] - Request 2b940027: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmprpnatddr.wav
2025-01-25 17:38:37,541 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 165.42 seconds
2025-01-25 17:38:37,541 - services.translation_routes - INFO - [translation_routes.py:100] - Request 2b940027: Beginning audio processing with diagnostics
2025-01-25 17:38:37,541 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmprpnatddr.wav
2025-01-25 17:38:37,541 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 16000, Channels: 1
2025-01-25 17:38:37,548 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([1, 2646720]), Frequency: 16000Hz
2025-01-25 17:38:37,668 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-25 17:38:37,689 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-25 17:38:37,905 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-25 17:38:38,094 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 17:38:38,095 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 17:38:38,156 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 17:38:38,157 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 17:38:38,219 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 17:38:38,220 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 17:38:38,279 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 17:38:38,280 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 17:38:40,496 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-25 17:38:40,496 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-25 17:38:40,893 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 17:38:40,893 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 17:38:40,956 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 17:38:40,957 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 17:38:41,019 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 17:38:41,020 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 17:38:41,079 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 17:38:41,079 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 17:38:42,728 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-25 17:38:42,728 - services.translation_routes - INFO - [translation_routes.py:111] - 
==================================================
2025-01-25 17:38:42,728 - services.translation_routes - INFO - [translation_routes.py:112] - Input Audio Quality Report
2025-01-25 17:38:42,728 - services.translation_routes - INFO - [translation_routes.py:113] - ==================================================
2025-01-25 17:38:42,729 - services.translation_routes - INFO - [translation_routes.py:114] - Request ID: 2b940027
2025-01-25 17:38:42,729 - services.translation_routes - INFO - [translation_routes.py:115] - Target Language: fra
2025-01-25 17:38:42,729 - services.translation_routes - INFO - [translation_routes.py:116] - --------------------------------------------------
2025-01-25 17:38:42,729 - services.translation_routes - INFO - [translation_routes.py:117] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.913
- Avg Amplitude: 0.007
- Rms Level: 0.033
- Crest Factor: 27.869
- Zero Crossings: 317438.000
- Silence Percentage: 84.114
- Clipping Points: 0.000
- Dynamic Range: 1152884.755

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.054
  - Temporal Flatness: 0.010

- Volume Metrics:
  - Volume Stability: -2.171
  - Volume Range: 35363852.978
  - Volume Variations: 0.031

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.002350807100693
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.6922903656959534, 'stability': 1.9572125673294067, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.388075590133667, 'distinction': 0.17072927951812744}
  - Description: Moderate nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.662
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.453
  - Rhythm Quality: 0.501
  - Intonation Quality: 0.405

Vowel Quality:
  - Quality Score: 0.004
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-25 17:38:42,729 - services.translation_routes - INFO - [translation_routes.py:118] - ==================================================

2025-01-25 17:38:42,730 - services.translation_routes - INFO - [translation_routes.py:129] - Request 2b940027: Audio processed successfully
2025-01-25 17:38:42,882 - services.translation_routes - INFO - [translation_routes.py:148] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-25 17:46:20,013 - services.translation_routes - INFO - [translation_routes.py:186] - Source text: Okay, so I want to try something different. I'm going to talk for a while and see how well this model both hears what I say and is also able to translate it as target text and also is able to provide enough audio output. So really I guess that's three different things. Number one listening number two because you're doing the source text and the target text in the transcript and number four is the audio output so let's see what this looks like and sounds like.
2025-01-25 17:52:26,145 - services.translation_routes - INFO - [translation_routes.py:205] - Target text: Ok donc je veux essayer quelque chose de différent. Je vais parler un peu et je veux voir si ce modèle est capable de traduire ce que je dis et aussi de fournir une sortie audio suffisante. Donc vraiment je suppose que c'est trois choses différentes. N°1 écouter n°2 parce que vous faites le texte source et le texte cible dans le transcript et n°4 est la sortie audio donc je pense que je suis prêt à parler. Voyons ce que ça ressemble et sonne comme
2025-01-25 18:03:25,666 - services.translation_routes - INFO - [translation_routes.py:228] - Processing tuple output from model
2025-01-25 18:03:25,740 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 18:03:25,746 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 18:03:25,752 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 18:03:25,752 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 18:03:25,759 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 18:03:25,759 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 18:03:25,765 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 18:03:25,766 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 18:03:26,091 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-25 18:03:26,096 - services.translation_routes - INFO - [translation_routes.py:252] - 
==================================================
2025-01-25 18:03:26,096 - services.translation_routes - INFO - [translation_routes.py:253] - Translated Audio Quality Report
2025-01-25 18:03:26,096 - services.translation_routes - INFO - [translation_routes.py:254] - ==================================================
2025-01-25 18:03:26,096 - services.translation_routes - INFO - [translation_routes.py:255] - Request ID: 2b940027
2025-01-25 18:03:26,096 - services.translation_routes - INFO - [translation_routes.py:256] - Target Language: fra
2025-01-25 18:03:26,096 - services.translation_routes - INFO - [translation_routes.py:257] - --------------------------------------------------
2025-01-25 18:03:26,096 - services.translation_routes - INFO - [translation_routes.py:258] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.563
- Avg Amplitude: 0.059
- Rms Level: 0.092
- Crest Factor: 6.124
- Zero Crossings: 24701.000
- Silence Percentage: 10.225
- Clipping Points: 0.000
- Dynamic Range: 163.120

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.234
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.026
  - Temporal Flatness: 0.015

- Volume Metrics:
  - Volume Stability: 0.334
  - Volume Range: 2399.206
  - Volume Variations: 0.051

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0300074631869496
- Background Noise: 3.4496449079307627
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.9701749086380005, 'stability': 3.7277004718780518, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.0, 'distinction': 0.14883045852184296}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.537
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.004
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-25 18:03:26,096 - services.translation_routes - INFO - [translation_routes.py:259] - ==================================================

2025-01-25 18:03:26,096 - services.translation_routes - INFO - [translation_routes.py:265] - Request 2b940027: Audio output processed successfully
2025-01-25 18:03:26,147 - services.translation_routes - INFO - [translation_routes.py:318] - Request 2b940027: Response prepared successfully
2025-01-25 18:03:26,152 - services.translation_routes - INFO - [translation_routes.py:329] - Request 2b940027 completed in 1488.62s
2025-01-25 18:03:26,174 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 1488.62s, Memory Change: -6394.84MB
2025-01-25 18:03:26,178 - __main__ - INFO - [app.py:278] - Request to /translate took 1496.52s
2025-01-25 18:39:27,276 - __main__ - INFO - [app.py:217] - Received SIGINT signal
2025-01-25 18:39:27,279 - __main__ - INFO - [app.py:202] - Initiating graceful shutdown...
2025-01-25 18:39:32,284 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-25 18:39:32,287 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-25 18:39:32,288 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-25 18:39:32,292 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-25 18:39:32,296 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-25 18:39:32,296 - __main__ - INFO - [app.py:206] - Graceful shutdown completed
2025-01-25 18:39:32,319 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-25 18:39:32,320 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-25 18:39:32,320 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-25 18:39:32,320 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-25 18:39:32,320 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-25 18:39:32,322 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-25 18:39:32,322 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-25 18:39:32,322 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-25 18:39:32,322 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-25 18:39:32,322 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-25 18:41:47,856 - __main__ - INFO - [app.py:467] - Metrics server started on port 8000
2025-01-25 18:41:47,856 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-25 18:42:01,188 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-25 18:42:11,195 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-25 18:42:11,197 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-25 18:42:15,253 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-25 18:42:15,255 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-25 18:42:15,255 - __main__ - INFO - [app.py:491] - ==================================================
2025-01-25 18:42:15,255 - __main__ - INFO - [app.py:492] - Starting LinguaSync Backend
2025-01-25 18:42:15,255 - __main__ - INFO - [app.py:493] - Starting Flask app on port 5001 using cpu
2025-01-25 18:42:15,255 - __main__ - INFO - [app.py:494] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-01-25 18:42:15,255 - __main__ - INFO - [app.py:495] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-25 18:42:15,255 - __main__ - INFO - [app.py:496] - Maximum audio length: 300 seconds
2025-01-25 18:42:15,255 - __main__ - INFO - [app.py:497] - Sample rate: 16000 Hz
2025-01-25 18:42:15,255 - __main__ - INFO - [app.py:501] - System memory: 36.0GB total, 15.0GB available
2025-01-25 18:42:15,256 - __main__ - INFO - [app.py:502] - CPU cores: 11
2025-01-25 18:42:15,256 - __main__ - INFO - [app.py:510] - Configuration:
2025-01-25 18:42:15,256 - __main__ - INFO - [app.py:511] - - Debug mode: False
2025-01-25 18:42:15,256 - __main__ - INFO - [app.py:512] - - CORS enabled: True
2025-01-25 18:42:15,256 - __main__ - INFO - [app.py:513] - - Rate limiting: 10 requests per minute
2025-01-25 18:42:15,256 - __main__ - INFO - [app.py:514] - - Metrics enabled: True (port 8000)
2025-01-25 18:42:15,256 - __main__ - INFO - [app.py:516] - ==================================================
2025-01-25 18:43:26,635 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.17MB
2025-01-25 18:43:26,637 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-25 18:43:26,639 - services.audio_link_routes - INFO - [audio_link_routes.py:216] - Processing URL: https://youtube.com/shorts/DybbzHdNogk?si=0RC99WtraM4YITzG
2025-01-25 18:43:26,640 - services.audio_link_routes - INFO - [audio_link_routes.py:233] - Processing YouTube URL
2025-01-25 18:43:26,641 - services.audio_link_routes - INFO - [audio_link_routes.py:120] - Using options for youtube: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpj0am2ckk/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8}
2025-01-25 18:43:29,479 - services.audio_link_routes - INFO - [audio_link_routes.py:133] - Successfully downloaded youtube content
2025-01-25 18:43:29,480 - services.audio_link_routes - INFO - [audio_link_routes.py:152] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpj0am2ckk/output.wav
2025-01-25 18:43:29,490 - services.audio_link_routes - INFO - [audio_link_routes.py:164] - Successfully converted audio to WAV
2025-01-25 18:43:29,491 - services.audio_link_routes - INFO - [audio_link_routes.py:242] - Successfully processed audio
2025-01-25 18:43:29,492 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 2.85s, Memory Change: -132.53MB
2025-01-25 18:43:29,492 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 2.85s
2025-01-25 18:43:56,203 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-25 18:43:56,206 - services.translation_routes - INFO - [translation_routes.py:30] - Starting translation request 449ea04c
2025-01-25 18:43:56,206 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-25 18:43:56,206 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-25 18:43:56,206 - services.translation_routes - INFO - [translation_routes.py:87] - Request 449ea04c: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmphj2fqvur.wav
2025-01-25 18:43:56,208 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 19.25 seconds
2025-01-25 18:43:56,208 - services.translation_routes - INFO - [translation_routes.py:100] - Request 449ea04c: Beginning audio processing with diagnostics
2025-01-25 18:43:56,208 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmphj2fqvur.wav
2025-01-25 18:43:56,208 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 16000, Channels: 1
2025-01-25 18:43:56,210 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([1, 307990]), Frequency: 16000Hz
2025-01-25 18:43:56,230 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-25 18:43:56,233 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-25 18:43:56,255 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-25 18:43:56,288 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 18:43:56,289 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 18:43:56,296 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 18:43:56,296 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 18:43:56,303 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 18:43:56,303 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 18:43:56,310 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 18:43:56,311 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 18:43:56,924 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-25 18:43:56,924 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-25 18:43:56,980 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 18:43:56,980 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 18:43:56,987 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 18:43:56,987 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 18:43:56,994 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 18:43:56,994 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 18:43:57,002 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 18:43:57,002 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 18:43:57,566 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-25 18:43:57,566 - services.translation_routes - INFO - [translation_routes.py:111] - 
==================================================
2025-01-25 18:43:57,566 - services.translation_routes - INFO - [translation_routes.py:112] - Input Audio Quality Report
2025-01-25 18:43:57,566 - services.translation_routes - INFO - [translation_routes.py:113] - ==================================================
2025-01-25 18:43:57,566 - services.translation_routes - INFO - [translation_routes.py:114] - Request ID: 449ea04c
2025-01-25 18:43:57,566 - services.translation_routes - INFO - [translation_routes.py:115] - Target Language: fra
2025-01-25 18:43:57,566 - services.translation_routes - INFO - [translation_routes.py:116] - --------------------------------------------------
2025-01-25 18:43:57,566 - services.translation_routes - INFO - [translation_routes.py:117] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.042
- Rms Level: 0.098
- Crest Factor: 9.721
- Zero Crossings: 161470.000
- Silence Percentage: 47.007
- Clipping Points: 0.000
- Dynamic Range: 11894631.545

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 0.000
  - Temporal Variation: 0.175
  - Temporal Flatness: 0.070

- Volume Metrics:
  - Volume Stability: -0.011
  - Volume Range: 25688430.667
  - Volume Variations: 0.070

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.020105763966966
- Background Noise: 4.88844768831307
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 1.3607534170150757, 'stability': 2.5722947120666504, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.07924658805131912, 'consistency': 0.1415557861328125, 'distinction': 0.12459858506917953}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.563
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.175
  - Rhythm Quality: 0.214
  - Intonation Quality: 0.137

Vowel Quality:
  - Quality Score: 0.018
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-25 18:43:57,567 - services.translation_routes - INFO - [translation_routes.py:118] - ==================================================

2025-01-25 18:43:57,567 - services.translation_routes - INFO - [translation_routes.py:129] - Request 449ea04c: Audio processed successfully
2025-01-25 18:43:57,592 - services.translation_routes - INFO - [translation_routes.py:148] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-25 18:44:17,827 - services.translation_routes - INFO - [translation_routes.py:186] - Source text: Mike Tyson, he had to punch Zack in the face. He kept doing it wrong for the camera. In fact, he was pulling it back too far. So I remember coming over here with Zack and showing him how to throw a punch. And without missing a beat, he goes, "This is great. I'm getting boxing lessons from the captain of the Jewish debating team".
2025-01-25 18:44:39,590 - services.translation_routes - INFO - [translation_routes.py:205] - Target text: Mike Tyson, il a dû donner un coup de poing au visage de Zack. Il a continué à faire du mal pour la caméra. En fait, il était en train de le tirer trop loin. Je me souviens de lui montrer comment jeter un punch. Et sans manquer une perle, il dit : "C'est génial, je reçois des leçons de boxe du capitaine de l'équipe de débat juif."
2025-01-25 18:45:02,741 - services.translation_routes - INFO - [translation_routes.py:228] - Processing tuple output from model
2025-01-25 18:45:02,766 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 18:45:02,767 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 18:45:02,771 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 18:45:02,771 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 18:45:02,780 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 18:45:02,780 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 18:45:02,787 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 18:45:02,788 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 18:45:03,168 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-25 18:45:03,168 - services.translation_routes - INFO - [translation_routes.py:252] - 
==================================================
2025-01-25 18:45:03,168 - services.translation_routes - INFO - [translation_routes.py:253] - Translated Audio Quality Report
2025-01-25 18:45:03,168 - services.translation_routes - INFO - [translation_routes.py:254] - ==================================================
2025-01-25 18:45:03,168 - services.translation_routes - INFO - [translation_routes.py:255] - Request ID: 449ea04c
2025-01-25 18:45:03,168 - services.translation_routes - INFO - [translation_routes.py:256] - Target Language: fra
2025-01-25 18:45:03,168 - services.translation_routes - INFO - [translation_routes.py:257] - --------------------------------------------------
2025-01-25 18:45:03,168 - services.translation_routes - INFO - [translation_routes.py:258] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.599
- Avg Amplitude: 0.060
- Rms Level: 0.094
- Crest Factor: 6.370
- Zero Crossings: 26302.000
- Silence Percentage: 14.527
- Clipping Points: 0.000
- Dynamic Range: 278.223

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.204
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.022
  - Temporal Flatness: 0.012

- Volume Metrics:
  - Volume Stability: 0.291
  - Volume Range: 715.759
  - Volume Variations: 0.054

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0295313561581243
- Background Noise: 3.548038351242286
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.7867186069488525, 'stability': 3.350534677505493, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.11215360462665558, 'consistency': 0.0, 'distinction': 0.016775162890553474}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.526
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.004
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-25 18:45:03,168 - services.translation_routes - INFO - [translation_routes.py:259] - ==================================================

2025-01-25 18:45:03,168 - services.translation_routes - INFO - [translation_routes.py:265] - Request 449ea04c: Audio output processed successfully
2025-01-25 18:45:03,174 - services.translation_routes - INFO - [translation_routes.py:318] - Request 449ea04c: Response prepared successfully
2025-01-25 18:45:03,175 - services.translation_routes - INFO - [translation_routes.py:329] - Request 449ea04c completed in 66.97s
2025-01-25 18:45:03,176 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 66.97s, Memory Change: 1770.23MB
2025-01-25 18:45:03,176 - __main__ - INFO - [app.py:278] - Request to /translate took 72.55s
2025-01-25 18:52:09,007 - __main__ - INFO - [app.py:217] - Received SIGINT signal
2025-01-25 18:52:09,009 - __main__ - INFO - [app.py:202] - Initiating graceful shutdown...
2025-01-25 18:52:14,014 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-25 18:52:14,015 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-25 18:52:14,015 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-25 18:52:14,016 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-25 18:52:14,017 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-25 18:52:14,018 - __main__ - INFO - [app.py:206] - Graceful shutdown completed
2025-01-25 18:52:14,019 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-25 18:52:14,019 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-25 18:52:14,019 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-25 18:52:14,020 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-25 18:52:14,020 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-25 18:52:14,021 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-25 18:52:14,021 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-25 18:52:14,021 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-25 18:52:14,022 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-25 18:52:14,023 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-25 18:52:34,171 - __main__ - INFO - [app.py:467] - Metrics server started on port 8000
2025-01-25 18:52:34,171 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-25 18:52:47,734 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-25 18:52:54,568 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-25 18:52:54,570 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-25 18:52:59,420 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-25 18:52:59,422 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-25 18:52:59,422 - __main__ - INFO - [app.py:491] - ==================================================
2025-01-25 18:52:59,422 - __main__ - INFO - [app.py:492] - Starting LinguaSync Backend
2025-01-25 18:52:59,422 - __main__ - INFO - [app.py:493] - Starting Flask app on port 5001 using cpu
2025-01-25 18:52:59,422 - __main__ - INFO - [app.py:494] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-01-25 18:52:59,422 - __main__ - INFO - [app.py:495] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-25 18:52:59,422 - __main__ - INFO - [app.py:496] - Maximum audio length: 300 seconds
2025-01-25 18:52:59,422 - __main__ - INFO - [app.py:497] - Sample rate: 16000 Hz
2025-01-25 18:52:59,422 - __main__ - INFO - [app.py:501] - System memory: 36.0GB total, 13.4GB available
2025-01-25 18:52:59,422 - __main__ - INFO - [app.py:502] - CPU cores: 11
2025-01-25 18:52:59,423 - __main__ - INFO - [app.py:510] - Configuration:
2025-01-25 18:52:59,423 - __main__ - INFO - [app.py:511] - - Debug mode: False
2025-01-25 18:52:59,423 - __main__ - INFO - [app.py:512] - - CORS enabled: True
2025-01-25 18:52:59,423 - __main__ - INFO - [app.py:513] - - Rate limiting: 10 requests per minute
2025-01-25 18:52:59,423 - __main__ - INFO - [app.py:514] - - Metrics enabled: True (port 8000)
2025-01-25 18:52:59,423 - __main__ - INFO - [app.py:516] - ==================================================
2025-01-25 18:56:28,794 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.17MB
2025-01-25 18:56:28,795 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-25 18:56:28,798 - services.audio_link_routes - INFO - [audio_link_routes.py:216] - Processing URL: https://www.tiktok.com/@loganpaul/video/7138576512512478510
2025-01-25 18:56:28,799 - services.audio_link_routes - INFO - [audio_link_routes.py:236] - Processing TikTok URL
2025-01-25 18:56:28,799 - services.audio_link_routes - INFO - [audio_link_routes.py:120] - Using options for tiktok: {'format': 'bestaudio[ext=m4a]/bestaudio/best', 'outtmpl': '/var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpjppqw3y_/output', 'quiet': False, 'no_warnings': True, 'keepvideo': True, 'postprocessors': [{'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192'}], 'concurrent_fragment_downloads': 8, 'extractor_args': {'tiktok': {'api_hostname': 'api22-normal-c-alisg.tiktokv.com', 'app_name': 'trill', 'app_version': '34.1.2', 'manifest_app_version': '2023401020', 'app_info': '1234567890123456789/trill///1180', 'device_id': '4107083058643094269'}}}
2025-01-25 18:56:30,316 - services.audio_link_routes - INFO - [audio_link_routes.py:133] - Successfully downloaded tiktok content
2025-01-25 18:56:30,317 - services.audio_link_routes - INFO - [audio_link_routes.py:152] - Found audio file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpjppqw3y_/output.wav
2025-01-25 18:56:30,358 - services.audio_link_routes - INFO - [audio_link_routes.py:164] - Successfully converted audio to WAV
2025-01-25 18:56:30,359 - services.audio_link_routes - INFO - [audio_link_routes.py:242] - Successfully processed audio
2025-01-25 18:56:30,359 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 1.56s, Memory Change: 29.20MB
2025-01-25 18:56:30,359 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 1.56s
2025-01-25 18:56:37,393 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-25 18:56:37,395 - services.translation_routes - INFO - [translation_routes.py:30] - Starting translation request 023181b4
2025-01-25 18:56:37,395 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-25 18:56:37,395 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-25 18:56:37,397 - services.translation_routes - INFO - [translation_routes.py:87] - Request 023181b4: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpbcbya1ef.wav
2025-01-25 18:56:37,397 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 73.49 seconds
2025-01-25 18:56:37,397 - services.translation_routes - INFO - [translation_routes.py:100] - Request 023181b4: Beginning audio processing with diagnostics
2025-01-25 18:56:37,398 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpbcbya1ef.wav
2025-01-25 18:56:37,398 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 16000, Channels: 1
2025-01-25 18:56:37,401 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([1, 1175881]), Frequency: 16000Hz
2025-01-25 18:56:37,467 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-25 18:56:37,472 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-25 18:56:37,572 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-25 18:56:37,695 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 18:56:37,696 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 18:56:37,718 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 18:56:37,718 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 18:56:37,740 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 18:56:37,741 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 18:56:37,763 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 18:56:37,763 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 18:56:40,242 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-25 18:56:40,242 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-25 18:56:40,458 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 18:56:40,458 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 18:56:40,482 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 18:56:40,482 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 18:56:40,505 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 18:56:40,505 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 18:56:40,528 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 18:56:40,528 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 18:56:42,898 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-25 18:56:42,899 - services.translation_routes - INFO - [translation_routes.py:111] - 
==================================================
2025-01-25 18:56:42,899 - services.translation_routes - INFO - [translation_routes.py:112] - Input Audio Quality Report
2025-01-25 18:56:42,899 - services.translation_routes - INFO - [translation_routes.py:113] - ==================================================
2025-01-25 18:56:42,899 - services.translation_routes - INFO - [translation_routes.py:114] - Request ID: 023181b4
2025-01-25 18:56:42,899 - services.translation_routes - INFO - [translation_routes.py:115] - Target Language: fra
2025-01-25 18:56:42,899 - services.translation_routes - INFO - [translation_routes.py:116] - --------------------------------------------------
2025-01-25 18:56:42,899 - services.translation_routes - INFO - [translation_routes.py:117] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.030
- Rms Level: 0.066
- Crest Factor: 14.362
- Zero Crossings: 607056.000
- Silence Percentage: 36.919
- Clipping Points: 0.000
- Dynamic Range: 7477676.676

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 0.000
  - Temporal Variation: 0.110
  - Temporal Flatness: 0.047

- Volume Metrics:
  - Volume Stability: -0.172
  - Volume Range: 38459184.766
  - Volume Variations: 0.050

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.009210845533956
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 1.3861757516860962, 'stability': 2.4274330139160156, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.3255118131637573, 'distinction': 0.10339464992284775}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.561
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.491
  - Rhythm Quality: 0.517
  - Intonation Quality: 0.464

Vowel Quality:
  - Quality Score: 0.009
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-25 18:56:42,899 - services.translation_routes - INFO - [translation_routes.py:118] - ==================================================

2025-01-25 18:56:42,899 - services.translation_routes - INFO - [translation_routes.py:129] - Request 023181b4: Audio processed successfully
2025-01-25 18:56:42,961 - services.translation_routes - INFO - [translation_routes.py:148] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-25 18:57:39,639 - services.translation_routes - INFO - [translation_routes.py:186] - Source text: This photo doesn't make sense. You've seen it in sci-fi movies. There's a plane that takes you up in the air and then dies, so it feels like the passengers are floating. My goal was to throw them all into the air when we were at the peak of my work. And while the whole plane was completely silent, we couldn't believe it. It's one of those things where I can describe it as much as I want. But until you experience it, there's nothing like it.
2025-01-25 18:58:15,932 - services.translation_routes - INFO - [translation_routes.py:205] - Target text: C'est une photo qui, sur papier, n'a pas de sens, mais c'est ce qu'il y a dans le film.
2025-01-25 18:59:26,525 - services.translation_routes - INFO - [translation_routes.py:228] - Processing tuple output from model
2025-01-25 18:59:26,540 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 18:59:26,541 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 18:59:26,545 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 18:59:26,545 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 18:59:26,553 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 18:59:26,553 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 18:59:26,557 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 18:59:26,557 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 18:59:26,742 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-25 18:59:26,742 - services.translation_routes - INFO - [translation_routes.py:252] - 
==================================================
2025-01-25 18:59:26,742 - services.translation_routes - INFO - [translation_routes.py:253] - Translated Audio Quality Report
2025-01-25 18:59:26,742 - services.translation_routes - INFO - [translation_routes.py:254] - ==================================================
2025-01-25 18:59:26,742 - services.translation_routes - INFO - [translation_routes.py:255] - Request ID: 023181b4
2025-01-25 18:59:26,742 - services.translation_routes - INFO - [translation_routes.py:256] - Target Language: fra
2025-01-25 18:59:26,742 - services.translation_routes - INFO - [translation_routes.py:257] - --------------------------------------------------
2025-01-25 18:59:26,742 - services.translation_routes - INFO - [translation_routes.py:258] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.590
- Avg Amplitude: 0.059
- Rms Level: 0.095
- Crest Factor: 6.196
- Zero Crossings: 16620.000
- Silence Percentage: 11.537
- Clipping Points: 0.000
- Dynamic Range: 195.742

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.225
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.026
  - Temporal Flatness: 0.014

- Volume Metrics:
  - Volume Stability: 0.248
  - Volume Range: 197.891
  - Volume Variations: 0.057

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.030760290006336
- Background Noise: 3.4784882589710717
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.8672695755958557, 'stability': 3.5552687644958496, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.0, 'distinction': 0.4456018805503845}
  - Description: Strong nasal resonance. Unstable nasal resonance. Moderate distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.509
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.002
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-25 18:59:26,743 - services.translation_routes - INFO - [translation_routes.py:259] - ==================================================

2025-01-25 18:59:26,743 - services.translation_routes - INFO - [translation_routes.py:265] - Request 023181b4: Audio output processed successfully
2025-01-25 18:59:26,747 - services.translation_routes - INFO - [translation_routes.py:318] - Request 023181b4: Response prepared successfully
2025-01-25 18:59:26,747 - services.translation_routes - INFO - [translation_routes.py:329] - Request 023181b4 completed in 169.35s
2025-01-25 18:59:26,749 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 169.35s, Memory Change: -562.98MB
2025-01-25 18:59:26,749 - __main__ - INFO - [app.py:278] - Request to /translate took 174.63s
2025-01-25 19:45:23,309 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-25 19:45:23,315 - services.translation_routes - INFO - [translation_routes.py:30] - Starting translation request 8cca0e2e
2025-01-25 19:45:23,315 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-25 19:45:23,315 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-25 19:45:23,318 - services.translation_routes - INFO - [translation_routes.py:87] - Request 8cca0e2e: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpovgdnkek.wav
2025-01-25 19:45:23,321 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 18.36 seconds
2025-01-25 19:45:23,321 - services.translation_routes - INFO - [translation_routes.py:100] - Request 8cca0e2e: Beginning audio processing with diagnostics
2025-01-25 19:45:23,321 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpovgdnkek.wav
2025-01-25 19:45:23,321 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 44100, Channels: 2
2025-01-25 19:45:23,329 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([2, 809508]), Frequency: 44100Hz
2025-01-25 19:45:23,329 - services.audio_processor - INFO - [audio_processor.py:219] - Resampling from 44100Hz to 16000Hz
2025-01-25 19:45:23,362 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-25 19:45:23,364 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-25 19:45:23,389 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-25 19:45:23,418 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 19:45:23,419 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 19:45:23,426 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 19:45:23,426 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 19:45:23,434 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 19:45:23,434 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 19:45:23,440 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 19:45:23,441 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 19:45:23,938 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-25 19:45:23,938 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-25 19:45:23,988 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 19:45:23,989 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 19:45:23,995 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 19:45:23,996 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 19:45:24,001 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 19:45:24,002 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 19:45:24,009 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 19:45:24,009 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 19:45:24,479 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-25 19:45:24,480 - services.translation_routes - INFO - [translation_routes.py:111] - 
==================================================
2025-01-25 19:45:24,480 - services.translation_routes - INFO - [translation_routes.py:112] - Input Audio Quality Report
2025-01-25 19:45:24,480 - services.translation_routes - INFO - [translation_routes.py:113] - ==================================================
2025-01-25 19:45:24,480 - services.translation_routes - INFO - [translation_routes.py:114] - Request ID: 8cca0e2e
2025-01-25 19:45:24,480 - services.translation_routes - INFO - [translation_routes.py:115] - Target Language: fra
2025-01-25 19:45:24,480 - services.translation_routes - INFO - [translation_routes.py:116] - --------------------------------------------------
2025-01-25 19:45:24,480 - services.translation_routes - INFO - [translation_routes.py:117] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.800
- Avg Amplitude: 0.013
- Rms Level: 0.039
- Crest Factor: 20.262
- Zero Crossings: 127716.000
- Silence Percentage: 62.168
- Clipping Points: 0.000
- Dynamic Range: 3022612.631

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.070
  - Temporal Flatness: 0.020

- Volume Metrics:
  - Volume Stability: -0.728
  - Volume Range: 29148039.222
  - Volume Variations: 0.034

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0038988385225505
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.6381455659866333, 'stability': 1.6408194303512573, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.23516440391540527, 'consistency': 0.2896541953086853, 'distinction': 0.11255760490894318}
  - Description: Moderate nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.670
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.340
  - Rhythm Quality: 0.358
  - Intonation Quality: 0.322

Vowel Quality:
  - Quality Score: 0.005
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-25 19:45:24,480 - services.translation_routes - INFO - [translation_routes.py:118] - ==================================================

2025-01-25 19:45:24,480 - services.translation_routes - INFO - [translation_routes.py:129] - Request 8cca0e2e: Audio processed successfully
2025-01-25 19:45:24,496 - services.translation_routes - INFO - [translation_routes.py:148] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-25 19:45:40,278 - services.translation_routes - INFO - [translation_routes.py:186] - Source text: the stale smell of old beer lingers it takes heat to bring out the odour a cold dip restores health and zest a salt pickle tastes fine with ham tacos al pastor are my favourite a zestful food is the hot cross bun
2025-01-25 19:45:57,481 - services.translation_routes - INFO - [translation_routes.py:205] - Target text: l'odeur de la vieille bière lingoure il faut de la chaleur pour faire ressortir l'odore un dip froid restaure la santé et le zeste un pickle salé goûte bien avec le jambon tacos al pasteur sont mon favori une nourriture zestueuse est le hot cross bun
2025-01-25 19:46:20,999 - services.translation_routes - INFO - [translation_routes.py:228] - Processing tuple output from model
2025-01-25 19:46:21,024 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 19:46:21,025 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 19:46:21,034 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 19:46:21,034 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 19:46:21,042 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 19:46:21,042 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 19:46:21,046 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-25 19:46:21,047 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-25 19:46:21,411 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-25 19:46:21,411 - services.translation_routes - INFO - [translation_routes.py:252] - 
==================================================
2025-01-25 19:46:21,411 - services.translation_routes - INFO - [translation_routes.py:253] - Translated Audio Quality Report
2025-01-25 19:46:21,411 - services.translation_routes - INFO - [translation_routes.py:254] - ==================================================
2025-01-25 19:46:21,411 - services.translation_routes - INFO - [translation_routes.py:255] - Request ID: 8cca0e2e
2025-01-25 19:46:21,411 - services.translation_routes - INFO - [translation_routes.py:256] - Target Language: fra
2025-01-25 19:46:21,411 - services.translation_routes - INFO - [translation_routes.py:257] - --------------------------------------------------
2025-01-25 19:46:21,411 - services.translation_routes - INFO - [translation_routes.py:258] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.646
- Avg Amplitude: 0.065
- Rms Level: 0.100
- Crest Factor: 6.490
- Zero Crossings: 29167.000
- Silence Percentage: 8.996
- Clipping Points: 0.000
- Dynamic Range: 143.440

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.189
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.028
  - Temporal Flatness: 0.016

- Volume Metrics:
  - Volume Stability: 0.361
  - Volume Range: 737.393
  - Volume Variations: 0.054

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.030686759396554
- Background Noise: 3.5959303947406243
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 1.07464599609375, 'stability': 3.6503922939300537, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0012442099396139383, 'consistency': 0.0, 'distinction': 0.06971873342990875}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.556
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.003
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-25 19:46:21,411 - services.translation_routes - INFO - [translation_routes.py:259] - ==================================================

2025-01-25 19:46:21,412 - services.translation_routes - INFO - [translation_routes.py:265] - Request 8cca0e2e: Audio output processed successfully
2025-01-25 19:46:21,416 - services.translation_routes - INFO - [translation_routes.py:318] - Request 8cca0e2e: Response prepared successfully
2025-01-25 19:46:21,417 - services.translation_routes - INFO - [translation_routes.py:329] - Request 8cca0e2e completed in 58.10s
2025-01-25 19:46:21,421 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 58.11s, Memory Change: 1229.11MB
2025-01-25 19:46:21,421 - __main__ - INFO - [app.py:278] - Request to /translate took 66.59s
