2025-01-23 08:34:50,533 - __main__ - INFO - [app.py:217] - Received SIGINT signal
2025-01-23 08:34:50,538 - __main__ - INFO - [app.py:202] - Initiating graceful shutdown...
2025-01-23 08:34:55,539 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-23 08:34:55,541 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-23 08:34:55,541 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-23 08:34:55,544 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 08:34:55,545 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-23 08:34:55,545 - __main__ - INFO - [app.py:206] - Graceful shutdown completed
2025-01-23 08:34:55,547 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-23 08:34:55,548 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-23 08:34:55,548 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-23 08:34:55,549 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 08:34:55,549 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-23 08:34:55,550 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-23 08:34:55,550 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-23 08:34:55,551 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-23 08:34:55,551 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 08:34:55,552 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-23 08:36:06,237 - __main__ - INFO - [app.py:467] - Metrics server started on port 8000
2025-01-23 08:36:06,238 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-23 08:36:19,507 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-23 08:36:26,158 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-23 08:36:26,159 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-23 08:36:31,950 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-23 08:36:31,952 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 08:36:31,952 - __main__ - INFO - [app.py:491] - ==================================================
2025-01-23 08:36:31,952 - __main__ - INFO - [app.py:492] - Starting LinguaSync Backend
2025-01-23 08:36:31,952 - __main__ - INFO - [app.py:493] - Starting Flask app on port 5001 using cpu
2025-01-23 08:36:31,952 - __main__ - INFO - [app.py:494] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-01-23 08:36:31,952 - __main__ - INFO - [app.py:495] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-23 08:36:31,952 - __main__ - INFO - [app.py:496] - Maximum audio length: 300 seconds
2025-01-23 08:36:31,952 - __main__ - INFO - [app.py:497] - Sample rate: 16000 Hz
2025-01-23 08:36:31,952 - __main__ - INFO - [app.py:501] - System memory: 36.0GB total, 17.7GB available
2025-01-23 08:36:31,952 - __main__ - INFO - [app.py:502] - CPU cores: 11
2025-01-23 08:36:31,952 - __main__ - INFO - [app.py:510] - Configuration:
2025-01-23 08:36:31,952 - __main__ - INFO - [app.py:511] - - Debug mode: False
2025-01-23 08:36:31,952 - __main__ - INFO - [app.py:512] - - CORS enabled: True
2025-01-23 08:36:31,952 - __main__ - INFO - [app.py:513] - - Rate limiting: 10 requests per minute
2025-01-23 08:36:31,952 - __main__ - INFO - [app.py:514] - - Metrics enabled: True (port 8000)
2025-01-23 08:36:31,952 - __main__ - INFO - [app.py:516] - ==================================================
2025-01-23 08:37:51,973 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-01-23 08:37:51,974 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-23 08:37:51,978 - services.audio_link_routes - INFO - [audio_link_routes.py:173] - Processing URL: https://www.tiktok.com/@ellendegeneres/video/7462053313240927534
2025-01-23 08:37:51,979 - services.audio_link_routes - INFO - [audio_link_routes.py:193] - Processing TikTok URL
2025-01-23 08:37:52,302 - services.audio_link_routes - ERROR - [audio_link_routes.py:123] - Download error for tiktok: [0;31mERROR:[0m [TikTok] 7462053313240927534: Unable to extract webpage video data; please report this issue on  https://github.com/yt-dlp/yt-dlp/issues?q= , filling out the appropriate issue template. Confirm you are on the latest version using  yt-dlp -U
2025-01-23 08:37:52,302 - services.audio_link_routes - ERROR - [audio_link_routes.py:139] - tiktok processing error: Unable to access this tiktok content. Please check the URL and try again
2025-01-23 08:37:52,303 - services.audio_link_routes - ERROR - [audio_link_routes.py:207] - Processing error: Unable to access this tiktok content. Please check the URL and try again
2025-01-23 08:37:52,304 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.33s, Memory Change: 0.44MB
2025-01-23 08:37:52,305 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.33s
2025-01-23 08:38:42,805 - services.audio_link_routes - INFO - [audio_link_routes.py:173] - Processing URL: https://www.youtube.com/watch?v=HMF3tpA0TL4&list=RDGMEMHDXYb1_DDSgDsobPsOFxpAVMHMF3tpA0TL4&start_radio=1
2025-01-23 08:38:42,806 - services.audio_link_routes - INFO - [audio_link_routes.py:190] - Processing YouTube URL
2025-01-23 08:46:04,416 - services.audio_link_routes - ERROR - [audio_link_routes.py:123] - Download error for youtube: [0;31mERROR:[0m [youtube] HrTWjrYYxBU: Video unavailable. This content isn't available, try again later.
2025-01-23 08:46:04,423 - services.audio_link_routes - ERROR - [audio_link_routes.py:139] - youtube processing error: Unable to access this youtube content. Please check the URL and try again
2025-01-23 08:46:04,423 - services.audio_link_routes - ERROR - [audio_link_routes.py:207] - Processing error: Unable to access this youtube content. Please check the URL and try again
2025-01-23 08:46:04,454 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 441.65s, Memory Change: 162.72MB
2025-01-23 08:46:04,455 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 441.65s
2025-01-23 08:56:07,613 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.02MB
2025-01-23 08:56:07,614 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-23 08:56:07,617 - services.audio_link_routes - INFO - [audio_link_routes.py:173] - Processing URL: https://youtu.be/xDYy5qafTXY?si=RD40B2xq90RYg2Q0
2025-01-23 08:56:07,618 - services.audio_link_routes - INFO - [audio_link_routes.py:190] - Processing YouTube URL
2025-01-23 08:56:11,314 - services.audio_link_routes - ERROR - [audio_link_routes.py:139] - youtube processing error: Unable to process this youtube content. Please try a different video
2025-01-23 08:56:11,315 - services.audio_link_routes - ERROR - [audio_link_routes.py:207] - Processing error: Unable to process this youtube content. Please try a different video
2025-01-23 08:56:11,316 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 3.70s, Memory Change: 14.77MB
2025-01-23 08:56:11,316 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 3.70s
2025-01-23 09:03:21,558 - __main__ - INFO - [app.py:217] - Received SIGINT signal
2025-01-23 09:03:21,561 - __main__ - INFO - [app.py:202] - Initiating graceful shutdown...
2025-01-23 09:03:26,561 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-23 09:03:26,563 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-23 09:03:26,563 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-23 09:03:26,566 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 09:03:26,567 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-23 09:03:26,567 - __main__ - INFO - [app.py:206] - Graceful shutdown completed
2025-01-23 09:03:26,569 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-23 09:03:26,569 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-23 09:03:26,570 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-23 09:03:26,570 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 09:03:26,571 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-23 09:03:26,571 - __main__ - INFO - [app.py:436] - Application shutting down...
2025-01-23 09:03:26,572 - services.model_manager - INFO - [model_manager.py:210] - Cleaning up model resources
2025-01-23 09:03:26,572 - services.model_manager - INFO - [model_manager.py:223] - Model cleanup completed successfully
2025-01-23 09:03:26,573 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 09:03:26,573 - __main__ - INFO - [app.py:450] - Cleanup completed successfully
2025-01-23 09:04:18,083 - __main__ - INFO - [app.py:467] - Metrics server started on port 8000
2025-01-23 09:04:18,083 - services.model_manager - INFO - [model_manager.py:97] - Loading SeamlessM4T model: facebook/seamless-m4t-v2-large
2025-01-23 09:04:31,212 - services.model_manager - INFO - [model_manager.py:161] - Models loaded on CPU
2025-01-23 09:04:38,378 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-23 09:04:38,379 - services.model_manager - INFO - [model_manager.py:167] - Model initialization successful
2025-01-23 09:04:43,364 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-23 09:04:43,366 - __main__ - INFO - [app.py:418] - Cleanup complete: removed 0 files, freed 0.00MB
2025-01-23 09:04:43,366 - __main__ - INFO - [app.py:491] - ==================================================
2025-01-23 09:04:43,366 - __main__ - INFO - [app.py:492] - Starting LinguaSync Backend
2025-01-23 09:04:43,366 - __main__ - INFO - [app.py:493] - Starting Flask app on port 5001 using cpu
2025-01-23 09:04:43,366 - __main__ - INFO - [app.py:494] - Python version: 3.12.4 | packaged by Anaconda, Inc. | (main, Jun 18 2024, 10:07:17) [Clang 14.0.6 ]
2025-01-23 09:04:43,366 - __main__ - INFO - [app.py:495] - Supported languages: ['fra', 'spa', 'deu', 'ita', 'por']
2025-01-23 09:04:43,366 - __main__ - INFO - [app.py:496] - Maximum audio length: 300 seconds
2025-01-23 09:04:43,366 - __main__ - INFO - [app.py:497] - Sample rate: 16000 Hz
2025-01-23 09:04:43,366 - __main__ - INFO - [app.py:501] - System memory: 36.0GB total, 15.1GB available
2025-01-23 09:04:43,366 - __main__ - INFO - [app.py:502] - CPU cores: 11
2025-01-23 09:04:43,366 - __main__ - INFO - [app.py:510] - Configuration:
2025-01-23 09:04:43,366 - __main__ - INFO - [app.py:511] - - Debug mode: False
2025-01-23 09:04:43,366 - __main__ - INFO - [app.py:512] - - CORS enabled: True
2025-01-23 09:04:43,366 - __main__ - INFO - [app.py:513] - - Rate limiting: 10 requests per minute
2025-01-23 09:04:43,366 - __main__ - INFO - [app.py:514] - - Metrics enabled: True (port 8000)
2025-01-23 09:04:43,366 - __main__ - INFO - [app.py:516] - ==================================================
2025-01-23 09:05:46,250 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-01-23 09:05:46,251 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-23 09:05:46,254 - services.audio_link_routes - INFO - [audio_link_routes.py:174] - Processing URL: https://youtube.com/shorts/dOfQCX8fzZg?si=3ZB0P1f9YrHWs6_t
2025-01-23 09:05:46,255 - services.audio_link_routes - INFO - [audio_link_routes.py:191] - Processing YouTube URL
2025-01-23 09:05:49,926 - services.audio_link_routes - INFO - [audio_link_routes.py:200] - Successfully processed audio
2025-01-23 09:05:49,926 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 3.67s, Memory Change: 7.84MB
2025-01-23 09:05:49,926 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 3.67s
2025-01-23 09:06:00,644 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-23 09:06:00,645 - services.translation_routes - INFO - [translation_routes.py:29] - Starting translation request dc390d56
2025-01-23 09:06:00,645 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-23 09:06:00,645 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-23 09:06:00,646 - services.translation_routes - INFO - [translation_routes.py:86] - Request dc390d56: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpfpknrpar.wav
2025-01-23 09:06:00,647 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 49.32 seconds
2025-01-23 09:06:00,647 - services.translation_routes - INFO - [translation_routes.py:99] - Request dc390d56: Beginning audio processing with diagnostics
2025-01-23 09:06:00,647 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpfpknrpar.wav
2025-01-23 09:06:00,647 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 16000, Channels: 1
2025-01-23 09:06:00,651 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([1, 789107]), Frequency: 16000Hz
2025-01-23 09:06:00,695 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-23 09:06:00,700 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-23 09:06:00,762 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-23 09:06:00,845 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:06:00,845 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:06:00,862 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:06:00,862 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:06:00,877 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:06:00,877 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:06:00,893 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:06:00,894 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:06:02,681 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-23 09:06:02,682 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-23 09:06:02,825 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:06:02,825 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:06:02,841 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:06:02,841 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:06:02,857 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:06:02,858 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:06:02,873 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:06:02,873 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:06:04,704 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-23 09:06:04,704 - services.translation_routes - INFO - [translation_routes.py:110] - 
==================================================
2025-01-23 09:06:04,704 - services.translation_routes - INFO - [translation_routes.py:111] - Input Audio Quality Report
2025-01-23 09:06:04,704 - services.translation_routes - INFO - [translation_routes.py:112] - ==================================================
2025-01-23 09:06:04,704 - services.translation_routes - INFO - [translation_routes.py:113] - Request ID: dc390d56
2025-01-23 09:06:04,704 - services.translation_routes - INFO - [translation_routes.py:114] - Target Language: fra
2025-01-23 09:06:04,705 - services.translation_routes - INFO - [translation_routes.py:115] - --------------------------------------------------
2025-01-23 09:06:04,705 - services.translation_routes - INFO - [translation_routes.py:116] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.805
- Avg Amplitude: 0.029
- Rms Level: 0.054
- Crest Factor: 15.007
- Zero Crossings: 394279.000
- Silence Percentage: 35.615
- Clipping Points: 0.000
- Dynamic Range: 8355702.910

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.080
  - Temporal Flatness: 0.043

- Volume Metrics:
  - Volume Stability: 0.140
  - Volume Range: 22859556.973
  - Volume Variations: 0.035

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.007151714733603
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 2.146029233932495, 'stability': 2.325944185256958, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.0, 'consistency': 0.593830943107605, 'distinction': 0.09012619405984879}
  - Description: Strong nasal resonance. Unstable nasal resonance. Limited distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.515
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.633
  - Rhythm Quality: 0.674
  - Intonation Quality: 0.592

Vowel Quality:
  - Quality Score: 0.013
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-23 09:06:04,705 - services.translation_routes - INFO - [translation_routes.py:117] - ==================================================

2025-01-23 09:06:04,705 - services.translation_routes - INFO - [translation_routes.py:128] - Request dc390d56: Audio processed successfully
2025-01-23 09:06:04,751 - services.translation_routes - INFO - [translation_routes.py:147] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-23 09:06:25,963 - services.translation_routes - INFO - [translation_routes.py:185] - Source text: I'd like to thank my wife because she's my best friend, and my daughter because she thinks I'm cool because I did The Lion King.
2025-01-23 09:06:47,581 - services.translation_routes - INFO - [translation_routes.py:204] - Target text: J'aimerais remercier ma femme parce qu'elle est ma meilleure amie, je voudrais remercier mon fille parce quelle pense que je suis cool parce que j'ai fait le Lion King.
2025-01-23 09:07:24,890 - services.translation_routes - INFO - [translation_routes.py:227] - Processing tuple output from model
2025-01-23 09:07:24,904 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:07:24,905 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:07:24,910 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:07:24,910 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:07:24,914 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:07:24,914 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:07:24,921 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:07:24,921 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:07:25,084 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-23 09:07:25,084 - services.translation_routes - INFO - [translation_routes.py:251] - 
==================================================
2025-01-23 09:07:25,084 - services.translation_routes - INFO - [translation_routes.py:252] - Translated Audio Quality Report
2025-01-23 09:07:25,084 - services.translation_routes - INFO - [translation_routes.py:253] - ==================================================
2025-01-23 09:07:25,084 - services.translation_routes - INFO - [translation_routes.py:254] - Request ID: dc390d56
2025-01-23 09:07:25,084 - services.translation_routes - INFO - [translation_routes.py:255] - Target Language: fra
2025-01-23 09:07:25,084 - services.translation_routes - INFO - [translation_routes.py:256] - --------------------------------------------------
2025-01-23 09:07:25,084 - services.translation_routes - INFO - [translation_routes.py:257] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.693
- Avg Amplitude: 0.064
- Rms Level: 0.096
- Crest Factor: 7.180
- Zero Crossings: 9155.000
- Silence Percentage: 13.512
- Clipping Points: 0.000
- Dynamic Range: 250.840

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.103
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.020
  - Temporal Flatness: 0.012

- Volume Metrics:
  - Volume Stability: 0.259
  - Volume Range: 462.288
  - Volume Variations: 0.058

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0268752743591336
- Background Noise: 3.871986466373222
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.6399332284927368, 'stability': 3.4097635746002197, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.2834731638431549, 'consistency': 0.0, 'distinction': 1.0}
  - Description: Moderate nasal resonance. Unstable nasal resonance. Clear distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.534
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 0.000

Vowel Quality:
  - Quality Score: 0.003
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-23 09:07:25,084 - services.translation_routes - INFO - [translation_routes.py:258] - ==================================================

2025-01-23 09:07:25,084 - services.translation_routes - INFO - [translation_routes.py:264] - Request dc390d56: Audio output processed successfully
2025-01-23 09:07:25,087 - services.translation_routes - INFO - [translation_routes.py:317] - Request dc390d56: Response prepared successfully
2025-01-23 09:07:25,087 - services.translation_routes - INFO - [translation_routes.py:328] - Request dc390d56 completed in 84.44s
2025-01-23 09:07:25,090 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 84.45s, Memory Change: 2425.56MB
2025-01-23 09:07:25,090 - __main__ - INFO - [app.py:278] - Request to /translate took 90.18s
2025-01-23 09:10:03,662 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 0.00s, Memory Change: 0.00MB
2025-01-23 09:10:03,664 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 0.00s
2025-01-23 09:10:03,668 - services.audio_link_routes - INFO - [audio_link_routes.py:174] - Processing URL: https://www.tiktok.com/@ellendegeneres/video/7462053313240927534
2025-01-23 09:10:03,669 - services.audio_link_routes - INFO - [audio_link_routes.py:194] - Processing TikTok URL
2025-01-23 09:10:05,273 - services.audio_link_routes - INFO - [audio_link_routes.py:200] - Successfully processed audio
2025-01-23 09:10:05,273 - services.utils - INFO - [utils.py:57] - Performance - Function: process_audio_url, Duration: 1.61s, Memory Change: 2.95MB
2025-01-23 09:10:05,274 - __main__ - INFO - [app.py:278] - Request to /process-audio-url took 1.61s
2025-01-23 09:10:17,054 - services.model_manager - INFO - [model_manager.py:87] - Model verification successful
2025-01-23 09:10:17,058 - services.translation_routes - INFO - [translation_routes.py:29] - Starting translation request f674c248
2025-01-23 09:10:17,058 - services.diagnostics.spectral_analysis - INFO - [spectral_analysis.py:59] - Initialized SpectralAnalyzer with sample rate: 16000Hz
2025-01-23 09:10:17,058 - services.diagnostics.base - INFO - [base.py:75] - AudioDiagnostics initialized successfully
2025-01-23 09:10:17,060 - services.translation_routes - INFO - [translation_routes.py:86] - Request f674c248: Saved input file: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpbpluk4zd.wav
2025-01-23 09:10:17,060 - services.audio_processor - INFO - [audio_processor.py:132] - Audio duration: 96.85 seconds
2025-01-23 09:10:17,060 - services.translation_routes - INFO - [translation_routes.py:99] - Request f674c248: Beginning audio processing with diagnostics
2025-01-23 09:10:17,060 - services.audio_processor - INFO - [audio_processor.py:204] - Loading audio from: /var/folders/x2/xbbstcms7ng3g13w2py4kwsc0000gn/T/tmpbpluk4zd.wav
2025-01-23 09:10:17,060 - services.audio_processor - INFO - [audio_processor.py:206] - Audio info - Sample rate: 16000, Channels: 1
2025-01-23 09:10:17,066 - services.audio_processor - INFO - [audio_processor.py:215] - Original audio shape: torch.Size([1, 1549630]), Frequency: 16000Hz
2025-01-23 09:10:17,152 - services.audio_processor - INFO - [audio_processor.py:373] - Base audio processing successful, proceeding with enhancement
2025-01-23 09:10:17,160 - services.audio_processor - INFO - [audio_processor.py:379] - Applying speech-optimized spectral enhancement for fra
2025-01-23 09:10:17,309 - services.audio_processor - INFO - [audio_processor.py:384] - Analyzing audio quality...
2025-01-23 09:10:17,472 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:10:17,473 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:10:17,507 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:10:17,507 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:10:17,542 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:10:17,542 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:10:17,576 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:10:17,577 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:10:20,599 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-23 09:10:20,599 - services.audio_processor - WARNING - [audio_processor.py:394] - Quality issues detected, reprocessing...
2025-01-23 09:10:20,887 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:10:20,887 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:10:20,920 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:10:20,920 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:10:20,955 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:10:20,955 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:10:20,988 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:10:20,988 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:10:24,108 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-23 09:10:24,108 - services.translation_routes - INFO - [translation_routes.py:110] - 
==================================================
2025-01-23 09:10:24,108 - services.translation_routes - INFO - [translation_routes.py:111] - Input Audio Quality Report
2025-01-23 09:10:24,108 - services.translation_routes - INFO - [translation_routes.py:112] - ==================================================
2025-01-23 09:10:24,108 - services.translation_routes - INFO - [translation_routes.py:113] - Request ID: f674c248
2025-01-23 09:10:24,109 - services.translation_routes - INFO - [translation_routes.py:114] - Target Language: fra
2025-01-23 09:10:24,109 - services.translation_routes - INFO - [translation_routes.py:115] - --------------------------------------------------
2025-01-23 09:10:24,109 - services.translation_routes - INFO - [translation_routes.py:116] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.950
- Avg Amplitude: 0.021
- Rms Level: 0.046
- Crest Factor: 20.598
- Zero Crossings: 726921.000
- Silence Percentage: 43.257
- Clipping Points: 0.000
- Dynamic Range: 5833420.895

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.000
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.072
  - Temporal Flatness: 0.030

- Volume Metrics:
  - Volume Stability: -0.134
  - Volume Range: 23558643.460
  - Volume Variations: 0.035

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.004478381776771
- Background Noise: 5.0
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
- Muffled

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.37451744079589844, 'stability': 0.7744566798210144, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.09089379012584686, 'consistency': 0.5062854290008545, 'distinction': 0.401911199092865}
  - Description: Weak nasal resonance. Unstable nasal resonance. Moderate distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.566
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.572
  - Rhythm Quality: 0.624
  - Intonation Quality: 0.519

Vowel Quality:
  - Quality Score: 0.006
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-23 09:10:24,109 - services.translation_routes - INFO - [translation_routes.py:117] - ==================================================

2025-01-23 09:10:24,109 - services.translation_routes - INFO - [translation_routes.py:128] - Request f674c248: Audio processed successfully
2025-01-23 09:10:24,193 - services.translation_routes - INFO - [translation_routes.py:147] - Input keys: dict_keys(['input_features', 'attention_mask'])
2025-01-23 09:11:29,978 - services.translation_routes - INFO - [translation_routes.py:185] - Source text: It's the highest melting point of all the elements.
2025-01-23 09:12:31,567 - services.translation_routes - INFO - [translation_routes.py:204] - Target text: C'est le plus haut point de fusion de tous les √©l√©ments.
2025-01-23 09:14:43,218 - services.translation_routes - INFO - [translation_routes.py:227] - Processing tuple output from model
2025-01-23 09:14:43,247 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:14:43,251 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:14:43,253 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:14:43,253 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:14:43,256 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:14:43,256 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:14:43,258 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:363] - Visualization failed: module 'collections' has no attribute 'Iterable'
2025-01-23 09:14:43,258 - services.diagnostics.spectral_analysis - ERROR - [spectral_analysis.py:764] - Harmonic analysis failed: mean(): could not infer output dtype. Input dtype must be either a floating point or complex dtype. Got: Long
2025-01-23 09:14:43,329 - services.diagnostics.base - INFO - [base.py:112] - Completed language analysis for fra
2025-01-23 09:14:43,331 - services.translation_routes - INFO - [translation_routes.py:251] - 
==================================================
2025-01-23 09:14:43,331 - services.translation_routes - INFO - [translation_routes.py:252] - Translated Audio Quality Report
2025-01-23 09:14:43,331 - services.translation_routes - INFO - [translation_routes.py:253] - ==================================================
2025-01-23 09:14:43,331 - services.translation_routes - INFO - [translation_routes.py:254] - Request ID: f674c248
2025-01-23 09:14:43,331 - services.translation_routes - INFO - [translation_routes.py:255] - Target Language: fra
2025-01-23 09:14:43,331 - services.translation_routes - INFO - [translation_routes.py:256] - --------------------------------------------------
2025-01-23 09:14:43,331 - services.translation_routes - INFO - [translation_routes.py:257] - Audio Quality Analysis Report
==============================

Target Language: fra

Waveform Analysis:
--------------------
- Peak Amplitude: 0.563
- Avg Amplitude: 0.064
- Rms Level: 0.103
- Crest Factor: 5.483
- Zero Crossings: 3675.000
- Silence Percentage: 18.120
- Clipping Points: 0.000
- Dynamic Range: 435.690

- Processing Metrics:
  - Compression Detected: 0.000
  - Over Compressed: 0.000
  - Compression Severity: 0.315
  - Dynamic Range Loss: 0.000

- Temporal Metrics:
  - Smoothing Detected: 1.000
  - Temporal Variation: 0.021
  - Temporal Flatness: 0.012

- Volume Metrics:
  - Volume Stability: 0.265
  - Volume Range: 691.879
  - Volume Variations: 0.061

Spectral Analysis:
--------------------

Quality Metrics (1-5 scale):
--------------------
- Robotic Voice: 1.0
- Pronunciation: 1.0
- Audio Clarity: 3.0374802083957566
- Background Noise: 3.1933310075472146
- Voice Consistency: 1.0
- Spectral Balance: 1.0

Detected Issues:
--------------------
No issues detected

Language-Specific Analysis:
--------------------

Nasalization:
  - Nasal Resonance: {'strength': 0.6256275773048401, 'stability': 3.1791577339172363, 'peak_frequencies': []}
  - Quality Assessment: {'authenticity': 0.6216173768043518, 'consistency': 0.0, 'distinction': 1.0}
  - Description: Moderate nasal resonance. Unstable nasal resonance. Clear distinction between nasal and oral vowels

Liaison:
  - Detected: False
  - Confidence: 0.516
  - Description: Weak or inconsistent liaison patterns

Prosody:
  - Score: 0.000
  - Rhythm Quality: 0.000
  - Intonation Quality: 1.000

Vowel Quality:
  - Quality Score: 0.003
  - Formant Structure: 0.000
  - Description: Poor vowel articulation. Unclear formant structure
2025-01-23 09:14:43,331 - services.translation_routes - INFO - [translation_routes.py:258] - ==================================================

2025-01-23 09:14:43,331 - services.translation_routes - INFO - [translation_routes.py:264] - Request f674c248: Audio output processed successfully
2025-01-23 09:14:43,337 - services.translation_routes - INFO - [translation_routes.py:317] - Request f674c248: Response prepared successfully
2025-01-23 09:14:43,338 - services.translation_routes - INFO - [translation_routes.py:328] - Request f674c248 completed in 266.28s
2025-01-23 09:14:43,340 - services.utils - INFO - [utils.py:57] - Performance - Function: translate_audio_endpoint, Duration: 266.28s, Memory Change: -6257.03MB
2025-01-23 09:14:43,340 - __main__ - INFO - [app.py:278] - Request to /translate took 272.21s
